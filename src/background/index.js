var fL=Object.defineProperty;var pL=Object.getPrototypeOf;var mL=Reflect.get;var Yb=le=>{throw TypeError(le)};var gL=(le,ye,qe)=>ye in le?fL(le,ye,{enumerable:!0,configurable:!0,writable:!0,value:qe}):le[ye]=qe;var T=(le,ye,qe)=>gL(le,typeof ye!="symbol"?ye+"":ye,qe),Qb=(le,ye,qe)=>ye.has(le)||Yb("Cannot "+qe),Zt=(le,ye)=>Object(ye)!==ye?Yb('Cannot use the "in" operator on this value'):le.has(ye),i=(le,ye,qe)=>(Qb(le,ye,"read from private field"),qe?qe.call(le):ye.get(le)),l=(le,ye,qe)=>ye.has(le)?Yb("Cannot add the same private member more than once"):ye instanceof WeakSet?ye.add(le):ye.set(le,qe),f=(le,ye,qe,Wn)=>(Qb(le,ye,"write to private field"),Wn?Wn.call(le,qe):ye.set(le,qe),qe),g=(le,ye,qe)=>(Qb(le,ye,"access private method"),qe);var ic=(le,ye,qe,Wn)=>({set _(Ny){f(le,ye,Ny,qe)},get _(){return i(le,ye,Wn)}}),Px=(le,ye,qe)=>mL(pL(le),qe,ye);(function(){"use strict";var lx,dx,Fs,Ui,hx,fx,Ds,Hi,qi,ci,px,rh,ih,aa,oa,Os,Rs,ua,sh,gw,Bc,nh,ah,Zb,jc,la,oh,ch,mx,Ls,Kc,uh,da,Uc,lh,dh,hh,fh,Hc,qc,ha,e0,Tx,jr,fa,pa,ma,mh,ga,wa,ui,Dx,Ox,Rx,Lx,Wc,zc,Bt,Vc,Gc,Xc,Jc,vw,Yc,Wi,ya,zi,Qc,gh,Ns,va,wh,yh,ba,hr,Zc,eu,$s,vh,gx,bh,Sa,tu,Sh,Ca,Ch,ka,fr,kh,Ea,Eh,Vi,$x,Bx,a0,Gi,xh,_h,ru,Xi,li,Kr,Cw,Ph,Th,xa,iu,Ih,_a,su,Bs,Ur,nu,au,Mh,Ah,Fh,ou,cu,Dh,Pa,Oh,di,Ta,uu,Gt,Ia,lu,js,Rh,o0,Ma,Aa,Xt,Fa,Da,Oa,du,Lh,hu,fu,pu,jx,Kx,pr,Ra,Ks,La,mu,Nh,gu,Ux,Hx,$h,Na,wu,Bh,xr,$a,hi,jh,yu,vu,Us,Kh,bu,kw,Uh,Hh,Ew,Ba,_m,qh,Wh,Su,mr,zh,ja,Ka,Cu,ku,Vh,y0,Hr,Eu,Ji,xw,qx,xu,ir,_u,Hs,Ua,qr,Pu,Gh,Ha,_w,sr,zx,Vx,Gx,Xh,qs,v0,b0,fi,Wr,Ws,jt,Xx,Jx,Yx,py,my,Jh,zs,Tu,Vs,qa,Yh,Gs,Qh,Zh,ef,tf,rf,Yi,Ue,Qx,Zx,e_,t_,r_,i_,gy,sc,Wa,Iu,Xs,Mu,Au,sf,Qi,nf,af,of,cf,uf,lf,df,hf,ff,pf,mf,gf,wf,yf,vf,bf,Js,Fu,Du,Sf,Cf,kf,Ef,xf,_f,Pf,Tf,If,Pw,o_,za,Va,Ga,Xa,Ja,Ya,Ou,_e,Qa,Ys,Ru,pi,Zi,Qs,Kt,Lu,Mf,Tw,Zs,J,c_,S0,qn,wy,C0,yy,Pm,u_,l_,d_,k0,h_,Tm,f_,p_,E0,m_,g_,vy,w_,x0,y_,_0,Af,en,Nu,Ff,gr,Za,$u,eo,Df,Jt,Ce,P0,v_,b_,S_,T0,I0,M0,C_,k_,E_,x_,ud,tn,Bu,rn,A0,F0,wr,zr,ju,Ye,Sr,to,__,by,sn,ro,es,Ku,Of,mi,ts,Rf,Lf,Nf,nn,Pe,Vr,an,io,on,Uu,Hu,Le,at,qu,cn,Wu,zu,Vu,so,rs,Iw,$f,Bf,ge,P_,T_,I_,D0,jf,Gu,M_,A_,F_,D_,O_,O0,R0,R_,L_,L0,N_,N0,un,ln,gi,Xu,dn,Ju,wx,Kf,Yu,kt,hn,Et,no,Uf,fn,ao,oo,pn,Hf,co,qf,Qu,Mw,nr,$0,B0,Wf,zf,Vf,Gf,Aw,ld,Fw,Zu,Xf,xt,Jf,el,tl,mn,is,Qe,Yf,uo,$_,Qf,Zf,ep,tp,rp,j0,lo,ip,ar,Or,ss,gn,ho,sp,rl,il,Dw,B_,wn,np,ap,op,cp,yn,Ze,sl,Rw,j_,wi,fo,Im,yi,Lw,up,nl,al,ol,cl,ul,ns,as,Ut,po,dt,K_,U_,H_,q_,K0,W_,z_,V_,ll,lp,dp,U0,vn,Nw,mo,$w,dl,Bw,G_,go,wo,vi,H0,Mm,hp,yo,hl,fl,os,q0,X_,J_,vo,W0,Y_,jw,bo,fp,ml,pp,mp,gp,Kw,Q_,bn,gl,So,wp,wl,Sy,yl,yp,vp,bp,vl,Z_,e1,bl,Yt,_t,He,Co,Sl,yr,Cl,kl,El,q,mt,t1,z0,Am,Cy,Rr,V0,r1,ky,i1,s1,Ey,dd,nc,n1,a1,o1,c1,Di,u1,yx,bi,ko,xl,Pt,Gr,_l,vx,Sn,Sp,Pl,Je,xy,Fm,l1,d1,_y,G0,Cp,kp,Cn,Ht,Eo,xo,Xr,Ep,Si,kn,_o,pe,xp,En,h1,Py,bx,cs,xn,_p,Pp,Tp,Ip,Po,Mp,Tl,Ap,Fp,_n,ht,X0,Jr,Yr,f1,J0,Y0,p1,Q0,Z0,m1,g1,eS,Pn,Tn,Hw,w1,Sx,Il,us,Ml,In,Tt,Mn,Pr,or,Ci,ki,we,Qt,Tr,To,ls,Ir,Dp,Io,Mr,ze,tS,rS,qw,y1,v1,iS,sS,b1,S1,C1,k1,Op,Al,Fl,Dl,An,Ol,Ww,E1,zw,x1,Lp,Rt,Np,$p,Mo,Rl,Fn,Bp,Ll,jp,Ao,Fo,Do,Qr,_1,nS,P1,T1,Kp,Up,Nl,$l,Dn,Ar,Bl,jl,Zr,Hp,ds,Oo,Ve,aS,I1,M1,A1,Ty,qp,oS,F1,D1,O1,Ei,Kl,ft,vr,On,Ul,de,xi,ce,Wp,Ro,Lo,zp,No,V,cS,R1,L1,N1,$1,Iy,hd,uS,B1,j1,K1,lS,fd,vs,My,dS,pd,md,gd,Ay,U1,H1,q1,W1,z1,Fy,Vw,V1,Vp,Gp,Xp,hs,Rn,Fr,Oi,Bo,Gw,Hl,Jp,jo,Yp,Cx,Qp,Xw,Zp,Yw,Dr,_i,ql,G1,X1,Qw,em,tm,rm,Ko,Wl,Ln,Uo,zl,Ho,Dm,Pi,J1,hS,fS,im,Wo,Vl,Nn,$n,sm,nm,zo,Zw,ey,ty,Y1,Gl,Bn,fs,am,Ti,Xl,om,Go,ps,cm,um,Xo,Jo,Jl,Yo,lm,dm,Yl,hm,ry,eP,fm,iy,tP,pm,sy,rP,Qo,oP,gS,mm,Ii,Ql,jn,gm,Zl,ed,wm,ym,Mi,cP,uP,ny,lP,dP,Zo,vm,It,Xe,br,fP,wS,yS,vS,bm,ay,td,pP,mP,Sm,bS,rd,oy,gP,id,Cm,km,Em,ms,Ai,ec,tc,sd,gs,ws,nd,ad,ys;var le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ye(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function qe(s){if(s.__esModule)return s;var t=s.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var n=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return s[r]}})}),e}var Wn={exports:{}};(function(s,t){(function(e,r){s.exports=r()})(le,function(){var e=1e3,r=6e4,n=36e5,a="millisecond",o="second",c="minute",u="hour",d="day",h="week",p="month",m="quarter",w="year",b="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var N=["th","st","nd","rd"],K=j%100;return"["+j+(N[(K-20)%10]||N[K]||N[0])+"]"}},k=function(j,N,K){var U=String(j);return!U||U.length>=N?j:""+Array(N+1-U.length).join(K)+j},_={s:k,z:function(j){var N=-j.utcOffset(),K=Math.abs(N),U=Math.floor(K/60),W=K%60;return(N<=0?"+":"-")+k(U,2,"0")+":"+k(W,2,"0")},m:function j(N,K){if(N.date()<K.date())return-j(K,N);var U=12*(K.year()-N.year())+(K.month()-N.month()),W=N.clone().add(U,p),re=K-W<0,H=N.clone().add(U+(re?-1:1),p);return+(-(U+(K-W)/(re?W-H:H-W))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:p,y:w,w:h,d,D:b,h:u,m:c,s:o,ms:a,Q:m}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},A="en",D={};D[A]=E;var P="$isDayjsObject",C=function(j){return j instanceof F||!(!j||!j[P])},I=function j(N,K,U){var W;if(!N)return A;if(typeof N=="string"){var re=N.toLowerCase();D[re]&&(W=re),K&&(D[re]=K,W=re);var H=N.split("-");if(!W&&H.length>1)return j(H[0])}else{var ee=N.name;D[ee]=N,W=ee}return!U&&W&&(A=W),W||!U&&A},B=function(j,N){if(C(j))return j.clone();var K=typeof N=="object"?N:{};return K.date=j,K.args=arguments,new F(K)},O=_;O.l=I,O.i=C,O.w=function(j,N){return B(j,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var F=function(){function j(K){this.$L=I(K.locale,null,!0),this.parse(K),this.$x=this.$x||K.x||{},this[P]=!0}var N=j.prototype;return N.parse=function(K){this.$d=function(U){var W=U.date,re=U.utc;if(W===null)return new Date(NaN);if(O.u(W))return new Date;if(W instanceof Date)return new Date(W);if(typeof W=="string"&&!/Z$/i.test(W)){var H=W.match(y);if(H){var ee=H[2]-1||0,ve=(H[7]||"0").substring(0,3);return re?new Date(Date.UTC(H[1],ee,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ve)):new Date(H[1],ee,H[3]||1,H[4]||0,H[5]||0,H[6]||0,ve)}}return new Date(W)}(K),this.init()},N.init=function(){var K=this.$d;this.$y=K.getFullYear(),this.$M=K.getMonth(),this.$D=K.getDate(),this.$W=K.getDay(),this.$H=K.getHours(),this.$m=K.getMinutes(),this.$s=K.getSeconds(),this.$ms=K.getMilliseconds()},N.$utils=function(){return O},N.isValid=function(){return this.$d.toString()!==v},N.isSame=function(K,U){var W=B(K);return this.startOf(U)<=W&&W<=this.endOf(U)},N.isAfter=function(K,U){return B(K)<this.startOf(U)},N.isBefore=function(K,U){return this.endOf(U)<B(K)},N.$g=function(K,U,W){return O.u(K)?this[U]:this.set(W,K)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(K,U){var W=this,re=!!O.u(U)||U,H=O.p(K),ee=function(Lt,ot){var Fe=O.w(W.$u?Date.UTC(W.$y,ot,Lt):new Date(W.$y,ot,Lt),W);return re?Fe:Fe.endOf(d)},ve=function(Lt,ot){return O.w(W.toDate()[Lt].apply(W.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(ot)),W)},Ge=this.$W,$=this.$M,R=this.$D,he="set"+(this.$u?"UTC":"");switch(H){case w:return re?ee(1,0):ee(31,11);case p:return re?ee(1,$):ee(0,$+1);case h:var Ae=this.$locale().weekStart||0,pt=(Ge<Ae?Ge+7:Ge)-Ae;return ee(re?R-pt:R+(6-pt),$);case d:case b:return ve(he+"Hours",0);case u:return ve(he+"Minutes",1);case c:return ve(he+"Seconds",2);case o:return ve(he+"Milliseconds",3);default:return this.clone()}},N.endOf=function(K){return this.startOf(K,!1)},N.$set=function(K,U){var W,re=O.p(K),H="set"+(this.$u?"UTC":""),ee=(W={},W[d]=H+"Date",W[b]=H+"Date",W[p]=H+"Month",W[w]=H+"FullYear",W[u]=H+"Hours",W[c]=H+"Minutes",W[o]=H+"Seconds",W[a]=H+"Milliseconds",W)[re],ve=re===d?this.$D+(U-this.$W):U;if(re===p||re===w){var Ge=this.clone().set(b,1);Ge.$d[ee](ve),Ge.init(),this.$d=Ge.set(b,Math.min(this.$D,Ge.daysInMonth())).$d}else ee&&this.$d[ee](ve);return this.init(),this},N.set=function(K,U){return this.clone().$set(K,U)},N.get=function(K){return this[O.p(K)]()},N.add=function(K,U){var W,re=this;K=Number(K);var H=O.p(U),ee=function($){var R=B(re);return O.w(R.date(R.date()+Math.round($*K)),re)};if(H===p)return this.set(p,this.$M+K);if(H===w)return this.set(w,this.$y+K);if(H===d)return ee(1);if(H===h)return ee(7);var ve=(W={},W[c]=r,W[u]=n,W[o]=e,W)[H]||1,Ge=this.$d.getTime()+K*ve;return O.w(Ge,this)},N.subtract=function(K,U){return this.add(-1*K,U)},N.format=function(K){var U=this,W=this.$locale();if(!this.isValid())return W.invalidDate||v;var re=K||"YYYY-MM-DDTHH:mm:ssZ",H=O.z(this),ee=this.$H,ve=this.$m,Ge=this.$M,$=W.weekdays,R=W.months,he=W.meridiem,Ae=function(ot,Fe,Kn,Q){return ot&&(ot[Fe]||ot(U,re))||Kn[Fe].slice(0,Q)},pt=function(ot){return O.s(ee%12||12,ot,"0")},Lt=he||function(ot,Fe,Kn){var Q=ot<12?"AM":"PM";return Kn?Q.toLowerCase():Q};return re.replace(S,function(ot,Fe){return Fe||function(Kn){switch(Kn){case"YY":return String(U.$y).slice(-2);case"YYYY":return O.s(U.$y,4,"0");case"M":return Ge+1;case"MM":return O.s(Ge+1,2,"0");case"MMM":return Ae(W.monthsShort,Ge,R,3);case"MMMM":return Ae(R,Ge);case"D":return U.$D;case"DD":return O.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return Ae(W.weekdaysMin,U.$W,$,2);case"ddd":return Ae(W.weekdaysShort,U.$W,$,3);case"dddd":return $[U.$W];case"H":return String(ee);case"HH":return O.s(ee,2,"0");case"h":return pt(1);case"hh":return pt(2);case"a":return Lt(ee,ve,!0);case"A":return Lt(ee,ve,!1);case"m":return String(ve);case"mm":return O.s(ve,2,"0");case"s":return String(U.$s);case"ss":return O.s(U.$s,2,"0");case"SSS":return O.s(U.$ms,3,"0");case"Z":return H}return null}(ot)||H.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(K,U,W){var re,H=this,ee=O.p(U),ve=B(K),Ge=(ve.utcOffset()-this.utcOffset())*r,$=this-ve,R=function(){return O.m(H,ve)};switch(ee){case w:re=R()/12;break;case p:re=R();break;case m:re=R()/3;break;case h:re=($-Ge)/6048e5;break;case d:re=($-Ge)/864e5;break;case u:re=$/n;break;case c:re=$/r;break;case o:re=$/e;break;default:re=$}return W?re:O.a(re)},N.daysInMonth=function(){return this.endOf(p).$D},N.$locale=function(){return D[this.$L]},N.locale=function(K,U){if(!K)return this.$L;var W=this.clone(),re=I(K,U,!0);return re&&(W.$L=re),W},N.clone=function(){return O.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},j}(),M=F.prototype;return B.prototype=M,[["$ms",a],["$s",o],["$m",c],["$H",u],["$W",d],["$M",p],["$y",w],["$D",b]].forEach(function(j){M[j[1]]=function(N){return this.$g(N,j[0],j[1])}}),B.extend=function(j,N){return j.$i||(j(N,F,B),j.$i=!0),B},B.locale=I,B.isDayjs=C,B.unix=function(j){return B(1e3*j)},B.en=D[A],B.Ls=D,B.p={},B})})(Wn);var Ny=Wn.exports;const $y=ye(Ny),PS="YYYY-MM-DD HH:mm:ss.SSS";function wd(s){console.log(`${$y(new Date).format(PS)} ${s}`)}function wL(s){}function bs(s){console.error(`${$y(new Date).format(PS)} ${s}`),console.error(s)}const qt="CONTENT_SCRIPT",gt="BACKGROUND",By="OFFSCREEN";for(var Mt=[],jy=0;jy<256;++jy)Mt.push((jy+256).toString(16).slice(1));function TP(s,t=0){return(Mt[s[t+0]]+Mt[s[t+1]]+Mt[s[t+2]]+Mt[s[t+3]]+"-"+Mt[s[t+4]]+Mt[s[t+5]]+"-"+Mt[s[t+6]]+Mt[s[t+7]]+"-"+Mt[s[t+8]]+Mt[s[t+9]]+"-"+Mt[s[t+10]]+Mt[s[t+11]]+Mt[s[t+12]]+Mt[s[t+13]]+Mt[s[t+14]]+Mt[s[t+15]]).toLowerCase()}var Rm,IP=new Uint8Array(16);function MP(){if(!Rm&&(Rm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rm(IP)}var AP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const TS={randomUUID:AP};function FP(s,t,e){if(TS.randomUUID&&!t&&!s)return TS.randomUUID();s=s||{};var r=s.random||(s.rng||MP)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,TP(r)}var DP={exports:{}};function OP(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ky={exports:{}};const IS=qe(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var MS;function RP(){return MS||(MS=1,function(s,t){(function(e,r){s.exports=r()})(le,function(){var e=e||function(r,n){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof le<"u"&&le.crypto&&(a=le.crypto),!a&&typeof OP=="function")try{a=IS}catch{}var o=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function E(){}return function(k){var _;return E.prototype=k,_=new E,E.prototype=null,_}}(),u={},d=u.lib={},h=d.Base=function(){return{extend:function(E){var k=c(this);return E&&k.mixIn(E),(!k.hasOwnProperty("init")||this.init===k.init)&&(k.init=function(){k.$super.init.apply(this,arguments)}),k.init.prototype=k,k.$super=this,k},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var k in E)E.hasOwnProperty(k)&&(this[k]=E[k]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),p=d.WordArray=h.extend({init:function(E,k){E=this.words=E||[],k!=n?this.sigBytes=k:this.sigBytes=E.length*4},toString:function(E){return(E||w).stringify(this)},concat:function(E){var k=this.words,_=E.words,A=this.sigBytes,D=E.sigBytes;if(this.clamp(),A%4)for(var P=0;P<D;P++){var C=_[P>>>2]>>>24-P%4*8&255;k[A+P>>>2]|=C<<24-(A+P)%4*8}else for(var I=0;I<D;I+=4)k[A+I>>>2]=_[I>>>2];return this.sigBytes+=D,this},clamp:function(){var E=this.words,k=this.sigBytes;E[k>>>2]&=4294967295<<32-k%4*8,E.length=r.ceil(k/4)},clone:function(){var E=h.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var k=[],_=0;_<E;_+=4)k.push(o());return new p.init(k,E)}}),m=u.enc={},w=m.Hex={stringify:function(E){for(var k=E.words,_=E.sigBytes,A=[],D=0;D<_;D++){var P=k[D>>>2]>>>24-D%4*8&255;A.push((P>>>4).toString(16)),A.push((P&15).toString(16))}return A.join("")},parse:function(E){for(var k=E.length,_=[],A=0;A<k;A+=2)_[A>>>3]|=parseInt(E.substr(A,2),16)<<24-A%8*4;return new p.init(_,k/2)}},b=m.Latin1={stringify:function(E){for(var k=E.words,_=E.sigBytes,A=[],D=0;D<_;D++){var P=k[D>>>2]>>>24-D%4*8&255;A.push(String.fromCharCode(P))}return A.join("")},parse:function(E){for(var k=E.length,_=[],A=0;A<k;A++)_[A>>>2]|=(E.charCodeAt(A)&255)<<24-A%4*8;return new p.init(_,k)}},v=m.Utf8={stringify:function(E){try{return decodeURIComponent(escape(b.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return b.parse(unescape(encodeURIComponent(E)))}},y=d.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=v.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var k,_=this._data,A=_.words,D=_.sigBytes,P=this.blockSize,C=P*4,I=D/C;E?I=r.ceil(I):I=r.max((I|0)-this._minBufferSize,0);var B=I*P,O=r.min(B*4,D);if(B){for(var F=0;F<B;F+=P)this._doProcessBlock(A,F);k=A.splice(0,B),_.sigBytes-=O}return new p.init(k,O)},clone:function(){var E=h.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});d.Hasher=y.extend({cfg:h.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var k=this._doFinalize();return k},blockSize:16,_createHelper:function(E){return function(k,_){return new E.init(_).finalize(k)}},_createHmacHelper:function(E){return function(k,_){return new S.HMAC.init(E,_).finalize(k)}}});var S=u.algo={};return u}(Math);return e})}(Ky)),Ky.exports}(function(s,t){(function(e,r){s.exports=r(RP())})(le,function(e){return function(r){var n=e,a=n.lib,o=a.WordArray,c=a.Hasher,u=n.algo,d=[],h=[];(function(){function w(S){for(var E=r.sqrt(S),k=2;k<=E;k++)if(!(S%k))return!1;return!0}function b(S){return(S-(S|0))*4294967296|0}for(var v=2,y=0;y<64;)w(v)&&(y<8&&(d[y]=b(r.pow(v,1/2))),h[y]=b(r.pow(v,1/3)),y++),v++})();var p=[],m=u.SHA256=c.extend({_doReset:function(){this._hash=new o.init(d.slice(0))},_doProcessBlock:function(w,b){for(var v=this._hash.words,y=v[0],S=v[1],E=v[2],k=v[3],_=v[4],A=v[5],D=v[6],P=v[7],C=0;C<64;C++){if(C<16)p[C]=w[b+C]|0;else{var I=p[C-15],B=(I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3,O=p[C-2],F=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;p[C]=B+p[C-7]+F+p[C-16]}var M=_&A^~_&D,j=y&S^y&E^S&E,N=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),K=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),U=P+K+M+h[C]+p[C],W=N+j;P=D,D=A,A=_,_=k+U|0,k=E,E=S,S=y,y=U+W|0}v[0]=v[0]+y|0,v[1]=v[1]+S|0,v[2]=v[2]+E|0,v[3]=v[3]+k|0,v[4]=v[4]+_|0,v[5]=v[5]+A|0,v[6]=v[6]+D|0,v[7]=v[7]+P|0},_doFinalize:function(){var w=this._data,b=w.words,v=this._nDataBytes*8,y=w.sigBytes*8;return b[y>>>5]|=128<<24-y%32,b[(y+64>>>9<<4)+14]=r.floor(v/4294967296),b[(y+64>>>9<<4)+15]=v,w.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var w=c.clone.call(this);return w._hash=this._hash.clone(),w}});n.SHA256=c._createHelper(m),n.HmacSHA256=c._createHmacHelper(m)}(Math),e.SHA256})})(DP);function LP(s){return Math.floor(Math.random()*s)}function NP(s){return s.replace(/\_(\w)/g,function(t,e){return e.toUpperCase()})}function AS(s,t){let e=Object.assign({},s),r=Object.keys(t);for(let n=0;n<r.length;n++){let a=r[n];e[NP(a)]=t[a]}return e}function Lm(s,t){return new Promise(e=>setTimeout(e,s+LP(t)))}function $P(s){let t=new URL(s);return t.origin+t.pathname}function BP(s){const t={};for(const[e,r]of s)t[e]=r;return t}const jP="EVENT_BRIDGE",Uy=new Map;function Wt(s,t,{onMessageCallback:e,invokeEnv:r}={invokeEnv:qt}){let n=HP();return new Promise((o,c)=>{try{KP(n,{resolve:o,reject:c});let u={action:s,callbackId:n,param:t,from:qt,to:gt,invokeEnv:r};if(e&&e(u),r==qt)""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error,chrome.runtime.sendMessage(u);else if(r==gt){u.from=gt,u.to=By,""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error,chrome.runtime.sendMessage(u);try{if(window){const d=new CustomEvent(jP,{detail:u});window.dispatchEvent(d)}}catch{}}else c(`unknow invokeEnv = ${r}`)}catch(u){bs(u),c(u)}})}function KP(s,t){Uy.set(s,t)}function UP(s){let t=Uy.get(s);return Uy.delete(s),t}function HP(){return FP()}class FS{constructor(){T(this,"accessToken");T(this,"expiresIn");T(this,"refreshToken");T(this,"refreshTokenExpiresIn");T(this,"scope");T(this,"tokenType")}}const DS={batchAddOrUpdateJobBrowse:async function(s){return await Wt(this.batchAddOrUpdateJobBrowse.name,s)},batchAddOrUpdateJob:async function(s){return await Wt(this.batchAddOrUpdateJob.name,s)},addOrUpdateJobBrowse:async function(s){return await Wt(this.addOrUpdateJobBrowse.name,s)},searchJob:async function(s){return(await Wt(this.searchJob.name,s)).data},getJobBrowseInfoByIds:async function(s){return(await Wt(this.getJobBrowseInfoByIds.name,s)).data},statisticJobBrowse:async function(){return(await Wt(this.statisticJobBrowse.name,{})).data},statisticJobSearchGroupByAvgSalary:async function(s){return(await Wt(this.statisticJobSearchGroupByAvgSalary.name,s)).data},getJobByDetailUrl:async function(s,{invokeEnv:t}={invokeEnv:qt}){return(await Wt(this.getJobByDetailUrl.name,s,{invokeEnv:t})).data},addJobBrowseDetailHistory:async function(s,{invokeEnv:t}={invokeEnv:qt}){return await Wt(this.addJobBrowseDetailHistory.name,s,{invokeEnv:t})}},Nm={getConfigByKey:async function(s,{invokeEnv:t}={invokeEnv:qt}){return(await Wt(this.getConfigByKey.name,s,{invokeEnv:t})).data},getAllConfig:async function({invokeEnv:s}={invokeEnv:qt}){return(await Wt(this.getAllConfig.name,{},{invokeEnv:s})).data},addOrUpdateConfig:async function(s,{invokeEnv:t}={invokeEnv:qt}){return await Wt(this.addOrUpdateConfig.name,s,{invokeEnv:t})}};async function qP(s,t,{invokeEnv:e}={invokeEnv:qt}){return(await Wt("httpFetchGetText",s,{onMessageCallback:n=>{t(()=>{OS(n.callbackId)})},invokeEnv:e})).data}async function WP(s,t,{invokeEnv:e}={invokeEnv:qt}){return(await Wt("httpFetchJson",s,{onMessageCallback:n=>{t&&t(()=>{OS(n.callbackId)})},invokeEnv:e})).data}async function OS(s){await Wt("httpFetchGetTextAbort",s)}function zn(s,t){s.from=gt,s.to=qt,""+s.from+s.to+s.action+s.invokeEnv+s.callbackId+s.error;let e=JSON.parse(JSON.stringify(s));e.data=t,s.tabId?chrome.tabs.sendMessage(s.tabId,e):chrome.runtime.sendMessage(e)}function ei(s,t){s.from=gt,s.to=qt,bs("3.[background][send]["+s.from+" -> "+s.to+"] message [action="+s.action+",invokeEnv="+s.invokeEnv+",callbackId="+s.callbackId+",error="+s.error+"]"),s.tabId?chrome.tabs.sendMessage(s.tabId,s):chrome.runtime.sendMessage(s)}class RS{constructor(){T(this,"key");T(this,"value");T(this,"createDatetime");T(this,"updateDatetime")}}const LS="Iv23liutsRB7F1OJkVIL",zP="762e843b1d346533626fe2e9362834c30ad1408c",VP="https://github.com/apps/job-hunting-github-app/installations/new",GP="https://github.com/login/oauth/authorize",XP="https://github.com/login/oauth/access_token",JP="https://api.github.com/user",YP="https://github.com/lastsunday/job-hunting-github-app/blob/main/INSTALL",Hy=new Map,NS="KEY_GITHUB_OAUTH_TOKEN",QP={authOauth2Login:async function(s,t){try{chrome.tabs.create({url:`${GP}?client_id=${LS}`}),Hy.set(s)}catch(e){ei(s,"[background] authOauth2Login error : "+e.message)}},authInstallAndLogin:async function(s,t){try{chrome.tabs.create({url:`${VP}`}),Hy.set(s)}catch(e){ei(s,"[background] authInstallAndLogin error : "+e.message)}},authGetToken:async function(s,t){try{zn(s,await BS())}catch(e){ei(s,"[background] authGetToken error : "+e.message)}},authSetToken:async function(s,t){try{await $S(t),zn(s,{})}catch(e){ei(s,"[background] authSetToken error : "+e.message)}}};function ZP(){return Hy}async function $S(s){let t=new RS;return t.key=NS,t.value=JSON.stringify(s),Nm.addOrUpdateConfig(t,{invokeEnv:gt})}async function BS(){let s=new FS,t=await Nm.getConfigByKey(NS,{invokeEnv:gt});if(t){let e=JSON.parse(t.value);if(e)return Object.assign(s,e),s}return null}class jS{constructor(){T(this,"login");T(this,"id");T(this,"nodeId");T(this,"avatarUrl");T(this,"gravatarId");T(this,"url");T(this,"htmlUrl");T(this,"followersUrl");T(this,"followingUrl");T(this,"gistsUrl");T(this,"starredUrl");T(this,"subscriptionsUrl");T(this,"organizationsUrl");T(this,"reposUrl");T(this,"eventsUrl");T(this,"receivedEventsUrl");T(this,"type");T(this,"siteAdmin");T(this,"name");T(this,"company");T(this,"blog");T(this,"location");T(this,"email");T(this,"hireable");T(this,"bio");T(this,"twitterUsername");T(this,"publicRepos");T(this,"publicGists");T(this,"followers");T(this,"following");T(this,"createdAt");T(this,"updatedAt")}}const KS="KEY_GITHUB_USER",eT={userGet:async function(s,t){try{zn(s,await tT())}catch(e){ei(s,"[background] userGet error : "+e.message)}},userSet:async function(s,t){try{await US(t),zn(s,{})}catch(e){ei(s,"[background] userSet error : "+e.message)}}};async function US(s){let t=new RS;return t.key=KS,t.value=JSON.stringify(s),Nm.addOrUpdateConfig(t,{invokeEnv:gt})}async function tT(){let s=new jS,t=await Nm.getConfigByKey(KS,{invokeEnv:gt});if(t){let e=JSON.parse(t.value);if(e)return Object.assign(s,e),s}return null}const rT={systemTabCreate:async function(s,t){try{zn(s,await chrome.tabs.create(t))}catch(e){ei(s,"[background] userGet error : "+e.message)}}};var qy=function(s,t){return qy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])},qy(s,t)};function Ri(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");qy(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function iT(s,t,e,r){function n(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(p){o(p)}}function u(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?a(h.value):n(h.value).then(c,u)}d((r=r.apply(s,[])).next())})}function HS(s,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(e=0)),e;)try{if(r=1,n&&(a=d[0]&2?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,n=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){e.label=d[1];break}if(d[0]===6&&e.label<a[1]){e.label=a[1],a=d;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(d);break}a[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(s,e)}catch(h){d=[6,h],n=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function uc(s){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&s[t],r=0;if(e)return e.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&r>=s.length&&(s=void 0),{value:s&&s[r++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vn(s,t){var e=typeof Symbol=="function"&&s[Symbol.iterator];if(!e)return s;var r=e.call(s),n,a=[],o;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a}function lc(s,t,e){if(arguments.length===2)for(var r=0,n=t.length,a;r<n;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return s.concat(a||Array.prototype.slice.call(t))}function dc(s){return this instanceof dc?(this.v=s,this):new dc(s)}function sT(s,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(s,t||[]),n,a=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(m){r[m]&&(n[m]=function(w){return new Promise(function(b,v){a.push([m,w,b,v])>1||c(m,w)})})}function c(m,w){try{u(r[m](w))}catch(b){p(a[0][3],b)}}function u(m){m.value instanceof dc?Promise.resolve(m.value.v).then(d,h):p(a[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function p(m,w){m(w),a.shift(),a.length&&c(a[0][0],a[0][1])}}function nT(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=s[Symbol.asyncIterator],e;return t?t.call(s):(s=typeof uc=="function"?uc(s):s[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(a){e[a]=s[a]&&function(o){return new Promise(function(c,u){o=s[a](o),n(c,u,o.done,o.value)})}}function n(a,o,c,u){Promise.resolve(u).then(function(d){a({value:d,done:c})},o)}}function Ie(s){return typeof s=="function"}function Wy(s){var t=function(r){Error.call(r),r.stack=new Error().stack},e=s(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var zy=Wy(function(s){return function(e){s(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function $m(s,t){if(s){var e=s.indexOf(t);0<=e&&s.splice(e,1)}}var yd=function(){function s(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return s.prototype.unsubscribe=function(){var t,e,r,n,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var c=uc(o),u=c.next();!u.done;u=c.next()){var d=u.value;d.remove(this)}}catch(v){t={error:v}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}else o.remove(this);var h=this.initialTeardown;if(Ie(h))try{h()}catch(v){a=v instanceof zy?v.errors:[v]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var m=uc(p),w=m.next();!w.done;w=m.next()){var b=w.value;try{zS(b)}catch(v){a=a??[],v instanceof zy?a=lc(lc([],Vn(a)),Vn(v.errors)):a.push(v)}}}catch(v){r={error:v}}finally{try{w&&!w.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}}if(a)throw new zy(a)}},s.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)zS(t);else{if(t instanceof s){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},s.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},s.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},s.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&$m(e,t)},s.prototype.remove=function(t){var e=this._finalizers;e&&$m(e,t),t instanceof s&&t._removeParent(this)},s.EMPTY=function(){var t=new s;return t.closed=!0,t}(),s}(),qS=yd.EMPTY;function WS(s){return s instanceof yd||s&&"closed"in s&&Ie(s.remove)&&Ie(s.add)&&Ie(s.unsubscribe)}function zS(s){Ie(s)?s():s.unsubscribe()}var VS={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},aT={setTimeout:function(s,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return setTimeout.apply(void 0,lc([s,t],Vn(e)))},clearTimeout:function(s){return clearTimeout(s)},delegate:void 0};function GS(s){aT.setTimeout(function(){throw s})}function hc(){}function Bm(s){s()}var Vy=function(s){Ri(t,s);function t(e){var r=s.call(this)||this;return r.isStopped=!1,e?(r.destination=e,WS(e)&&e.add(r)):r.destination=lT,r}return t.create=function(e,r,n){return new jm(e,r,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(yd),oT=Function.prototype.bind;function Gy(s,t){return oT.call(s,t)}var cT=function(){function s(t){this.partialObserver=t}return s.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){Km(r)}},s.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){Km(r)}else Km(t)},s.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){Km(e)}},s}(),jm=function(s){Ri(t,s);function t(e,r,n){var a=s.call(this)||this,o;if(Ie(e)||!e)o={next:e??void 0,error:r??void 0,complete:n??void 0};else{var c;a&&VS.useDeprecatedNextContext?(c=Object.create(e),c.unsubscribe=function(){return a.unsubscribe()},o={next:e.next&&Gy(e.next,c),error:e.error&&Gy(e.error,c),complete:e.complete&&Gy(e.complete,c)}):o=e}return a.destination=new cT(o),a}return t}(Vy);function Km(s){GS(s)}function uT(s){throw s}var lT={closed:!0,next:hc,error:uT,complete:hc},Xy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ti(s){return s}function dT(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];return XS(s)}function XS(s){return s.length===0?ti:s.length===1?s[0]:function(e){return s.reduce(function(r,n){return n(r)},e)}}var ut=function(){function s(t){t&&(this._subscribe=t)}return s.prototype.lift=function(t){var e=new s;return e.source=this,e.operator=t,e},s.prototype.subscribe=function(t,e,r){var n=this,a=fT(t)?t:new jm(t,e,r);return Bm(function(){var o=n,c=o.operator,u=o.source;a.add(c?c.call(a,u):u?n._subscribe(a):n._trySubscribe(a))}),a},s.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},s.prototype.forEach=function(t,e){var r=this;return e=JS(e),new e(function(n,a){var o=new jm({next:function(c){try{t(c)}catch(u){a(u),o.unsubscribe()}},error:a,complete:n});r.subscribe(o)})},s.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},s.prototype[Xy]=function(){return this},s.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return XS(t)(this)},s.prototype.toPromise=function(t){var e=this;return t=JS(t),new t(function(r,n){var a;e.subscribe(function(o){return a=o},function(o){return n(o)},function(){return r(a)})})},s.create=function(t){return new s(t)},s}();function JS(s){var t;return(t=s??VS.Promise)!==null&&t!==void 0?t:Promise}function hT(s){return s&&Ie(s.next)&&Ie(s.error)&&Ie(s.complete)}function fT(s){return s&&s instanceof Vy||hT(s)&&WS(s)}function pT(s){return Ie(s==null?void 0:s.lift)}function At(s){return function(t){if(pT(t))return t.lift(function(e){try{return s(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(s,t,e,r,n){return new mT(s,t,e,r,n)}var mT=function(s){Ri(t,s);function t(e,r,n,a,o,c){var u=s.call(this,e)||this;return u.onFinalize=o,u.shouldUnsubscribe=c,u._next=r?function(d){try{r(d)}catch(h){e.error(h)}}:s.prototype._next,u._error=a?function(d){try{a(d)}catch(h){e.error(h)}finally{this.unsubscribe()}}:s.prototype._error,u._complete=n?function(){try{n()}catch(d){e.error(d)}finally{this.unsubscribe()}}:s.prototype._complete,u}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;s.prototype.unsubscribe.call(this),!r&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(Vy),gT=Wy(function(s){return function(){s(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),YS=function(s){Ri(t,s);function t(){var e=s.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var r=new QS(this,this);return r.operator=e,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new gT},t.prototype.next=function(e){var r=this;Bm(function(){var n,a;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=uc(r.currentObservers),c=o.next();!c.done;c=o.next()){var u=c.value;u.next(e)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var r=this;Bm(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=e;for(var n=r.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;Bm(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var r=e.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),s.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var r=this,n=this,a=n.hasError,o=n.isStopped,c=n.observers;return a||o?qS:(this.currentObservers=null,c.push(e),new yd(function(){r.currentObservers=null,$m(c,e)}))},t.prototype._checkFinalizedStatuses=function(e){var r=this,n=r.hasError,a=r.thrownError,o=r.isStopped;n?e.error(a):o&&e.complete()},t.prototype.asObservable=function(){var e=new ut;return e.source=this,e},t.create=function(e,r){return new QS(e,r)},t}(ut),QS=function(s){Ri(t,s);function t(e,r){var n=s.call(this)||this;return n.destination=e,n.source=r,n}return t.prototype.next=function(e){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.next)===null||n===void 0||n.call(r,e)},t.prototype.error=function(e){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.error)===null||n===void 0||n.call(r,e)},t.prototype.complete=function(){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||r===void 0||r.call(e)},t.prototype._subscribe=function(e){var r,n;return(n=(r=this.source)===null||r===void 0?void 0:r.subscribe(e))!==null&&n!==void 0?n:qS},t}(YS),Jy={now:function(){return(Jy.delegate||Date).now()},delegate:void 0},wT=function(s){Ri(t,s);function t(e,r,n){e===void 0&&(e=1/0),r===void 0&&(r=1/0),n===void 0&&(n=Jy);var a=s.call(this)||this;return a._bufferSize=e,a._windowTime=r,a._timestampProvider=n,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=r===1/0,a._bufferSize=Math.max(1,e),a._windowTime=Math.max(1,r),a}return t.prototype.next=function(e){var r=this,n=r.isStopped,a=r._buffer,o=r._infiniteTimeWindow,c=r._timestampProvider,u=r._windowTime;n||(a.push(e),!o&&a.push(c.now()+u)),this._trimBuffer(),s.prototype.next.call(this,e)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(e),n=this,a=n._infiniteTimeWindow,o=n._buffer,c=o.slice(),u=0;u<c.length&&!e.closed;u+=a?1:2)e.next(c[u]);return this._checkFinalizedStatuses(e),r},t.prototype._trimBuffer=function(){var e=this,r=e._bufferSize,n=e._timestampProvider,a=e._buffer,o=e._infiniteTimeWindow,c=(o?1:2)*r;if(r<1/0&&c<a.length&&a.splice(0,a.length-c),!o){for(var u=n.now(),d=0,h=1;h<a.length&&a[h]<=u;h+=2)d=h;d&&a.splice(0,d+1)}},t}(YS),yT=function(s){Ri(t,s);function t(e,r){return s.call(this)||this}return t.prototype.schedule=function(e,r){return this},t}(yd),ZS={setInterval:function(s,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return setInterval.apply(void 0,lc([s,t],Vn(e)))},clearInterval:function(s){return clearInterval(s)},delegate:void 0},vT=function(s){Ri(t,s);function t(e,r){var n=s.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return t.prototype.schedule=function(e,r){var n;if(r===void 0&&(r=0),this.closed)return this;this.state=e;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,r)),this.pending=!0,this.delay=r,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(e,r,n){return n===void 0&&(n=0),ZS.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,r,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return r;r!=null&&ZS.clearInterval(r)},t.prototype.execute=function(e,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,r);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,r){var n=!1,a;try{this.work(e)}catch(o){n=!0,a=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),a},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,r=e.id,n=e.scheduler,a=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,$m(a,this),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null,s.prototype.unsubscribe.call(this)}},t}(yT),eC=function(){function s(t,e){e===void 0&&(e=s.now),this.schedulerActionCtor=t,this.now=e}return s.prototype.schedule=function(t,e,r){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},s.now=Jy.now,s}(),bT=function(s){Ri(t,s);function t(e,r){r===void 0&&(r=eC.now);var n=s.call(this,e,r)||this;return n.actions=[],n._active=!1,n}return t.prototype.flush=function(e){var r=this.actions;if(this._active){r.push(e);return}var n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,n){for(;e=r.shift();)e.unsubscribe();throw n}},t}(eC),ST=new bT(vT),CT=ST,Gn=new ut(function(s){return s.complete()});function kT(s){return s&&Ie(s.schedule)}function Yy(s){return s[s.length-1]}function ET(s){return Ie(Yy(s))?s.pop():void 0}function vd(s){return kT(Yy(s))?s.pop():void 0}function xT(s,t){return typeof Yy(s)=="number"?s.pop():t}var Qy=function(s){return s&&typeof s.length=="number"&&typeof s!="function"};function tC(s){return Ie(s==null?void 0:s.then)}function rC(s){return Ie(s[Xy])}function iC(s){return Symbol.asyncIterator&&Ie(s==null?void 0:s[Symbol.asyncIterator])}function sC(s){return new TypeError("You provided "+(s!==null&&typeof s=="object"?"an invalid object":"'"+s+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function _T(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nC=_T();function aC(s){return Ie(s==null?void 0:s[nC])}function oC(s){return sT(this,arguments,function(){var e,r,n,a;return HS(this,function(o){switch(o.label){case 0:e=s.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,dc(e.read())];case 3:return r=o.sent(),n=r.value,a=r.done,a?[4,dc(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,dc(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function cC(s){return Ie(s==null?void 0:s.getReader)}function zt(s){if(s instanceof ut)return s;if(s!=null){if(rC(s))return PT(s);if(Qy(s))return TT(s);if(tC(s))return IT(s);if(iC(s))return uC(s);if(aC(s))return MT(s);if(cC(s))return AT(s)}throw sC(s)}function PT(s){return new ut(function(t){var e=s[Xy]();if(Ie(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function TT(s){return new ut(function(t){for(var e=0;e<s.length&&!t.closed;e++)t.next(s[e]);t.complete()})}function IT(s){return new ut(function(t){s.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,GS)})}function MT(s){return new ut(function(t){var e,r;try{for(var n=uc(s),a=n.next();!a.done;a=n.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t.complete()})}function uC(s){return new ut(function(t){FT(s,t).catch(function(e){return t.error(e)})})}function AT(s){return uC(oC(s))}function FT(s,t){var e,r,n,a;return iT(this,void 0,void 0,function(){var o,c;return HS(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=nT(s),u.label=1;case 1:return[4,e.next()];case 2:if(r=u.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=u.sent(),n={error:c},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(a=e.return)?[4,a.call(e)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Ss(s,t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=!1);var a=t.schedule(function(){e(),n?s.add(this.schedule(null,r)):this.unsubscribe()},r);if(s.add(a),!n)return a}function lC(s,t){return t===void 0&&(t=0),At(function(e,r){e.subscribe(wt(r,function(n){return Ss(r,s,function(){return r.next(n)},t)},function(){return Ss(r,s,function(){return r.complete()},t)},function(n){return Ss(r,s,function(){return r.error(n)},t)}))})}function dC(s,t){return t===void 0&&(t=0),At(function(e,r){r.add(s.schedule(function(){return e.subscribe(r)},t))})}function DT(s,t){return zt(s).pipe(dC(t),lC(t))}function OT(s,t){return zt(s).pipe(dC(t),lC(t))}function RT(s,t){return new ut(function(e){var r=0;return t.schedule(function(){r===s.length?e.complete():(e.next(s[r++]),e.closed||this.schedule())})})}function LT(s,t){return new ut(function(e){var r;return Ss(e,t,function(){r=s[nC](),Ss(e,t,function(){var n,a,o;try{n=r.next(),a=n.value,o=n.done}catch(c){e.error(c);return}o?e.complete():e.next(a)},0,!0)}),function(){return Ie(r==null?void 0:r.return)&&r.return()}})}function hC(s,t){if(!s)throw new Error("Iterable cannot be null");return new ut(function(e){Ss(e,t,function(){var r=s[Symbol.asyncIterator]();Ss(e,t,function(){r.next().then(function(n){n.done?e.complete():e.next(n.value)})},0,!0)})})}function NT(s,t){return hC(oC(s),t)}function $T(s,t){if(s!=null){if(rC(s))return DT(s,t);if(Qy(s))return RT(s,t);if(tC(s))return OT(s,t);if(iC(s))return hC(s,t);if(aC(s))return LT(s,t);if(cC(s))return NT(s,t)}throw sC(s)}function ke(s,t){return t?$T(s,t):zt(s)}function Cs(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=vd(s);return ke(s,e)}var Zy=Wy(function(s){return function(){s(this),this.name="EmptyError",this.message="no elements in sequence"}});function yt(s,t){return new Promise(function(e,r){var n=new jm({next:function(a){e(a),n.unsubscribe()},error:r,complete:function(){r(new Zy)}});s.subscribe(n)})}function BT(s){return s instanceof Date&&!isNaN(s)}function tt(s,t){return At(function(e,r){var n=0;e.subscribe(wt(r,function(a){r.next(s.call(t,a,n++))}))})}var jT=Array.isArray;function KT(s,t){return jT(t)?s.apply(void 0,lc([],Vn(t))):s(t)}function fC(s){return tt(function(t){return KT(s,t)})}var UT=Array.isArray,HT=Object.getPrototypeOf,qT=Object.prototype,WT=Object.keys;function zT(s){if(s.length===1){var t=s[0];if(UT(t))return{args:t,keys:null};if(VT(t)){var e=WT(t);return{args:e.map(function(r){return t[r]}),keys:e}}}return{args:s,keys:null}}function VT(s){return s&&typeof s=="object"&&HT(s)===qT}function GT(s,t){return s.reduce(function(e,r,n){return e[r]=t[n],e},{})}function Um(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=vd(s),r=ET(s),n=zT(s),a=n.args,o=n.keys;if(a.length===0)return ke([],e);var c=new ut(XT(a,e,o?function(u){return GT(o,u)}:ti));return r?c.pipe(fC(r)):c}function XT(s,t,e){return e===void 0&&(e=ti),function(r){pC(t,function(){for(var n=s.length,a=new Array(n),o=n,c=n,u=function(h){pC(t,function(){var p=ke(s[h],t),m=!1;p.subscribe(wt(r,function(w){a[h]=w,m||(m=!0,c--),c||r.next(e(a.slice()))},function(){--o||r.complete()}))},r)},d=0;d<n;d++)u(d)},r)}}function pC(s,t,e){s?Ss(e,s,t):t()}function mC(s,t,e,r,n,a,o,c){var u=[],d=0,h=0,p=!1,m=function(){p&&!u.length&&!d&&t.complete()},w=function(v){return d<r?b(v):u.push(v)},b=function(v){a&&t.next(v),d++;var y=!1;zt(e(v,h++)).subscribe(wt(t,function(S){n==null||n(S),a?w(S):t.next(S)},function(){y=!0},void 0,function(){if(y)try{d--;for(var S=function(){var E=u.shift();o||b(E)};u.length&&d<r;)S();m()}catch(E){t.error(E)}}))};return s.subscribe(wt(t,w,function(){p=!0,m()})),function(){c==null||c()}}function vt(s,t,e){return e===void 0&&(e=1/0),Ie(t)?vt(function(r,n){return tt(function(a,o){return t(r,a,n,o)})(zt(s(r,n)))},e):(typeof t=="number"&&(e=t),At(function(r,n){return mC(r,n,s,e)}))}function gC(s){return s===void 0&&(s=1/0),vt(ti,s)}function JT(){return gC(1)}function ev(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];return JT()(ke(s,vd(s)))}function Xn(s){return new ut(function(t){zt(s()).subscribe(t)})}var YT=["addListener","removeListener"],QT=["addEventListener","removeEventListener"],ZT=["on","off"];function tv(s,t,e,r){if(Ie(e)&&(r=e,e=void 0),r)return tv(s,t,e).pipe(fC(r));var n=Vn(rI(s)?QT.map(function(c){return function(u){return s[c](t,u,e)}}):eI(s)?YT.map(wC(s,t)):tI(s)?ZT.map(wC(s,t)):[],2),a=n[0],o=n[1];if(!a&&Qy(s))return vt(function(c){return tv(c,t,e)})(zt(s));if(!a)throw new TypeError("Invalid event target");return new ut(function(c){var u=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return c.next(1<d.length?d:d[0])};return a(u),function(){return o(u)}})}function wC(s,t){return function(e){return function(r){return s[e](t,r)}}}function eI(s){return Ie(s.addListener)&&Ie(s.removeListener)}function tI(s){return Ie(s.on)&&Ie(s.off)}function rI(s){return Ie(s.addEventListener)&&Ie(s.removeEventListener)}function rv(s,t,e){return s===void 0&&(s=0),e===void 0&&(e=CT),new ut(function(r){var n=BT(s)?+s-e.now():s;n<0&&(n=0);var a=0;return e.schedule(function(){r.closed||(r.next(a++),r.complete())},n)})}function bd(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=vd(s),r=xT(s,1/0),n=s;return n.length?n.length===1?zt(n[0]):gC(r)(ke(n,e)):Gn}var yC=new ut(hc),iI=Array.isArray;function sI(s){return s.length===1&&iI(s[0])?s[0]:s}function Jn(s,t){return At(function(e,r){var n=0;e.subscribe(wt(r,function(a){return s.call(t,a,n++)&&r.next(a)}))})}function nI(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];return s=sI(s),s.length===1?zt(s[0]):new ut(vC(s))}function vC(s){return function(t){for(var e=[],r=function(a){e.push(zt(s[a]).subscribe(wt(t,function(o){if(e){for(var c=0;c<e.length;c++)c!==a&&e[c].unsubscribe();e=null}t.next(o)})))},n=0;e&&!t.closed&&n<s.length;n++)r(n)}}function Sd(s){return At(function(t,e){var r=null,n=!1,a;r=t.subscribe(wt(e,void 0,void 0,function(o){a=zt(s(o,Sd(s)(t))),r?(r.unsubscribe(),r=null,a.subscribe(e)):n=!0})),n&&(r.unsubscribe(),r=null,a.subscribe(e))})}function bC(s){return At(function(t,e){var r=!1;t.subscribe(wt(e,function(n){r=!0,e.next(n)},function(){r||e.next(s),e.complete()}))})}function iv(s){return s<=0?function(){return Gn}:At(function(t,e){var r=0;t.subscribe(wt(e,function(n){++r<=s&&(e.next(n),s<=r&&e.complete())}))})}function Hm(){return At(function(s,t){s.subscribe(wt(t,hc))})}function aI(s){return tt(function(){return s})}function oI(s,t){return vt(function(e,r){return zt(s(e,r)).pipe(iv(1),aI(e))})}function qm(s){return s===void 0&&(s=cI),At(function(t,e){var r=!1;t.subscribe(wt(e,function(n){r=!0,e.next(n)},function(){return r?e.complete():e.error(s())}))})}function cI(){return new Zy}function fc(s,t){var e=arguments.length>=2;return function(r){return r.pipe(s?Jn(function(n,a){return s(n,a,r)}):ti,iv(1),e?bC(t):qm(function(){return new Zy}))}}function uI(s,t,e){return e===void 0&&(e=1/0),At(function(r,n){var a=t;return mC(r,n,function(o,c){return s(a,o,c)},e,function(o){a=o},!1,void 0,function(){return a=null})})}function Ft(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];return s.length?At(function(e,r){vC(lc([e],Vn(s)))(r)}):ti}function Wm(s){s===void 0&&(s=1/0);var t;s&&typeof s=="object"?t=s:t={count:s};var e=t.count,r=e===void 0?1/0:e,n=t.delay,a=t.resetOnSuccess,o=a===void 0?!1:a;return r<=0?ti:At(function(c,u){var d=0,h,p=function(){var m=!1;h=c.subscribe(wt(u,function(w){o&&(d=0),u.next(w)},void 0,function(w){if(d++<r){var b=function(){h?(h.unsubscribe(),h=null,p()):m=!0};if(n!=null){var v=typeof n=="number"?rv(n):zt(n(w,d)),y=wt(u,function(){y.unsubscribe(),b()},function(){u.complete()});v.subscribe(y)}else b()}else u.error(w)})),m&&(h.unsubscribe(),h=null,p())};p()})}function lI(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=vd(s);return At(function(r,n){(e?ev(s,r,e):ev(s,r)).subscribe(n)})}function zm(s,t){return At(function(e,r){var n=null,a=0,o=!1,c=function(){return o&&!n&&r.complete()};e.subscribe(wt(r,function(u){n==null||n.unsubscribe();var d=0,h=a++;zt(s(u,h)).subscribe(n=wt(r,function(p){return r.next(t?t(u,p,h,d++):p)},function(){n=null,c()}))},function(){o=!0,c()}))})}function dI(s){return At(function(t,e){zt(s).subscribe(wt(e,function(){return e.complete()},hc)),!e.closed&&t.subscribe(e)})}function Vm(s,t,e){var r=Ie(s)||t||e?{next:s,error:t,complete:e}:s;return r?At(function(n,a){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var c=!0;n.subscribe(wt(a,function(u){var d;(d=r.next)===null||d===void 0||d.call(r,u),a.next(u)},function(){var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),a.complete()},function(u){var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),a.error(u)},function(){var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ti}function hI(s){return{all:s=s||new Map,on:function(t,e){var r=s.get(t);r?r.push(e):s.set(t,[e])},off:function(t,e){var r=s.get(t);r&&(e?r.splice(r.indexOf(e)>>>0,1):s.set(t,[]))},emit:function(t,e){var r=s.get(t);r&&r.slice().map(function(n){n(e)}),(r=s.get("*"))&&r.slice().map(function(n){n(t,e)})}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */Symbol.dispose??(Symbol.dispose=Symbol("dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("asyncDispose"));const ae=Symbol.dispose,Lr=Symbol.asyncDispose;dx=ae,lx=Symbol.toStringTag;const Ab=class Ab{constructor(){l(this,Fs,!1);l(this,Ui,[]);T(this,dx,this.dispose);T(this,lx,"DisposableStack")}get disposed(){return i(this,Fs)}dispose(){if(!i(this,Fs)){f(this,Fs,!0);for(const t of i(this,Ui).reverse())t[ae]()}}use(t){return t&&i(this,Ui).push(t),t}adopt(t,e){return i(this,Ui).push({[ae](){e(t)}}),t}defer(t){i(this,Ui).push({[ae](){t()}})}move(){if(i(this,Fs))throw new ReferenceError("a disposed stack can not use anything new");const t=new Ab;return f(t,Ui,i(this,Ui)),f(this,Fs,!0),t}};Fs=new WeakMap,Ui=new WeakMap;let rt=Ab;fx=Lr,hx=Symbol.toStringTag;const Fb=class Fb{constructor(){l(this,Ds,!1);l(this,Hi,[]);T(this,fx,this.dispose);T(this,hx,"AsyncDisposableStack")}get disposed(){return i(this,Ds)}async dispose(){if(!i(this,Ds)){f(this,Ds,!0);for(const t of i(this,Hi).reverse())await t[Lr]()}}use(t){return t&&i(this,Hi).push(t),t}adopt(t,e){return i(this,Hi).push({[Lr](){return e(t)}}),t}defer(t){i(this,Hi).push({[Lr](){return t()}})}move(){if(i(this,Ds))throw new ReferenceError("a disposed stack can not use anything new");const t=new Fb;return f(t,Hi,i(this,Hi)),f(this,Ds,!0),t}};Ds=new WeakMap,Hi=new WeakMap;let Gm=Fb;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let ie=(px=class{constructor(t=hI(new Map)){l(this,qi);l(this,ci,new Map);f(this,qi,t)}on(t,e){const r=i(this,ci).get(t);return r===void 0?i(this,ci).set(t,[e]):r.push(e),i(this,qi).on(t,e),this}off(t,e){const r=i(this,ci).get(t)??[];if(e===void 0){for(const a of r)i(this,qi).off(t,a);return i(this,ci).delete(t),this}const n=r.lastIndexOf(e);return n>-1&&i(this,qi).off(t,...r.splice(n,1)),this}emit(t,e){return i(this,qi).emit(t,e),this.listenerCount(t)>0}once(t,e){const r=n=>{e(n),this.off(t,r)};return this.on(t,r)}listenerCount(t){var e;return((e=i(this,ci).get(t))==null?void 0:e.length)||0}removeAllListeners(t){return t!==void 0?this.off(t):(this[ae](),this)}[ae](){for(const[t,e]of i(this,ci))for(const r of e)i(this,qi).off(t,r);i(this,ci).clear()}},qi=new WeakMap,ci=new WeakMap,px);/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const SC=!!(typeof process<"u"&&process.version),ks={value:{get fs(){throw new Error("fs is not available in this environment")},get path(){throw new Error("path is not available in this environment")},get ScreenRecorder(){throw new Error("ScreenRecorder is not available in this environment")}}},CC="23.0.2";/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const z=(s,t)=>{if(!s)throw new Error(t)};/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function sv(s,t=!1){if(t){const e=atob(s);return Uint8Array.from(e,r=>r.codePointAt(0))}return new TextEncoder().encode(s)}function kC(s){return EC(new TextEncoder().encode(s))}function EC(s){const t=Array.from(s,e=>String.fromCodePoint(e)).join("");return btoa(t)}function fI(s){let t=0;for(const n of s)t+=n.length;const e=new Uint8Array(t);let r=0;for(const n of s)e.set(n,r),r+=n.length;return e}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let nv=null;async function pI(){return nv||(nv=(await Promise.resolve().then(()=>xA)).default),nv}const pc=s=>SC?async(...t)=>{(await pI())(s)(t)}:(...t)=>{const e=globalThis.__PUPPETEER_DEBUG;!e||!(e==="*"||(e.endsWith("*")?s.startsWith(e):s===e))||console.log(`${s}:`,...t)};/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class av extends Error{constructor(t,e){super(t,e),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class Xm extends av{}class Yn extends av{constructor(){super(...arguments);l(this,rh);l(this,ih,"")}set code(e){f(this,rh,e)}get code(){return i(this,rh)}set originalMessage(e){f(this,ih,e)}get originalMessage(){return i(this,ih)}}rh=new WeakMap,ih=new WeakMap;class fe extends av{}class Nr extends Yn{}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const mI={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const te=pc("puppeteer:error"),xC=Object.freeze({width:800,height:600}),Jm=Symbol("Source URL for Puppeteer evaluation scripts"),ca=class ca{constructor(){l(this,aa);l(this,oa)}static fromCallSite(t,e){const r=new ca;return f(r,aa,t),f(r,oa,e.toString()),r}get functionName(){return i(this,aa)}get siteString(){return i(this,oa)}toString(){return`pptr:${[i(this,aa),encodeURIComponent(i(this,oa))].join(";")}`}};aa=new WeakMap,oa=new WeakMap,T(ca,"INTERNAL_URL","pptr:internal"),T(ca,"parse",t=>{t=t.slice(5);const[e="",r=""]=t.split(";"),n=new ca;return f(n,aa,e),f(n,oa,decodeURIComponent(r)),n}),T(ca,"isPuppeteerURL",t=>t.startsWith("pptr:"));let ur=ca;const bt=(s,t)=>{if(Object.prototype.hasOwnProperty.call(t,Jm))return t;const e=Error.prepareStackTrace;Error.prepareStackTrace=(n,a)=>a[2];const r=new Error().stack;return Error.prepareStackTrace=e,Object.assign(t,{[Jm]:ur.fromCallSite(s,r)})},_C=s=>{if(Object.prototype.hasOwnProperty.call(s,Jm))return s[Jm]},Li=s=>typeof s=="string"||s instanceof String,gI=s=>typeof s=="number"||s instanceof Number,wI=s=>typeof s=="object"&&(s==null?void 0:s.constructor)===Object,yI=s=>typeof s=="object"&&(s==null?void 0:s.constructor)===RegExp,vI=s=>typeof s=="object"&&(s==null?void 0:s.constructor)===Date;function ov(s,...t){if(Li(s))return z(t.length===0,"Cannot evaluate a string with arguments"),s;function e(r){return Object.is(r,void 0)?"undefined":JSON.stringify(r)}return`(${s})(${t.map(e).join(",")})`}async function PC(s,t){const e=[],r=s.getReader();if(t){const n=await ks.value.fs.promises.open(t,"w+");try{for(;;){const{done:a,value:o}=await r.read();if(a)break;e.push(o),await n.writeFile(o)}}finally{await n.close()}}else for(;;){const{done:n,value:a}=await r.read();if(n)break;e.push(a)}try{const n=fI(e);return n.length===0?null:n}catch(n){return te(n),null}}async function TC(s,t){return new ReadableStream({async pull(e){function r(c,u){return u?Uint8Array.from(atob(c),h=>h.codePointAt(0)):new TextEncoder().encode(c)}const{data:n,base64Encoded:a,eof:o}=await s.send("IO.read",{handle:t});e.enqueue(r(n,a??!1)),o&&(await s.send("IO.close",{handle:t}),e.close())}})}function bI(s){let t=null;return new Set(["alert","confirm","prompt","beforeunload"]).has(s)&&(t=s),z(t,`Unknown javascript dialog type: ${s}`),t}function er(s,t){return s===0?yC:rv(s).pipe(tt(()=>{throw new Xm(`Timed out after waiting ${s}ms`,{cause:t})}))}const IC="__puppeteer_utility_world__"+CC,Ym=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;function MC(s){return`//# sourceURL=${s}`}const SI=500;function AC(s={},t="in"){var o,c,u,d;const e={scale:1,displayHeaderFooter:!1,headerTemplate:"",footerTemplate:"",printBackground:!1,landscape:!1,pageRanges:"",preferCSSPageSize:!1,omitBackground:!1,outline:!1,tagged:!0,waitForFonts:!0};let r=8.5,n=11;if(s.format){const h=mI[s.format.toLowerCase()];z(h,"Unknown paper format: "+s.format),r=h.width,n=h.height}else r=mc(s.width,t)??r,n=mc(s.height,t)??n;const a={top:mc((o=s.margin)==null?void 0:o.top,t)||0,left:mc((c=s.margin)==null?void 0:c.left,t)||0,bottom:mc((u=s.margin)==null?void 0:u.bottom,t)||0,right:mc((d=s.margin)==null?void 0:d.right,t)||0};return s.outline&&(s.tagged=!0),{...e,...s,width:r,height:n,margin:a}}const cv={px:1,in:96,cm:37.8,mm:3.78};function mc(s,t="in"){if(typeof s>"u")return;let e;if(gI(s))e=s;else if(Li(s)){const r=s;let n=r.substring(r.length-2).toLowerCase(),a="";n in cv?a=r.substring(0,r.length-2):(n="px",a=r);const o=Number(a);z(!isNaN(o),"Failed to parse parameter value: "+r),e=o*cv[n]}else throw new Error("page.pdf() Cannot handle parameter type: "+typeof s);return e/cv[t]}function Me(s,t){return new ut(e=>{const r=n=>{e.next(n)};return s.on(t,r),()=>{s.off(t,r)}})}function gc(s,t){return s?tv(s,"abort").pipe(tt(()=>{throw s.reason instanceof Error?(s.reason.cause=t,s.reason):new Error(s.reason,{cause:t})})):yC}function Cd(s){return vt(t=>ke(Promise.resolve(s(t))).pipe(Jn(e=>e),tt(()=>t)))}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const uv=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardReadWrite"],["clipboard-sanitized-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["persistent-storage","durableStorage"],["idle-detection","idleDetection"],["midi-sysex","midiSysex"]]);let FC=class extends ie{constructor(){super()}async waitForTarget(t,e={}){const{timeout:r=3e4}=e;return await yt(bd(Me(this,"targetcreated"),Me(this,"targetchanged"),ke(this.targets())).pipe(Cd(t),Ft(er(r))))}async pages(){return(await Promise.all(this.browserContexts().map(e=>e.pages()))).reduce((e,r)=>e.concat(r),[])}isConnected(){return this.connected}[ae](){return this.process()?void this.close().catch(te):void this.disconnect().catch(te)}[Lr](){return this.process()?this.close():this.disconnect()}};/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let De=(la=class{constructor(t){l(this,ah);l(this,Os,!1);l(this,Rs,!1);l(this,ua);l(this,sh);l(this,gw,new Promise(t=>{f(this,sh,t)}));l(this,Bc);l(this,nh);l(this,jc);t&&t.timeout>0&&(f(this,nh,new Xm(t.message)),f(this,Bc,setTimeout(()=>{this.reject(i(this,nh))},t.timeout)))}static create(t){return new la(t)}static async race(t){const e=new Set;try{const r=t.map(n=>n instanceof la?(i(n,Bc)&&e.add(n),n.valueOrThrow()):n);return await Promise.race(r)}finally{for(const r of e)r.reject(new Error("Timeout cleared"))}}resolve(t){i(this,Rs)||i(this,Os)||(f(this,Os,!0),g(this,ah,Zb).call(this,t))}reject(t){i(this,Rs)||i(this,Os)||(f(this,Rs,!0),g(this,ah,Zb).call(this,t))}resolved(){return i(this,Os)}finished(){return i(this,Os)||i(this,Rs)}value(){return i(this,ua)}valueOrThrow(){return i(this,jc)||f(this,jc,(async()=>{if(await i(this,gw),i(this,Rs))throw i(this,ua);return i(this,ua)})()),i(this,jc)}},Os=new WeakMap,Rs=new WeakMap,ua=new WeakMap,sh=new WeakMap,gw=new WeakMap,Bc=new WeakMap,nh=new WeakMap,ah=new WeakSet,Zb=function(t){clearTimeout(i(this,Bc)),f(this,ua,t),i(this,sh).call(this)},jc=new WeakMap,la);/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let lv=(Ls=class{constructor(){l(this,Kc,!1);l(this,uh,[])}async acquire(t){if(!i(this,Kc))return f(this,Kc,!0),new Ls.Guard(this);const e=De.create();return i(this,uh).push(e.resolve.bind(e)),await e.valueOrThrow(),new Ls.Guard(this,t)}release(){const t=i(this,uh).shift();if(!t){f(this,Kc,!1);return}t()}},Kc=new WeakMap,uh=new WeakMap,T(Ls,"Guard",(mx=class{constructor(e,r){l(this,oh);l(this,ch);f(this,oh,e),f(this,ch,r)}[ae](){var e;return(e=i(this,ch))==null||e.call(this),i(this,oh).release()}},oh=new WeakMap,ch=new WeakMap,mx)),Ls);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class DC extends ie{constructor(){super();l(this,da);l(this,Uc,0)}startScreenshot(){const e=i(this,da)||new lv;return f(this,da,e),ic(this,Uc)._++,e.acquire(()=>{ic(this,Uc)._--,i(this,Uc)===0&&f(this,da,void 0)})}waitForScreenshotOperations(){var e;return(e=i(this,da))==null?void 0:e.acquire()}async waitForTarget(e,r={}){const{timeout:n=3e4}=r;return await yt(bd(Me(this,"targetcreated"),Me(this,"targetchanged"),ke(this.targets())).pipe(Cd(e),Ft(er(n))))}get closed(){return!this.browser().browserContexts().includes(this)}get id(){}[ae](){return void this.close().catch(te)}[Lr](){return this.close()}}da=new WeakMap,Uc=new WeakMap;var Oe;(function(s){s.Disconnected=Symbol("CDPSession.Disconnected"),s.Swapped=Symbol("CDPSession.Swapped"),s.Ready=Symbol("CDPSession.Ready"),s.SessionAttached="sessionattached",s.SessionDetached="sessiondetached"})(Oe||(Oe={}));class kd extends ie{constructor(){super()}parentSession(){}}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class OC{constructor(t,e,r=""){l(this,lh);l(this,dh);l(this,hh);T(this,"handled",!1);f(this,lh,t),f(this,dh,e),f(this,hh,r)}type(){return i(this,lh)}message(){return i(this,dh)}defaultValue(){return i(this,hh)}async accept(t){z(!this.handled,"Cannot accept dialog which is already handled!"),this.handled=!0,await this.handle({accept:!0,text:t})}async dismiss(){z(!this.handled,"Cannot dismiss dialog which is already handled!"),this.handled=!0,await this.handle({accept:!1})}}lh=new WeakMap,dh=new WeakMap,hh=new WeakMap;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Qm=Symbol("_isElementHandle");/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Cr(s){return typeof s=="object"&&s!==null&&"name"in s&&"message"in s}function RC(s,t,e){return s.message=t,s.originalMessage=e??s.originalMessage,s}function LC(s){let t=s.error.message;return s.error&&typeof s.error=="object"&&"data"in s.error&&(t+=` ${s.error.data}`),t}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const NC=new Map,CI=s=>{let t=NC.get(s);return t||(t=new Function(`return ${s}`)(),NC.set(s,t),t)};function ri(s){let t=s.toString();try{new Function(`(${t})`)}catch(e){if(e.message.includes("Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive"))return t;let r="function ";t.startsWith("async ")&&(r=`async ${r}`,t=t.substring(6)),t=`${r}${t}`;try{new Function(`(${t})`)}catch{throw new Error("Passed function cannot be serialized!")}}return t}const wc=(s,t)=>{let e=ri(s);for(const[r,n]of Object.entries(t))e=e.replace(new RegExp(`PLACEHOLDER\\(\\s*(?:'${r}'|"${r}")\\s*\\)`,"g"),`(${n})`);return CI(e)};/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Zm=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},dv=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});const kI=20;async function*EI(s,t){const e={stack:[],error:void 0,hasError:!1};try{const n=await Zm(e,await s.evaluateHandle(async(c,u)=>{const d=[];for(;d.length<u;){const h=await c.next();if(h.done)break;d.push(h.value)}return d},t),!1).getProperties(),a=n.values();return Zm(e,new rt,!1).defer(()=>{for(const c of a){const u={stack:[],error:void 0,hasError:!1};try{Zm(u,c,!1)[ae]()}catch(d){u.error=d,u.hasError=!0}finally{dv(u)}}}),yield*a,n.size===0}catch(r){e.error=r,e.hasError=!0}finally{dv(e)}}async function*xI(s){let t=kI;for(;!(yield*EI(s,t));)t<<=1}async function*$C(s){const t={stack:[],error:void 0,hasError:!1};try{const e=Zm(t,await s.evaluateHandle(r=>async function*(){yield*r}()),!1);yield*xI(e)}catch(e){t.error=e,t.hasError=!0}finally{dv(t)}}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const ww=class ww{constructor(t){l(this,fh);f(this,fh,t)}async get(t){return await i(this,fh).call(this,t)}};fh=new WeakMap,T(ww,"create",t=>new ww(t));let lr=ww;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var eg=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},tg=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});class Ni{static get _querySelector(){if(this.querySelector)return this.querySelector;if(!this.querySelectorAll)throw new Error("Cannot create default `querySelector`.");return this.querySelector=wc(async(t,e,r)=>{const a=PLACEHOLDER("querySelectorAll")(t,e,r);for await(const o of a)return o;return null},{querySelectorAll:ri(this.querySelectorAll)})}static get _querySelectorAll(){if(this.querySelectorAll)return this.querySelectorAll;if(!this.querySelector)throw new Error("Cannot create default `querySelectorAll`.");return this.querySelectorAll=wc(async function*(t,e,r){const a=await PLACEHOLDER("querySelector")(t,e,r);a&&(yield a)},{querySelector:ri(this.querySelector)})}static async*queryAll(t,e){const r={stack:[],error:void 0,hasError:!1};try{const n=eg(r,await t.evaluateHandle(this._querySelectorAll,e,lr.create(a=>a.puppeteerUtil)),!1);yield*$C(n)}catch(n){r.error=n,r.hasError=!0}finally{tg(r)}}static async queryOne(t,e){const r={stack:[],error:void 0,hasError:!1};try{const n=eg(r,await t.evaluateHandle(this._querySelector,e,lr.create(a=>a.puppeteerUtil)),!1);return Qm in n?n.move():null}catch(n){r.error=n,r.hasError=!0}finally{tg(r)}}static async waitFor(t,e,r){const n={stack:[],error:void 0,hasError:!1};try{let a;const o=eg(n,await(async()=>{if(!(Qm in t)){a=t;return}return a=t.frame,await a.isolatedRealm().adoptHandle(t)})(),!1),{visible:c=!1,hidden:u=!1,timeout:d,signal:h}=r,p=r.polling??(c||u?"raf":"mutation");try{const m={stack:[],error:void 0,hasError:!1};try{h==null||h.throwIfAborted();const w=eg(m,await a.isolatedRealm().waitForFunction(async(b,v,y,S,E)=>{const _=await b.createFunction(v)(S??document,y,b);return b.checkVisibility(_,E)},{polling:p,root:o,timeout:d,signal:h},lr.create(b=>b.puppeteerUtil),ri(this._querySelector),e,o,c?!0:u?!1:void 0),!1);if(h!=null&&h.aborted)throw h.reason;return Qm in w?await a.mainRealm().transferHandle(w):null}catch(w){m.error=w,m.hasError=!0}finally{tg(m)}}catch(m){throw!Cr(m)||m.name==="AbortError"||(m.message=`Waiting for selector \`${e}\` failed: ${m.message}`),m}}catch(a){n.error=a,n.hasError=!0}finally{tg(n)}}}T(Ni,"querySelectorAll"),T(Ni,"querySelector");class yc{static async*map(t,e){for await(const r of t)yield await e(r)}static async*flatMap(t,e){for await(const r of t)yield*e(r)}static async collect(t){const e=[];for await(const r of t)e.push(r);return e}static async first(t){for await(const e of t)return e}}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const _I=s=>["name","role"].includes(s),PI=/\[\s*(?<attribute>\w+)\s*=\s*(?<quote>"|')(?<value>\\.|.*?(?=\k<quote>))\k<quote>\s*\]/g,TI=s=>{const t={},e=s.replace(PI,(r,n,a,o)=>(z(_I(n),`Unknown aria attribute "${n}" in selector`),t[n]=o,""));return e&&!t.name&&(t.name=e),t},ph=class ph extends Ni{static async*queryAll(t,e){const{name:r,role:n}=TI(e);yield*t.queryAXTree(r,n)}};T(ph,"querySelector",async(t,e,{ariaQuerySelector:r})=>await r(t,e)),T(ph,"queryOne",async(t,e)=>await yc.first(ph.queryAll(t,e))??null);let Qn=ph;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class rg extends Ni{}T(rg,"querySelector",(t,e,{cssQuerySelector:r})=>r(t,e)),T(rg,"querySelectorAll",(t,e,{cssQuerySelectorAll:r})=>r(t,e));const II='"use strict";var g=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var l=(t,e)=>{for(var r in e)g(t,r,{get:e[r],enumerable:!0})},J=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of B(e))!Y.call(t,n)&&n!==r&&g(t,n,{get:()=>e[n],enumerable:!(o=X(e,n))||o.enumerable});return t};var z=t=>J(g({},"__esModule",{value:!0}),t);var pe={};l(pe,{default:()=>he});module.exports=z(pe);var N=class extends Error{constructor(e,r){super(e,r),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},p=class extends N{};var c=class t{static create(e){return new t(e)}static async race(e){let r=new Set;try{let o=e.map(n=>n instanceof t?(n.#n&&r.add(n),n.valueOrThrow()):n);return await Promise.race(o)}finally{for(let o of r)o.reject(new Error("Timeout cleared"))}}#e=!1;#r=!1;#o;#t;#a=new Promise(e=>{this.#t=e});#n;#i;constructor(e){e&&e.timeout>0&&(this.#i=new p(e.message),this.#n=setTimeout(()=>{this.reject(this.#i)},e.timeout))}#l(e){clearTimeout(this.#n),this.#o=e,this.#t()}resolve(e){this.#r||this.#e||(this.#e=!0,this.#l(e))}reject(e){this.#r||this.#e||(this.#r=!0,this.#l(e))}resolved(){return this.#e}finished(){return this.#e||this.#r}value(){return this.#o}#s;valueOrThrow(){return this.#s||(this.#s=(async()=>{if(await this.#a,this.#r)throw this.#o;return this.#o})()),this.#s}};var L=new Map,F=t=>{let e=L.get(t);return e||(e=new Function(`return ${t}`)(),L.set(t,e),e)};var x={};l(x,{ariaQuerySelector:()=>G,ariaQuerySelectorAll:()=>b});var G=(t,e)=>globalThis.__ariaQuerySelector(t,e),b=async function*(t,e){yield*await globalThis.__ariaQuerySelectorAll(t,e)};var E={};l(E,{cssQuerySelector:()=>K,cssQuerySelectorAll:()=>Z});var K=(t,e)=>t.querySelector(e),Z=function(t,e){return t.querySelectorAll(e)};var A={};l(A,{customQuerySelectors:()=>P});var v=class{#e=new Map;register(e,r){if(!r.queryOne&&r.queryAll){let o=r.queryAll;r.queryOne=(n,i)=>{for(let s of o(n,i))return s;return null}}else if(r.queryOne&&!r.queryAll){let o=r.queryOne;r.queryAll=(n,i)=>{let s=o(n,i);return s?[s]:[]}}else if(!r.queryOne||!r.queryAll)throw new Error("At least one query method must be defined.");this.#e.set(e,{querySelector:r.queryOne,querySelectorAll:r.queryAll})}unregister(e){this.#e.delete(e)}get(e){return this.#e.get(e)}clear(){this.#e.clear()}},P=new v;var R={};l(R,{pierceQuerySelector:()=>ee,pierceQuerySelectorAll:()=>te});var ee=(t,e)=>{let r=null,o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&!r&&s.matches(e)&&(r=s)}while(!r&&i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r},te=(t,e)=>{let r=[],o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&s.matches(e)&&r.push(s)}while(i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r};var u=(t,e)=>{if(!t)throw new Error(e)};var y=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=new MutationObserver(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())}),this.#o.observe(this.#r,{childList:!0,subtree:!0,attributes:!0})}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(this.#o.disconnect(),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}},w=class{#e;#r;constructor(e){this.#e=e}async start(){let e=this.#r=c.create(),r=await this.#e();if(r){e.resolve(r);return}let o=async()=>{if(e.finished())return;let n=await this.#e();if(!n){window.requestAnimationFrame(o);return}e.resolve(n),await this.stop()};window.requestAnimationFrame(o)}async stop(){u(this.#r,"Polling never started."),this.#r.finished()||this.#r.reject(new Error("Polling stopped"))}result(){return u(this.#r,"Polling never started."),this.#r.valueOrThrow()}},T=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=setInterval(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())},this.#r)}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(clearInterval(this.#o),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}};var _={};l(_,{PCombinator:()=>H,pQuerySelector:()=>fe,pQuerySelectorAll:()=>$});var a=class{static async*map(e,r){for await(let o of e)yield await r(o)}static async*flatMap(e,r){for await(let o of e)yield*r(o)}static async collect(e){let r=[];for await(let o of e)r.push(o);return r}static async first(e){for await(let r of e)return r}};var C={};l(C,{textQuerySelectorAll:()=>m});var re=new Set(["checkbox","image","radio"]),oe=t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement&&!re.has(t.type),ne=new Set(["SCRIPT","STYLE"]),f=t=>!ne.has(t.nodeName)&&!document.head?.contains(t),I=new WeakMap,j=t=>{for(;t;)I.delete(t),t instanceof ShadowRoot?t=t.host:t=t.parentNode},W=new WeakSet,se=new MutationObserver(t=>{for(let e of t)j(e.target)}),d=t=>{let e=I.get(t);if(e||(e={full:"",immediate:[]},!f(t)))return e;let r="";if(oe(t))e.full=t.value,e.immediate.push(t.value),t.addEventListener("input",o=>{j(o.target)},{once:!0,capture:!0});else{for(let o=t.firstChild;o;o=o.nextSibling){if(o.nodeType===Node.TEXT_NODE){e.full+=o.nodeValue??"",r+=o.nodeValue??"";continue}r&&e.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(e.full+=d(o).full)}r&&e.immediate.push(r),t instanceof Element&&t.shadowRoot&&(e.full+=d(t.shadowRoot).full),W.has(t)||(se.observe(t,{childList:!0,characterData:!0,subtree:!0}),W.add(t))}return I.set(t,e),e};var m=function*(t,e){let r=!1;for(let o of t.childNodes)if(o instanceof Element&&f(o)){let n;o.shadowRoot?n=m(o.shadowRoot,e):n=m(o,e);for(let i of n)yield i,r=!0}r||t instanceof Element&&f(t)&&d(t).full.includes(e)&&(yield t)};var k={};l(k,{checkVisibility:()=>le,pierce:()=>S,pierceAll:()=>O});var ie=["hidden","collapse"],le=(t,e)=>{if(!t)return e===!1;if(e===void 0)return t;let r=t.nodeType===Node.TEXT_NODE?t.parentElement:t,o=window.getComputedStyle(r),n=o&&!ie.includes(o.visibility)&&!ae(r);return e===n?t:!1};function ae(t){let e=t.getBoundingClientRect();return e.width===0||e.height===0}var ce=t=>"shadowRoot"in t&&t.shadowRoot instanceof ShadowRoot;function*S(t){ce(t)?yield t.shadowRoot:yield t}function*O(t){t=S(t).next().value,yield t;let e=[document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT)];for(let r of e){let o;for(;o=r.nextNode();)o.shadowRoot&&(yield o.shadowRoot,e.push(document.createTreeWalker(o.shadowRoot,NodeFilter.SHOW_ELEMENT)))}}var Q={};l(Q,{xpathQuerySelectorAll:()=>q});var q=function*(t,e,r=-1){let n=(t.ownerDocument||document).evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),i=[],s;for(;(s=n.iterateNext())&&(i.push(s),!(r&&i.length===r)););for(let h=0;h<i.length;h++)s=i[h],yield s,delete i[h]};var ue=/[-\\w\\P{ASCII}*]/,H=(r=>(r.Descendent=">>>",r.Child=">>>>",r))(H||{}),V=t=>"querySelectorAll"in t,M=class{#e;#r=[];#o=void 0;elements;constructor(e,r){this.elements=[e],this.#e=r,this.#t()}async run(){if(typeof this.#o=="string")switch(this.#o.trimStart()){case":scope":this.#t();break}for(;this.#o!==void 0;this.#t()){let e=this.#o;typeof e=="string"?e[0]&&ue.test(e[0])?this.elements=a.flatMap(this.elements,async function*(r){V(r)&&(yield*r.querySelectorAll(e))}):this.elements=a.flatMap(this.elements,async function*(r){if(!r.parentElement){if(!V(r))return;yield*r.querySelectorAll(e);return}let o=0;for(let n of r.parentElement.children)if(++o,n===r)break;yield*r.parentElement.querySelectorAll(`:scope>:nth-child(${o})${e}`)}):this.elements=a.flatMap(this.elements,async function*(r){switch(e.name){case"text":yield*m(r,e.value);break;case"xpath":yield*q(r,e.value);break;case"aria":yield*b(r,e.value);break;default:let o=P.get(e.name);if(!o)throw new Error(`Unknown selector type: ${e.name}`);yield*o.querySelectorAll(r,e.value)}})}}#t(){if(this.#r.length!==0){this.#o=this.#r.shift();return}if(this.#e.length===0){this.#o=void 0;return}let e=this.#e.shift();switch(e){case">>>>":{this.elements=a.flatMap(this.elements,S),this.#t();break}case">>>":{this.elements=a.flatMap(this.elements,O),this.#t();break}default:this.#r=e,this.#t();break}}},D=class{#e=new WeakMap;calculate(e,r=[]){if(e===null)return r;e instanceof ShadowRoot&&(e=e.host);let o=this.#e.get(e);if(o)return[...o,...r];let n=0;for(let s=e.previousSibling;s;s=s.previousSibling)++n;let i=this.calculate(e.parentNode,[n]);return this.#e.set(e,i),[...i,...r]}},U=(t,e)=>{if(t.length+e.length===0)return 0;let[r=-1,...o]=t,[n=-1,...i]=e;return r===n?U(o,i):r<n?-1:1},de=async function*(t){let e=new Set;for await(let o of t)e.add(o);let r=new D;yield*[...e.values()].map(o=>[o,r.calculate(o)]).sort(([,o],[,n])=>U(o,n)).map(([o])=>o)},$=function(t,e){let r=JSON.parse(e);if(r.some(o=>{let n=0;return o.some(i=>(typeof i=="string"?++n:n=0,n>1))}))throw new Error("Multiple deep combinators found in sequence.");return de(a.flatMap(r,o=>{let n=new M(t,o);return n.run(),n.elements}))},fe=async function(t,e){for await(let r of $(t,e))return r;return null};var me=Object.freeze({...x,...A,...R,..._,...C,...k,...Q,...E,Deferred:c,createFunction:F,createTextContent:d,IntervalPoller:T,isSuitableNodeForTextMatching:f,MutationPoller:y,RAFPoller:w}),he=me;\n';/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class MI{constructor(){l(this,ha);l(this,Hc,!1);l(this,qc,new Set)}append(t){g(this,ha,e0).call(this,()=>{i(this,qc).add(t)})}pop(t){g(this,ha,e0).call(this,()=>{i(this,qc).delete(t)})}inject(t,e=!1){(i(this,Hc)||e)&&t(g(this,ha,Tx).call(this)),f(this,Hc,!1)}}Hc=new WeakMap,qc=new WeakMap,ha=new WeakSet,e0=function(t){t(),f(this,Hc,!0)},Tx=function(){return`(() => {
      const module = {};
      ${II}
      ${[...i(this,qc)].map(t=>`(${t})(module.exports.default);`).join("")}
      return module.exports.default;
    })()`};const Ed=new MI;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class AI{constructor(){l(this,jr,new Map)}get(t){const e=i(this,jr).get(t);return e?e[1]:void 0}register(t,e){var a;z(!i(this,jr).has(t),`Cannot register over existing handler: ${t}`),z(/^[a-zA-Z]+$/.test(t),"Custom query handler names may only contain [a-zA-Z]"),z(e.queryAll||e.queryOne,"At least one query method must be implemented.");const r=(a=class extends Ni{},T(a,"querySelectorAll",wc((o,c,u)=>u.customQuerySelectors.get(PLACEHOLDER("name")).querySelectorAll(o,c),{name:JSON.stringify(t)})),T(a,"querySelector",wc((o,c,u)=>u.customQuerySelectors.get(PLACEHOLDER("name")).querySelector(o,c),{name:JSON.stringify(t)})),a),n=wc(o=>{o.customQuerySelectors.register(PLACEHOLDER("name"),{queryAll:PLACEHOLDER("queryAll"),queryOne:PLACEHOLDER("queryOne")})},{name:JSON.stringify(t),queryAll:e.queryAll?ri(e.queryAll):String(void 0),queryOne:e.queryOne?ri(e.queryOne):String(void 0)}).toString();i(this,jr).set(t,[n,r]),Ed.append(n)}unregister(t){const e=i(this,jr).get(t);if(!e)throw new Error(`Cannot unregister unknown handler: ${t}`);Ed.pop(e[0]),i(this,jr).delete(t)}names(){return[...i(this,jr).keys()]}clear(){for(const[t]of i(this,jr))Ed.pop(t);i(this,jr).clear()}}jr=new WeakMap;const hv=new AI;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class fv extends Ni{}T(fv,"querySelector",(t,e,{pierceQuerySelector:r})=>r(t,e)),T(fv,"querySelectorAll",(t,e,{pierceQuerySelectorAll:r})=>r(t,e));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class pv extends Ni{}T(pv,"querySelectorAll",(t,e,{pQuerySelectorAll:r})=>r(t,e)),T(pv,"querySelector",(t,e,{pQuerySelector:r})=>r(t,e));var vc={attribute:/\[\s*(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)\s*(?:(?<operator>\W?=)\s*(?<value>.+?)\s*(\s(?<caseSensitive>[iIsS]))?\s*)?\]/gu,id:/#(?<name>[-\w\P{ASCII}]+)/gu,class:/\.(?<name>[-\w\P{ASCII}]+)/gu,comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":/::(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>*)\))?/gu,"pseudo-class":/:(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>*)\))?/gu,universal:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?\*/gu,type:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)/gu},FI=new Set(["combinator","comma"]),DI=s=>{switch(s){case"pseudo-element":case"pseudo-class":return new RegExp(vc[s].source.replace("(?<argument>*)","(?<argument>.*)"),"gu");default:return vc[s]}};function OI(s,t){let e=0,r="";for(;t<s.length;t++){const n=s[t];switch(n){case"(":++e;break;case")":--e;break}if(r+=n,e===0)return r}return r}function RI(s,t=vc){if(!s)return[];const e=[s];for(const[n,a]of Object.entries(t))for(let o=0;o<e.length;o++){const c=e[o];if(typeof c!="string")continue;a.lastIndex=0;const u=a.exec(c);if(!u)continue;const d=u.index-1,h=[],p=u[0],m=c.slice(0,d+1);m&&h.push(m),h.push({...u.groups,type:n,content:p});const w=c.slice(d+p.length+1);w&&h.push(w),e.splice(o,1,...h)}let r=0;for(const n of e)switch(typeof n){case"string":throw new Error(`Unexpected sequence ${n} found at index ${r}`);case"object":r+=n.content.length,n.pos=[r-n.content.length,r],FI.has(n.type)&&(n.content=n.content.trim()||" ");break}return e}var LI=/(['"])([^\\\n]+?)\1/g,NI=/\\./g;function $I(s,t=vc){if(s=s.trim(),s==="")return[];const e=[];s=s.replace(NI,(a,o)=>(e.push({value:a,offset:o}),"".repeat(a.length))),s=s.replace(LI,(a,o,c,u)=>(e.push({value:a,offset:u}),`${o}${"".repeat(c.length)}${o}`));{let a=0,o;for(;(o=s.indexOf("(",a))>-1;){const c=OI(s,o);e.push({value:c,offset:o}),s=`${s.substring(0,o)}(${"".repeat(c.length-2)})${s.substring(o+c.length)}`,a=o+c.length}}const r=RI(s,t),n=new Set;for(const a of e.reverse())for(const o of r){const{offset:c,value:u}=a;if(!(o.pos[0]<=c&&c+u.length<=o.pos[1]))continue;const{content:d}=o,h=c-o.pos[0];o.content=d.slice(0,h)+u+d.slice(h+u.length),o.content!==d&&n.add(o)}for(const a of n){const o=DI(a.type);if(!o)throw new Error(`Unknown token type: ${a.type}`);o.lastIndex=0;const c=o.exec(a.content);if(!c)throw new Error(`Unable to parse content for ${a.type}: ${a.content}`);Object.assign(a,c.groups)}return r}function*ig(s,t){switch(s.type){case"list":for(let e of s.list)yield*ig(e,s);break;case"complex":yield*ig(s.left,s),yield*ig(s.right,s);break;case"compound":yield*s.list.map(e=>[e,s]);break;default:yield[s,t]}}function xd(s){let t;return Array.isArray(s)?t=s:t=[...ig(s)].map(([e])=>e),t.map(e=>e.content).join("")}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */vc.nesting=/&/g,vc.combinator=/\s*(>>>>?|[\s>+~])\s*/g;const BI=/\\[\s\S]/g,jI=s=>s.length<=1?s:((s[0]==='"'||s[0]==="'")&&s.endsWith(s[0])&&(s=s.slice(1,-1)),s.replace(BI,t=>t[1]));function KI(s){let t=!0,e=!1,r=!1;const n=$I(s);if(n.length===0)return[[],t,r,!1];let a=[],o=[a];const c=[o],u=[];for(const d of n){switch(d.type){case"combinator":switch(d.content){case">>>":t=!1,u.length&&(a.push(xd(u)),u.splice(0)),a=[],o.push(">>>"),o.push(a);continue;case">>>>":t=!1,u.length&&(a.push(xd(u)),u.splice(0)),a=[],o.push(">>>>"),o.push(a);continue}break;case"pseudo-element":if(!d.name.startsWith("-p-"))break;t=!1,u.length&&(a.push(xd(u)),u.splice(0));const h=d.name.slice(3);h==="aria"&&(e=!0),a.push({name:h,value:jI(d.argument??"")});continue;case"pseudo-class":r=!0;break;case"comma":u.length&&(a.push(xd(u)),u.splice(0)),a=[],o=[a],c.push(o);continue}u.push(d)}return u.length&&a.push(xd(u)),[c,t,r,e]}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class BC extends Ni{}T(BC,"querySelectorAll",(t,e,{textQuerySelectorAll:r})=>r(t,e));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class mv extends Ni{}T(mv,"querySelectorAll",(t,e,{xpathQuerySelectorAll:r})=>r(t,e)),T(mv,"querySelector",(t,e,{xpathQuerySelectorAll:r})=>{for(const n of r(t,e,1))return n;return null});/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const UI={aria:Qn,pierce:fv,xpath:mv,text:BC},HI=["=","/"];function sg(s){for(const t of[hv.names().map(e=>[e,hv.get(e)]),Object.entries(UI)])for(const[e,r]of t)for(const n of HI){const a=`${e}${n}`;if(s.startsWith(a))return s=s.slice(a.length),{updatedSelector:s,polling:e==="aria"?"raf":"mutation",QueryHandler:r}}try{const[t,e,r,n]=KI(s);return e?{updatedSelector:s,polling:r?"raf":"mutation",QueryHandler:rg}:{updatedSelector:JSON.stringify(t),polling:n?"raf":"mutation",QueryHandler:pv}}catch{return{updatedSelector:s,polling:"mutation",QueryHandler:rg}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var qI=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},WI=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});const _d=new WeakSet;function zI(s,t){let e=!1;if(s.prototype[ae]){const r=s.prototype[ae];s.prototype[ae]=function(){if(_d.has(this)){_d.delete(this);return}return r.call(this)},e=!0}if(s.prototype[Lr]){const r=s.prototype[Lr];s.prototype[Lr]=function(){if(_d.has(this)){_d.delete(this);return}return r.call(this)},e=!0}return e&&(s.prototype.move=function(){return _d.add(this),this}),s}function G(s=t=>`Attempted to use disposed ${t.constructor.name}.`){return(t,e)=>function(...r){if(this.disposed)throw new Error(s(this));return t.call(this,...r)}}function Es(s,t){return function(...e){if(!this.disposed)return s.call(this,...e)}}function $r(s,t){const e=new WeakMap;let r=-1;return function(...n){if(r===-1&&(r=n.length),r!==n.length)throw new Error("Memoized method was called with the wrong number of arguments");let a=!1,o=e;for(const c of n)o.has(c)||(a=!0,o.set(c,new WeakMap)),o=o.get(c);if(a)return s.call(this,...n)}}function VI(s=function(){return this}){return(t,e)=>{const r=new WeakMap;return async function(...n){const a={stack:[],error:void 0,hasError:!1};try{const o=s.call(this);let c=r.get(o);c||(c=new lv,r.set(o,c));const u=qI(a,await c.acquire(),!0);return await t.call(this,...n)}catch(o){a.error=o,a.hasError=!0}finally{const o=WI(a);o&&await o}}}}const ng=new WeakMap,jC=function(s){const t=ng.get(this)??new Map;if(t.has(s))return;const e=s!==void 0?(r,n)=>{s.includes(r)&&this.emit(r,n)}:(r,n)=>{this.emit(r,n)};t.set(s,e),ng.set(this,t)};function ag(s){return({set:t,get:e},r)=>(r.addInitializer(function(){return jC.apply(this,[s])}),{set(n){const a=ng.get(this).get(s),o=e.call(this);o!==void 0&&o.off("*",a),n!==void 0&&(n.on("*",a),t.call(this,n))},init(n){if(n===void 0)return n;jC.apply(this,[s]);const a=ng.get(this).get(s);return n.on("*",a),n}})}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var KC=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},gv=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},GI=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},XI=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});let Zn=(()=>{var c;let s=[zI],t,e=[],r,n=[],a,o;return c=class{constructor(){KC(this,n)}async evaluate(d,...h){return d=bt(this.evaluate.name,d),await this.realm.evaluate(d,this,...h)}async evaluateHandle(d,...h){return d=bt(this.evaluateHandle.name,d),await this.realm.evaluateHandle(d,this,...h)}async getProperty(d){return await this.evaluateHandle((h,p)=>h[p],d)}async getProperties(){const d=await this.evaluate(m=>{var v;const w=[],b=Object.getOwnPropertyDescriptors(m);for(const y in b)(v=b[y])!=null&&v.enumerable&&w.push(y);return w}),h=new Map,p=await Promise.all(d.map(m=>this.getProperty(m)));for(const[m,w]of Object.entries(d)){const b={stack:[],error:void 0,hasError:!1};try{const v=GI(b,p[m],!1);v&&h.set(w,v.move())}catch(v){b.error=v,b.hasError=!0}finally{XI(b)}}return h}[(a=[G()],o=[G()],ae)](){return void this.dispose().catch(te)}[Lr](){return this.dispose()}},r=c,(()=>{const d=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;gv(c,null,a,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:h=>"getProperty"in h,get:h=>h.getProperty},metadata:d},null,n),gv(c,null,o,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:h=>"getProperties"in h,get:h=>h.getProperties},metadata:d},null,n),gv(null,t={value:r},s,{kind:"class",name:r.name,metadata:d},null,e),r=t.value,d&&Object.defineProperty(r,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),KC(r,e)})(),r})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var JI=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},xe=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},Pd=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},Td=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r}),YI=function(s,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",t):t})};let Id=(()=>{var Ne,t0,r0,i0,Ix,s0,n0,Mx,Ax,Fx,Y;var s,t,e,r,n,a,o,c,u,d,h,p,m,w,b,v,y,S,E,k,_,A,D,P,C,I,B,O,F,M;let j=Zn,N=[],K,U,W,re,H,ee,ve,Ge,$,R,he,Ae,pt,Lt,ot,Fe,Kn,Q,X,ue,ct,od,uy,ly,dy,hy,fy,cd,kx,Ex,xx,_x;return Y=class extends j{constructor(L){super();l(this,Ne);T(this,"isolatedHandle",JI(this,N));T(this,"handle");this.handle=L,this[Qm]=!0}static bindIsolatedHandle(L,x){return async function(...se){if(this.realm===this.frame.isolatedRealm())return await L.call(this,...se);let Z;this.isolatedHandle?Z=this.isolatedHandle:this.isolatedHandle=Z=await this.frame.isolatedRealm().adoptHandle(this);const ne=await L.call(Z,...se);return ne===Z?this:ne instanceof Zn?await this.realm.transferHandle(ne):(Array.isArray(ne)&&await Promise.all(ne.map(async(me,Te,Nt)=>{me instanceof Zn&&(Nt[Te]=await this.realm.transferHandle(me))})),ne instanceof Map&&await Promise.all([...ne.entries()].map(async([me,Te])=>{Te instanceof Zn&&ne.set(me,await this.realm.transferHandle(Te))})),ne)}}get id(){return this.handle.id}get disposed(){return this.handle.disposed}async getProperty(L){return await this.handle.getProperty(L)}async getProperties(){return await this.handle.getProperties()}async evaluate(L,...x){return L=bt(this.evaluate.name,L),await this.handle.evaluate(L,...x)}async evaluateHandle(L,...x){return L=bt(this.evaluateHandle.name,L),await this.handle.evaluateHandle(L,...x)}async jsonValue(){return await this.handle.jsonValue()}toString(){return this.handle.toString()}remoteObject(){return this.handle.remoteObject()}dispose(){return this.handle.dispose()}asElement(){return this}async $(L){const{updatedSelector:x,QueryHandler:se}=sg(L);return await se.queryOne(this,x)}async $$(L,x){return(x==null?void 0:x.isolate)===!1?await g(this,Ne,r0).call(this,L):await i(this,Ne,t0).call(this,L)}async $eval(L,x,...se){const Z={stack:[],error:void 0,hasError:!1};try{x=bt(this.$eval.name,x);const ne=Pd(Z,await this.$(L),!1);if(!ne)throw new Error(`Error: failed to find element matching selector "${L}"`);return await ne.evaluate(x,...se)}catch(ne){Z.error=ne,Z.hasError=!0}finally{Td(Z)}}async $$eval(L,x,...se){const Z={stack:[],error:void 0,hasError:!1};try{x=bt(this.$$eval.name,x);const ne=await this.$$(L),me=Pd(Z,await this.evaluateHandle((Nt,...$t)=>$t,...ne),!1),[Te]=await Promise.all([me.evaluate(x,...se),...ne.map(Nt=>Nt.dispose())]);return Te}catch(ne){Z.error=ne,Z.hasError=!0}finally{Td(Z)}}async waitForSelector(L,x={}){const{updatedSelector:se,QueryHandler:Z,polling:ne}=sg(L);return await Z.waitFor(this,se,{polling:ne,...x})}async isVisible(){return await g(this,Ne,i0).call(this,!0)}async isHidden(){return await g(this,Ne,i0).call(this,!1)}async toElement(L){if(!await this.evaluate((se,Z)=>se.nodeName===Z.toUpperCase(),L))throw new Error(`Element is not a(n) \`${L}\` element`);return this}async clickablePoint(L){const x=await g(this,Ne,Ix).call(this);if(!x)throw new Error("Node is either not clickable or not an Element");return L!==void 0?{x:x.x+L.x,y:x.y+L.y}:{x:x.x+x.width/2,y:x.y+x.height/2}}async hover(){await this.scrollIntoViewIfNeeded();const{x:L,y:x}=await this.clickablePoint();await this.frame.page().mouse.move(L,x)}async click(L={}){await this.scrollIntoViewIfNeeded();const{x,y:se}=await this.clickablePoint(L.offset);await this.frame.page().mouse.click(x,se,L)}async drag(L){await this.scrollIntoViewIfNeeded();const x=this.frame.page();if(x.isDragInterceptionEnabled()){const se=await this.clickablePoint();return L instanceof Y&&(L=await L.clickablePoint()),await x.mouse.drag(se,L)}try{x._isDragging||(x._isDragging=!0,await this.hover(),await x.mouse.down()),L instanceof Y?await L.hover():await x.mouse.move(L.x,L.y)}catch(se){throw x._isDragging=!1,se}}async dragEnter(L={items:[],dragOperationsMask:1}){const x=this.frame.page();await this.scrollIntoViewIfNeeded();const se=await this.clickablePoint();await x.mouse.dragEnter(se,L)}async dragOver(L={items:[],dragOperationsMask:1}){const x=this.frame.page();await this.scrollIntoViewIfNeeded();const se=await this.clickablePoint();await x.mouse.dragOver(se,L)}async drop(L={items:[],dragOperationsMask:1}){const x=this.frame.page();if("items"in L){await this.scrollIntoViewIfNeeded();const se=await this.clickablePoint();await x.mouse.drop(se,L)}else await L.drag(this),x._isDragging=!1,await x.mouse.up()}async dragAndDrop(L,x){const se=this.frame.page();z(se.isDragInterceptionEnabled(),"Drag Interception is not enabled!"),await this.scrollIntoViewIfNeeded();const Z=await this.clickablePoint(),ne=await L.clickablePoint();await se.mouse.dragAndDrop(Z,ne,x)}async select(...L){for(const x of L)z(Li(x),'Values must be strings. Found value "'+x+'" of type "'+typeof x+'"');return await this.evaluate((x,se)=>{const Z=new Set(se);if(!(x instanceof HTMLSelectElement))throw new Error("Element is not a <select> element.");const ne=new Set;if(x.multiple)for(const me of x.options)me.selected=Z.has(me.value),me.selected&&ne.add(me.value);else{for(const me of x.options)me.selected=!1;for(const me of x.options)if(Z.has(me.value)){me.selected=!0,ne.add(me.value);break}}return x.dispatchEvent(new Event("input",{bubbles:!0})),x.dispatchEvent(new Event("change",{bubbles:!0})),[...ne.values()]},L)}async tap(){await this.scrollIntoViewIfNeeded();const{x:L,y:x}=await this.clickablePoint();await this.frame.page().touchscreen.tap(L,x)}async touchStart(){await this.scrollIntoViewIfNeeded();const{x:L,y:x}=await this.clickablePoint();await this.frame.page().touchscreen.touchStart(L,x)}async touchMove(){await this.scrollIntoViewIfNeeded();const{x:L,y:x}=await this.clickablePoint();await this.frame.page().touchscreen.touchMove(L,x)}async touchEnd(){await this.scrollIntoViewIfNeeded(),await this.frame.page().touchscreen.touchEnd()}async focus(){await this.evaluate(L=>{if(!(L instanceof HTMLElement))throw new Error("Cannot focus non-HTMLElement");return L.focus()})}async type(L,x){await this.focus(),await this.frame.page().keyboard.type(L,x)}async press(L,x){await this.focus(),await this.frame.page().keyboard.press(L,x)}async boundingBox(){const L=await this.evaluate(se=>{if(!(se instanceof Element)||se.getClientRects().length===0)return null;const Z=se.getBoundingClientRect();return{x:Z.x,y:Z.y,width:Z.width,height:Z.height}});if(!L)return null;const x=await g(this,Ne,n0).call(this);return x?{x:L.x+x.x,y:L.y+x.y,height:L.height,width:L.width}:null}async boxModel(){const L=await this.evaluate(se=>{if(!(se instanceof Element)||se.getClientRects().length===0)return null;const Z=se.getBoundingClientRect(),ne=window.getComputedStyle(se),me={padding:{left:parseInt(ne.paddingLeft,10),top:parseInt(ne.paddingTop,10),right:parseInt(ne.paddingRight,10),bottom:parseInt(ne.paddingBottom,10)},margin:{left:-parseInt(ne.marginLeft,10),top:-parseInt(ne.marginTop,10),right:-parseInt(ne.marginRight,10),bottom:-parseInt(ne.marginBottom,10)},border:{left:parseInt(ne.borderLeft,10),top:parseInt(ne.borderTop,10),right:parseInt(ne.borderRight,10),bottom:parseInt(ne.borderBottom,10)}},Te=[{x:Z.left,y:Z.top},{x:Z.left+Z.width,y:Z.top},{x:Z.left+Z.width,y:Z.top+Z.bottom},{x:Z.left,y:Z.top+Z.bottom}],Nt=Fi(Te,me.border),$t=Fi(Nt,me.padding),rc=Fi(Te,me.margin);return{content:$t,padding:Nt,border:Te,margin:rc,width:Z.width,height:Z.height};function Fi(Un,Hn){return[{x:Un[0].x+Hn.left,y:Un[0].y+Hn.top},{x:Un[1].x-Hn.right,y:Un[1].y+Hn.top},{x:Un[2].x-Hn.right,y:Un[2].y-Hn.bottom},{x:Un[3].x+Hn.left,y:Un[3].y-Hn.bottom}]}});if(!L)return null;const x=await g(this,Ne,n0).call(this);if(!x)return null;for(const se of["content","padding","border","margin"])for(const Z of L[se])Z.x+=x.x,Z.y+=x.y;return L}async screenshot(L={}){const{scrollIntoView:x=!0,clip:se}=L,Z=this.frame.page();x&&await this.scrollIntoViewIfNeeded();const ne=await g(this,Ne,Mx).call(this),[me,Te]=await this.evaluate(()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]});return ne.x+=me,ne.y+=Te,se&&(ne.x+=se.x,ne.y+=se.y,ne.height=se.height,ne.width=se.width),await Z.screenshot({...L,clip:ne})}async assertConnectedElement(){const L=await this.evaluate(async x=>{if(!x.isConnected)return"Node is detached from document";if(x.nodeType!==Node.ELEMENT_NODE)return"Node is not of type HTMLElement"});if(L)throw new Error(L)}async scrollIntoViewIfNeeded(){await this.isIntersectingViewport({threshold:1})||await this.scrollIntoView()}async isIntersectingViewport(L={}){var se;const x={stack:[],error:void 0,hasError:!1};try{await this.assertConnectedElement();const Z=await g(this,Ne,Ax).call(this);return await(Pd(x,Z&&await g(se=Z,Ne,Fx).call(se),!1)??this).evaluate(async(me,Te)=>{const Nt=await new Promise($t=>{const rc=new IntersectionObserver(Fi=>{$t(Fi[0].intersectionRatio),rc.disconnect()});rc.observe(me)});return Te===1?Nt===1:Nt>Te},L.threshold??0)}catch(Z){x.error=Z,x.hasError=!0}finally{Td(x)}}async scrollIntoView(){await this.assertConnectedElement(),await this.evaluate(async L=>{L.scrollIntoView({block:"center",inline:"center",behavior:"instant"})})}},Ne=new WeakSet,t0=function(){return ve.value},r0=async function(L){const{updatedSelector:x,QueryHandler:se}=sg(L);return await yc.collect(se.queryAll(this,x))},i0=async function(L){return await this.evaluate(async(x,se,Z)=>!!se.checkVisibility(x,Z),lr.create(x=>x.puppeteerUtil),L)},Ix=async function(){var ne;const L=await this.evaluate(me=>me instanceof Element?[...me.getClientRects()].map(Te=>({x:Te.x,y:Te.y,width:Te.width,height:Te.height})):null);if(!(L!=null&&L.length))return null;await g(this,Ne,s0).call(this,L);let x=this.frame,se;for(;se=x==null?void 0:x.parentFrame();){const me={stack:[],error:void 0,hasError:!1};try{const Te=Pd(me,await x.frameElement(),!1);if(!Te)throw new Error("Unsupported frame type");const Nt=await Te.evaluate($t=>{if($t.getClientRects().length===0)return null;const rc=$t.getBoundingClientRect(),Fi=window.getComputedStyle($t);return{left:rc.left+parseInt(Fi.paddingLeft,10)+parseInt(Fi.borderLeftWidth,10),top:rc.top+parseInt(Fi.paddingTop,10)+parseInt(Fi.borderTopWidth,10)}});if(!Nt)return null;for(const $t of L)$t.x+=Nt.left,$t.y+=Nt.top;await g(ne=Te,Ne,s0).call(ne,L),x=se}catch(Te){me.error=Te,me.hasError=!0}finally{Td(me)}}const Z=L.find(me=>me.width>=1&&me.height>=1);return Z?{x:Z.x,y:Z.y,height:Z.height,width:Z.width}:null},s0=async function(L){const{documentWidth:x,documentHeight:se}=await this.frame.isolatedRealm().evaluate(()=>({documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight}));for(const Z of L)QI(Z,x,se)},n0=async function(){const L={x:0,y:0};let x=this.frame,se;for(;se=x==null?void 0:x.parentFrame();){const Z={stack:[],error:void 0,hasError:!1};try{const ne=Pd(Z,await x.frameElement(),!1);if(!ne)throw new Error("Unsupported frame type");const me=await ne.evaluate(Te=>{if(Te.getClientRects().length===0)return null;const Nt=Te.getBoundingClientRect(),$t=window.getComputedStyle(Te);return{left:Nt.left+parseInt($t.paddingLeft,10)+parseInt($t.borderLeftWidth,10),top:Nt.top+parseInt($t.paddingTop,10)+parseInt($t.borderTopWidth,10)}});if(!me)return null;L.x+=me.left,L.y+=me.top,x=se}catch(ne){Z.error=ne,Z.hasError=!0}finally{Td(Z)}}return L},Mx=async function(){const L=await this.boundingBox();return z(L,"Node is either not visible or not an HTMLElement"),z(L.width!==0,"Node has 0 width."),z(L.height!==0,"Node has 0 height."),L},Ax=async function(){return await this.evaluate(L=>L instanceof SVGElement)?this:null},Fx=async function(){return await this.evaluateHandle(L=>L instanceof SVGSVGElement?L:L.ownerSVGElement)},(()=>{const L=typeof Symbol=="function"&&Symbol.metadata?Object.create(j[Symbol.metadata]??null):void 0;K=[G(),(s=Y).bindIsolatedHandle.bind(s)],U=[G(),(t=Y).bindIsolatedHandle.bind(t)],W=[G(),(e=Y).bindIsolatedHandle.bind(e)],re=[G(),(r=Y).bindIsolatedHandle.bind(r)],H=[G()],ee=[(n=Y).bindIsolatedHandle.bind(n)],Ge=[G(),(a=Y).bindIsolatedHandle.bind(a)],$=[G(),(o=Y).bindIsolatedHandle.bind(o)],R=[G(),(c=Y).bindIsolatedHandle.bind(c)],he=[G(),(u=Y).bindIsolatedHandle.bind(u)],Ae=[G(),(d=Y).bindIsolatedHandle.bind(d)],pt=[G(),(h=Y).bindIsolatedHandle.bind(h)],Lt=[G(),(p=Y).bindIsolatedHandle.bind(p)],ot=[G(),(m=Y).bindIsolatedHandle.bind(m)],Fe=[G(),(w=Y).bindIsolatedHandle.bind(w)],Kn=[G(),(b=Y).bindIsolatedHandle.bind(b)],Q=[G(),(v=Y).bindIsolatedHandle.bind(v)],X=[G(),(y=Y).bindIsolatedHandle.bind(y)],ue=[G(),(S=Y).bindIsolatedHandle.bind(S)],ct=[G(),(E=Y).bindIsolatedHandle.bind(E)],od=[G(),(k=Y).bindIsolatedHandle.bind(k)],uy=[G(),(_=Y).bindIsolatedHandle.bind(_)],ly=[G(),(A=Y).bindIsolatedHandle.bind(A)],dy=[G(),(D=Y).bindIsolatedHandle.bind(D)],hy=[G(),(P=Y).bindIsolatedHandle.bind(P)],fy=[G(),(C=Y).bindIsolatedHandle.bind(C)],cd=[G(),(I=Y).bindIsolatedHandle.bind(I)],kx=[G(),(B=Y).bindIsolatedHandle.bind(B)],Ex=[G(),(O=Y).bindIsolatedHandle.bind(O)],xx=[G(),(F=Y).bindIsolatedHandle.bind(F)],_x=[G(),(M=Y).bindIsolatedHandle.bind(M)],xe(Y,null,K,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:x=>"getProperty"in x,get:x=>x.getProperty},metadata:L},null,N),xe(Y,null,U,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:x=>"getProperties"in x,get:x=>x.getProperties},metadata:L},null,N),xe(Y,null,W,{kind:"method",name:"jsonValue",static:!1,private:!1,access:{has:x=>"jsonValue"in x,get:x=>x.jsonValue},metadata:L},null,N),xe(Y,null,re,{kind:"method",name:"$",static:!1,private:!1,access:{has:x=>"$"in x,get:x=>x.$},metadata:L},null,N),xe(Y,null,H,{kind:"method",name:"$$",static:!1,private:!1,access:{has:x=>"$$"in x,get:x=>x.$$},metadata:L},null,N),xe(Y,ve={value:YI(async function(x){return await g(this,Ne,r0).call(this,x)},"#$$")},ee,{kind:"method",name:"#$$",static:!1,private:!0,access:{has:x=>Zt(Ne,x),get:x=>i(x,Ne,t0)},metadata:L},null,N),xe(Y,null,Ge,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:x=>"waitForSelector"in x,get:x=>x.waitForSelector},metadata:L},null,N),xe(Y,null,$,{kind:"method",name:"isVisible",static:!1,private:!1,access:{has:x=>"isVisible"in x,get:x=>x.isVisible},metadata:L},null,N),xe(Y,null,R,{kind:"method",name:"isHidden",static:!1,private:!1,access:{has:x=>"isHidden"in x,get:x=>x.isHidden},metadata:L},null,N),xe(Y,null,he,{kind:"method",name:"toElement",static:!1,private:!1,access:{has:x=>"toElement"in x,get:x=>x.toElement},metadata:L},null,N),xe(Y,null,Ae,{kind:"method",name:"clickablePoint",static:!1,private:!1,access:{has:x=>"clickablePoint"in x,get:x=>x.clickablePoint},metadata:L},null,N),xe(Y,null,pt,{kind:"method",name:"hover",static:!1,private:!1,access:{has:x=>"hover"in x,get:x=>x.hover},metadata:L},null,N),xe(Y,null,Lt,{kind:"method",name:"click",static:!1,private:!1,access:{has:x=>"click"in x,get:x=>x.click},metadata:L},null,N),xe(Y,null,ot,{kind:"method",name:"drag",static:!1,private:!1,access:{has:x=>"drag"in x,get:x=>x.drag},metadata:L},null,N),xe(Y,null,Fe,{kind:"method",name:"dragEnter",static:!1,private:!1,access:{has:x=>"dragEnter"in x,get:x=>x.dragEnter},metadata:L},null,N),xe(Y,null,Kn,{kind:"method",name:"dragOver",static:!1,private:!1,access:{has:x=>"dragOver"in x,get:x=>x.dragOver},metadata:L},null,N),xe(Y,null,Q,{kind:"method",name:"drop",static:!1,private:!1,access:{has:x=>"drop"in x,get:x=>x.drop},metadata:L},null,N),xe(Y,null,X,{kind:"method",name:"dragAndDrop",static:!1,private:!1,access:{has:x=>"dragAndDrop"in x,get:x=>x.dragAndDrop},metadata:L},null,N),xe(Y,null,ue,{kind:"method",name:"select",static:!1,private:!1,access:{has:x=>"select"in x,get:x=>x.select},metadata:L},null,N),xe(Y,null,ct,{kind:"method",name:"tap",static:!1,private:!1,access:{has:x=>"tap"in x,get:x=>x.tap},metadata:L},null,N),xe(Y,null,od,{kind:"method",name:"touchStart",static:!1,private:!1,access:{has:x=>"touchStart"in x,get:x=>x.touchStart},metadata:L},null,N),xe(Y,null,uy,{kind:"method",name:"touchMove",static:!1,private:!1,access:{has:x=>"touchMove"in x,get:x=>x.touchMove},metadata:L},null,N),xe(Y,null,ly,{kind:"method",name:"touchEnd",static:!1,private:!1,access:{has:x=>"touchEnd"in x,get:x=>x.touchEnd},metadata:L},null,N),xe(Y,null,dy,{kind:"method",name:"focus",static:!1,private:!1,access:{has:x=>"focus"in x,get:x=>x.focus},metadata:L},null,N),xe(Y,null,hy,{kind:"method",name:"type",static:!1,private:!1,access:{has:x=>"type"in x,get:x=>x.type},metadata:L},null,N),xe(Y,null,fy,{kind:"method",name:"press",static:!1,private:!1,access:{has:x=>"press"in x,get:x=>x.press},metadata:L},null,N),xe(Y,null,cd,{kind:"method",name:"boundingBox",static:!1,private:!1,access:{has:x=>"boundingBox"in x,get:x=>x.boundingBox},metadata:L},null,N),xe(Y,null,kx,{kind:"method",name:"boxModel",static:!1,private:!1,access:{has:x=>"boxModel"in x,get:x=>x.boxModel},metadata:L},null,N),xe(Y,null,Ex,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:x=>"screenshot"in x,get:x=>x.screenshot},metadata:L},null,N),xe(Y,null,xx,{kind:"method",name:"isIntersectingViewport",static:!1,private:!1,access:{has:x=>"isIntersectingViewport"in x,get:x=>x.isIntersectingViewport},metadata:L},null,N),xe(Y,null,_x,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:x=>"scrollIntoView"in x,get:x=>x.scrollIntoView},metadata:L},null,N),L&&Object.defineProperty(Y,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:L})})(),Y})();function QI(s,t,e){s.width=Math.max(s.x>=0?Math.min(t-s.x,s.width):Math.min(t,s.width+s.x),0),s.height=Math.max(s.y>=0?Math.min(e-s.y,s.height):Math.min(e,s.height+s.y),0)}var ZI=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},eM=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r}),bc;(function(s){s.Action="action"})(bc||(bc={}));class Sc extends ie{constructor(){super(...arguments);l(this,ui);T(this,"visibility",null);T(this,"_timeout",3e4);l(this,fa,!0);l(this,pa,!0);l(this,ma,!0);T(this,"operators",{conditions:(e,r)=>vt(n=>bd(...e.map(a=>a(n,r))).pipe(bC(n))),retryAndRaceWithSignalAndTimer:(e,r)=>{const n=[];return e&&n.push(gc(e,r)),n.push(er(this._timeout,r)),dT(Wm({delay:dg}),Ft(...n))}});l(this,mh,(e,r)=>i(this,pa)?ke(e.frame.waitForFunction(n=>n instanceof HTMLElement?!["BUTTON","INPUT","SELECT","TEXTAREA","OPTION","OPTGROUP"].includes(n.nodeName)||!n.hasAttribute("disabled"):!0,{timeout:this._timeout,signal:r},e)).pipe(Hm()):Gn);l(this,ga,e=>i(this,ma)?Xn(()=>ke(e.evaluate(r=>new Promise(n=>{window.requestAnimationFrame(()=>{const a=r.getBoundingClientRect();window.requestAnimationFrame(()=>{const o=r.getBoundingClientRect();n([{x:a.x,y:a.y,width:a.width,height:a.height},{x:o.x,y:o.y,width:o.width,height:o.height}])})})})))).pipe(fc(([r,n])=>r.x===n.x&&r.y===n.y&&r.width===n.width&&r.height===n.height),Wm({delay:dg}),Hm()):Gn);l(this,wa,e=>i(this,fa)?ke(e.isIntersectingViewport({threshold:0})).pipe(Jn(r=>!r),vt(()=>ke(e.scrollIntoView())),vt(()=>Xn(()=>ke(e.isIntersectingViewport({threshold:0}))).pipe(fc(ti),Wm({delay:dg}),Hm()))):Gn)}static race(e){return wv.create(e)}get timeout(){return this._timeout}setTimeout(e){const r=this._clone();return r._timeout=e,r}setVisibility(e){const r=this._clone();return r.visibility=e,r}setWaitForEnabled(e){const r=this._clone();return f(r,pa,e),r}setEnsureElementIsInTheViewport(e){const r=this._clone();return f(r,fa,e),r}setWaitForStableBoundingBox(e){const r=this._clone();return f(r,ma,e),r}copyOptions(e){return this._timeout=e._timeout,this.visibility=e.visibility,f(this,pa,i(e,pa)),f(this,fa,i(e,fa)),f(this,ma,i(e,ma)),this}clone(){return this._clone()}async waitHandle(e){const r=new Error("Locator.waitHandle");return await yt(this._wait(e).pipe(this.operators.retryAndRaceWithSignalAndTimer(e==null?void 0:e.signal,r)))}async wait(e){const r={stack:[],error:void 0,hasError:!1};try{return await ZI(r,await this.waitHandle(e),!1).jsonValue()}catch(n){r.error=n,r.hasError=!0}finally{eM(r)}}map(e){return new ug(this._clone(),r=>r.evaluateHandle(e))}filter(e){return new cg(this._clone(),async(r,n)=>(await r.frame.waitForFunction(e,{signal:n,timeout:this._timeout},r),!0))}filterHandle(e){return new cg(this._clone(),e)}mapHandle(e){return new ug(this._clone(),e)}click(e){return yt(g(this,ui,Dx).call(this,e))}fill(e,r){return yt(g(this,ui,Ox).call(this,e,r))}hover(e){return yt(g(this,ui,Rx).call(this,e))}scroll(e){return yt(g(this,ui,Lx).call(this,e))}}fa=new WeakMap,pa=new WeakMap,ma=new WeakMap,mh=new WeakMap,ga=new WeakMap,wa=new WeakMap,ui=new WeakSet,Dx=function(e){const r=e==null?void 0:e.signal,n=new Error("Locator.click");return this._wait(e).pipe(this.operators.conditions([i(this,wa),i(this,ga),i(this,mh)],r),Vm(()=>this.emit(bc.Action,void 0)),vt(a=>ke(a.click(e)).pipe(Sd(o=>{throw a.dispose().catch(te),o}))),this.operators.retryAndRaceWithSignalAndTimer(r,n))},Ox=function(e,r){const n=r==null?void 0:r.signal,a=new Error("Locator.fill");return this._wait(r).pipe(this.operators.conditions([i(this,wa),i(this,ga),i(this,mh)],n),Vm(()=>this.emit(bc.Action,void 0)),vt(o=>ke(o.evaluate(c=>c instanceof HTMLSelectElement?"select":c instanceof HTMLTextAreaElement?"typeable-input":c instanceof HTMLInputElement?new Set(["textarea","text","url","tel","search","password","number","email"]).has(c.type)?"typeable-input":"other-input":c.isContentEditable?"contenteditable":"unknown")).pipe(vt(c=>{switch(c){case"select":return ke(o.select(e).then(hc));case"contenteditable":case"typeable-input":return ke(o.evaluate((u,d)=>{const h=u.isContentEditable?u.innerText:u.value;if(d.length<=h.length||!d.startsWith(u.value))return u.isContentEditable?u.innerText="":u.value="",d;const p=u.isContentEditable?u.innerText:u.value;return u.isContentEditable?(u.innerText="",u.innerText=p):(u.value="",u.value=p),d.substring(p.length)},e)).pipe(vt(u=>ke(o.type(u))));case"other-input":return ke(o.focus()).pipe(vt(()=>ke(o.evaluate((u,d)=>{u.value=d,u.dispatchEvent(new Event("input",{bubbles:!0})),u.dispatchEvent(new Event("change",{bubbles:!0}))},e))));case"unknown":throw new Error("Element cannot be filled out.")}})).pipe(Sd(c=>{throw o.dispose().catch(te),c}))),this.operators.retryAndRaceWithSignalAndTimer(n,a))},Rx=function(e){const r=e==null?void 0:e.signal,n=new Error("Locator.hover");return this._wait(e).pipe(this.operators.conditions([i(this,wa),i(this,ga)],r),Vm(()=>this.emit(bc.Action,void 0)),vt(a=>ke(a.hover()).pipe(Sd(o=>{throw a.dispose().catch(te),o}))),this.operators.retryAndRaceWithSignalAndTimer(r,n))},Lx=function(e){const r=e==null?void 0:e.signal,n=new Error("Locator.scroll");return this._wait(e).pipe(this.operators.conditions([i(this,wa),i(this,ga)],r),Vm(()=>this.emit(bc.Action,void 0)),vt(a=>ke(a.evaluate((o,c,u)=>{c!==void 0&&(o.scrollTop=c),u!==void 0&&(o.scrollLeft=u)},e==null?void 0:e.scrollTop,e==null?void 0:e.scrollLeft)).pipe(Sd(o=>{throw a.dispose().catch(te),o}))),this.operators.retryAndRaceWithSignalAndTimer(r,n))};const yw=class yw extends Sc{constructor(e,r){super();l(this,Wc);l(this,zc);f(this,Wc,e),f(this,zc,r)}static create(e,r){return new yw(e,r).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}_clone(){return new yw(i(this,Wc),i(this,zc))}_wait(e){const r=e==null?void 0:e.signal;return Xn(()=>ke(i(this,Wc).waitForFunction(i(this,zc),{timeout:this.timeout,signal:r}))).pipe(qm())}};Wc=new WeakMap,zc=new WeakMap;let og=yw;class UC extends Sc{constructor(e){super();l(this,Bt);f(this,Bt,e),this.copyOptions(i(this,Bt))}get delegate(){return i(this,Bt)}setTimeout(e){const r=super.setTimeout(e);return f(r,Bt,i(this,Bt).setTimeout(e)),r}setVisibility(e){const r=super.setVisibility(e);return f(r,Bt,i(r,Bt).setVisibility(e)),r}setWaitForEnabled(e){const r=super.setWaitForEnabled(e);return f(r,Bt,i(this,Bt).setWaitForEnabled(e)),r}setEnsureElementIsInTheViewport(e){const r=super.setEnsureElementIsInTheViewport(e);return f(r,Bt,i(this,Bt).setEnsureElementIsInTheViewport(e)),r}setWaitForStableBoundingBox(e){const r=super.setWaitForStableBoundingBox(e);return f(r,Bt,i(this,Bt).setWaitForStableBoundingBox(e)),r}}Bt=new WeakMap;const Db=class Db extends UC{constructor(e,r){super(e);l(this,Vc);f(this,Vc,r)}_clone(){return new Db(this.delegate.clone(),i(this,Vc)).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(vt(r=>ke(Promise.resolve(i(this,Vc).call(this,r,e==null?void 0:e.signal))).pipe(Jn(n=>n),tt(()=>r))),qm())}};Vc=new WeakMap;let cg=Db;const Ob=class Ob extends UC{constructor(e,r){super(e);l(this,Gc);f(this,Gc,r)}_clone(){return new Ob(this.delegate.clone(),i(this,Gc)).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(vt(r=>ke(Promise.resolve(i(this,Gc).call(this,r,e==null?void 0:e.signal)))))}};Gc=new WeakMap;let ug=Ob;const bw=class bw extends Sc{constructor(e,r){super();l(this,Xc);l(this,Jc);l(this,vw,e=>this.visibility?(()=>{switch(this.visibility){case"hidden":return Xn(()=>ke(e.isHidden()));case"visible":return Xn(()=>ke(e.isVisible()))}})().pipe(fc(ti),Wm({delay:dg}),Hm()):Gn);f(this,Xc,e),f(this,Jc,r)}static create(e,r){return new bw(e,r).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}_clone(){return new bw(i(this,Xc),i(this,Jc)).copyOptions(this)}_wait(e){const r=e==null?void 0:e.signal;return Xn(()=>ke(i(this,Xc).waitForSelector(i(this,Jc),{visible:!1,timeout:this._timeout,signal:r}))).pipe(Jn(n=>n!==null),qm(),this.operators.conditions([i(this,vw)],r))}};Xc=new WeakMap,Jc=new WeakMap,vw=new WeakMap;let lg=bw;function tM(s){for(const t of s)if(!(t instanceof Sc))throw new Error("Unknown locator for race candidate");return s}const Sw=class Sw extends Sc{constructor(e){super();l(this,Yc);f(this,Yc,e)}static create(e){const r=tM(e);return new Sw(r)}_clone(){return new Sw(i(this,Yc).map(e=>e.clone())).copyOptions(this)}_wait(e){return nI(...i(this,Yc).map(r=>r._wait(e)))}};Yc=new WeakMap;let wv=Sw;const dg=100;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var rM=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},it=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},xs=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},_s=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r}),Dt;(function(s){s.FrameNavigated=Symbol("Frame.FrameNavigated"),s.FrameSwapped=Symbol("Frame.FrameSwapped"),s.LifecycleEvent=Symbol("Frame.LifecycleEvent"),s.FrameNavigatedWithinDocument=Symbol("Frame.FrameNavigatedWithinDocument"),s.FrameDetached=Symbol("Frame.FrameDetached"),s.FrameSwappedByActivation=Symbol("Frame.FrameSwappedByActivation")})(Dt||(Dt={}));const be=G(s=>`Attempted to use detached Frame '${s._id}'.`);let HC=(()=>{var D,P,xm,I;let s=ie,t=[],e,r,n,a,o,c,u,d,h,p,m,w,b,v,y,S,E,k,_,A;return I=class extends s{constructor(){super();l(this,P);T(this,"_id",rM(this,t));T(this,"_parentId");T(this,"_name");T(this,"_hasStartedLoading",!1);l(this,D)}clearDocumentHandle(){f(this,D,void 0)}async frameElement(){const F={stack:[],error:void 0,hasError:!1};try{const M=this.parentFrame();if(!M)return null;const j=xs(F,await M.isolatedRealm().evaluateHandle(()=>document.querySelectorAll("iframe,frame")),!1);for await(const N of $C(j)){const K={stack:[],error:void 0,hasError:!1};try{const U=xs(K,N,!1),W=await U.contentFrame();if((W==null?void 0:W._id)===this._id)return U.move()}catch(U){K.error=U,K.hasError=!0}finally{_s(K)}}return null}catch(M){F.error=M,F.hasError=!0}finally{_s(F)}}async evaluateHandle(F,...M){return F=bt(this.evaluateHandle.name,F),await this.mainRealm().evaluateHandle(F,...M)}async evaluate(F,...M){return F=bt(this.evaluate.name,F),await this.mainRealm().evaluate(F,...M)}locator(F){return typeof F=="string"?lg.create(this,F):og.create(this,F)}async $(F){return await(await g(this,P,xm).call(this)).$(F)}async $$(F,M){return await(await g(this,P,xm).call(this)).$$(F,M)}async $eval(F,M,...j){return M=bt(this.$eval.name,M),await(await g(this,P,xm).call(this)).$eval(F,M,...j)}async $$eval(F,M,...j){return M=bt(this.$$eval.name,M),await(await g(this,P,xm).call(this)).$$eval(F,M,...j)}async waitForSelector(F,M={}){const{updatedSelector:j,QueryHandler:N,polling:K}=sg(F);return await N.waitFor(this,j,{polling:K,...M})}async waitForFunction(F,M={},...j){return await this.mainRealm().waitForFunction(F,M,...j)}async content(){return await this.evaluate(()=>{let F="";for(const M of document.childNodes)switch(M){case document.documentElement:F+=document.documentElement.outerHTML;break;default:F+=new XMLSerializer().serializeToString(M);break}return F})}async setFrameContent(F){return await this.evaluate(M=>{document.open(),document.write(M),document.close()},F)}name(){return this._name||""}isDetached(){return this.detached}get disposed(){return this.detached}async addScriptTag(F){let{content:M="",type:j}=F;const{path:N}=F;if(+!!F.url+ +!!N+ +!!M!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");return N&&(M=await ks.value.fs.promises.readFile(N,"utf8"),M+=`//# sourceURL=${N.replace(/\n/g,"")}`),j=j??"text/javascript",await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async({url:K,id:U,type:W,content:re})=>await new Promise((H,ee)=>{const ve=document.createElement("script");ve.type=W,ve.text=re,ve.addEventListener("error",Ge=>{ee(new Error(Ge.message??"Could not load script"))},{once:!0}),U&&(ve.id=U),K?(ve.src=K,ve.addEventListener("load",()=>{H(ve)},{once:!0}),document.head.appendChild(ve)):(document.head.appendChild(ve),H(ve))}),{...F,type:j,content:M}))}async addStyleTag(F){let{content:M=""}=F;const{path:j}=F;if(+!!F.url+ +!!j+ +!!M!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");return j&&(M=await ks.value.fs.promises.readFile(j,"utf8"),M+="/*# sourceURL="+j.replace(/\n/g,"")+"*/",F.content=M),await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async({url:N,content:K})=>await new Promise((U,W)=>{let re;if(!N)re=document.createElement("style"),re.appendChild(document.createTextNode(K));else{const H=document.createElement("link");H.rel="stylesheet",H.href=N,re=H}return re.addEventListener("load",()=>{U(re)},{once:!0}),re.addEventListener("error",H=>{W(new Error(H.message??"Could not load style"))},{once:!0}),document.head.appendChild(re),re}),F))}async click(F,M={}){const j={stack:[],error:void 0,hasError:!1};try{const N=xs(j,await this.$(F),!1);z(N,`No element found for selector: ${F}`),await N.click(M),await N.dispose()}catch(N){j.error=N,j.hasError=!0}finally{_s(j)}}async focus(F){const M={stack:[],error:void 0,hasError:!1};try{const j=xs(M,await this.$(F),!1);z(j,`No element found for selector: ${F}`),await j.focus()}catch(j){M.error=j,M.hasError=!0}finally{_s(M)}}async hover(F){const M={stack:[],error:void 0,hasError:!1};try{const j=xs(M,await this.$(F),!1);z(j,`No element found for selector: ${F}`),await j.hover()}catch(j){M.error=j,M.hasError=!0}finally{_s(M)}}async select(F,...M){const j={stack:[],error:void 0,hasError:!1};try{const N=xs(j,await this.$(F),!1);return z(N,`No element found for selector: ${F}`),await N.select(...M)}catch(N){j.error=N,j.hasError=!0}finally{_s(j)}}async tap(F){const M={stack:[],error:void 0,hasError:!1};try{const j=xs(M,await this.$(F),!1);z(j,`No element found for selector: ${F}`),await j.tap()}catch(j){M.error=j,M.hasError=!0}finally{_s(M)}}async type(F,M,j){const N={stack:[],error:void 0,hasError:!1};try{const K=xs(N,await this.$(F),!1);z(K,`No element found for selector: ${F}`),await K.type(M,j)}catch(K){N.error=K,N.hasError=!0}finally{_s(N)}}async title(){return await this.isolatedRealm().evaluate(()=>document.title)}},D=new WeakMap,P=new WeakSet,xm=function(){return i(this,D)||f(this,D,this.mainRealm().evaluateHandle(()=>document)),i(this,D)},(()=>{const F=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[be],r=[be],n=[be],a=[be],o=[be],c=[be],u=[be],d=[be],h=[be],p=[be],m=[be],w=[be],b=[be],v=[be],y=[be],S=[be],E=[be],k=[be],_=[be],A=[be],it(I,null,e,{kind:"method",name:"frameElement",static:!1,private:!1,access:{has:M=>"frameElement"in M,get:M=>M.frameElement},metadata:F},null,t),it(I,null,r,{kind:"method",name:"evaluateHandle",static:!1,private:!1,access:{has:M=>"evaluateHandle"in M,get:M=>M.evaluateHandle},metadata:F},null,t),it(I,null,n,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:M=>"evaluate"in M,get:M=>M.evaluate},metadata:F},null,t),it(I,null,a,{kind:"method",name:"locator",static:!1,private:!1,access:{has:M=>"locator"in M,get:M=>M.locator},metadata:F},null,t),it(I,null,o,{kind:"method",name:"$",static:!1,private:!1,access:{has:M=>"$"in M,get:M=>M.$},metadata:F},null,t),it(I,null,c,{kind:"method",name:"$$",static:!1,private:!1,access:{has:M=>"$$"in M,get:M=>M.$$},metadata:F},null,t),it(I,null,u,{kind:"method",name:"$eval",static:!1,private:!1,access:{has:M=>"$eval"in M,get:M=>M.$eval},metadata:F},null,t),it(I,null,d,{kind:"method",name:"$$eval",static:!1,private:!1,access:{has:M=>"$$eval"in M,get:M=>M.$$eval},metadata:F},null,t),it(I,null,h,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:M=>"waitForSelector"in M,get:M=>M.waitForSelector},metadata:F},null,t),it(I,null,p,{kind:"method",name:"waitForFunction",static:!1,private:!1,access:{has:M=>"waitForFunction"in M,get:M=>M.waitForFunction},metadata:F},null,t),it(I,null,m,{kind:"method",name:"content",static:!1,private:!1,access:{has:M=>"content"in M,get:M=>M.content},metadata:F},null,t),it(I,null,w,{kind:"method",name:"addScriptTag",static:!1,private:!1,access:{has:M=>"addScriptTag"in M,get:M=>M.addScriptTag},metadata:F},null,t),it(I,null,b,{kind:"method",name:"addStyleTag",static:!1,private:!1,access:{has:M=>"addStyleTag"in M,get:M=>M.addStyleTag},metadata:F},null,t),it(I,null,v,{kind:"method",name:"click",static:!1,private:!1,access:{has:M=>"click"in M,get:M=>M.click},metadata:F},null,t),it(I,null,y,{kind:"method",name:"focus",static:!1,private:!1,access:{has:M=>"focus"in M,get:M=>M.focus},metadata:F},null,t),it(I,null,S,{kind:"method",name:"hover",static:!1,private:!1,access:{has:M=>"hover"in M,get:M=>M.hover},metadata:F},null,t),it(I,null,E,{kind:"method",name:"select",static:!1,private:!1,access:{has:M=>"select"in M,get:M=>M.select},metadata:F},null,t),it(I,null,k,{kind:"method",name:"tap",static:!1,private:!1,access:{has:M=>"tap"in M,get:M=>M.tap},metadata:F},null,t),it(I,null,_,{kind:"method",name:"type",static:!1,private:!1,access:{has:M=>"type"in M,get:M=>M.type},metadata:F},null,t),it(I,null,A,{kind:"method",name:"title",static:!1,private:!1,access:{has:M=>"title"in M,get:M=>M.title},metadata:F},null,t),F&&Object.defineProperty(I,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:F})})(),I})();class hg{constructor(){T(this,"_interceptionId");T(this,"_failureText",null);T(this,"_response",null);T(this,"_fromMemoryCache",!1);T(this,"_redirectChain",[]);T(this,"interception",{enabled:!1,handled:!1,handlers:[],resolutionState:{action:ii.None},requestOverrides:{},response:null,abortReason:null})}continueRequestOverrides(){return z(this.interception.enabled,"Request Interception is not enabled!"),this.interception.requestOverrides}responseForRequest(){return z(this.interception.enabled,"Request Interception is not enabled!"),this.interception.response}abortErrorReason(){return z(this.interception.enabled,"Request Interception is not enabled!"),this.interception.abortReason}interceptResolutionState(){return this.interception.enabled?this.interception.handled?{action:ii.AlreadyHandled}:{...this.interception.resolutionState}:{action:ii.Disabled}}isInterceptResolutionHandled(){return this.interception.handled}enqueueInterceptAction(t){this.interception.handlers.push(t)}async finalizeInterceptions(){await this.interception.handlers.reduce((e,r)=>e.then(r),Promise.resolve()),this.interception.handlers=[];const{action:t}=this.interceptResolutionState();switch(t){case"abort":return await this._abort(this.interception.abortReason);case"respond":if(this.interception.response===null)throw new Error("Response is missing for the interception");return await this._respond(this.interception.response);case"continue":return await this._continue(this.interception.requestOverrides)}}async continue(t={},e){if(!this.url().startsWith("data:")){if(z(this.interception.enabled,"Request Interception is not enabled!"),z(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._continue(t);if(this.interception.requestOverrides=t,this.interception.resolutionState.priority===void 0||e>this.interception.resolutionState.priority){this.interception.resolutionState={action:ii.Continue,priority:e};return}if(e===this.interception.resolutionState.priority){if(this.interception.resolutionState.action==="abort"||this.interception.resolutionState.action==="respond")return;this.interception.resolutionState.action=ii.Continue}}}async respond(t,e){if(!this.url().startsWith("data:")){if(z(this.interception.enabled,"Request Interception is not enabled!"),z(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._respond(t);if(this.interception.response=t,this.interception.resolutionState.priority===void 0||e>this.interception.resolutionState.priority){this.interception.resolutionState={action:ii.Respond,priority:e};return}if(e===this.interception.resolutionState.priority){if(this.interception.resolutionState.action==="abort")return;this.interception.resolutionState.action=ii.Respond}}}async abort(t="failed",e){if(this.url().startsWith("data:"))return;const r=iM[t];if(z(r,"Unknown error code: "+t),z(this.interception.enabled,"Request Interception is not enabled!"),z(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._abort(r);if(this.interception.abortReason=r,this.interception.resolutionState.priority===void 0||e>=this.interception.resolutionState.priority){this.interception.resolutionState={action:ii.Abort,priority:e};return}}static getResponse(t){const e=Li(t)?new TextEncoder().encode(t):t;return{contentLength:e.byteLength,base64:EC(e)}}}var ii;(function(s){s.Abort="abort",s.Respond="respond",s.Continue="continue",s.Disabled="disabled",s.None="none",s.AlreadyHandled="already-handled"})(ii||(ii={}));function qC(s){const t=[];for(const e in s){const r=s[e];if(!Object.is(r,void 0)){const n=Array.isArray(r)?r:[r];t.push(...n.map(a=>({name:e,value:a+""})))}}return t}const WC={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},iM={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};function fg(s){if(s.originalMessage.includes("Invalid header")||s.originalMessage.includes('Expected "header"')||s.originalMessage.includes("invalid argument"))throw s;te(s)}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class zC{constructor(){}ok(){const t=this.status();return t===0||t>=200&&t<=299}async buffer(){const t=await this.content();return Buffer.from(t)}async text(){const t=await this.content();return new TextDecoder().decode(t)}async json(){const t=await this.text();return JSON.parse(t)}}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class VC{constructor(){}}const $e=Object.freeze({Left:"left",Right:"right",Middle:"middle",Back:"back",Forward:"forward"});class GC{constructor(){}}class XC{constructor(){}async tap(t,e){await this.touchStart(t,e),await this.touchEnd()}}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const JC=3e4;class yv{constructor(){l(this,Wi);l(this,ya);f(this,Wi,null),f(this,ya,null)}setDefaultTimeout(t){f(this,Wi,t)}setDefaultNavigationTimeout(t){f(this,ya,t)}navigationTimeout(){return i(this,ya)!==null?i(this,ya):i(this,Wi)!==null?i(this,Wi):JC}timeout(){return i(this,Wi)!==null?i(this,Wi):JC}}Wi=new WeakMap,ya=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var sM=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},nM=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},vv=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},YC=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});function aM(s){s.optimizeForSpeed??(s.optimizeForSpeed=!1),s.type??(s.type="png"),s.fromSurface??(s.fromSurface=!0),s.fullPage??(s.fullPage=!1),s.omitBackground??(s.omitBackground=!1),s.encoding??(s.encoding="binary"),s.captureBeyondViewport??(s.captureBeyondViewport=!0)}let QC=(()=>{var r,n,a,o,c,Nx,d;let s=ie,t=[],e;return d=class extends s{constructor(){super();l(this,c);T(this,"_isDragging",(sM(this,t),!1));T(this,"_timeoutSettings",new yv);l(this,r,new WeakMap);l(this,n,new wT(1));l(this,a,0);l(this,o);Me(this,"request").pipe(vt(m=>ev(Cs(1),bd(Me(this,"requestfailed"),Me(this,"requestfinished"),Me(this,"response").pipe(tt(w=>w.request()))).pipe(Jn(w=>w.id===m.id),iv(1),tt(()=>-1)))),uI((m,w)=>Cs(m+w),0),dI(Me(this,"close")),lI(0)).subscribe(i(this,n))}on(m,w){if(m!=="request")return super.on(m,w);let b=i(this,r).get(w);return b===void 0&&(b=v=>{v.enqueueInterceptAction(()=>w(v))},i(this,r).set(w,b)),super.on(m,b)}off(m,w){return m==="request"&&(w=i(this,r).get(w)||w),super.off(m,w)}get accessibility(){return this.mainFrame().accessibility}locator(m){return typeof m=="string"?lg.create(this,m):og.create(this,m)}locatorRace(m){return Sc.race(m)}async $(m){return await this.mainFrame().$(m)}async $$(m,w){return await this.mainFrame().$$(m,w)}async evaluateHandle(m,...w){return m=bt(this.evaluateHandle.name,m),await this.mainFrame().evaluateHandle(m,...w)}async $eval(m,w,...b){return w=bt(this.$eval.name,w),await this.mainFrame().$eval(m,w,...b)}async $$eval(m,w,...b){return w=bt(this.$$eval.name,w),await this.mainFrame().$$eval(m,w,...b)}async addScriptTag(m){return await this.mainFrame().addScriptTag(m)}async addStyleTag(m){return await this.mainFrame().addStyleTag(m)}url(){return this.mainFrame().url()}async content(){return await this.mainFrame().content()}async setContent(m,w){await this.mainFrame().setContent(m,w)}async goto(m,w){return await this.mainFrame().goto(m,w)}async waitForNavigation(m={}){return await this.mainFrame().waitForNavigation(m)}waitForRequest(m,w={}){const{timeout:b=this._timeoutSettings.timeout(),signal:v}=w;if(typeof m=="string"){const S=m;m=E=>E.url()===S}const y=Me(this,"request").pipe(Cd(m),Ft(er(b),gc(v),Me(this,"close").pipe(tt(()=>{throw new Nr("Page closed!")}))));return yt(y)}waitForResponse(m,w={}){const{timeout:b=this._timeoutSettings.timeout(),signal:v}=w;if(typeof m=="string"){const S=m;m=E=>E.url()===S}const y=Me(this,"response").pipe(Cd(m),Ft(er(b),gc(v),Me(this,"close").pipe(tt(()=>{throw new Nr("Page closed!")}))));return yt(y)}waitForNetworkIdle(m={}){return yt(this.waitForNetworkIdle$(m))}waitForNetworkIdle$(m={}){const{timeout:w=this._timeoutSettings.timeout(),idleTime:b=SI,concurrency:v=0,signal:y}=m;return i(this,n).pipe(zm(S=>S>v?Gn:rv(b)),tt(()=>{}),Ft(er(w),gc(y),Me(this,"close").pipe(tt(()=>{throw new Nr("Page closed!")}))))}async waitForFrame(m,w={}){const{timeout:b=this.getDefaultTimeout(),signal:v}=w,y=Li(m)?S=>m===S.url():m;return await yt(bd(Me(this,"frameattached"),Me(this,"framenavigated"),ke(this.frames())).pipe(Cd(y),fc(),Ft(er(b),gc(v),Me(this,"close").pipe(tt(()=>{throw new Nr("Page closed.")})))))}async emulate(m){await Promise.all([this.setUserAgent(m.userAgent),this.setViewport(m.viewport)])}async evaluate(m,...w){return m=bt(this.evaluate.name,m),await this.mainFrame().evaluate(m,...w)}async _maybeWriteTypedArrayToFile(m,w){m&&await ks.value.fs.promises.writeFile(m,w)}async screencast(m={}){const w=ks.value.ScreenRecorder,[b,v,y]=await g(this,c,Nx).call(this);let S;if(m.crop){const{x:k,y:_,width:A,height:D}=ek(ZC(m.crop));if(k<0||_<0)throw new Error("`crop.x` and `crop.y` must be greater than or equal to 0.");if(A<=0||D<=0)throw new Error("`crop.height` and `crop.width` must be greater than or equal to 0.");const P=b/y,C=v/y;if(k+A>P)throw new Error(`\`crop.width\` cannot be larger than the viewport width (${P}).`);if(_+D>C)throw new Error(`\`crop.height\` cannot be larger than the viewport height (${C}).`);S={x:k*y,y:_*y,width:A*y,height:D*y}}if(m.speed!==void 0&&m.speed<=0)throw new Error("`speed` must be greater than 0.");if(m.scale!==void 0&&m.scale<=0)throw new Error("`scale` must be greater than 0.");const E=new w(this,b,v,{...m,path:m.ffmpegPath,crop:S});try{await this._startScreencast()}catch(k){throw E.stop(),k}if(m.path){const{createWriteStream:k}=ks.value.fs,_=k(m.path,"binary");E.pipe(_)}return E}async _startScreencast(){++ic(this,a)._,i(this,o)||f(this,o,this.mainFrame().client.send("Page.startScreencast",{format:"png"}).then(()=>new Promise(m=>this.mainFrame().client.once("Page.screencastFrame",()=>m())))),await i(this,o)}async _stopScreencast(){--ic(this,a)._,i(this,o)&&(f(this,o,void 0),i(this,a)===0&&await this.mainFrame().client.send("Page.stopScreencast"))}async screenshot(m={}){const w={stack:[],error:void 0,hasError:!1};try{const b=vv(w,await this.browserContext().startScreenshot(),!1);await this.bringToFront();const v={...m,clip:m.clip?{...m.clip}:void 0};if(v.type===void 0&&v.path!==void 0){const k=v.path;switch(k.slice(k.lastIndexOf(".")+1).toLowerCase()){case"png":v.type="png";break;case"jpeg":case"jpg":v.type="jpeg";break;case"webp":v.type="webp";break}}if(v.quality!==void 0){if(v.quality<0||v.quality>100)throw new Error(`Expected 'quality' (${v.quality}) to be between 0 and 100, inclusive.`);if(v.type===void 0||!["jpeg","webp"].includes(v.type))throw new Error(`${v.type??"png"} screenshots do not support 'quality'.`)}if(v.clip){if(v.clip.width<=0)throw new Error("'width' in 'clip' must be positive.");if(v.clip.height<=0)throw new Error("'height' in 'clip' must be positive.")}aM(v);const y=vv(w,new Gm,!0);if(v.clip){if(v.fullPage)throw new Error("'clip' and 'fullPage' are mutually exclusive");v.clip=ek(ZC(v.clip))}else if(v.fullPage){if(!v.captureBeyondViewport){const k=await this.mainFrame().isolatedRealm().evaluate(()=>{const A=document.documentElement;return{width:A.scrollWidth,height:A.scrollHeight}}),_=this.viewport();await this.setViewport({..._,...k}),y.defer(async()=>{await this.setViewport(_).catch(te)})}}else v.captureBeyondViewport=!1;const S=await this._screenshot(v);if(v.encoding==="base64")return S;const E=sv(S,!0);return await this._maybeWriteTypedArrayToFile(v.path,E),E}catch(b){w.error=b,w.hasError=!0}finally{const b=YC(w);b&&await b}}async title(){return await this.mainFrame().title()}click(m,w){return this.mainFrame().click(m,w)}focus(m){return this.mainFrame().focus(m)}hover(m){return this.mainFrame().hover(m)}select(m,...w){return this.mainFrame().select(m,...w)}tap(m){return this.mainFrame().tap(m)}type(m,w,b){return this.mainFrame().type(m,w,b)}async waitForSelector(m,w={}){return await this.mainFrame().waitForSelector(m,w)}waitForFunction(m,w,...b){return this.mainFrame().waitForFunction(m,w,...b)}[(e=[VI(function(){return this.browser()})],ae)](){return void this.close().catch(te)}[Lr](){return this.close()}},r=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,Nx=async function(){const m={stack:[],error:void 0,hasError:!1};try{const w=this.viewport(),b=vv(m,new rt,!1);return w&&w.deviceScaleFactor!==0&&(await this.setViewport({...w,deviceScaleFactor:0}),b.defer(()=>{this.setViewport(w).catch(te)})),await this.mainFrame().isolatedRealm().evaluate(()=>[window.visualViewport.width*window.devicePixelRatio,window.visualViewport.height*window.devicePixelRatio,window.devicePixelRatio])}catch(w){m.error=w,m.hasError=!0}finally{YC(m)}},(()=>{const m=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;nM(d,null,e,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:w=>"screenshot"in w,get:w=>w.screenshot},metadata:m},null,t),m&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})})(),d})();function ZC(s){return{...s,...s.width<0?{x:s.x+s.width,width:-s.width}:{x:s.x,width:s.width},...s.height<0?{y:s.y+s.height,height:-s.height}:{y:s.y,height:s.height}}}function ek(s){const t=Math.round(s.x),e=Math.round(s.y),r=Math.round(s.width+s.x-t),n=Math.round(s.height+s.y-e);return{...s,x:t,y:e,width:r,height:n}}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class oM{constructor(t,e,r,...n){l(this,zi);l(this,Qc);l(this,gh);l(this,Ns);l(this,va);l(this,wh);l(this,yh);l(this,ba,De.create());l(this,hr);l(this,Zc);l(this,eu,[]);var a;switch(f(this,zi,t),f(this,Qc,e.polling),f(this,gh,e.root),f(this,Zc,e.signal),(a=i(this,Zc))==null||a.addEventListener("abort",()=>{var o;this.terminate((o=i(this,Zc))==null?void 0:o.reason)},{once:!0}),typeof r){case"string":f(this,Ns,`() => {return (${r});}`);break;default:f(this,Ns,ri(r));break}f(this,va,n),i(this,zi).taskManager.add(this),e.timeout&&(f(this,yh,new Xm(`Waiting failed: ${e.timeout}ms exceeded`)),f(this,wh,setTimeout(()=>{this.terminate(i(this,yh))},e.timeout))),this.rerun()}get result(){return i(this,ba).valueOrThrow()}async rerun(){for(const e of i(this,eu))e.abort();i(this,eu).length=0;const t=new AbortController;i(this,eu).push(t);try{switch(i(this,Qc)){case"raf":f(this,hr,await i(this,zi).evaluateHandle(({RAFPoller:r,createFunction:n},a,...o)=>{const c=n(a);return new r(()=>c(...o))},lr.create(r=>r.puppeteerUtil),i(this,Ns),...i(this,va)));break;case"mutation":f(this,hr,await i(this,zi).evaluateHandle(({MutationPoller:r,createFunction:n},a,o,...c)=>{const u=n(o);return new r(()=>u(...c),a||document)},lr.create(r=>r.puppeteerUtil),i(this,gh),i(this,Ns),...i(this,va)));break;default:f(this,hr,await i(this,zi).evaluateHandle(({IntervalPoller:r,createFunction:n},a,o,...c)=>{const u=n(o);return new r(()=>u(...c),a)},lr.create(r=>r.puppeteerUtil),i(this,Qc),i(this,Ns),...i(this,va)));break}await i(this,hr).evaluate(r=>{r.start()});const e=await i(this,hr).evaluateHandle(r=>r.result());i(this,ba).resolve(e),await this.terminate()}catch(e){if(t.signal.aborted)return;const r=this.getBadError(e);r&&await this.terminate(r)}}async terminate(t){if(i(this,zi).taskManager.delete(this),clearTimeout(i(this,wh)),t&&!i(this,ba).finished()&&i(this,ba).reject(t),i(this,hr))try{await i(this,hr).evaluateHandle(async e=>{await e.stop()}),i(this,hr)&&(await i(this,hr).dispose(),f(this,hr,void 0))}catch{}}getBadError(t){return Cr(t)?t.message.includes("Execution context is not available in detached frame")?new Error("Waiting failed: Frame detached"):t.message.includes("Execution context was destroyed")||t.message.includes("Cannot find context with specified id")||t.message.includes("AbortError: Actor 'MessageHandlerFrame' destroyed")?void 0:t:new Error("WaitTask failed with an error",{cause:t})}}zi=new WeakMap,Qc=new WeakMap,gh=new WeakMap,Ns=new WeakMap,va=new WeakMap,wh=new WeakMap,yh=new WeakMap,ba=new WeakMap,hr=new WeakMap,Zc=new WeakMap,eu=new WeakMap;class cM{constructor(){l(this,$s,new Set)}add(t){i(this,$s).add(t)}delete(t){i(this,$s).delete(t)}terminateAll(t){for(const e of i(this,$s))e.terminate(t);i(this,$s).clear()}async rerunAll(){await Promise.all([...i(this,$s)].map(t=>t.rerun()))}}$s=new WeakMap;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let tk=(gx=class{constructor(t){T(this,"timeoutSettings");T(this,"taskManager",new cM);l(this,vh,!1);this.timeoutSettings=t}async waitForFunction(t,e={},...r){const{polling:n="raf",timeout:a=this.timeoutSettings.timeout(),root:o,signal:c}=e;if(typeof n=="number"&&n<0)throw new Error("Cannot poll with non-positive interval");return await new oM(this,{polling:n,root:o,timeout:a,signal:c},t,...r).result}get disposed(){return i(this,vh)}dispose(){f(this,vh,!0),this.taskManager.terminateAll(new Error("waitForFunction failed: frame got detached."))}[ae](){this.dispose()}},vh=new WeakMap,gx);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Ot;(function(s){s.PAGE="page",s.BACKGROUND_PAGE="background_page",s.SERVICE_WORKER="service_worker",s.SHARED_WORKER="shared_worker",s.BROWSER="browser",s.WEBVIEW="webview",s.OTHER="other",s.TAB="tab"})(Ot||(Ot={}));class Md{constructor(){}async worker(){return null}async page(){return null}}/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class rk extends ie{constructor(e){super();T(this,"timeoutSettings",new yv);l(this,bh);f(this,bh,e)}url(){return i(this,bh)}async evaluate(e,...r){return e=bt(this.evaluate.name,e),await this.mainRealm().evaluate(e,...r)}async evaluateHandle(e,...r){return e=bt(this.evaluateHandle.name,e),await this.mainRealm().evaluateHandle(e,...r)}async close(){throw new fe("WebWorker.close() is not supported")}}bh=new WeakMap;/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ik{constructor(t){l(this,Sa);f(this,Sa,t)}async snapshot(t={}){const{interestingOnly:e=!0,root:r=null}=t,{nodes:n}=await i(this,Sa).environment.client.send("Accessibility.getFullAXTree");let a;if(r){const{node:d}=await i(this,Sa).environment.client.send("DOM.describeNode",{objectId:r.id});a=d.backendNodeId}const o=bv.createTree(i(this,Sa),n);let c=o;if(a&&(c=o.find(d=>d.payload.backendDOMNodeId===a),!c))return null;if(!e)return this.serializeTree(c)[0]??null;const u=new Set;return this.collectInterestingNodes(u,o,!1),u.has(c)?this.serializeTree(c,u)[0]??null:null}serializeTree(t,e){const r=[];for(const a of t.children)r.push(...this.serializeTree(a,e));if(e&&!e.has(t))return r;const n=t.serialize();return r.length&&(n.children=r),[n]}collectInterestingNodes(t,e,r){if(e.isInteresting(r)&&t.add(e),!e.isLeafNode()){r=r||e.isControl();for(const n of e.children)this.collectInterestingNodes(t,n,r)}}}Sa=new WeakMap;const Rb=class Rb{constructor(t,e){l(this,Vi);T(this,"payload");T(this,"children",[]);l(this,tu,!1);l(this,Sh,!1);l(this,Ca,!1);l(this,Ch,!1);l(this,ka);l(this,fr);l(this,kh);l(this,Ea);l(this,Eh);this.payload=e,f(this,ka,this.payload.name?this.payload.name.value:""),f(this,fr,this.payload.role?this.payload.role.value:"Unknown"),f(this,kh,this.payload.ignored),f(this,Eh,t);for(const r of this.payload.properties||[])r.name==="editable"&&(f(this,tu,r.value.value==="richtext"),f(this,Sh,!0)),r.name==="focusable"&&f(this,Ca,r.value.value),r.name==="hidden"&&f(this,Ch,r.value.value)}find(t){if(t(this))return this;for(const e of this.children){const r=e.find(t);if(r)return r}return null}isLeafNode(){if(!this.children.length||g(this,Vi,$x).call(this)||g(this,Vi,Bx).call(this))return!0;switch(i(this,fr)){case"doc-cover":case"graphics-symbol":case"img":case"image":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return g(this,Vi,a0).call(this)?!1:!!(i(this,Ca)&&i(this,ka)||i(this,fr)==="heading"&&i(this,ka))}isControl(){switch(i(this,fr)){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":case"treeitem":return!0;default:return!1}}isInteresting(t){return i(this,fr)==="Ignored"||i(this,Ch)||i(this,kh)?!1:i(this,Ca)||i(this,tu)||this.isControl()?!0:t?!1:this.isLeafNode()&&!!i(this,ka)}serialize(){const t=new Map;for(const m of this.payload.properties||[])t.set(m.name.toLowerCase(),m.value.value);this.payload.name&&t.set("name",this.payload.name.value),this.payload.value&&t.set("value",this.payload.value.value),this.payload.description&&t.set("description",this.payload.description.value);const e={role:i(this,fr),elementHandle:async()=>this.payload.backendDOMNodeId?await i(this,Eh).adoptBackendNode(this.payload.backendDOMNodeId):null},r=["name","value","description","keyshortcuts","roledescription","valuetext"],n=m=>t.get(m);for(const m of r)t.has(m)&&(e[m]=n(m));const a=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"],o=m=>t.get(m);for(const m of a)m==="focused"&&i(this,fr)==="RootWebArea"||!o(m)||(e[m]=o(m));const c=["checked","pressed"];for(const m of c){if(!t.has(m))continue;const w=t.get(m);e[m]=w==="mixed"?"mixed":w==="true"}const u=["level","valuemax","valuemin"],d=m=>t.get(m);for(const m of u)t.has(m)&&(e[m]=d(m));const h=["autocomplete","haspopup","invalid","orientation"],p=m=>t.get(m);for(const m of h){const w=p(m);!w||w==="false"||(e[m]=p(m))}return e}static createTree(t,e){const r=new Map;for(const n of e)r.set(n.nodeId,new Rb(t,n));for(const n of r.values())for(const a of n.payload.childIds||[]){const o=r.get(a);o&&n.children.push(o)}return r.values().next().value}};tu=new WeakMap,Sh=new WeakMap,Ca=new WeakMap,Ch=new WeakMap,ka=new WeakMap,fr=new WeakMap,kh=new WeakMap,Ea=new WeakMap,Eh=new WeakMap,Vi=new WeakSet,$x=function(){return i(this,tu)?!1:i(this,Sh)?!0:i(this,fr)==="textbox"||i(this,fr)==="searchbox"},Bx=function(){const t=i(this,fr);return t==="LineBreak"||t==="text"||t==="InlineTextBox"||t==="StaticText"},a0=function(){var t;if(i(this,Ea)===void 0){f(this,Ea,!1);for(const e of this.children)if(i(e,Ca)||g(t=e,Vi,a0).call(t)){f(this,Ea,!0);break}}return i(this,Ea)};let bv=Rb;var uM=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},lM=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});class pg{constructor(t,e,r){l(this,Gi);l(this,xh);l(this,_h);f(this,Gi,t),f(this,xh,e),f(this,_h,r)}get name(){return i(this,Gi)}get initSource(){return i(this,_h)}async run(t,e,r,n){const a=new rt;try{if(!n){const o={stack:[],error:void 0,hasError:!1};try{const u=await uM(o,await t.evaluateHandle((d,h)=>globalThis[d].args.get(h),i(this,Gi),e),!1).getProperties();for(const[d,h]of u)if(d in r)switch(h.remoteObject().subtype){case"node":r[+d]=h;break;default:a.use(h)}else a.use(h)}catch(c){o.error=c,o.hasError=!0}finally{lM(o)}}await t.evaluate((o,c,u)=>{const d=globalThis[o].callbacks;d.get(c).resolve(u),d.delete(c)},i(this,Gi),e,await i(this,xh).call(this,...r));for(const o of r)o instanceof Zn&&a.use(o)}catch(o){Cr(o)?await t.evaluate((c,u,d,h)=>{const p=new Error(d);p.stack=h;const m=globalThis[c].callbacks;m.get(u).reject(p),m.delete(u)},i(this,Gi),e,o.message,o.stack).catch(te):await t.evaluate((c,u,d)=>{const h=globalThis[c].callbacks;h.get(u).reject(d),h.delete(u)},i(this,Gi),e,o).catch(te)}}}Gi=new WeakMap,xh=new WeakMap,_h=new WeakMap;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var dM=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},hM=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});class Sv extends DC{constructor(e,r,n){super();l(this,ru);l(this,Xi);l(this,li);f(this,ru,e),f(this,Xi,r),f(this,li,n)}get id(){return i(this,li)}targets(){return i(this,Xi).targets().filter(e=>e.browserContext()===this)}async pages(){return(await Promise.all(this.targets().filter(r=>{var n;return r.type()==="page"||r.type()==="other"&&((n=i(this,Xi)._getIsPageTargetCallback())==null?void 0:n(r))}).map(r=>r.page()))).filter(r=>!!r)}async overridePermissions(e,r){const n=r.map(a=>{const o=uv.get(a);if(!o)throw new Error("Unknown permission: "+a);return o});await i(this,ru).send("Browser.grantPermissions",{origin:e,browserContextId:i(this,li)||void 0,permissions:n})}async clearPermissionOverrides(){await i(this,ru).send("Browser.resetPermissions",{browserContextId:i(this,li)||void 0})}async newPage(){const e={stack:[],error:void 0,hasError:!1};try{const r=dM(e,await this.waitForScreenshotOperations(),!1);return await i(this,Xi)._createPageInContext(i(this,li))}catch(r){e.error=r,e.hasError=!0}finally{hM(e)}}browser(){return i(this,Xi)}async close(){z(i(this,li),"Default BrowserContext cannot be closed!"),await i(this,Xi)._disposeContext(i(this,li))}}ru=new WeakMap,Xi=new WeakMap,li=new WeakMap;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Cv{constructor(){l(this,Kr,new Map);l(this,Cw,pM())}create(t,e,r){const n=new fM(i(this,Cw).call(this),t,e);i(this,Kr).set(n.id,n);try{r(n.id)}catch(a){throw n.promise.catch(te).finally(()=>{i(this,Kr).delete(n.id)}),n.reject(a),a}return n.promise.finally(()=>{i(this,Kr).delete(n.id)})}reject(t,e,r){const n=i(this,Kr).get(t);n&&this._reject(n,e,r)}_reject(t,e,r){let n,a;e instanceof Yn?(n=e,n.cause=t.error,a=e.message):(n=t.error,a=e),t.reject(RC(n,`Protocol error (${t.label}): ${a}`,r))}resolve(t,e){const r=i(this,Kr).get(t);r&&r.resolve(e)}clear(){for(const t of i(this,Kr).values())this._reject(t,new Nr("Target closed"));i(this,Kr).clear()}getPendingProtocolErrors(){const t=[];for(const e of i(this,Kr).values())t.push(new Error(`${e.label} timed out. Trace: ${e.error.stack}`));return t}}Kr=new WeakMap,Cw=new WeakMap;class fM{constructor(t,e,r){l(this,Ph);l(this,Th,new Yn);l(this,xa,De.create());l(this,iu);l(this,Ih);f(this,Ph,t),f(this,Ih,e),r&&f(this,iu,setTimeout(()=>{i(this,xa).reject(RC(i(this,Th),`${e} timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.`))},r))}resolve(t){clearTimeout(i(this,iu)),i(this,xa).resolve(t)}reject(t){clearTimeout(i(this,iu)),i(this,xa).reject(t)}get id(){return i(this,Ph)}get promise(){return i(this,xa).valueOrThrow()}get error(){return i(this,Th)}get label(){return i(this,Ih)}}Ph=new WeakMap,Th=new WeakMap,xa=new WeakMap,iu=new WeakMap,Ih=new WeakMap;function pM(){let s=0;return()=>++s}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Cc extends kd{constructor(e,r,n,a){super();l(this,_a);l(this,su);l(this,Bs,new Cv);l(this,Ur);l(this,nu);l(this,au);f(this,Ur,e),f(this,su,r),f(this,_a,n),f(this,nu,a)}_setTarget(e){f(this,au,e)}_target(){return z(i(this,au),"Target must exist"),i(this,au)}connection(){return i(this,Ur)}parentSession(){var r;return i(this,nu)?((r=i(this,Ur))==null?void 0:r.session(i(this,nu)))??void 0:this}send(e,r,n){return i(this,Ur)?i(this,Ur)._rawSend(i(this,Bs),e,r,i(this,_a),n):Promise.reject(new Nr(`Protocol error (${e}): Session closed. Most likely the ${i(this,su)} has been closed.`))}_onMessage(e){e.id?e.error?i(this,Bs).reject(e.id,LC(e),e.error.message):i(this,Bs).resolve(e.id,e.result):(z(!e.id),this.emit(e.method,e.params))}async detach(){if(!i(this,Ur))throw new Error(`Session already detached. Most likely the ${i(this,su)} has been closed.`);await i(this,Ur).send("Target.detachFromTarget",{sessionId:i(this,_a)})}_onClosed(){i(this,Bs).clear(),f(this,Ur,void 0),this.emit(Oe.Disconnected,void 0)}id(){return i(this,_a)}getPendingProtocolErrors(){return i(this,Bs).getPendingProtocolErrors()}}_a=new WeakMap,su=new WeakMap,Bs=new WeakMap,Ur=new WeakMap,nu=new WeakMap,au=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class kv{constructor(t,e,r,n){l(this,Mh);l(this,Ah);l(this,Fh);l(this,ou);f(this,Mh,t),f(this,Ah,e),f(this,Fh,r),f(this,ou,n)}type(){return i(this,Mh)}text(){return i(this,Ah)}args(){return i(this,Fh)}location(){return i(this,ou)[0]??{}}stackTrace(){return i(this,ou)}}Mh=new WeakMap,Ah=new WeakMap,Fh=new WeakMap,ou=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class mM{constructor(t,e){l(this,cu);l(this,Dh);l(this,Pa,!1);f(this,cu,t),f(this,Dh,e.mode!=="selectSingle")}isMultiple(){return i(this,Dh)}async accept(t){z(!i(this,Pa),"Cannot accept FileChooser which is already handled!"),f(this,Pa,!0),await i(this,cu).uploadFile(...t)}async cancel(){z(!i(this,Pa),"Cannot cancel FileChooser which is already handled!"),f(this,Pa,!0),await i(this,cu).evaluate(t=>{t.dispatchEvent(new Event("cancel",{bubbles:!0}))})}}cu=new WeakMap,Dh=new WeakMap,Pa=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var St;(function(s){s.Request=Symbol("NetworkManager.Request"),s.RequestServedFromCache=Symbol("NetworkManager.RequestServedFromCache"),s.Response=Symbol("NetworkManager.Response"),s.RequestFailed=Symbol("NetworkManager.RequestFailed"),s.RequestFinished=Symbol("NetworkManager.RequestFinished")})(St||(St={}));/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const gM=pc("puppeteer:protocol:SEND "),wM=pc("puppeteer:protocol:RECV ");class sk extends ie{constructor(e,r,n=0,a){super();l(this,Rh);l(this,Oh);l(this,di);l(this,Ta);l(this,uu);l(this,Gt,new Map);l(this,Ia,!1);l(this,lu,new Set);l(this,js,new Cv);f(this,Oh,e),f(this,Ta,n),f(this,uu,a??18e4),f(this,di,r),i(this,di).onmessage=this.onMessage.bind(this),i(this,di).onclose=g(this,Rh,o0).bind(this)}static fromSession(e){return e.connection()}get delay(){return i(this,Ta)}get timeout(){return i(this,uu)}get _closed(){return i(this,Ia)}get _sessions(){return i(this,Gt)}session(e){return i(this,Gt).get(e)||null}url(){return i(this,Oh)}send(e,r,n){return this._rawSend(i(this,js),e,r,void 0,n)}_rawSend(e,r,n,a,o){return i(this,Ia)?Promise.reject(new Error("Protocol error: Connection closed.")):e.create(r,(o==null?void 0:o.timeout)??i(this,uu),c=>{const u=JSON.stringify({method:r,params:n,id:c,sessionId:a});gM(u),i(this,di).send(u)})}async closeBrowser(){await this.send("Browser.close")}async onMessage(e){i(this,Ta)&&await new Promise(n=>setTimeout(n,i(this,Ta))),wM(e);const r=JSON.parse(e);if(r.method==="Target.attachedToTarget"){const n=r.params.sessionId,a=new Cc(this,r.params.targetInfo.type,n,r.sessionId);i(this,Gt).set(n,a),this.emit(Oe.SessionAttached,a);const o=i(this,Gt).get(r.sessionId);o&&o.emit(Oe.SessionAttached,a)}else if(r.method==="Target.detachedFromTarget"){const n=i(this,Gt).get(r.params.sessionId);if(n){n._onClosed(),i(this,Gt).delete(r.params.sessionId),this.emit(Oe.SessionDetached,n);const a=i(this,Gt).get(r.sessionId);a&&a.emit(Oe.SessionDetached,n)}}if(r.sessionId){const n=i(this,Gt).get(r.sessionId);n&&n._onMessage(r)}else r.id?r.error?i(this,js).reject(r.id,LC(r),r.error.message):i(this,js).resolve(r.id,r.result):this.emit(r.method,r.params)}dispose(){g(this,Rh,o0).call(this),i(this,di).close()}isAutoAttached(e){return!i(this,lu).has(e)}async _createSession(e,r=!0){r||i(this,lu).add(e.targetId);const{sessionId:n}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});i(this,lu).delete(e.targetId);const a=i(this,Gt).get(n);if(!a)throw new Error("CDPSession creation failed.");return a}async createSession(e){return await this._createSession(e,!1)}getPendingProtocolErrors(){const e=[];e.push(...i(this,js).getPendingProtocolErrors());for(const r of i(this,Gt).values())e.push(...r.getPendingProtocolErrors());return e}}Oh=new WeakMap,di=new WeakMap,Ta=new WeakMap,uu=new WeakMap,Gt=new WeakMap,Ia=new WeakMap,lu=new WeakMap,js=new WeakMap,Rh=new WeakSet,o0=function(){if(!i(this,Ia)){f(this,Ia,!0),i(this,di).onmessage=void 0,i(this,di).onclose=void 0,i(this,js).clear();for(const e of i(this,Gt).values())e._onClosed();i(this,Gt).clear(),this.emit(Oe.Disconnected,void 0)}};function Ev(s){return s instanceof Nr}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class nk{constructor(t){l(this,Ma);l(this,Aa);f(this,Ma,new yM(t)),f(this,Aa,new vM(t))}updateClient(t){i(this,Ma).updateClient(t),i(this,Aa).updateClient(t)}async startJSCoverage(t={}){return await i(this,Ma).start(t)}async stopJSCoverage(){return await i(this,Ma).stop()}async startCSSCoverage(t={}){return await i(this,Aa).start(t)}async stopCSSCoverage(){return await i(this,Aa).stop()}}Ma=new WeakMap,Aa=new WeakMap;class yM{constructor(t){l(this,pu);l(this,Xt);l(this,Fa,!1);l(this,Da,new Map);l(this,Oa,new Map);l(this,du);l(this,Lh,!1);l(this,hu,!1);l(this,fu,!1);f(this,Xt,t)}updateClient(t){f(this,Xt,t)}async start(t={}){z(!i(this,Fa),"JSCoverage is already enabled");const{resetOnNavigation:e=!0,reportAnonymousScripts:r=!1,includeRawScriptCoverage:n=!1,useBlockCoverage:a=!0}=t;f(this,Lh,e),f(this,hu,r),f(this,fu,n),f(this,Fa,!0),i(this,Da).clear(),i(this,Oa).clear(),f(this,du,new rt);const o=i(this,du).use(new ie(i(this,Xt)));o.on("Debugger.scriptParsed",g(this,pu,Kx).bind(this)),o.on("Runtime.executionContextsCleared",g(this,pu,jx).bind(this)),await Promise.all([i(this,Xt).send("Profiler.enable"),i(this,Xt).send("Profiler.startPreciseCoverage",{callCount:i(this,fu),detailed:a}),i(this,Xt).send("Debugger.enable"),i(this,Xt).send("Debugger.setSkipAllPauses",{skip:!0})])}async stop(){var n;z(i(this,Fa),"JSCoverage is not enabled"),f(this,Fa,!1);const t=await Promise.all([i(this,Xt).send("Profiler.takePreciseCoverage"),i(this,Xt).send("Profiler.stopPreciseCoverage"),i(this,Xt).send("Profiler.disable"),i(this,Xt).send("Debugger.disable")]);(n=i(this,du))==null||n.dispose();const e=[],r=t[0];for(const a of r.result){let o=i(this,Da).get(a.scriptId);!o&&i(this,hu)&&(o="debugger://VM"+a.scriptId);const c=i(this,Oa).get(a.scriptId);if(c===void 0||o===void 0)continue;const u=[];for(const h of a.functions)u.push(...h.ranges);const d=ak(u);i(this,fu)?e.push({url:o,ranges:d,text:c,rawScriptCoverage:a}):e.push({url:o,ranges:d,text:c})}return e}}Xt=new WeakMap,Fa=new WeakMap,Da=new WeakMap,Oa=new WeakMap,du=new WeakMap,Lh=new WeakMap,hu=new WeakMap,fu=new WeakMap,pu=new WeakSet,jx=function(){i(this,Lh)&&(i(this,Da).clear(),i(this,Oa).clear())},Kx=async function(t){if(!ur.isPuppeteerURL(t.url)&&!(!t.url&&!i(this,hu)))try{const e=await i(this,Xt).send("Debugger.getScriptSource",{scriptId:t.scriptId});i(this,Da).set(t.scriptId,t.url),i(this,Oa).set(t.scriptId,e.scriptSource)}catch(e){te(e)}};class vM{constructor(t){l(this,gu);l(this,pr);l(this,Ra,!1);l(this,Ks,new Map);l(this,La,new Map);l(this,mu);l(this,Nh,!1);f(this,pr,t)}updateClient(t){f(this,pr,t)}async start(t={}){z(!i(this,Ra),"CSSCoverage is already enabled");const{resetOnNavigation:e=!0}=t;f(this,Nh,e),f(this,Ra,!0),i(this,Ks).clear(),i(this,La).clear(),f(this,mu,new rt);const r=i(this,mu).use(new ie(i(this,pr)));r.on("CSS.styleSheetAdded",g(this,gu,Hx).bind(this)),r.on("Runtime.executionContextsCleared",g(this,gu,Ux).bind(this)),await Promise.all([i(this,pr).send("DOM.enable"),i(this,pr).send("CSS.enable"),i(this,pr).send("CSS.startRuleUsageTracking")])}async stop(){var n;z(i(this,Ra),"CSSCoverage is not enabled"),f(this,Ra,!1);const t=await i(this,pr).send("CSS.stopRuleUsageTracking");await Promise.all([i(this,pr).send("CSS.disable"),i(this,pr).send("DOM.disable")]),(n=i(this,mu))==null||n.dispose();const e=new Map;for(const a of t.ruleUsage){let o=e.get(a.styleSheetId);o||(o=[],e.set(a.styleSheetId,o)),o.push({startOffset:a.startOffset,endOffset:a.endOffset,count:a.used?1:0})}const r=[];for(const a of i(this,Ks).keys()){const o=i(this,Ks).get(a);z(typeof o<"u",`Stylesheet URL is undefined (styleSheetId=${a})`);const c=i(this,La).get(a);z(typeof c<"u",`Stylesheet text is undefined (styleSheetId=${a})`);const u=ak(e.get(a)||[]);r.push({url:o,ranges:u,text:c})}return r}}pr=new WeakMap,Ra=new WeakMap,Ks=new WeakMap,La=new WeakMap,mu=new WeakMap,Nh=new WeakMap,gu=new WeakSet,Ux=function(){i(this,Nh)&&(i(this,Ks).clear(),i(this,La).clear())},Hx=async function(t){const e=t.header;if(e.sourceURL)try{const r=await i(this,pr).send("CSS.getStyleSheetText",{styleSheetId:e.styleSheetId});i(this,Ks).set(e.styleSheetId,e.sourceURL),i(this,La).set(e.styleSheetId,r.text)}catch(r){te(r)}};function ak(s){const t=[];for(const a of s)t.push({offset:a.startOffset,type:0,range:a}),t.push({offset:a.endOffset,type:1,range:a});t.sort((a,o)=>{if(a.offset!==o.offset)return a.offset-o.offset;if(a.type!==o.type)return o.type-a.type;const c=a.range.endOffset-a.range.startOffset,u=o.range.endOffset-o.range.startOffset;return a.type===0?u-c:c-u});const e=[],r=[];let n=0;for(const a of t){if(e.length&&n<a.offset&&e[e.length-1]>0){const o=r[r.length-1];o&&o.end===n?o.end=a.offset:r.push({start:n,end:a.offset})}n=a.offset,a.type===0?e.push(a.range.count):e.pop()}return r.filter(a=>a.end-a.start>0)}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class bM extends OC{constructor(e,r,n,a=""){super(r,n,a);l(this,$h);f(this,$h,e)}async handle(e){await i(this,$h).send("Page.handleJavaScriptDialog",{accept:e.accept,promptText:e.text})}}$h=new WeakMap;var SM=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},si=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},ni=function(s,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",t):t})};class ai{constructor(t,e,r){l(this,Na);l(this,wu);l(this,Bh);f(this,Na,t),f(this,wu,e),f(this,Bh,r),i(this,wu).registerState(this)}async setState(t){f(this,Na,t),await this.sync()}get state(){return i(this,Na)}async sync(){await Promise.all(i(this,wu).clients().map(t=>i(this,Bh).call(this,t,i(this,Na))))}}Na=new WeakMap,wu=new WeakMap,Bh=new WeakMap;let ok=(()=>{var A,D,P,C,I,B,O,F,M,j,N,K,U,W,re,H,c0,u0,l0,d0,h0,f0,p0,m0,g0,w0,Fe;let s=[],t,e,r,n,a,o,c,u,d,h,p,m,w,b,v,y,S,E,k,_;return Fe=class{constructor(Q){l(this,H);l(this,A,SM(this,s));l(this,D,!1);l(this,P,!1);l(this,C,[]);l(this,I,new ai({active:!1},this,i(this,H,c0)));l(this,B,new ai({active:!1},this,i(this,H,u0)));l(this,O,new ai({active:!1},this,i(this,H,l0)));l(this,F,new ai({active:!1},this,i(this,H,d0)));l(this,M,new ai({active:!1},this,i(this,H,h0)));l(this,j,new ai({active:!1},this,i(this,H,f0)));l(this,N,new ai({active:!1},this,i(this,H,p0)));l(this,K,new ai({active:!1},this,i(this,H,m0)));l(this,U,new ai({active:!1},this,i(this,H,g0)));l(this,W,new ai({javaScriptEnabled:!0,active:!1},this,i(this,H,w0)));l(this,re,new Set);f(this,A,Q)}updateClient(Q){f(this,A,Q),i(this,re).delete(Q)}registerState(Q){i(this,C).push(Q)}clients(){return[i(this,A),...Array.from(i(this,re))]}async registerSpeculativeSession(Q){i(this,re).add(Q),Q.once(Oe.Disconnected,()=>{i(this,re).delete(Q)}),Promise.all(i(this,C).map(X=>X.sync().catch(te)))}get javascriptEnabled(){return i(this,W).state.javaScriptEnabled}async emulateViewport(Q){const X=i(this,I).state;if(!Q&&!X.active)return!1;await i(this,I).setState(Q?{viewport:Q,active:!0}:{active:!1});const ue=(Q==null?void 0:Q.isMobile)||!1,ct=(Q==null?void 0:Q.hasTouch)||!1,od=i(this,D)!==ue||i(this,P)!==ct;return f(this,D,ue),f(this,P,ct),od}async emulateIdleState(Q){await i(this,B).setState({active:!0,overrides:Q})}async emulateTimezone(Q){await i(this,O).setState({timezoneId:Q,active:!0})}async emulateVisionDeficiency(Q){z(!Q||new Set(["none","achromatopsia","blurredVision","deuteranopia","protanopia","tritanopia"]).has(Q),`Unsupported vision deficiency: ${Q}`),await i(this,F).setState({active:!0,visionDeficiency:Q})}async emulateCPUThrottling(Q){z(Q===null||Q>=1,"Throttling rate should be greater or equal to 1"),await i(this,M).setState({active:!0,factor:Q??void 0})}async emulateMediaFeatures(Q){if(Array.isArray(Q))for(const X of Q){const ue=X.name;z(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(ue),"Unsupported media feature: "+ue)}await i(this,j).setState({active:!0,mediaFeatures:Q})}async emulateMediaType(Q){z(Q==="screen"||Q==="print"||(Q??void 0)===void 0,"Unsupported media type: "+Q),await i(this,N).setState({type:Q,active:!0})}async setGeolocation(Q){const{longitude:X,latitude:ue,accuracy:ct=0}=Q;if(X<-180||X>180)throw new Error(`Invalid longitude "${X}": precondition -180 <= LONGITUDE <= 180 failed.`);if(ue<-90||ue>90)throw new Error(`Invalid latitude "${ue}": precondition -90 <= LATITUDE <= 90 failed.`);if(ct<0)throw new Error(`Invalid accuracy "${ct}": precondition 0 <= ACCURACY failed.`);await i(this,K).setState({active:!0,geoLocation:{longitude:X,latitude:ue,accuracy:ct}})}async resetDefaultBackgroundColor(){await i(this,U).setState({active:!0,color:void 0})}async setTransparentBackgroundColor(){await i(this,U).setState({active:!0,color:{r:0,g:0,b:0,a:0}})}async setJavaScriptEnabled(Q){await i(this,W).setState({active:!0,javaScriptEnabled:Q})}},A=new WeakMap,D=new WeakMap,P=new WeakMap,C=new WeakMap,I=new WeakMap,B=new WeakMap,O=new WeakMap,F=new WeakMap,M=new WeakMap,j=new WeakMap,N=new WeakMap,K=new WeakMap,U=new WeakMap,W=new WeakMap,re=new WeakMap,H=new WeakSet,c0=function(){return e.value},u0=function(){return n.value},l0=function(){return o.value},d0=function(){return u.value},h0=function(){return h.value},f0=function(){return m.value},p0=function(){return b.value},m0=function(){return y.value},g0=function(){return E.value},w0=function(){return _.value},(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[$r],r=[$r],a=[$r],c=[$r],d=[$r],p=[$r],w=[$r],v=[$r],S=[$r],k=[$r],si(Fe,e={value:ni(async function(X,ue){if(!ue.viewport){await Promise.all([X.send("Emulation.clearDeviceMetricsOverride"),X.send("Emulation.setTouchEmulationEnabled",{enabled:!1})]).catch(te);return}const{viewport:ct}=ue,od=ct.isMobile||!1,uy=ct.width,ly=ct.height,dy=ct.deviceScaleFactor??1,hy=ct.isLandscape?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"},fy=ct.hasTouch||!1;await Promise.all([X.send("Emulation.setDeviceMetricsOverride",{mobile:od,width:uy,height:ly,deviceScaleFactor:dy,screenOrientation:hy}).catch(cd=>{if(cd.message.includes("Target does not support metrics override")){te(cd);return}throw cd}),X.send("Emulation.setTouchEmulationEnabled",{enabled:fy})])},"#applyViewport")},t,{kind:"method",name:"#applyViewport",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,c0)},metadata:Q},null,s),si(Fe,n={value:ni(async function(X,ue){ue.active&&(ue.overrides?await X.send("Emulation.setIdleOverride",{isUserActive:ue.overrides.isUserActive,isScreenUnlocked:ue.overrides.isScreenUnlocked}):await X.send("Emulation.clearIdleOverride"))},"#emulateIdleState")},r,{kind:"method",name:"#emulateIdleState",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,u0)},metadata:Q},null,s),si(Fe,o={value:ni(async function(X,ue){if(ue.active)try{await X.send("Emulation.setTimezoneOverride",{timezoneId:ue.timezoneId||""})}catch(ct){throw Cr(ct)&&ct.message.includes("Invalid timezone")?new Error(`Invalid timezone ID: ${ue.timezoneId}`):ct}},"#emulateTimezone")},a,{kind:"method",name:"#emulateTimezone",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,l0)},metadata:Q},null,s),si(Fe,u={value:ni(async function(X,ue){ue.active&&await X.send("Emulation.setEmulatedVisionDeficiency",{type:ue.visionDeficiency||"none"})},"#emulateVisionDeficiency")},c,{kind:"method",name:"#emulateVisionDeficiency",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,d0)},metadata:Q},null,s),si(Fe,h={value:ni(async function(X,ue){ue.active&&await X.send("Emulation.setCPUThrottlingRate",{rate:ue.factor??1})},"#emulateCpuThrottling")},d,{kind:"method",name:"#emulateCpuThrottling",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,h0)},metadata:Q},null,s),si(Fe,m={value:ni(async function(X,ue){ue.active&&await X.send("Emulation.setEmulatedMedia",{features:ue.mediaFeatures})},"#emulateMediaFeatures")},p,{kind:"method",name:"#emulateMediaFeatures",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,f0)},metadata:Q},null,s),si(Fe,b={value:ni(async function(X,ue){ue.active&&await X.send("Emulation.setEmulatedMedia",{media:ue.type||""})},"#emulateMediaType")},w,{kind:"method",name:"#emulateMediaType",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,p0)},metadata:Q},null,s),si(Fe,y={value:ni(async function(X,ue){ue.active&&await X.send("Emulation.setGeolocationOverride",ue.geoLocation?{longitude:ue.geoLocation.longitude,latitude:ue.geoLocation.latitude,accuracy:ue.geoLocation.accuracy}:void 0)},"#setGeolocation")},v,{kind:"method",name:"#setGeolocation",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,m0)},metadata:Q},null,s),si(Fe,E={value:ni(async function(X,ue){ue.active&&await X.send("Emulation.setDefaultBackgroundColorOverride",{color:ue.color})},"#setDefaultBackgroundColor")},S,{kind:"method",name:"#setDefaultBackgroundColor",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,g0)},metadata:Q},null,s),si(Fe,_={value:ni(async function(X,ue){ue.active&&await X.send("Emulation.setScriptExecutionDisabled",{value:!ue.javaScriptEnabled})},"#setJavaScriptEnabled")},k,{kind:"method",name:"#setJavaScriptEnabled",static:!1,private:!0,access:{has:X=>Zt(H,X),get:X=>i(X,H,w0)},metadata:Q},null,s),Q&&Object.defineProperty(Fe,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q})})(),Fe})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ck extends ie{constructor(e,r,n){super();l(this,Ba);l(this,xr);l(this,$a,new Map);l(this,hi,new Map);l(this,jh,new Map);l(this,yu);l(this,vu);l(this,Us,new WeakMap);l(this,Kh,De.create());l(this,bu,new Set);l(this,kw,e=>{this.removeSessionListeners(e),i(this,jh).delete(e.id())});l(this,Uh,async e=>{if(i(this,$a).has(e.targetInfo.targetId))return;if(i(this,$a).set(e.targetInfo.targetId,e.targetInfo),e.targetInfo.type==="browser"&&e.targetInfo.attached){const n=i(this,vu).call(this,e.targetInfo,void 0);n._initialize(),i(this,hi).set(e.targetInfo.targetId,n),g(this,Ba,_m).call(this,n._targetId);return}const r=i(this,vu).call(this,e.targetInfo,void 0);if(i(this,yu)&&!i(this,yu).call(this,r)){g(this,Ba,_m).call(this,e.targetInfo.targetId);return}r._initialize(),i(this,hi).set(e.targetInfo.targetId,r),this.emit("targetAvailable",r),g(this,Ba,_m).call(this,r._targetId)});l(this,Hh,e=>{i(this,$a).delete(e.targetId),g(this,Ba,_m).call(this,e.targetId);const r=i(this,hi).get(e.targetId);r&&(this.emit("targetGone",r),i(this,hi).delete(e.targetId))});l(this,Ew,async(e,r)=>{const n=r.targetInfo,a=i(this,xr).session(r.sessionId);if(!a)throw new Error(`Session ${r.sessionId} was not created.`);const o=i(this,hi).get(n.targetId);z(o,`Target ${n.targetId} is missing`),a._setTarget(o),this.setupAttachmentListeners(a),i(this,jh).set(a.id(),i(this,hi).get(n.targetId)),e.emit(Oe.Ready,a)});f(this,xr,e),f(this,yu,n),f(this,vu,r),i(this,xr).on("Target.targetCreated",i(this,Uh)),i(this,xr).on("Target.targetDestroyed",i(this,Hh)),i(this,xr).on(Oe.SessionDetached,i(this,kw)),this.setupAttachmentListeners(i(this,xr))}setupAttachmentListeners(e){const r=n=>i(this,Ew).call(this,e,n);z(!i(this,Us).has(e)),i(this,Us).set(e,r),e.on("Target.attachedToTarget",r)}removeSessionListeners(e){i(this,Us).has(e)&&(e.off("Target.attachedToTarget",i(this,Us).get(e)),i(this,Us).delete(e))}getAvailableTargets(){return i(this,hi)}getChildTargets(e){return new Set}dispose(){i(this,xr).off("Target.targetCreated",i(this,Uh)),i(this,xr).off("Target.targetDestroyed",i(this,Hh))}async initialize(){await i(this,xr).send("Target.setDiscoverTargets",{discover:!0,filter:[{}]}),f(this,bu,new Set(i(this,$a).keys())),await i(this,Kh).valueOrThrow()}}xr=new WeakMap,$a=new WeakMap,hi=new WeakMap,jh=new WeakMap,yu=new WeakMap,vu=new WeakMap,Us=new WeakMap,Kh=new WeakMap,bu=new WeakMap,kw=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,Ew=new WeakMap,Ba=new WeakSet,_m=function(e){i(this,bu).delete(e),i(this,bu).size===0&&i(this,Kh).resolve()};/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class CM{constructor(t,e,r){l(this,qh);l(this,Wh);l(this,Su,new WeakMap);f(this,qh,e),f(this,Wh,r),i(this,Su).set(t,e)}get id(){return i(this,qh)}get source(){return i(this,Wh)}getIdForFrame(t){return i(this,Su).get(t)}setIdForFrame(t,e){i(this,Su).set(t,e)}}qh=new WeakMap,Wh=new WeakMap,Su=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class kM{constructor(t,e){T(this,"id");T(this,"name");this.id=t,this.name=e}}class EM{constructor(t,e,r){l(this,Vh);l(this,mr);l(this,zh);l(this,ja);l(this,Ka,!1);l(this,Cu,g(this,Vh,y0).bind(this));l(this,ku,new Set);T(this,"devices",[]);f(this,mr,t),f(this,zh,e),f(this,ja,r.id),i(this,mr).on("DeviceAccess.deviceRequestPrompted",i(this,Cu)),i(this,mr).on("Target.detachedFromTarget",()=>{f(this,mr,null)}),g(this,Vh,y0).call(this,r)}async waitForDevice(t,e={}){for(const o of this.devices)if(t(o))return o;const{timeout:r=i(this,zh).timeout()}=e,n=De.create({message:`Waiting for \`DeviceRequestPromptDevice\` failed: ${r}ms exceeded`,timeout:r}),a={filter:t,promise:n};i(this,ku).add(a);try{return await n.valueOrThrow()}finally{i(this,ku).delete(a)}}async select(t){return z(i(this,mr)!==null,"Cannot select device through detached session!"),z(this.devices.includes(t),"Cannot select unknown device!"),z(!i(this,Ka),"Cannot select DeviceRequestPrompt which is already handled!"),i(this,mr).off("DeviceAccess.deviceRequestPrompted",i(this,Cu)),f(this,Ka,!0),await i(this,mr).send("DeviceAccess.selectPrompt",{id:i(this,ja),deviceId:t.id})}async cancel(){return z(i(this,mr)!==null,"Cannot cancel prompt through detached session!"),z(!i(this,Ka),"Cannot cancel DeviceRequestPrompt which is already handled!"),i(this,mr).off("DeviceAccess.deviceRequestPrompted",i(this,Cu)),f(this,Ka,!0),await i(this,mr).send("DeviceAccess.cancelPrompt",{id:i(this,ja)})}}mr=new WeakMap,zh=new WeakMap,ja=new WeakMap,Ka=new WeakMap,Cu=new WeakMap,ku=new WeakMap,Vh=new WeakSet,y0=function(t){if(t.id===i(this,ja))for(const e of t.devices){if(this.devices.some(n=>n.id===e.id))continue;const r=new kM(e.id,e.name);this.devices.push(r);for(const n of i(this,ku))n.filter(r)&&n.promise.resolve(r)}};class xM{constructor(t,e){l(this,xw);l(this,Hr);l(this,Eu);l(this,Ji,new Set);f(this,Hr,t),f(this,Eu,e),i(this,Hr).on("DeviceAccess.deviceRequestPrompted",r=>{g(this,xw,qx).call(this,r)}),i(this,Hr).on("Target.detachedFromTarget",()=>{f(this,Hr,null)})}async waitForDevicePrompt(t={}){z(i(this,Hr)!==null,"Cannot wait for device prompt through detached session!");const e=i(this,Ji).size===0;let r;e&&(r=i(this,Hr).send("DeviceAccess.enable"));const{timeout:n=i(this,Eu).timeout()}=t,a=De.create({message:`Waiting for \`DeviceRequestPrompt\` failed: ${n}ms exceeded`,timeout:n});i(this,Ji).add(a);try{const[o]=await Promise.all([a.valueOrThrow(),r]);return o}finally{i(this,Ji).delete(a)}}}Hr=new WeakMap,Eu=new WeakMap,Ji=new WeakMap,xw=new WeakSet,qx=function(t){if(!i(this,Ji).size)return;z(i(this,Hr)!==null);const e=new EM(i(this,Hr),i(this,Eu),t);for(const r of i(this,Ji))r.resolve(e);i(this,Ji).clear()};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function uk(s){let t,e;if(!s.exception)t="Error",e=s.text;else{if((s.exception.type!=="object"||s.exception.subtype!=="error")&&!s.exception.objectId)return ea(s.exception);{const c=lk(s);t=c.name,e=c.message}}const r=e.split(`
`).length,n=new Error(e);n.name=t;const a=n.stack.split(`
`),o=a.splice(0,r);if(a.shift(),s.stackTrace&&a.length<Error.stackTraceLimit)for(const c of s.stackTrace.callFrames.reverse()){if(ur.isPuppeteerURL(c.url)&&c.url!==ur.INTERNAL_URL){const u=ur.parse(c.url);a.unshift(`    at ${c.functionName||u.functionName} (${u.functionName} at ${u.siteString}, <anonymous>:${c.lineNumber}:${c.columnNumber})`)}else a.push(`    at ${c.functionName||"<anonymous>"} (${c.url}:${c.lineNumber}:${c.columnNumber})`);if(a.length>=Error.stackTraceLimit)break}return n.stack=[...o,...a].join(`
`),n}const lk=s=>{var a,o,c,u;let t="",e;const r=((o=(a=s.exception)==null?void 0:a.description)==null?void 0:o.split(`
    at `))??[],n=Math.min(((c=s.stackTrace)==null?void 0:c.callFrames.length)??0,r.length-1);return r.splice(-n,n),(u=s.exception)!=null&&u.className&&(t=s.exception.className),e=r.join(`
`),t&&e.startsWith(`${t}: `)&&(e=e.slice(t.length+2)),{message:e,name:t}};function _M(s){let t,e;if(!s.exception)t="Error",e=s.text;else{if((s.exception.type!=="object"||s.exception.subtype!=="error")&&!s.exception.objectId)return ea(s.exception);{const c=lk(s);t=c.name,e=c.message}}const r=new Error(e);r.name=t;const n=r.message.split(`
`).length,a=r.stack.split(`
`).splice(0,n),o=[];if(s.stackTrace){for(const c of s.stackTrace.callFrames)if(o.push(`    at ${c.functionName||"<anonymous>"} (${c.url}:${c.lineNumber+1}:${c.columnNumber+1})`),o.length>=Error.stackTraceLimit)break}return r.stack=[...a,...o].join(`
`),r}function ea(s){if(z(!s.objectId,"Cannot extract value when objectId is given"),s.unserializableValue){if(s.type==="bigint")return BigInt(s.unserializableValue.replace("n",""));switch(s.unserializableValue){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unsupported unserializable value: "+s.unserializableValue)}}return s.value}function dk(s,t,e){globalThis[t]||Object.assign(globalThis,{[t](...r){const n=globalThis[t];n.args??(n.args=new Map),n.callbacks??(n.callbacks=new Map);const a=(n.lastSeq??0)+1;return n.lastSeq=a,n.args.set(a,r),globalThis[e+t](JSON.stringify({type:s,name:t,seq:a,args:r,isTrivial:!r.some(o=>o instanceof Node)})),new Promise((o,c)=>{n.callbacks.set(a,{resolve(u){n.args.delete(a),o(u)},reject(u){n.args.delete(a),c(u)}})})}})}const kc="puppeteer_";function PM(s,t){return ov(dk,s,t,kc)}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class mg extends Zn{constructor(e,r){super();l(this,xu,!1);l(this,ir);l(this,_u);f(this,_u,e),f(this,ir,r)}get disposed(){return i(this,xu)}get realm(){return i(this,_u)}get client(){return this.realm.environment.client}async jsonValue(){if(!i(this,ir).objectId)return ea(i(this,ir));const e=await this.evaluate(r=>r);if(e===void 0)throw new Error("Could not serialize referenced object");return e}asElement(){return null}async dispose(){i(this,xu)||(f(this,xu,!0),await hk(this.client,i(this,ir)))}toString(){return i(this,ir).objectId?"JSHandle@"+(i(this,ir).subtype||i(this,ir).type):"JSHandle:"+ea(i(this,ir))}get id(){return i(this,ir).objectId}remoteObject(){return i(this,ir)}async getProperties(){const e=await this.client.send("Runtime.getProperties",{objectId:i(this,ir).objectId,ownProperties:!0}),r=new Map;for(const n of e.result)!n.enumerable||!n.value||r.set(n.name,i(this,_u).createCdpHandle(n.value));return r}}xu=new WeakMap,ir=new WeakMap,_u=new WeakMap;async function hk(s,t){t.objectId&&await s.send("Runtime.releaseObject",{objectId:t.objectId}).catch(e=>{te(e)})}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var TM=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},gg=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};const IM=new Set(["StaticText","InlineTextBox"]);let fk=(()=>{var u,Wx,h;var s,t;let e=Id,r=[],n,a,o,c;return h=class extends e{constructor(w,b){super(new mg(w,b));l(this,u);TM(this,r)}get realm(){return this.handle.realm}get client(){return this.handle.client}remoteObject(){return this.handle.remoteObject()}get frame(){return this.realm.environment}async contentFrame(){const w=await this.client.send("DOM.describeNode",{objectId:this.id});return typeof w.node.frameId!="string"?null:i(this,u,Wx).frame(w.node.frameId)}async scrollIntoView(){await this.assertConnectedElement();try{await this.client.send("DOM.scrollIntoViewIfNeeded",{objectId:this.id})}catch(w){te(w),await super.scrollIntoView()}}async uploadFile(...w){const b=await this.evaluate(E=>E.multiple);z(w.length<=1||b,"Multiple file uploads only work with <input type=file multiple>");const v=ks.value.path,y=w.map(E=>v.win32.isAbsolute(E)||v.posix.isAbsolute(E)?E:v.resolve(E));if(y.length===0){await this.evaluate(E=>{E.files=new DataTransfer().files,E.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),E.dispatchEvent(new Event("change",{bubbles:!0}))});return}const{node:{backendNodeId:S}}=await this.client.send("DOM.describeNode",{objectId:this.id});await this.client.send("DOM.setFileInputFiles",{objectId:this.id,files:y,backendNodeId:S})}async autofill(w){const v=(await this.client.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,y=this.frame._id;await this.client.send("Autofill.trigger",{fieldId:v,frameId:y,card:w.creditCard})}async*queryAXTree(w,b){const{nodes:v}=await this.client.send("Accessibility.queryAXTree",{objectId:this.id,accessibleName:w,role:b}),y=v.filter(S=>!(S.ignored||!S.role||IM.has(S.role.value)));return yield*yc.map(y,S=>this.realm.adoptBackendNode(S.backendDOMNodeId))}},u=new WeakSet,Wx=function(){return this.frame._frameManager},(()=>{const w=typeof Symbol=="function"&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;n=[G()],a=[G(),(s=Id).bindIsolatedHandle.bind(s)],o=[G(),(t=Id).bindIsolatedHandle.bind(t)],c=[G()],gg(h,null,n,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:b=>"contentFrame"in b,get:b=>b.contentFrame},metadata:w},null,r),gg(h,null,a,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:b=>"scrollIntoView"in b,get:b=>b.scrollIntoView},metadata:w},null,r),gg(h,null,o,{kind:"method",name:"uploadFile",static:!1,private:!1,access:{has:b=>"uploadFile"in b,get:b=>b.uploadFile},metadata:w},null,r),gg(h,null,c,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:b=>"autofill"in b,get:b=>b.autofill},metadata:w},null,r),w&&Object.defineProperty(h,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w})})(),h})();/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var MM=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},AM=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});const FM=new pg("__ariaQuerySelector",Qn.queryOne,""),DM=new pg("__ariaQuerySelectorAll",async(s,t)=>{const e=Qn.queryAll(s,t);return await s.realm.evaluateHandle((...r)=>r,...await yc.collect(e))},"");class pk extends ie{constructor(e,r,n){super();l(this,sr);l(this,Hs);l(this,Ua);l(this,qr);l(this,Pu);l(this,Gh,new rt);l(this,Ha,new Map);l(this,_w,new lv);l(this,Xh,!1);l(this,qs);f(this,Hs,e),f(this,Ua,n),f(this,qr,r.id),r.name&&f(this,Pu,r.name);const a=i(this,Gh).use(new ie(i(this,Hs)));a.on("Runtime.bindingCalled",g(this,sr,Vx).bind(this)),a.on("Runtime.executionContextDestroyed",async o=>{o.executionContextId===i(this,qr)&&this[ae]()}),a.on("Runtime.executionContextsCleared",async()=>{this[ae]()}),a.on("Runtime.consoleAPICalled",g(this,sr,Gx).bind(this)),a.on(Oe.Disconnected,()=>{this[ae]()})}get id(){return i(this,qr)}get puppeteerUtil(){let e=Promise.resolve();return i(this,Xh)||(e=Promise.all([g(this,sr,v0).call(this,FM),g(this,sr,v0).call(this,DM)]),f(this,Xh,!0)),Ed.inject(r=>{i(this,qs)&&i(this,qs).then(n=>{n.dispose()}),f(this,qs,e.then(()=>this.evaluateHandle(r)))},!i(this,qs)),i(this,qs)}async evaluate(e,...r){return await g(this,sr,b0).call(this,!0,e,...r)}async evaluateHandle(e,...r){return await g(this,sr,b0).call(this,!1,e,...r)}[ae](){i(this,Gh).dispose(),this.emit("disposed",void 0)}}Hs=new WeakMap,Ua=new WeakMap,qr=new WeakMap,Pu=new WeakMap,Gh=new WeakMap,Ha=new WeakMap,_w=new WeakMap,sr=new WeakSet,zx=async function(e){const r={stack:[],error:void 0,hasError:!1};try{if(i(this,Ha).has(e.name))return;const n=MM(r,await i(this,_w).acquire(),!1);try{await i(this,Hs).send("Runtime.addBinding",i(this,Pu)?{name:kc+e.name,executionContextName:i(this,Pu)}:{name:kc+e.name,executionContextId:i(this,qr)}),await this.evaluate(dk,"internal",e.name,kc),i(this,Ha).set(e.name,e)}catch(a){if(a instanceof Error&&(a.message.includes("Execution context was destroyed")||a.message.includes("Cannot find context with specified id")))return;te(a)}}catch(n){r.error=n,r.hasError=!0}finally{AM(r)}},Vx=async function(e){if(e.executionContextId!==i(this,qr))return;let r;try{r=JSON.parse(e.payload)}catch{return}const{type:n,name:a,seq:o,args:c,isTrivial:u}=r;if(n!=="internal"){this.emit("bindingcalled",e);return}if(!i(this,Ha).has(a)){this.emit("bindingcalled",e);return}try{const d=i(this,Ha).get(a);await(d==null?void 0:d.run(this,o,c,u))}catch(d){te(d)}},Gx=function(e){e.executionContextId===i(this,qr)&&this.emit("consoleapicalled",e)},Xh=new WeakMap,qs=new WeakMap,v0=async function(e){try{await g(this,sr,zx).call(this,e)}catch(r){te(r)}},b0=async function(e,r,...n){var w;const a=MC(((w=_C(r))==null?void 0:w.toString())??ur.INTERNAL_URL);if(Li(r)){const b=i(this,qr),v=r,y=Ym.test(v)?v:`${v}
${a}
`,{exceptionDetails:S,result:E}=await i(this,Hs).send("Runtime.evaluate",{expression:y,contextId:b,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(mk);if(S)throw uk(S);return e?ea(E):i(this,Ua).createCdpHandle(E)}const o=ri(r),c=Ym.test(o)?o:`${o}
${a}
`;let u;try{u=i(this,Hs).send("Runtime.callFunctionOn",{functionDeclaration:c,executionContextId:i(this,qr),arguments:n.some(b=>b instanceof lr)?await Promise.all(n.map(b=>p(this,b))):n.map(b=>m(this,b)),returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(b){throw b instanceof TypeError&&b.message.startsWith("Converting circular structure to JSON")&&(b.message+=" Recursive objects are not allowed."),b}const{exceptionDetails:d,result:h}=await u.catch(mk);if(d)throw uk(d);return e?ea(h):i(this,Ua).createCdpHandle(h);async function p(b,v){return v instanceof lr&&(v=await v.get(b)),m(b,v)}function m(b,v){if(typeof v=="bigint")return{unserializableValue:`${v.toString()}n`};if(Object.is(v,-0))return{unserializableValue:"-0"};if(Object.is(v,1/0))return{unserializableValue:"Infinity"};if(Object.is(v,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(v,NaN))return{unserializableValue:"NaN"};const y=v&&(v instanceof mg||v instanceof fk)?v:null;if(y){if(y.realm!==i(b,Ua))throw new Error("JSHandles can be evaluated only in the context they were created!");if(y.disposed)throw new Error("JSHandle is disposed!");return y.remoteObject().unserializableValue?{unserializableValue:y.remoteObject().unserializableValue}:y.remoteObject().objectId?{objectId:y.remoteObject().objectId}:{value:y.remoteObject().value}}return{value:v}}};const mk=s=>{if(s.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(s.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};throw s.message.endsWith("Cannot find context with specified id")||s.message.endsWith("Inspected target navigated or closed")?new Error("Execution context was destroyed, most likely because of a navigation."):s};/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Ct;(function(s){s.FrameAttached=Symbol("FrameManager.FrameAttached"),s.FrameNavigated=Symbol("FrameManager.FrameNavigated"),s.FrameDetached=Symbol("FrameManager.FrameDetached"),s.FrameSwapped=Symbol("FrameManager.FrameSwapped"),s.LifecycleEvent=Symbol("FrameManager.LifecycleEvent"),s.FrameNavigatedWithinDocument=Symbol("FrameManager.FrameNavigatedWithinDocument"),s.ConsoleApiCalled=Symbol("FrameManager.ConsoleApiCalled"),s.BindingCalled=Symbol("FrameManager.BindingCalled")})(Ct||(Ct={}));/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class xv extends tk{constructor(e,r){super(r);l(this,jt);l(this,fi);l(this,Wr,new ie);l(this,Ws);f(this,Ws,e)}get environment(){return i(this,Ws)}get client(){return i(this,Ws).client}get emitter(){return i(this,Wr)}setContext(e){var r;(r=i(this,fi))==null||r[ae](),e.once("disposed",g(this,jt,Xx).bind(this)),e.on("consoleapicalled",g(this,jt,Jx).bind(this)),e.on("bindingcalled",g(this,jt,Yx).bind(this)),f(this,fi,e),i(this,Wr).emit("context",e),this.taskManager.rerunAll()}hasContext(){return!!i(this,fi)}get context(){return i(this,fi)}async evaluateHandle(e,...r){e=bt(this.evaluateHandle.name,e);let n=g(this,jt,py).call(this);return n||(n=await g(this,jt,my).call(this)),await n.evaluateHandle(e,...r)}async evaluate(e,...r){e=bt(this.evaluate.name,e);let n=g(this,jt,py).call(this);return n||(n=await g(this,jt,my).call(this)),await n.evaluate(e,...r)}async adoptBackendNode(e){let r=g(this,jt,py).call(this);r||(r=await g(this,jt,my).call(this));const{object:n}=await this.client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:r.id});return this.createCdpHandle(n)}async adoptHandle(e){if(e.realm===this)return await e.evaluateHandle(n=>n);const r=await this.client.send("DOM.describeNode",{objectId:e.id});return await this.adoptBackendNode(r.node.backendNodeId)}async transferHandle(e){if(e.realm===this||e.remoteObject().objectId===void 0)return e;const r=await this.client.send("DOM.describeNode",{objectId:e.remoteObject().objectId}),n=await this.adoptBackendNode(r.node.backendNodeId);return await e.dispose(),n}createCdpHandle(e){return e.subtype==="node"?new fk(this,e):new mg(this,e)}[ae](){var e;(e=i(this,fi))==null||e[ae](),i(this,Wr).emit("disposed",void 0),super[ae](),i(this,Wr).removeAllListeners()}}fi=new WeakMap,Wr=new WeakMap,Ws=new WeakMap,jt=new WeakSet,Xx=function(){f(this,fi,void 0),"clearDocumentHandle"in i(this,Ws)&&i(this,Ws).clearDocumentHandle()},Jx=function(e){i(this,Wr).emit("consoleapicalled",e)},Yx=function(e){i(this,Wr).emit("bindingcalled",e)},py=function(){if(this.disposed)throw new Error(`Execution context is not available in detached frame or worker "${this.environment.url()}" (are you trying to evaluate?)`);return i(this,fi)},my=async function(){return await yt(Me(i(this,Wr),"context").pipe(Ft(Me(i(this,Wr),"disposed").pipe(tt(()=>{throw new Error("Execution context was destroyed")})),er(this.timeoutSettings.timeout()))))};/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const oi=Symbol("mainWorld"),wg=Symbol("puppeteerWorld");/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const OM=new Map([["load","load"],["domcontentloaded","DOMContentLoaded"],["networkidle0","networkIdle"],["networkidle2","networkAlmostIdle"]]);class _v{constructor(t,e,r,n,a){l(this,Ue);l(this,Jh);l(this,zs);l(this,Tu);l(this,Vs,null);l(this,qa,new rt);l(this,Yh);l(this,Gs);l(this,Qh,De.create());l(this,Zh,De.create());l(this,ef,De.create());l(this,tf);l(this,rf);l(this,Yi);Array.isArray(r)?r=r.slice():typeof r=="string"&&(r=[r]),f(this,Yh,e._loaderId),f(this,Jh,r.map(d=>{const h=OM.get(d);return z(h,"Unknown value for options.waitUntil: "+d),h})),a==null||a.addEventListener("abort",()=>{i(this,Gs).reject(a.reason)}),f(this,zs,e),f(this,Tu,n),i(this,qa).use(new ie(e._frameManager)).on(Ct.LifecycleEvent,g(this,Ue,sc).bind(this));const c=i(this,qa).use(new ie(e));c.on(Dt.FrameNavigatedWithinDocument,g(this,Ue,r_).bind(this)),c.on(Dt.FrameNavigated,g(this,Ue,i_).bind(this)),c.on(Dt.FrameSwapped,g(this,Ue,gy).bind(this)),c.on(Dt.FrameSwappedByActivation,g(this,Ue,gy).bind(this)),c.on(Dt.FrameDetached,g(this,Ue,t_).bind(this));const u=i(this,qa).use(new ie(t));u.on(St.Request,g(this,Ue,Qx).bind(this)),u.on(St.Response,g(this,Ue,e_).bind(this)),u.on(St.RequestFailed,g(this,Ue,Zx).bind(this)),f(this,Gs,De.create({timeout:i(this,Tu),message:`Navigation timeout of ${i(this,Tu)} ms exceeded`})),g(this,Ue,sc).call(this)}async navigationResponse(){var t;return await((t=i(this,Yi))==null?void 0:t.valueOrThrow()),i(this,Vs)?i(this,Vs).response():null}sameDocumentNavigationPromise(){return i(this,Qh).valueOrThrow()}newDocumentNavigationPromise(){return i(this,ef).valueOrThrow()}lifecyclePromise(){return i(this,Zh).valueOrThrow()}terminationPromise(){return i(this,Gs).valueOrThrow()}dispose(){i(this,qa).dispose(),i(this,Gs).resolve(new Error("LifecycleWatcher disposed"))}}Jh=new WeakMap,zs=new WeakMap,Tu=new WeakMap,Vs=new WeakMap,qa=new WeakMap,Yh=new WeakMap,Gs=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,ef=new WeakMap,tf=new WeakMap,rf=new WeakMap,Yi=new WeakMap,Ue=new WeakSet,Qx=function(t){var e,r;t.frame()!==i(this,zs)||!t.isNavigationRequest()||(f(this,Vs,t),(e=i(this,Yi))==null||e.resolve(),f(this,Yi,De.create()),t.response()!==null&&((r=i(this,Yi))==null||r.resolve()))},Zx=function(t){var e,r;((e=i(this,Vs))==null?void 0:e.id)===t.id&&((r=i(this,Yi))==null||r.resolve())},e_=function(t){var e,r;((e=i(this,Vs))==null?void 0:e.id)===t.request().id&&((r=i(this,Yi))==null||r.resolve())},t_=function(t){if(i(this,zs)===t){i(this,Gs).resolve(new Error("Navigating frame was detached"));return}g(this,Ue,sc).call(this)},r_=function(){f(this,tf,!0),g(this,Ue,sc).call(this)},i_=function(t){if(t==="BackForwardCacheRestore")return g(this,Ue,gy).call(this);g(this,Ue,sc).call(this)},gy=function(){f(this,rf,!0),g(this,Ue,sc).call(this)},sc=function(){if(!t(i(this,zs),i(this,Jh)))return;i(this,Zh).resolve(),i(this,tf)&&i(this,Qh).resolve(void 0),(i(this,rf)||i(this,zs)._loaderId!==i(this,Yh))&&i(this,ef).resolve(void 0);function t(e,r){for(const n of r)if(!e._lifecycleEvents.has(n))return!1;for(const n of e.childFrames())if(n._hasStartedLoading&&!t(n,r))return!1;return!0}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var RM=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},ta=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let gk=(()=>{var d,h,p,m,s_,n_,a_,y;let s=HC,t=[],e,r,n,a,o,c,u;return y=class extends s{constructor(k,_,A,D){super();l(this,m);l(this,d,(RM(this,t),""));l(this,h,!1);l(this,p);T(this,"_frameManager");T(this,"_loaderId","");T(this,"_lifecycleEvents",new Set);T(this,"_id");T(this,"_parentId");T(this,"accessibility");T(this,"worlds");this._frameManager=k,f(this,d,""),this._id=_,this._parentId=A,f(this,h,!1),f(this,p,D),this._loaderId="",this.worlds={[oi]:new xv(this,this._frameManager.timeoutSettings),[wg]:new xv(this,this._frameManager.timeoutSettings)},this.accessibility=new ik(this.worlds[oi]),this.on(Dt.FrameSwappedByActivation,()=>{this._onLoadingStarted(),this._onLoadingStopped()}),this.worlds[oi].emitter.on("consoleapicalled",g(this,m,s_).bind(this)),this.worlds[oi].emitter.on("bindingcalled",g(this,m,n_).bind(this))}_client(){return i(this,p)}updateId(k){this._id=k}updateClient(k){f(this,p,k)}page(){return this._frameManager.page()}async goto(k,_={}){const{referer:A=this._frameManager.networkManager.extraHTTPHeaders().referer,referrerPolicy:D=this._frameManager.networkManager.extraHTTPHeaders()["referer-policy"],waitUntil:P=["load"],timeout:C=this._frameManager.timeoutSettings.navigationTimeout()}=_;let I=!1;const B=new _v(this._frameManager.networkManager,this,P,C);let O=await De.race([F(i(this,p),k,A,D,this._id),B.terminationPromise()]);O||(O=await De.race([B.terminationPromise(),I?B.newDocumentNavigationPromise():B.sameDocumentNavigationPromise()]));try{if(O)throw O;return await B.navigationResponse()}finally{B.dispose()}async function F(M,j,N,K,U){try{const W=await M.send("Page.navigate",{url:j,referrer:N,frameId:U,referrerPolicy:K});return I=!!W.loaderId,W.errorText==="net::ERR_HTTP_RESPONSE_CODE_FAILURE"?null:W.errorText?new Error(`${W.errorText} at ${j}`):null}catch(W){if(Cr(W))return W;throw W}}}async waitForNavigation(k={}){const{waitUntil:_=["load"],timeout:A=this._frameManager.timeoutSettings.navigationTimeout(),signal:D}=k,P=new _v(this._frameManager.networkManager,this,_,A,D),C=await De.race([P.terminationPromise(),...k.ignoreSameDocumentNavigation?[]:[P.sameDocumentNavigationPromise()],P.newDocumentNavigationPromise()]);try{if(C)throw C;const I=await De.race([P.terminationPromise(),P.navigationResponse()]);if(I instanceof Error)throw C;return I||null}finally{P.dispose()}}get client(){return i(this,p)}mainRealm(){return this.worlds[oi]}isolatedRealm(){return this.worlds[wg]}async setContent(k,_={}){const{waitUntil:A=["load"],timeout:D=this._frameManager.timeoutSettings.navigationTimeout()}=_;await this.setFrameContent(k);const P=new _v(this._frameManager.networkManager,this,A,D),C=await De.race([P.terminationPromise(),P.lifecyclePromise()]);if(P.dispose(),C)throw C}url(){return i(this,d)}parentFrame(){return this._frameManager._frameTree.parentFrame(this._id)||null}childFrames(){return this._frameManager._frameTree.childFrames(this._id)}async addPreloadScript(k){if(i(this,p)===this._frameManager.client&&this!==this._frameManager.mainFrame()||k.getIdForFrame(this))return;const{identifier:_}=await i(this,p).send("Page.addScriptToEvaluateOnNewDocument",{source:k.source});k.setIdForFrame(this,_)}async addExposedFunctionBinding(k){this!==this._frameManager.mainFrame()&&!this._hasStartedLoading||await Promise.all([i(this,p).send("Runtime.addBinding",{name:kc+k.name}),this.evaluate(k.initSource).catch(te)])}async removeExposedFunctionBinding(k){this!==this._frameManager.mainFrame()&&!this._hasStartedLoading||await Promise.all([i(this,p).send("Runtime.removeBinding",{name:kc+k.name}),this.evaluate(_=>{globalThis[_]=void 0},k.name).catch(te)])}async waitForDevicePrompt(k={}){return await g(this,m,a_).call(this).waitForDevicePrompt(k)}_navigated(k){this._name=k.name,f(this,d,`${k.url}${k.urlFragment||""}`)}_navigatedWithinDocument(k){f(this,d,k)}_onLifecycleEvent(k,_){_==="init"&&(this._loaderId=k,this._lifecycleEvents.clear()),this._lifecycleEvents.add(_)}_onLoadingStopped(){this._lifecycleEvents.add("DOMContentLoaded"),this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}get detached(){return i(this,h)}[(e=[be],r=[be],n=[be],a=[be],o=[be],c=[be],u=[be],ae)](){i(this,h)||(f(this,h,!0),this.worlds[oi][ae](),this.worlds[wg][ae]())}exposeFunction(){throw new fe}},d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakSet,s_=function(k){this._frameManager.emit(Ct.ConsoleApiCalled,[this.worlds[oi],k])},n_=function(k){this._frameManager.emit(Ct.BindingCalled,[this.worlds[oi],k])},a_=function(){return this._frameManager._deviceRequestPromptManager(i(this,p))},(()=>{const k=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;ta(y,null,e,{kind:"method",name:"goto",static:!1,private:!1,access:{has:_=>"goto"in _,get:_=>_.goto},metadata:k},null,t),ta(y,null,r,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:_=>"waitForNavigation"in _,get:_=>_.waitForNavigation},metadata:k},null,t),ta(y,null,n,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:_=>"setContent"in _,get:_=>_.setContent},metadata:k},null,t),ta(y,null,a,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:_=>"addPreloadScript"in _,get:_=>_.addPreloadScript},metadata:k},null,t),ta(y,null,o,{kind:"method",name:"addExposedFunctionBinding",static:!1,private:!1,access:{has:_=>"addExposedFunctionBinding"in _,get:_=>_.addExposedFunctionBinding},metadata:k},null,t),ta(y,null,c,{kind:"method",name:"removeExposedFunctionBinding",static:!1,private:!1,access:{has:_=>"removeExposedFunctionBinding"in _,get:_=>_.removeExposedFunctionBinding},metadata:k},null,t),ta(y,null,u,{kind:"method",name:"waitForDevicePrompt",static:!1,private:!1,access:{has:_=>"waitForDevicePrompt"in _,get:_=>_.waitForDevicePrompt},metadata:k},null,t),k&&Object.defineProperty(y,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k})})(),y})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class LM{constructor(){l(this,Wa,new Map);l(this,Iu,new Map);l(this,Xs,new Map);l(this,Mu);l(this,Au,!1);l(this,sf,new Map)}getMainFrame(){return i(this,Mu)}getById(t){return i(this,Wa).get(t)}waitForFrame(t){const e=this.getById(t);if(e)return Promise.resolve(e);const r=De.create();return(i(this,sf).get(t)||new Set).add(r),r.valueOrThrow()}frames(){return Array.from(i(this,Wa).values())}addFrame(t){var e;i(this,Wa).set(t._id,t),t._parentId?(i(this,Iu).set(t._id,t._parentId),i(this,Xs).has(t._parentId)||i(this,Xs).set(t._parentId,new Set),i(this,Xs).get(t._parentId).add(t._id)):(!i(this,Mu)||i(this,Au))&&(f(this,Mu,t),f(this,Au,!1)),(e=i(this,sf).get(t._id))==null||e.forEach(r=>r.resolve(t))}removeFrame(t){var e;i(this,Wa).delete(t._id),i(this,Iu).delete(t._id),t._parentId?(e=i(this,Xs).get(t._parentId))==null||e.delete(t._id):f(this,Au,!0)}childFrames(t){const e=i(this,Xs).get(t);return e?Array.from(e).map(r=>this.getById(r)).filter(r=>r!==void 0):[]}parentFrame(t){const e=i(this,Iu).get(t);return e?this.getById(e):void 0}}Wa=new WeakMap,Iu=new WeakMap,Xs=new WeakMap,Mu=new WeakMap,Au=new WeakMap,sf=new WeakMap;class wk extends hg{constructor(e,r,n,a,o,c){super();T(this,"id");l(this,Qi);l(this,nf);l(this,af);l(this,of);l(this,cf);l(this,uf,!1);l(this,lf);l(this,df,{});l(this,hf);l(this,ff);f(this,Qi,e),this.id=o.requestId,f(this,nf,o.requestId===o.loaderId&&o.type==="Document"),this._interceptionId=n,f(this,af,o.request.url),f(this,of,(o.type||"other").toLowerCase()),f(this,cf,o.request.method),f(this,lf,o.request.postData),f(this,uf,o.request.hasPostData??!1),f(this,hf,r),this._redirectChain=c,f(this,ff,o.initiator),this.interception.enabled=a;for(const[u,d]of Object.entries(o.request.headers))i(this,df)[u.toLowerCase()]=d}get client(){return i(this,Qi)}url(){return i(this,af)}resourceType(){return i(this,of)}method(){return i(this,cf)}postData(){return i(this,lf)}hasPostData(){return i(this,uf)}async fetchPostData(){try{return(await i(this,Qi).send("Network.getRequestPostData",{requestId:this.id})).postData}catch(e){te(e);return}}headers(){return i(this,df)}response(){return this._response}frame(){return i(this,hf)}isNavigationRequest(){return i(this,nf)}initiator(){return i(this,ff)}redirectChain(){return this._redirectChain.slice()}failure(){return this._failureText?{errorText:this._failureText}:null}async _continue(e={}){const{url:r,method:n,postData:a,headers:o}=e;this.interception.handled=!0;const c=a?kC(a):void 0;if(this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.continueRequest");await i(this,Qi).send("Fetch.continueRequest",{requestId:this._interceptionId,url:r,method:n,postData:c,headers:o?qC(o):void 0}).catch(u=>(this.interception.handled=!1,fg(u)))}async _respond(e){this.interception.handled=!0;let r;e.body&&(r=hg.getResponse(e.body));const n={};if(e.headers)for(const o of Object.keys(e.headers)){const c=e.headers[o];n[o.toLowerCase()]=Array.isArray(c)?c.map(u=>String(u)):String(c)}e.contentType&&(n["content-type"]=e.contentType),r!=null&&r.contentLength&&!("content-length"in n)&&(n["content-length"]=String(r.contentLength));const a=e.status||200;if(this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest");await i(this,Qi).send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:a,responsePhrase:WC[a],responseHeaders:qC(n),body:r==null?void 0:r.base64}).catch(o=>(this.interception.handled=!1,fg(o)))}async _abort(e){if(this.interception.handled=!0,this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.failRequest");await i(this,Qi).send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:e||"Failed"}).catch(fg)}}Qi=new WeakMap,nf=new WeakMap,af=new WeakMap,of=new WeakMap,cf=new WeakMap,uf=new WeakMap,lf=new WeakMap,df=new WeakMap,hf=new WeakMap,ff=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class yk{constructor(t){l(this,pf);l(this,mf);l(this,gf);l(this,wf);l(this,yf);l(this,vf);f(this,pf,t.subjectName),f(this,mf,t.issuer),f(this,gf,t.validFrom),f(this,wf,t.validTo),f(this,yf,t.protocol),f(this,vf,t.sanList)}issuer(){return i(this,mf)}validFrom(){return i(this,gf)}validTo(){return i(this,wf)}protocol(){return i(this,yf)}subjectName(){return i(this,pf)}subjectAlternativeNames(){return i(this,vf)}}pf=new WeakMap,mf=new WeakMap,gf=new WeakMap,wf=new WeakMap,yf=new WeakMap,vf=new WeakMap;class vk extends zC{constructor(e,r,n,a){super();l(this,Pw);l(this,bf);l(this,Js);l(this,Fu,null);l(this,Du,De.create());l(this,Sf);l(this,Cf);l(this,kf);l(this,Ef);l(this,xf);l(this,_f);l(this,Pf,{});l(this,Tf);l(this,If);f(this,bf,e),f(this,Js,r),f(this,Sf,{ip:n.remoteIPAddress,port:n.remotePort}),f(this,kf,g(this,Pw,o_).call(this,a)||n.statusText),f(this,Ef,r.url()),f(this,xf,!!n.fromDiskCache),f(this,_f,!!n.fromServiceWorker),f(this,Cf,a?a.statusCode:n.status);const o=a?a.headers:n.headers;for(const[c,u]of Object.entries(o))i(this,Pf)[c.toLowerCase()]=u;f(this,Tf,n.securityDetails?new yk(n.securityDetails):null),f(this,If,n.timing||null)}_resolveBody(e){return e?i(this,Du).reject(e):i(this,Du).resolve()}remoteAddress(){return i(this,Sf)}url(){return i(this,Ef)}status(){return i(this,Cf)}statusText(){return i(this,kf)}headers(){return i(this,Pf)}securityDetails(){return i(this,Tf)}timing(){return i(this,If)}content(){return i(this,Fu)||f(this,Fu,i(this,Du).valueOrThrow().then(async()=>{try{const e=await i(this,bf).send("Network.getResponseBody",{requestId:i(this,Js).id});return sv(e.body,e.base64Encoded)}catch(e){throw e instanceof Yn&&e.originalMessage==="No resource with given identifier found"?new Yn("Could not load body for this request. This might happen if the request is a preflight request."):e}})),i(this,Fu)}request(){return i(this,Js)}fromCache(){return i(this,xf)||i(this,Js)._fromMemoryCache}fromServiceWorker(){return i(this,_f)}frame(){return i(this,Js).frame()}}bf=new WeakMap,Js=new WeakMap,Fu=new WeakMap,Du=new WeakMap,Sf=new WeakMap,Cf=new WeakMap,kf=new WeakMap,Ef=new WeakMap,xf=new WeakMap,_f=new WeakMap,Pf=new WeakMap,Tf=new WeakMap,If=new WeakMap,Pw=new WeakSet,o_=function(e){if(!e||!e.headersText)return;const r=e.headersText.split("\r",1)[0];if(!r)return;const n=r.match(/[^ ]* [^ ]* (.*)/);if(!n)return;const a=n[1];if(a)return a};/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class NM{constructor(){l(this,za,new Map);l(this,Va,new Map);l(this,Ga,new Map);l(this,Xa,new Map);l(this,Ja,new Map);l(this,Ya,new Map)}forget(t){i(this,za).delete(t),i(this,Va).delete(t),i(this,Ya).delete(t),i(this,Ja).delete(t),i(this,Xa).delete(t)}responseExtraInfo(t){return i(this,Xa).has(t)||i(this,Xa).set(t,[]),i(this,Xa).get(t)}queuedRedirectInfo(t){return i(this,Ja).has(t)||i(this,Ja).set(t,[]),i(this,Ja).get(t)}queueRedirectInfo(t,e){this.queuedRedirectInfo(t).push(e)}takeQueuedRedirectInfo(t){return this.queuedRedirectInfo(t).shift()}inFlightRequestsCount(){let t=0;for(const e of i(this,Ga).values())e.response()||t++;return t}storeRequestWillBeSent(t,e){i(this,za).set(t,e)}getRequestWillBeSent(t){return i(this,za).get(t)}forgetRequestWillBeSent(t){i(this,za).delete(t)}getRequestPaused(t){return i(this,Va).get(t)}forgetRequestPaused(t){i(this,Va).delete(t)}storeRequestPaused(t,e){i(this,Va).set(t,e)}getRequest(t){return i(this,Ga).get(t)}storeRequest(t,e){i(this,Ga).set(t,e)}forgetRequest(t){i(this,Ga).delete(t)}getQueuedEventGroup(t){return i(this,Ya).get(t)}queueEventGroup(t,e){i(this,Ya).set(t,e)}forgetQueuedEventGroup(t){i(this,Ya).delete(t)}}za=new WeakMap,Va=new WeakMap,Ga=new WeakMap,Xa=new WeakMap,Ja=new WeakMap,Ya=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class $M extends ie{constructor(e){super();l(this,J);l(this,Ou);l(this,_e,new NM);l(this,Qa);l(this,Ys,null);l(this,Ru,new Set);l(this,pi,!1);l(this,Zi,!1);l(this,Qs);l(this,Kt);l(this,Lu);l(this,Mf);l(this,Tw,[["Fetch.requestPaused",g(this,J,d_)],["Fetch.authRequired",g(this,J,l_)],["Network.requestWillBeSent",g(this,J,u_)],["Network.requestServedFromCache",g(this,J,f_)],["Network.responseReceived",g(this,J,m_)],["Network.loadingFinished",g(this,J,w_)],["Network.loadingFailed",g(this,J,y_)],["Network.responseReceivedExtraInfo",g(this,J,g_)],[Oe.Disconnected,g(this,J,c_)]]);l(this,Zs,new Map);f(this,Ou,e)}async addClient(e){if(i(this,Zs).has(e))return;const r=new rt;i(this,Zs).set(e,r);const n=r.use(new ie(e));for(const[a,o]of i(this,Tw))n.on(a,c=>o.bind(this)(e,c));await Promise.all([e.send("Network.enable"),g(this,J,S0).call(this,e),g(this,J,wy).call(this,e),g(this,J,Pm).call(this,e),g(this,J,yy).call(this,e),g(this,J,C0).call(this,e)])}async authenticate(e){f(this,Ys,e);const r=i(this,pi)||!!i(this,Ys);r!==i(this,Zi)&&(f(this,Zi,r),await g(this,J,qn).call(this,g(this,J,yy).bind(this)))}async setExtraHTTPHeaders(e){const r={};for(const[n,a]of Object.entries(e))z(Li(a),`Expected value of header "${n}" to be String, but "${typeof a}" is found.`),r[n.toLowerCase()]=a;f(this,Qa,r),await g(this,J,qn).call(this,g(this,J,S0).bind(this))}extraHTTPHeaders(){return Object.assign({},i(this,Qa))}inFlightRequestsCount(){return i(this,_e).inFlightRequestsCount()}async setOfflineMode(e){i(this,Kt)||f(this,Kt,{offline:!1,upload:-1,download:-1,latency:0}),i(this,Kt).offline=e,await g(this,J,qn).call(this,g(this,J,wy).bind(this))}async emulateNetworkConditions(e){i(this,Kt)||f(this,Kt,{offline:!1,upload:-1,download:-1,latency:0}),i(this,Kt).upload=e?e.upload:-1,i(this,Kt).download=e?e.download:-1,i(this,Kt).latency=e?e.latency:0,await g(this,J,qn).call(this,g(this,J,wy).bind(this))}async setUserAgent(e,r){f(this,Lu,e),f(this,Mf,r),await g(this,J,qn).call(this,g(this,J,C0).bind(this))}async setCacheEnabled(e){f(this,Qs,!e),await g(this,J,qn).call(this,g(this,J,Pm).bind(this))}async setRequestInterception(e){f(this,pi,e);const r=i(this,pi)||!!i(this,Ys);r!==i(this,Zi)&&(f(this,Zi,r),await g(this,J,qn).call(this,g(this,J,yy).bind(this)))}}Ou=new WeakMap,_e=new WeakMap,Qa=new WeakMap,Ys=new WeakMap,Ru=new WeakMap,pi=new WeakMap,Zi=new WeakMap,Qs=new WeakMap,Kt=new WeakMap,Lu=new WeakMap,Mf=new WeakMap,Tw=new WeakMap,Zs=new WeakMap,J=new WeakSet,c_=async function(e){var r;(r=i(this,Zs).get(e))==null||r.dispose(),i(this,Zs).delete(e)},S0=async function(e){i(this,Qa)!==void 0&&await e.send("Network.setExtraHTTPHeaders",{headers:i(this,Qa)})},qn=async function(e){await Promise.all(Array.from(i(this,Zs).keys()).map(r=>e(r)))},wy=async function(e){i(this,Kt)!==void 0&&await e.send("Network.emulateNetworkConditions",{offline:i(this,Kt).offline,latency:i(this,Kt).latency,uploadThroughput:i(this,Kt).upload,downloadThroughput:i(this,Kt).download})},C0=async function(e){i(this,Lu)!==void 0&&await e.send("Network.setUserAgentOverride",{userAgent:i(this,Lu),userAgentMetadata:i(this,Mf)})},yy=async function(e){i(this,Qs)===void 0&&f(this,Qs,!1),i(this,Zi)?await Promise.all([g(this,J,Pm).call(this,e),e.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([g(this,J,Pm).call(this,e),e.send("Fetch.disable")])},Pm=async function(e){i(this,Qs)!==void 0&&await e.send("Network.setCacheDisabled",{cacheDisabled:i(this,Qs)})},u_=function(e,r){if(i(this,pi)&&!r.request.url.startsWith("data:")){const{requestId:n}=r;i(this,_e).storeRequestWillBeSent(n,r);const a=i(this,_e).getRequestPaused(n);if(a){const{requestId:o}=a;g(this,J,k0).call(this,r,a),g(this,J,Tm).call(this,e,r,o),i(this,_e).forgetRequestPaused(n)}return}g(this,J,Tm).call(this,e,r,void 0)},l_=function(e,r){let n="Default";i(this,Ru).has(r.requestId)?n="CancelAuth":i(this,Ys)&&(n="ProvideCredentials",i(this,Ru).add(r.requestId));const{username:a,password:o}=i(this,Ys)||{username:void 0,password:void 0};e.send("Fetch.continueWithAuth",{requestId:r.requestId,authChallengeResponse:{response:n,username:a,password:o}}).catch(te)},d_=function(e,r){!i(this,pi)&&i(this,Zi)&&e.send("Fetch.continueRequest",{requestId:r.requestId}).catch(te);const{networkId:n,requestId:a}=r;if(!n){g(this,J,h_).call(this,e,r);return}const o=(()=>{const c=i(this,_e).getRequestWillBeSent(n);if(c&&(c.request.url!==r.request.url||c.request.method!==r.request.method)){i(this,_e).forgetRequestWillBeSent(n);return}return c})();o?(g(this,J,k0).call(this,o,r),g(this,J,Tm).call(this,e,o,a)):i(this,_e).storeRequestPaused(n,r)},k0=function(e,r){e.request.headers={...e.request.headers,...r.request.headers}},h_=function(e,r){const n=r.frameId?i(this,Ou).frame(r.frameId):null,a=new wk(e,n,r.requestId,i(this,pi),r,[]);this.emit(St.Request,a),a.finalizeInterceptions()},Tm=function(e,r,n){let a=[];if(r.redirectResponse){let u=null;if(r.redirectHasExtraInfo&&(u=i(this,_e).responseExtraInfo(r.requestId).shift(),!u)){i(this,_e).queueRedirectInfo(r.requestId,{event:r,fetchRequestId:n});return}const d=i(this,_e).getRequest(r.requestId);d&&(g(this,J,p_).call(this,e,d,r.redirectResponse,u),a=d._redirectChain)}const o=r.frameId?i(this,Ou).frame(r.frameId):null,c=new wk(e,o,n,i(this,pi),r,a);i(this,_e).storeRequest(r.requestId,c),this.emit(St.Request,c),c.finalizeInterceptions()},f_=function(e,r){const n=i(this,_e).getRequest(r.requestId);n&&(n._fromMemoryCache=!0),this.emit(St.RequestServedFromCache,n)},p_=function(e,r,n,a){const o=new vk(e,r,n,a);r._response=o,r._redirectChain.push(r),o._resolveBody(new Error("Response body is unavailable for redirect responses")),g(this,J,vy).call(this,r,!1),this.emit(St.Response,o),this.emit(St.RequestFinished,r)},E0=function(e,r,n){const a=i(this,_e).getRequest(r.requestId);if(!a)return;i(this,_e).responseExtraInfo(r.requestId).length&&te(new Error("Unexpected extraInfo events for request "+r.requestId)),r.response.fromDiskCache&&(n=null);const c=new vk(e,a,r.response,n);a._response=c,this.emit(St.Response,c)},m_=function(e,r){const n=i(this,_e).getRequest(r.requestId);let a=null;if(n&&!n._fromMemoryCache&&r.hasExtraInfo&&(a=i(this,_e).responseExtraInfo(r.requestId).shift(),!a)){i(this,_e).queueEventGroup(r.requestId,{responseReceivedEvent:r});return}g(this,J,E0).call(this,e,r,a)},g_=function(e,r){const n=i(this,_e).takeQueuedRedirectInfo(r.requestId);if(n){i(this,_e).responseExtraInfo(r.requestId).push(r),g(this,J,Tm).call(this,e,n.event,n.fetchRequestId);return}const a=i(this,_e).getQueuedEventGroup(r.requestId);if(a){i(this,_e).forgetQueuedEventGroup(r.requestId),g(this,J,E0).call(this,e,a.responseReceivedEvent,r),a.loadingFinishedEvent&&g(this,J,x0).call(this,a.loadingFinishedEvent),a.loadingFailedEvent&&g(this,J,_0).call(this,a.loadingFailedEvent);return}i(this,_e).responseExtraInfo(r.requestId).push(r)},vy=function(e,r){const n=e.id,a=e._interceptionId;i(this,_e).forgetRequest(n),a!==void 0&&i(this,Ru).delete(a),r&&i(this,_e).forget(n)},w_=function(e,r){const n=i(this,_e).getQueuedEventGroup(r.requestId);n?n.loadingFinishedEvent=r:g(this,J,x0).call(this,r)},x0=function(e){var n;const r=i(this,_e).getRequest(e.requestId);r&&(r.response()&&((n=r.response())==null||n._resolveBody()),g(this,J,vy).call(this,r,!0),this.emit(St.RequestFinished,r))},y_=function(e,r){const n=i(this,_e).getQueuedEventGroup(r.requestId);n?n.loadingFailedEvent=r:g(this,J,_0).call(this,r)},_0=function(e){const r=i(this,_e).getRequest(e.requestId);if(!r)return;r._failureText=e.errorText;const n=r.response();n&&n._resolveBody(),g(this,J,vy).call(this,r,!0),this.emit(St.RequestFailed,r)};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const BM=100;class jM extends ie{constructor(e,r,n){super();l(this,Ce);l(this,Af);l(this,en);l(this,Nu);l(this,Ff,new Set);l(this,gr);l(this,Za,new Map);l(this,$u,new Set);T(this,"_frameTree",new LM);l(this,eo,new Set);l(this,Df,new WeakMap);l(this,Jt);f(this,gr,e),f(this,Af,r),f(this,en,new $M(this)),f(this,Nu,n),this.setupEventListeners(i(this,gr)),e.once(Oe.Disconnected,()=>{g(this,Ce,P0).call(this).catch(te)})}get timeoutSettings(){return i(this,Nu)}get networkManager(){return i(this,en)}get client(){return i(this,gr)}async swapFrameTree(e){f(this,gr,e),z(i(this,gr)instanceof Cc,"CDPSession is not an instance of CDPSessionImpl.");const r=this._frameTree.getMainFrame();r&&(i(this,eo).add(i(this,gr)._target()._targetId),this._frameTree.removeFrame(r),r.updateId(i(this,gr)._target()._targetId),this._frameTree.addFrame(r),r.updateClient(e)),this.setupEventListeners(e),e.once(Oe.Disconnected,()=>{g(this,Ce,P0).call(this).catch(te)}),await this.initialize(e,r),await i(this,en).addClient(e),r&&r.emit(Dt.FrameSwappedByActivation,void 0)}async registerSpeculativeSession(e){await i(this,en).addClient(e)}setupEventListeners(e){e.on("Page.frameAttached",async r=>{var n;await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,I0).call(this,e,r.frameId,r.parentFrameId)}),e.on("Page.frameNavigated",async r=>{var n;i(this,eo).add(r.frame.id),await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,M0).call(this,r.frame,r.type)}),e.on("Page.navigatedWithinDocument",async r=>{var n;await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,k_).call(this,r.frameId,r.url)}),e.on("Page.frameDetached",async r=>{var n;await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,E_).call(this,r.frameId,r.reason)}),e.on("Page.frameStartedLoading",async r=>{var n;await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,b_).call(this,r.frameId)}),e.on("Page.frameStoppedLoading",async r=>{var n;await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,S_).call(this,r.frameId)}),e.on("Runtime.executionContextCreated",async r=>{var n;await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,x_).call(this,r.context,e)}),e.on("Page.lifecycleEvent",async r=>{var n;await((n=i(this,Jt))==null?void 0:n.valueOrThrow()),g(this,Ce,v_).call(this,r)})}async initialize(e,r){var n,a;try{(n=i(this,Jt))==null||n.resolve(),f(this,Jt,De.create()),await Promise.all([i(this,en).addClient(e),e.send("Page.enable"),e.send("Page.getFrameTree").then(({frameTree:o})=>{var c;g(this,Ce,T0).call(this,e,o),(c=i(this,Jt))==null||c.resolve()}),e.send("Page.setLifecycleEventsEnabled",{enabled:!0}),e.send("Runtime.enable").then(()=>g(this,Ce,C_).call(this,e,IC)),...(r?Array.from(i(this,Za).values()):[]).map(o=>r==null?void 0:r.addPreloadScript(o)),...(r?Array.from(i(this,$u).values()):[]).map(o=>r==null?void 0:r.addExposedFunctionBinding(o))])}catch(o){if((a=i(this,Jt))==null||a.resolve(),Cr(o)&&Ev(o))return;throw o}}page(){return i(this,Af)}mainFrame(){const e=this._frameTree.getMainFrame();return z(e,"Requesting main frame too early!"),e}frames(){return Array.from(this._frameTree.frames())}frame(e){return this._frameTree.getById(e)||null}async addExposedFunctionBinding(e){i(this,$u).add(e),await Promise.all(this.frames().map(async r=>await r.addExposedFunctionBinding(e)))}async removeExposedFunctionBinding(e){i(this,$u).delete(e),await Promise.all(this.frames().map(async r=>await r.removeExposedFunctionBinding(e)))}async evaluateOnNewDocument(e){const{identifier:r}=await this.mainFrame()._client().send("Page.addScriptToEvaluateOnNewDocument",{source:e}),n=new CM(this.mainFrame(),r,e);return i(this,Za).set(r,n),await Promise.all(this.frames().map(async a=>await a.addPreloadScript(n))),{identifier:r}}async removeScriptToEvaluateOnNewDocument(e){const r=i(this,Za).get(e);if(!r)throw new Error(`Script to evaluate on new document with id ${e} not found`);i(this,Za).delete(e),await Promise.all(this.frames().map(n=>{const a=r.getIdForFrame(n);if(a)return n._client().send("Page.removeScriptToEvaluateOnNewDocument",{identifier:a}).catch(te)}))}onAttachedToTarget(e){if(e._getTargetInfo().type!=="iframe")return;const r=this.frame(e._getTargetInfo().targetId);r&&r.updateClient(e._session()),this.setupEventListeners(e._session()),this.initialize(e._session(),r)}_deviceRequestPromptManager(e){let r=i(this,Df).get(e);return r===void 0&&(r=new xM(e,i(this,Nu)),i(this,Df).set(e,r)),r}}Af=new WeakMap,en=new WeakMap,Nu=new WeakMap,Ff=new WeakMap,gr=new WeakMap,Za=new WeakMap,$u=new WeakMap,eo=new WeakMap,Df=new WeakMap,Jt=new WeakMap,Ce=new WeakSet,P0=async function(){const e=this._frameTree.getMainFrame();if(!e)return;for(const n of e.childFrames())g(this,Ce,ud).call(this,n);const r=De.create({timeout:BM,message:"Frame was not swapped"});e.once(Dt.FrameSwappedByActivation,()=>{r.resolve()});try{await r.valueOrThrow()}catch{g(this,Ce,ud).call(this,e)}},v_=function(e){const r=this.frame(e.frameId);r&&(r._onLifecycleEvent(e.loaderId,e.name),this.emit(Ct.LifecycleEvent,r),r.emit(Dt.LifecycleEvent,void 0))},b_=function(e){const r=this.frame(e);r&&r._onLoadingStarted()},S_=function(e){const r=this.frame(e);r&&(r._onLoadingStopped(),this.emit(Ct.LifecycleEvent,r),r.emit(Dt.LifecycleEvent,void 0))},T0=function(e,r){if(r.frame.parentId&&g(this,Ce,I0).call(this,e,r.frame.id,r.frame.parentId),i(this,eo).has(r.frame.id)?i(this,eo).delete(r.frame.id):g(this,Ce,M0).call(this,r.frame,"Navigation"),!!r.childFrames)for(const n of r.childFrames)g(this,Ce,T0).call(this,e,n)},I0=function(e,r,n){let a=this.frame(r);if(a){e&&a.client!==i(this,gr)&&a.updateClient(e);return}a=new gk(this,r,n,e),this._frameTree.addFrame(a),this.emit(Ct.FrameAttached,a)},M0=async function(e,r){const n=e.id,a=!e.parentId;let o=this._frameTree.getById(n);if(o)for(const c of o.childFrames())g(this,Ce,ud).call(this,c);a&&(o?(this._frameTree.removeFrame(o),o._id=n):o=new gk(this,n,void 0,i(this,gr)),this._frameTree.addFrame(o)),o=await this._frameTree.waitForFrame(n),o._navigated(e),this.emit(Ct.FrameNavigated,o),o.emit(Dt.FrameNavigated,r)},C_=async function(e,r){const n=`${e.id()}:${r}`;i(this,Ff).has(n)||(await e.send("Page.addScriptToEvaluateOnNewDocument",{source:`//# sourceURL=${ur.INTERNAL_URL}`,worldName:r}),await Promise.all(this.frames().filter(a=>a.client===e).map(a=>e.send("Page.createIsolatedWorld",{frameId:a._id,worldName:r,grantUniveralAccess:!0}).catch(te))),i(this,Ff).add(n))},k_=function(e,r){const n=this.frame(e);n&&(n._navigatedWithinDocument(r),this.emit(Ct.FrameNavigatedWithinDocument,n),n.emit(Dt.FrameNavigatedWithinDocument,void 0),this.emit(Ct.FrameNavigated,n),n.emit(Dt.FrameNavigated,"Navigation"))},E_=function(e,r){const n=this.frame(e);if(n)switch(r){case"remove":g(this,Ce,ud).call(this,n);break;case"swap":this.emit(Ct.FrameSwapped,n),n.emit(Dt.FrameSwapped,void 0);break}},x_=function(e,r){const n=e.auxData,a=n&&n.frameId,o=typeof a=="string"?this.frame(a):void 0;let c;if(o){if(o.client!==r)return;e.auxData&&e.auxData.isDefault?c=o.worlds[oi]:e.name===IC&&(c=o.worlds[wg])}if(!c)return;const u=new pk((o==null?void 0:o.client)||i(this,gr),e,c);c.setContext(u)},ud=function(e){for(const r of e.childFrames())g(this,Ce,ud).call(this,r);e[ae](),this._frameTree.removeFrame(e),this.emit(Ct.FrameDetached,e),e.emit(Dt.FrameDetached,e)};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const bk={0:{keyCode:48,key:"0",code:"Digit0"},1:{keyCode:49,key:"1",code:"Digit1"},2:{keyCode:50,key:"2",code:"Digit2"},3:{keyCode:51,key:"3",code:"Digit3"},4:{keyCode:52,key:"4",code:"Digit4"},5:{keyCode:53,key:"5",code:"Digit5"},6:{keyCode:54,key:"6",code:"Digit6"},7:{keyCode:55,key:"7",code:"Digit7"},8:{keyCode:56,key:"8",code:"Digit8"},9:{keyCode:57,key:"9",code:"Digit9"},Power:{key:"Power",code:"Power"},Eject:{key:"Eject",code:"Eject"},Abort:{keyCode:3,code:"Abort",key:"Cancel"},Help:{keyCode:6,code:"Help",key:"Help"},Backspace:{keyCode:8,code:"Backspace",key:"Backspace"},Tab:{keyCode:9,code:"Tab",key:"Tab"},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",code:"Numpad5",shiftKey:"5",location:3},NumpadEnter:{keyCode:13,code:"NumpadEnter",key:"Enter",text:"\r",location:3},Enter:{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\r":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\n":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},ShiftLeft:{keyCode:16,code:"ShiftLeft",key:"Shift",location:1},ShiftRight:{keyCode:16,code:"ShiftRight",key:"Shift",location:2},ControlLeft:{keyCode:17,code:"ControlLeft",key:"Control",location:1},ControlRight:{keyCode:17,code:"ControlRight",key:"Control",location:2},AltLeft:{keyCode:18,code:"AltLeft",key:"Alt",location:1},AltRight:{keyCode:18,code:"AltRight",key:"Alt",location:2},Pause:{keyCode:19,code:"Pause",key:"Pause"},CapsLock:{keyCode:20,code:"CapsLock",key:"CapsLock"},Escape:{keyCode:27,code:"Escape",key:"Escape"},Convert:{keyCode:28,code:"Convert",key:"Convert"},NonConvert:{keyCode:29,code:"NonConvert",key:"NonConvert"},Space:{keyCode:32,code:"Space",key:" "},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",code:"Numpad9",shiftKey:"9",location:3},PageUp:{keyCode:33,code:"PageUp",key:"PageUp"},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",code:"Numpad3",shiftKey:"3",location:3},PageDown:{keyCode:34,code:"PageDown",key:"PageDown"},End:{keyCode:35,code:"End",key:"End"},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",code:"Numpad1",shiftKey:"1",location:3},Home:{keyCode:36,code:"Home",key:"Home"},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",code:"Numpad7",shiftKey:"7",location:3},ArrowLeft:{keyCode:37,code:"ArrowLeft",key:"ArrowLeft"},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",code:"Numpad4",shiftKey:"4",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",code:"Numpad8",shiftKey:"8",location:3},ArrowUp:{keyCode:38,code:"ArrowUp",key:"ArrowUp"},ArrowRight:{keyCode:39,code:"ArrowRight",key:"ArrowRight"},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",code:"Numpad6",shiftKey:"6",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",code:"Numpad2",shiftKey:"2",location:3},ArrowDown:{keyCode:40,code:"ArrowDown",key:"ArrowDown"},Select:{keyCode:41,code:"Select",key:"Select"},Open:{keyCode:43,code:"Open",key:"Execute"},PrintScreen:{keyCode:44,code:"PrintScreen",key:"PrintScreen"},Insert:{keyCode:45,code:"Insert",key:"Insert"},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",code:"Numpad0",shiftKey:"0",location:3},Delete:{keyCode:46,code:"Delete",key:"Delete"},NumpadDecimal:{keyCode:46,shiftKeyCode:110,code:"NumpadDecimal",key:"\0",shiftKey:".",location:3},Digit0:{keyCode:48,code:"Digit0",shiftKey:")",key:"0"},Digit1:{keyCode:49,code:"Digit1",shiftKey:"!",key:"1"},Digit2:{keyCode:50,code:"Digit2",shiftKey:"@",key:"2"},Digit3:{keyCode:51,code:"Digit3",shiftKey:"#",key:"3"},Digit4:{keyCode:52,code:"Digit4",shiftKey:"$",key:"4"},Digit5:{keyCode:53,code:"Digit5",shiftKey:"%",key:"5"},Digit6:{keyCode:54,code:"Digit6",shiftKey:"^",key:"6"},Digit7:{keyCode:55,code:"Digit7",shiftKey:"&",key:"7"},Digit8:{keyCode:56,code:"Digit8",shiftKey:"*",key:"8"},Digit9:{keyCode:57,code:"Digit9",shiftKey:"(",key:"9"},KeyA:{keyCode:65,code:"KeyA",shiftKey:"A",key:"a"},KeyB:{keyCode:66,code:"KeyB",shiftKey:"B",key:"b"},KeyC:{keyCode:67,code:"KeyC",shiftKey:"C",key:"c"},KeyD:{keyCode:68,code:"KeyD",shiftKey:"D",key:"d"},KeyE:{keyCode:69,code:"KeyE",shiftKey:"E",key:"e"},KeyF:{keyCode:70,code:"KeyF",shiftKey:"F",key:"f"},KeyG:{keyCode:71,code:"KeyG",shiftKey:"G",key:"g"},KeyH:{keyCode:72,code:"KeyH",shiftKey:"H",key:"h"},KeyI:{keyCode:73,code:"KeyI",shiftKey:"I",key:"i"},KeyJ:{keyCode:74,code:"KeyJ",shiftKey:"J",key:"j"},KeyK:{keyCode:75,code:"KeyK",shiftKey:"K",key:"k"},KeyL:{keyCode:76,code:"KeyL",shiftKey:"L",key:"l"},KeyM:{keyCode:77,code:"KeyM",shiftKey:"M",key:"m"},KeyN:{keyCode:78,code:"KeyN",shiftKey:"N",key:"n"},KeyO:{keyCode:79,code:"KeyO",shiftKey:"O",key:"o"},KeyP:{keyCode:80,code:"KeyP",shiftKey:"P",key:"p"},KeyQ:{keyCode:81,code:"KeyQ",shiftKey:"Q",key:"q"},KeyR:{keyCode:82,code:"KeyR",shiftKey:"R",key:"r"},KeyS:{keyCode:83,code:"KeyS",shiftKey:"S",key:"s"},KeyT:{keyCode:84,code:"KeyT",shiftKey:"T",key:"t"},KeyU:{keyCode:85,code:"KeyU",shiftKey:"U",key:"u"},KeyV:{keyCode:86,code:"KeyV",shiftKey:"V",key:"v"},KeyW:{keyCode:87,code:"KeyW",shiftKey:"W",key:"w"},KeyX:{keyCode:88,code:"KeyX",shiftKey:"X",key:"x"},KeyY:{keyCode:89,code:"KeyY",shiftKey:"Y",key:"y"},KeyZ:{keyCode:90,code:"KeyZ",shiftKey:"Z",key:"z"},MetaLeft:{keyCode:91,code:"MetaLeft",key:"Meta",location:1},MetaRight:{keyCode:92,code:"MetaRight",key:"Meta",location:2},ContextMenu:{keyCode:93,code:"ContextMenu",key:"ContextMenu"},NumpadMultiply:{keyCode:106,code:"NumpadMultiply",key:"*",location:3},NumpadAdd:{keyCode:107,code:"NumpadAdd",key:"+",location:3},NumpadSubtract:{keyCode:109,code:"NumpadSubtract",key:"-",location:3},NumpadDivide:{keyCode:111,code:"NumpadDivide",key:"/",location:3},F1:{keyCode:112,code:"F1",key:"F1"},F2:{keyCode:113,code:"F2",key:"F2"},F3:{keyCode:114,code:"F3",key:"F3"},F4:{keyCode:115,code:"F4",key:"F4"},F5:{keyCode:116,code:"F5",key:"F5"},F6:{keyCode:117,code:"F6",key:"F6"},F7:{keyCode:118,code:"F7",key:"F7"},F8:{keyCode:119,code:"F8",key:"F8"},F9:{keyCode:120,code:"F9",key:"F9"},F10:{keyCode:121,code:"F10",key:"F10"},F11:{keyCode:122,code:"F11",key:"F11"},F12:{keyCode:123,code:"F12",key:"F12"},F13:{keyCode:124,code:"F13",key:"F13"},F14:{keyCode:125,code:"F14",key:"F14"},F15:{keyCode:126,code:"F15",key:"F15"},F16:{keyCode:127,code:"F16",key:"F16"},F17:{keyCode:128,code:"F17",key:"F17"},F18:{keyCode:129,code:"F18",key:"F18"},F19:{keyCode:130,code:"F19",key:"F19"},F20:{keyCode:131,code:"F20",key:"F20"},F21:{keyCode:132,code:"F21",key:"F21"},F22:{keyCode:133,code:"F22",key:"F22"},F23:{keyCode:134,code:"F23",key:"F23"},F24:{keyCode:135,code:"F24",key:"F24"},NumLock:{keyCode:144,code:"NumLock",key:"NumLock"},ScrollLock:{keyCode:145,code:"ScrollLock",key:"ScrollLock"},AudioVolumeMute:{keyCode:173,code:"AudioVolumeMute",key:"AudioVolumeMute"},AudioVolumeDown:{keyCode:174,code:"AudioVolumeDown",key:"AudioVolumeDown"},AudioVolumeUp:{keyCode:175,code:"AudioVolumeUp",key:"AudioVolumeUp"},MediaTrackNext:{keyCode:176,code:"MediaTrackNext",key:"MediaTrackNext"},MediaTrackPrevious:{keyCode:177,code:"MediaTrackPrevious",key:"MediaTrackPrevious"},MediaStop:{keyCode:178,code:"MediaStop",key:"MediaStop"},MediaPlayPause:{keyCode:179,code:"MediaPlayPause",key:"MediaPlayPause"},Semicolon:{keyCode:186,code:"Semicolon",shiftKey:":",key:";"},Equal:{keyCode:187,code:"Equal",shiftKey:"+",key:"="},NumpadEqual:{keyCode:187,code:"NumpadEqual",key:"=",location:3},Comma:{keyCode:188,code:"Comma",shiftKey:"<",key:","},Minus:{keyCode:189,code:"Minus",shiftKey:"_",key:"-"},Period:{keyCode:190,code:"Period",shiftKey:">",key:"."},Slash:{keyCode:191,code:"Slash",shiftKey:"?",key:"/"},Backquote:{keyCode:192,code:"Backquote",shiftKey:"~",key:"`"},BracketLeft:{keyCode:219,code:"BracketLeft",shiftKey:"{",key:"["},Backslash:{keyCode:220,code:"Backslash",shiftKey:"|",key:"\\"},BracketRight:{keyCode:221,code:"BracketRight",shiftKey:"}",key:"]"},Quote:{keyCode:222,code:"Quote",shiftKey:'"',key:"'"},AltGraph:{keyCode:225,code:"AltGraph",key:"AltGraph"},Props:{keyCode:247,code:"Props",key:"CrSel"},Cancel:{keyCode:3,key:"Cancel",code:"Abort"},Clear:{keyCode:12,key:"Clear",code:"Numpad5",location:3},Shift:{keyCode:16,key:"Shift",code:"ShiftLeft",location:1},Control:{keyCode:17,key:"Control",code:"ControlLeft",location:1},Alt:{keyCode:18,key:"Alt",code:"AltLeft",location:1},Accept:{keyCode:30,key:"Accept"},ModeChange:{keyCode:31,key:"ModeChange"}," ":{keyCode:32,key:" ",code:"Space"},Print:{keyCode:42,key:"Print"},Execute:{keyCode:43,key:"Execute",code:"Open"},"\0":{keyCode:46,key:"\0",code:"NumpadDecimal",location:3},a:{keyCode:65,key:"a",code:"KeyA"},b:{keyCode:66,key:"b",code:"KeyB"},c:{keyCode:67,key:"c",code:"KeyC"},d:{keyCode:68,key:"d",code:"KeyD"},e:{keyCode:69,key:"e",code:"KeyE"},f:{keyCode:70,key:"f",code:"KeyF"},g:{keyCode:71,key:"g",code:"KeyG"},h:{keyCode:72,key:"h",code:"KeyH"},i:{keyCode:73,key:"i",code:"KeyI"},j:{keyCode:74,key:"j",code:"KeyJ"},k:{keyCode:75,key:"k",code:"KeyK"},l:{keyCode:76,key:"l",code:"KeyL"},m:{keyCode:77,key:"m",code:"KeyM"},n:{keyCode:78,key:"n",code:"KeyN"},o:{keyCode:79,key:"o",code:"KeyO"},p:{keyCode:80,key:"p",code:"KeyP"},q:{keyCode:81,key:"q",code:"KeyQ"},r:{keyCode:82,key:"r",code:"KeyR"},s:{keyCode:83,key:"s",code:"KeyS"},t:{keyCode:84,key:"t",code:"KeyT"},u:{keyCode:85,key:"u",code:"KeyU"},v:{keyCode:86,key:"v",code:"KeyV"},w:{keyCode:87,key:"w",code:"KeyW"},x:{keyCode:88,key:"x",code:"KeyX"},y:{keyCode:89,key:"y",code:"KeyY"},z:{keyCode:90,key:"z",code:"KeyZ"},Meta:{keyCode:91,key:"Meta",code:"MetaLeft",location:1},"*":{keyCode:106,key:"*",code:"NumpadMultiply",location:3},"+":{keyCode:107,key:"+",code:"NumpadAdd",location:3},"-":{keyCode:109,key:"-",code:"NumpadSubtract",location:3},"/":{keyCode:111,key:"/",code:"NumpadDivide",location:3},";":{keyCode:186,key:";",code:"Semicolon"},"=":{keyCode:187,key:"=",code:"Equal"},",":{keyCode:188,key:",",code:"Comma"},".":{keyCode:190,key:".",code:"Period"},"`":{keyCode:192,key:"`",code:"Backquote"},"[":{keyCode:219,key:"[",code:"BracketLeft"},"\\":{keyCode:220,key:"\\",code:"Backslash"},"]":{keyCode:221,key:"]",code:"BracketRight"},"'":{keyCode:222,key:"'",code:"Quote"},Attn:{keyCode:246,key:"Attn"},CrSel:{keyCode:247,key:"CrSel",code:"Props"},ExSel:{keyCode:248,key:"ExSel"},EraseEof:{keyCode:249,key:"EraseEof"},Play:{keyCode:250,key:"Play"},ZoomOut:{keyCode:251,key:"ZoomOut"},")":{keyCode:48,key:")",code:"Digit0"},"!":{keyCode:49,key:"!",code:"Digit1"},"@":{keyCode:50,key:"@",code:"Digit2"},"#":{keyCode:51,key:"#",code:"Digit3"},$:{keyCode:52,key:"$",code:"Digit4"},"%":{keyCode:53,key:"%",code:"Digit5"},"^":{keyCode:54,key:"^",code:"Digit6"},"&":{keyCode:55,key:"&",code:"Digit7"},"(":{keyCode:57,key:"(",code:"Digit9"},A:{keyCode:65,key:"A",code:"KeyA"},B:{keyCode:66,key:"B",code:"KeyB"},C:{keyCode:67,key:"C",code:"KeyC"},D:{keyCode:68,key:"D",code:"KeyD"},E:{keyCode:69,key:"E",code:"KeyE"},F:{keyCode:70,key:"F",code:"KeyF"},G:{keyCode:71,key:"G",code:"KeyG"},H:{keyCode:72,key:"H",code:"KeyH"},I:{keyCode:73,key:"I",code:"KeyI"},J:{keyCode:74,key:"J",code:"KeyJ"},K:{keyCode:75,key:"K",code:"KeyK"},L:{keyCode:76,key:"L",code:"KeyL"},M:{keyCode:77,key:"M",code:"KeyM"},N:{keyCode:78,key:"N",code:"KeyN"},O:{keyCode:79,key:"O",code:"KeyO"},P:{keyCode:80,key:"P",code:"KeyP"},Q:{keyCode:81,key:"Q",code:"KeyQ"},R:{keyCode:82,key:"R",code:"KeyR"},S:{keyCode:83,key:"S",code:"KeyS"},T:{keyCode:84,key:"T",code:"KeyT"},U:{keyCode:85,key:"U",code:"KeyU"},V:{keyCode:86,key:"V",code:"KeyV"},W:{keyCode:87,key:"W",code:"KeyW"},X:{keyCode:88,key:"X",code:"KeyX"},Y:{keyCode:89,key:"Y",code:"KeyY"},Z:{keyCode:90,key:"Z",code:"KeyZ"},":":{keyCode:186,key:":",code:"Semicolon"},"<":{keyCode:188,key:"<",code:"Comma"},_:{keyCode:189,key:"_",code:"Minus"},">":{keyCode:190,key:">",code:"Period"},"?":{keyCode:191,key:"?",code:"Slash"},"~":{keyCode:192,key:"~",code:"Backquote"},"{":{keyCode:219,key:"{",code:"BracketLeft"},"|":{keyCode:220,key:"|",code:"Backslash"},"}":{keyCode:221,key:"}",code:"BracketRight"},'"':{keyCode:222,key:'"',code:"Quote"},SoftLeft:{key:"SoftLeft",code:"SoftLeft",location:4},SoftRight:{key:"SoftRight",code:"SoftRight",location:4},Camera:{keyCode:44,key:"Camera",code:"Camera",location:4},Call:{key:"Call",code:"Call",location:4},EndCall:{keyCode:95,key:"EndCall",code:"EndCall",location:4},VolumeDown:{keyCode:182,key:"VolumeDown",code:"VolumeDown",location:4},VolumeUp:{keyCode:183,key:"VolumeUp",code:"VolumeUp",location:4}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class KM extends VC{constructor(e){super();l(this,rn);l(this,tn);l(this,Bu,new Set);T(this,"_modifiers",0);f(this,tn,e)}updateClient(e){f(this,tn,e)}async down(e,r={text:void 0,commands:[]}){const n=g(this,rn,F0).call(this,e),a=i(this,Bu).has(n.code);i(this,Bu).add(n.code),this._modifiers|=g(this,rn,A0).call(this,n.key);const o=r.text===void 0?n.text:r.text;await i(this,tn).send("Input.dispatchKeyEvent",{type:o?"keyDown":"rawKeyDown",modifiers:this._modifiers,windowsVirtualKeyCode:n.keyCode,code:n.code,key:n.key,text:o,unmodifiedText:o,autoRepeat:a,location:n.location,isKeypad:n.location===3,commands:r.commands})}async up(e){const r=g(this,rn,F0).call(this,e);this._modifiers&=~g(this,rn,A0).call(this,r.key),i(this,Bu).delete(r.code),await i(this,tn).send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:this._modifiers,key:r.key,windowsVirtualKeyCode:r.keyCode,code:r.code,location:r.location})}async sendCharacter(e){await i(this,tn).send("Input.insertText",{text:e})}charIsKey(e){return!!bk[e]}async type(e,r={}){const n=r.delay||void 0;for(const a of e)this.charIsKey(a)?await this.press(a,{delay:n}):(n&&await new Promise(o=>setTimeout(o,n)),await this.sendCharacter(a))}async press(e,r={}){const{delay:n=null}=r;await this.down(e,r),n&&await new Promise(a=>setTimeout(a,r.delay)),await this.up(e)}}tn=new WeakMap,Bu=new WeakMap,rn=new WeakSet,A0=function(e){return e==="Alt"?1:e==="Control"?2:e==="Meta"?4:e==="Shift"?8:0},F0=function(e){const r=this._modifiers&8,n={key:"",keyCode:0,code:"",text:"",location:0},a=bk[e];return z(a,`Unknown key: "${e}"`),a.key&&(n.key=a.key),r&&a.shiftKey&&(n.key=a.shiftKey),a.keyCode&&(n.keyCode=a.keyCode),r&&a.shiftKeyCode&&(n.keyCode=a.shiftKeyCode),a.code&&(n.code=a.code),a.location&&(n.location=a.location),n.key.length===1&&(n.text=n.key),a.text&&(n.text=a.text),r&&a.shiftText&&(n.text=a.shiftText),this._modifiers&-9&&(n.text=""),n};const Sk=s=>{switch(s){case $e.Left:return 1;case $e.Right:return 2;case $e.Middle:return 4;case $e.Back:return 8;case $e.Forward:return 16}},UM=s=>s&1?$e.Left:s&2?$e.Right:s&4?$e.Middle:s&8?$e.Back:s&16?$e.Forward:"none";class HM extends GC{constructor(e,r){super();l(this,Ye);l(this,wr);l(this,zr);l(this,ju,{position:{x:0,y:0},buttons:0});l(this,to,[]);f(this,wr,e),f(this,zr,r)}updateClient(e){f(this,wr,e)}async reset(){const e=[];for(const[r,n]of[[1,$e.Left],[4,$e.Middle],[2,$e.Right],[16,$e.Forward],[8,$e.Back]])i(this,Ye,Sr).buttons&r&&e.push(this.up({button:n}));(i(this,Ye,Sr).position.x!==0||i(this,Ye,Sr).position.y!==0)&&e.push(this.move(0,0)),await Promise.all(e)}async move(e,r,n={}){const{steps:a=1}=n,o=i(this,Ye,Sr).position,c={x:e,y:r};for(let u=1;u<=a;u++)await g(this,Ye,by).call(this,d=>{d({position:{x:o.x+(c.x-o.x)*(u/a),y:o.y+(c.y-o.y)*(u/a)}});const{buttons:h,position:p}=i(this,Ye,Sr);return i(this,wr).send("Input.dispatchMouseEvent",{type:"mouseMoved",modifiers:i(this,zr)._modifiers,buttons:h,button:UM(h),...p})})}async down(e={}){const{button:r=$e.Left,clickCount:n=1}=e,a=Sk(r);if(!a)throw new Error(`Unsupported mouse button: ${r}`);if(i(this,Ye,Sr).buttons&a)throw new Error(`'${r}' is already pressed.`);await g(this,Ye,by).call(this,o=>{o({buttons:i(this,Ye,Sr).buttons|a});const{buttons:c,position:u}=i(this,Ye,Sr);return i(this,wr).send("Input.dispatchMouseEvent",{type:"mousePressed",modifiers:i(this,zr)._modifiers,clickCount:n,buttons:c,button:r,...u})})}async up(e={}){const{button:r=$e.Left,clickCount:n=1}=e,a=Sk(r);if(!a)throw new Error(`Unsupported mouse button: ${r}`);if(!(i(this,Ye,Sr).buttons&a))throw new Error(`'${r}' is not pressed.`);await g(this,Ye,by).call(this,o=>{o({buttons:i(this,Ye,Sr).buttons&~a});const{buttons:c,position:u}=i(this,Ye,Sr);return i(this,wr).send("Input.dispatchMouseEvent",{type:"mouseReleased",modifiers:i(this,zr)._modifiers,clickCount:n,buttons:c,button:r,...u})})}async click(e,r,n={}){const{delay:a,count:o=1,clickCount:c=o}=n;if(o<1)throw new Error("Click must occur a positive number of times.");const u=[this.move(e,r)];if(c===o)for(let d=1;d<o;++d)u.push(this.down({...n,clickCount:d}),this.up({...n,clickCount:d}));u.push(this.down({...n,clickCount:c})),typeof a=="number"&&(await Promise.all(u),u.length=0,await new Promise(d=>{setTimeout(d,a)})),u.push(this.up({...n,clickCount:c})),await Promise.all(u)}async wheel(e={}){const{deltaX:r=0,deltaY:n=0}=e,{position:a,buttons:o}=i(this,Ye,Sr);await i(this,wr).send("Input.dispatchMouseEvent",{type:"mouseWheel",pointerType:"mouse",modifiers:i(this,zr)._modifiers,deltaY:n,deltaX:r,buttons:o,...a})}async drag(e,r){const n=new Promise(a=>{i(this,wr).once("Input.dragIntercepted",o=>a(o.data))});return await this.move(e.x,e.y),await this.down(),await this.move(r.x,r.y),await n}async dragEnter(e,r){await i(this,wr).send("Input.dispatchDragEvent",{type:"dragEnter",x:e.x,y:e.y,modifiers:i(this,zr)._modifiers,data:r})}async dragOver(e,r){await i(this,wr).send("Input.dispatchDragEvent",{type:"dragOver",x:e.x,y:e.y,modifiers:i(this,zr)._modifiers,data:r})}async drop(e,r){await i(this,wr).send("Input.dispatchDragEvent",{type:"drop",x:e.x,y:e.y,modifiers:i(this,zr)._modifiers,data:r})}async dragAndDrop(e,r,n={}){const{delay:a=null}=n,o=await this.drag(e,r);await this.dragEnter(r,o),await this.dragOver(r,o),a&&await new Promise(c=>setTimeout(c,a)),await this.drop(r,o),await this.up()}}wr=new WeakMap,zr=new WeakMap,ju=new WeakMap,Ye=new WeakSet,Sr=function(){return Object.assign({...i(this,ju)},...i(this,to))},to=new WeakMap,__=function(){const e={};i(this,to).push(e);const r=()=>{i(this,to).splice(i(this,to).indexOf(e),1)};return{update:n=>{Object.assign(e,n)},commit:()=>{f(this,ju,{...i(this,ju),...e}),r()},rollback:r}},by=async function(e){const{update:r,commit:n,rollback:a}=g(this,Ye,__).call(this);try{await e(r),n()}catch(o){throw a(),o}};class qM extends XC{constructor(e,r){super();l(this,sn);l(this,ro);f(this,sn,e),f(this,ro,r)}updateClient(e){f(this,sn,e)}async touchStart(e,r){await i(this,sn).send("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:[{x:Math.round(e),y:Math.round(r),radiusX:.5,radiusY:.5,force:.5}],modifiers:i(this,ro)._modifiers})}async touchMove(e,r){await i(this,sn).send("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:[{x:Math.round(e),y:Math.round(r),radiusX:.5,radiusY:.5,force:.5}],modifiers:i(this,ro)._modifiers})}async touchEnd(){await i(this,sn).send("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[],modifiers:i(this,ro)._modifiers})}}sn=new WeakMap,ro=new WeakMap;class Ck{constructor(t){l(this,es);l(this,Ku,!1);l(this,Of);f(this,es,t)}updateClient(t){f(this,es,t)}async start(t={}){z(!i(this,Ku),"Cannot start recording trace while already recording trace.");const e=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler"],{path:r,screenshots:n=!1,categories:a=e}=t;n&&a.push("disabled-by-default-devtools.screenshot");const o=a.filter(u=>u.startsWith("-")).map(u=>u.slice(1)),c=a.filter(u=>!u.startsWith("-"));f(this,Of,r),f(this,Ku,!0),await i(this,es).send("Tracing.start",{transferMode:"ReturnAsStream",traceConfig:{excludedCategories:o,includedCategories:c}})}async stop(){const t=De.create();return i(this,es).once("Tracing.tracingComplete",async e=>{try{z(e.stream,'Missing "stream"');const r=await TC(i(this,es),e.stream),n=await PC(r,i(this,Of));t.resolve(n??void 0)}catch(r){Cr(r)?t.reject(r):t.reject(new Error(`Unknown error: ${r}`))}}),await i(this,es).send("Tracing.end"),f(this,Ku,!1),await t.valueOrThrow()}}es=new WeakMap,Ku=new WeakMap,Of=new WeakMap;class kk extends rk{constructor(e,r,n,a,o,c){super(r);l(this,mi);l(this,ts);l(this,Rf);l(this,Lf);f(this,Rf,n),f(this,ts,e),f(this,Lf,a),f(this,mi,new xv(this,new yv)),i(this,ts).once("Runtime.executionContextCreated",async u=>{i(this,mi).setContext(new pk(e,u.context,i(this,mi)))}),i(this,mi).emitter.on("consoleapicalled",async u=>{try{return o(u.type,u.args.map(d=>new mg(i(this,mi),d)),u.stackTrace)}catch(d){te(d)}}),i(this,ts).on("Runtime.exceptionThrown",c),i(this,ts).once(Oe.Disconnected,()=>{i(this,mi).dispose()}),i(this,ts).send("Runtime.enable").catch(te)}mainRealm(){return i(this,mi)}get client(){return i(this,ts)}async close(){var e,r;switch(i(this,Lf)){case Ot.SERVICE_WORKER:case Ot.SHARED_WORKER:{await((e=this.client.connection())==null?void 0:e.send("Target.closeTarget",{targetId:i(this,Rf)})),await((r=this.client.connection())==null?void 0:r.send("Target.detachFromTarget",{sessionId:this.client.id()}));break}default:await this.evaluate(()=>{self.close()})}}}mi=new WeakMap,ts=new WeakMap,Rf=new WeakMap,Lf=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Pv=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},Tv=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});function Iv(s){switch(s){case"warning":return"warn";default:return s}}const Lb=class Lb extends QC{constructor(e,r){super();l(this,ge);l(this,Nf,!1);l(this,nn);l(this,Pe);l(this,Vr);l(this,an);l(this,io);l(this,on);l(this,Uu);l(this,Hu);l(this,Le);l(this,at);l(this,qu);l(this,cn,new Map);l(this,Wu,new Map);l(this,zu);l(this,Vu);l(this,so,new Map);l(this,rs,new Set);l(this,Iw,De.create());l(this,$f,!1);l(this,Bf,!1);l(this,jf,e=>{var a;const r=(a=e._session())==null?void 0:a.id(),n=i(this,so).get(r);n&&(i(this,so).delete(r),this.emit("workerdestroyed",n))});l(this,Gu,e=>{if(z(e instanceof Cc),i(this,Le).onAttachedToTarget(e._target()),e._target()._getTargetInfo().type==="worker"){const r=new kk(e,e._target().url(),e._target()._targetId,e._target().type(),g(this,ge,L0).bind(this),g(this,ge,R0).bind(this));i(this,so).set(e.id(),r),this.emit("workercreated",r)}e.on(Oe.Ready,i(this,Gu))});f(this,Pe,e),f(this,an,e.parentSession()),z(i(this,an),"Tab target session is not defined."),f(this,io,i(this,an)._target()),z(i(this,io),"Tab target is not defined."),f(this,Vr,r),f(this,nn,r._targetManager()),f(this,on,new KM(e)),f(this,Uu,new HM(e,i(this,on))),f(this,Hu,new qM(e,i(this,on))),f(this,Le,new jM(e,this,this._timeoutSettings)),f(this,at,new ok(e)),f(this,qu,new Ck(e)),f(this,zu,new nk(e)),f(this,Vu,null);const n=new ie(i(this,Le));n.on(Ct.FrameAttached,o=>{this.emit("frameattached",o)}),n.on(Ct.FrameDetached,o=>{this.emit("framedetached",o)}),n.on(Ct.FrameNavigated,o=>{this.emit("framenavigated",o)}),n.on(Ct.ConsoleApiCalled,([o,c])=>{g(this,ge,R_).call(this,o,c)}),n.on(Ct.BindingCalled,([o,c])=>{g(this,ge,L_).call(this,o,c)});const a=new ie(i(this,Le).networkManager);a.on(St.Request,o=>{this.emit("request",o)}),a.on(St.RequestServedFromCache,o=>{this.emit("requestservedfromcache",o)}),a.on(St.Response,o=>{this.emit("response",o)}),a.on(St.RequestFailed,o=>{this.emit("requestfailed",o)}),a.on(St.RequestFinished,o=>{this.emit("requestfinished",o)}),i(this,an).on(Oe.Swapped,g(this,ge,T_).bind(this)),i(this,an).on(Oe.Ready,g(this,ge,I_).bind(this)),i(this,nn).on("targetGone",i(this,jf)),i(this,io)._isClosedDeferred.valueOrThrow().then(()=>{i(this,nn).off("targetGone",i(this,jf)),this.emit("close",void 0),f(this,Nf,!0)}).catch(te),g(this,ge,D0).call(this),g(this,ge,P_).call(this)}static async _create(e,r,n){var o;const a=new Lb(e,r);if(await g(o=a,ge,M_).call(o),n)try{await a.setViewport(n)}catch(c){if(Cr(c)&&Ev(c))te(c);else throw c}return a}_client(){return i(this,Pe)}isServiceWorkerBypassed(){return i(this,$f)}isDragInterceptionEnabled(){return i(this,Bf)}isJavaScriptEnabled(){return i(this,at).javascriptEnabled}async waitForFileChooser(e={}){const r=i(this,rs).size===0,{timeout:n=this._timeoutSettings.timeout()}=e,a=De.create({message:`Waiting for \`FileChooser\` failed: ${n}ms exceeded`,timeout:n});i(this,rs).add(a);let o;r&&(o=i(this,Pe).send("Page.setInterceptFileChooserDialog",{enabled:!0}));try{const[c]=await Promise.all([a.valueOrThrow(),o]);return c}catch(c){throw i(this,rs).delete(a),c}}async setGeolocation(e){return await i(this,at).setGeolocation(e)}target(){return i(this,Vr)}browser(){return i(this,Vr).browser()}browserContext(){return i(this,Vr).browserContext()}mainFrame(){return i(this,Le).mainFrame()}get keyboard(){return i(this,on)}get touchscreen(){return i(this,Hu)}get coverage(){return i(this,zu)}get tracing(){return i(this,qu)}frames(){return i(this,Le).frames()}workers(){return Array.from(i(this,so).values())}async setRequestInterception(e){return await i(this,Le).networkManager.setRequestInterception(e)}async setBypassServiceWorker(e){return f(this,$f,e),await i(this,Pe).send("Network.setBypassServiceWorker",{bypass:e})}async setDragInterception(e){return f(this,Bf,e),await i(this,Pe).send("Input.setInterceptDrags",{enabled:e})}async setOfflineMode(e){return await i(this,Le).networkManager.setOfflineMode(e)}async emulateNetworkConditions(e){return await i(this,Le).networkManager.emulateNetworkConditions(e)}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}getDefaultTimeout(){return this._timeoutSettings.timeout()}async queryObjects(e){z(!e.disposed,"Prototype JSHandle is disposed!"),z(e.id,"Prototype JSHandle must not be referencing primitive value");const r=await this.mainFrame().client.send("Runtime.queryObjects",{prototypeObjectId:e.id});return this.mainFrame().mainRealm().createCdpHandle(r.objects)}async cookies(...e){const r=(await i(this,Pe).send("Network.getCookies",{urls:e.length?e:[this.url()]})).cookies,n=["sourcePort"],a=o=>{for(const c of n)delete o[c];return o};return r.map(a).map(o=>({...o,partitionKey:o.partitionKey?o.partitionKey.topLevelSite:void 0}))}async deleteCookie(...e){const r=this.url();for(const n of e){const a=Object.assign({},n);!n.url&&r.startsWith("http")&&(a.url=r),await i(this,Pe).send("Network.deleteCookies",a)}}async setCookie(...e){const r=this.url(),n=r.startsWith("http"),a=e.map(o=>{const c=Object.assign({},o);return!c.url&&n&&(c.url=r),z(c.url!=="about:blank",`Blank page can not have cookie "${c.name}"`),z(!String.prototype.startsWith.call(c.url||"","data:"),`Data URL page can not have cookie "${c.name}"`),c});await this.deleteCookie(...a),a.length&&await i(this,Pe).send("Network.setCookies",{cookies:a.map(o=>({...o,partitionKey:o.partitionKey?{topLevelSite:o.partitionKey,hasCrossSiteAncestor:!1}:void 0}))})}async exposeFunction(e,r){if(i(this,cn).has(e))throw new Error(`Failed to add page binding with name ${e}: window['${e}'] already exists!`);const n=PM("exposedFun",e);let a;switch(typeof r){case"function":a=new pg(e,r,n);break;default:a=new pg(e,r.default,n);break}i(this,cn).set(e,a);const[{identifier:o}]=await Promise.all([i(this,Le).evaluateOnNewDocument(n),i(this,Le).addExposedFunctionBinding(a)]);i(this,Wu).set(e,o)}async removeExposedFunction(e){const r=i(this,Wu).get(e);if(!r)throw new Error(`Function with name "${e}" does not exist`);const n=i(this,cn).get(e);i(this,Wu).delete(e),i(this,cn).delete(e),await Promise.all([i(this,Le).removeScriptToEvaluateOnNewDocument(r),i(this,Le).removeExposedFunctionBinding(n)])}async authenticate(e){return await i(this,Le).networkManager.authenticate(e)}async setExtraHTTPHeaders(e){return await i(this,Le).networkManager.setExtraHTTPHeaders(e)}async setUserAgent(e,r){return await i(this,Le).networkManager.setUserAgent(e,r)}async metrics(){const e=await i(this,Pe).send("Performance.getMetrics");return g(this,ge,O0).call(this,e.metrics)}async reload(e){const[r]=await Promise.all([this.waitForNavigation({...e,ignoreSameDocumentNavigation:!0}),i(this,Pe).send("Page.reload")]);return r}async createCDPSession(){return await this.target().createCDPSession()}async goBack(e={}){return await g(this,ge,N0).call(this,-1,e)}async goForward(e={}){return await g(this,ge,N0).call(this,1,e)}async bringToFront(){await i(this,Pe).send("Page.bringToFront")}async setJavaScriptEnabled(e){return await i(this,at).setJavaScriptEnabled(e)}async setBypassCSP(e){await i(this,Pe).send("Page.setBypassCSP",{enabled:e})}async emulateMediaType(e){return await i(this,at).emulateMediaType(e)}async emulateCPUThrottling(e){return await i(this,at).emulateCPUThrottling(e)}async emulateMediaFeatures(e){return await i(this,at).emulateMediaFeatures(e)}async emulateTimezone(e){return await i(this,at).emulateTimezone(e)}async emulateIdleState(e){return await i(this,at).emulateIdleState(e)}async emulateVisionDeficiency(e){return await i(this,at).emulateVisionDeficiency(e)}async setViewport(e){const r=await i(this,at).emulateViewport(e);f(this,Vu,e),r&&await this.reload()}viewport(){return i(this,Vu)}async evaluateOnNewDocument(e,...r){const n=ov(e,...r);return await i(this,Le).evaluateOnNewDocument(n)}async removeScriptToEvaluateOnNewDocument(e){return await i(this,Le).removeScriptToEvaluateOnNewDocument(e)}async setCacheEnabled(e=!0){await i(this,Le).networkManager.setCacheEnabled(e)}async _screenshot(e){const r={stack:[],error:void 0,hasError:!1};try{const{fromSurface:n,omitBackground:a,optimizeForSpeed:o,quality:c,clip:u,type:d,captureBeyondViewport:h}=e,p=this.target()._targetManager()instanceof ck,m=Pv(r,new Gm,!0);!p&&a&&(d==="png"||d==="webp")&&(await i(this,at).setTransparentBackgroundColor(),m.defer(async()=>{await i(this,at).resetDefaultBackgroundColor().catch(te)}));let w=u;if(w&&!h){const v=await this.mainFrame().isolatedRealm().evaluate(()=>{const{height:y,pageLeft:S,pageTop:E,width:k}=window.visualViewport;return{x:S,y:E,height:y,width:k}});w=zM(w,v)}const{data:b}=await i(this,Pe).send("Page.captureScreenshot",{format:d,...o?{optimizeForSpeed:o}:{},...c!==void 0?{quality:Math.round(c)}:{},...w?{clip:{...w,scale:w.scale??1}}:{},...n?{}:{fromSurface:n},captureBeyondViewport:h});return b}catch(n){r.error=n,r.hasError=!0}finally{const n=Tv(r);n&&await n}}async createPDFStream(e={}){const{timeout:r=this._timeoutSettings.timeout()}=e,{landscape:n,displayHeaderFooter:a,headerTemplate:o,footerTemplate:c,printBackground:u,scale:d,width:h,height:p,margin:m,pageRanges:w,preferCSSPageSize:b,omitBackground:v,tagged:y,outline:S,waitForFonts:E}=AC(e);v&&await i(this,at).setTransparentBackgroundColor(),E&&await yt(ke(this.mainFrame().isolatedRealm().evaluate(()=>document.fonts.ready)).pipe(Ft(er(r))));const k=i(this,Pe).send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:n,displayHeaderFooter:a,headerTemplate:o,footerTemplate:c,printBackground:u,scale:d,paperWidth:h,paperHeight:p,marginTop:m.top,marginBottom:m.bottom,marginLeft:m.left,marginRight:m.right,pageRanges:w,preferCSSPageSize:b,generateTaggedPDF:y,generateDocumentOutline:S}),_=await yt(ke(k).pipe(Ft(er(r))));return v&&await i(this,at).resetDefaultBackgroundColor(),z(_.stream,"`stream` is missing from `Page.printToPDF"),await TC(i(this,Pe),_.stream)}async pdf(e={}){const{path:r=void 0}=e,n=await this.createPDFStream(e),a=await PC(n,r);return z(a,"Could not create typed array"),a}async close(e={runBeforeUnload:void 0}){const r={stack:[],error:void 0,hasError:!1};try{const n=Pv(r,await this.browserContext().waitForScreenshotOperations(),!1),a=i(this,Pe).connection();z(a,"Protocol error: Connection closed. Most likely the page has been closed."),!!e.runBeforeUnload?await i(this,Pe).send("Page.close"):(await a.send("Target.closeTarget",{targetId:i(this,Vr)._targetId}),await i(this,io)._isClosedDeferred.valueOrThrow())}catch(n){r.error=n,r.hasError=!0}finally{Tv(r)}}isClosed(){return i(this,Nf)}get mouse(){return i(this,Uu)}async waitForDevicePrompt(e={}){return await this.mainFrame().waitForDevicePrompt(e)}};Nf=new WeakMap,nn=new WeakMap,Pe=new WeakMap,Vr=new WeakMap,an=new WeakMap,io=new WeakMap,on=new WeakMap,Uu=new WeakMap,Hu=new WeakMap,Le=new WeakMap,at=new WeakMap,qu=new WeakMap,cn=new WeakMap,Wu=new WeakMap,zu=new WeakMap,Vu=new WeakMap,so=new WeakMap,rs=new WeakMap,Iw=new WeakMap,$f=new WeakMap,Bf=new WeakMap,ge=new WeakSet,P_=function(){const e=[];for(const n of i(this,nn).getChildTargets(i(this,Vr)))e.push(n);let r=0;for(;r<e.length;){const n=e[r];r++;const a=n._session();a&&i(this,Gu).call(this,a);for(const o of i(this,nn).getChildTargets(n))e.push(o)}},T_=async function(e){f(this,Pe,e),z(i(this,Pe)instanceof Cc,"CDPSession is not instance of CDPSessionImpl"),f(this,Vr,i(this,Pe)._target()),z(i(this,Vr),"Missing target on swap"),i(this,on).updateClient(e),i(this,Uu).updateClient(e),i(this,Hu).updateClient(e),i(this,at).updateClient(e),i(this,qu).updateClient(e),i(this,zu).updateClient(e),await i(this,Le).swapFrameTree(e),g(this,ge,D0).call(this)},I_=async function(e){z(e instanceof Cc),e._target()._subtype()==="prerender"&&(i(this,Le).registerSpeculativeSession(e).catch(te),i(this,at).registerSpeculativeSession(e).catch(te))},D0=function(){const e=new ie(i(this,Pe));e.on(Oe.Ready,i(this,Gu)),e.on(Oe.Disconnected,()=>{i(this,Iw).reject(new Nr("Target closed"))}),e.on("Page.domContentEventFired",()=>{this.emit("domcontentloaded",void 0)}),e.on("Page.loadEventFired",()=>{this.emit("load",void 0)}),e.on("Page.javascriptDialogOpening",g(this,ge,N_).bind(this)),e.on("Runtime.exceptionThrown",g(this,ge,R0).bind(this)),e.on("Inspector.targetCrashed",g(this,ge,F_).bind(this)),e.on("Performance.metrics",g(this,ge,O_).bind(this)),e.on("Log.entryAdded",g(this,ge,D_).bind(this)),e.on("Page.fileChooserOpened",g(this,ge,A_).bind(this))},jf=new WeakMap,Gu=new WeakMap,M_=async function(){try{await Promise.all([i(this,Le).initialize(i(this,Pe)),i(this,Pe).send("Performance.enable"),i(this,Pe).send("Log.enable")])}catch(e){if(Cr(e)&&Ev(e))te(e);else throw e}},A_=async function(e){const r={stack:[],error:void 0,hasError:!1};try{if(!i(this,rs).size)return;const n=i(this,Le).frame(e.frameId);z(n,"This should never happen.");const a=Pv(r,await n.worlds[oi].adoptBackendNode(e.backendNodeId),!1),o=new mM(a.move(),e);for(const c of i(this,rs))c.resolve(o);i(this,rs).clear()}catch(n){r.error=n,r.hasError=!0}finally{Tv(r)}},F_=function(){this.emit("error",new Error("Page crashed!"))},D_=function(e){const{level:r,text:n,args:a,source:o,url:c,lineNumber:u}=e.entry;a&&a.map(d=>{hk(i(this,Pe),d)}),o!=="worker"&&this.emit("console",new kv(Iv(r),n,[],[{url:c,lineNumber:u}]))},O_=function(e){this.emit("metrics",{title:e.title,metrics:g(this,ge,O0).call(this,e.metrics)})},O0=function(e){const r={};for(const n of e||[])WM.has(n.name)&&(r[n.name]=n.value);return r},R0=function(e){this.emit("pageerror",_M(e.exceptionDetails))},R_=function(e,r){const n=r.args.map(a=>e.createCdpHandle(a));g(this,ge,L0).call(this,Iv(r.type),n,r.stackTrace)},L_=async function(e,r){let n;try{n=JSON.parse(r.payload)}catch{return}const{type:a,name:o,seq:c,args:u,isTrivial:d}=n;if(a!=="exposedFun")return;const h=e.context;if(!h)return;const p=i(this,cn).get(o);await(p==null?void 0:p.run(h,c,u,d))},L0=function(e,r,n){if(!this.listenerCount("console")){r.forEach(u=>u.dispose());return}const a=[];for(const u of r){const d=u.remoteObject();d.objectId?a.push(u.toString()):a.push(ea(d))}const o=[];if(n)for(const u of n.callFrames)o.push({url:u.url,lineNumber:u.lineNumber,columnNumber:u.columnNumber});const c=new kv(Iv(e),a.join(" "),r,o);this.emit("console",c)},N_=function(e){const r=bI(e.type),n=new bM(i(this,Pe),r,e.message,e.defaultPrompt);this.emit("dialog",n)},N0=async function(e,r){const n=await i(this,Pe).send("Page.getNavigationHistory"),a=n.entries[n.currentIndex+e];return a?(await Promise.all([this.waitForNavigation(r),i(this,Pe).send("Page.navigateToHistoryEntry",{entryId:a.id})]))[0]:null};let Ad=Lb;const WM=new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]);function zM(s,t){const e=Math.max(s.x,t.x),r=Math.max(s.y,t.y);return{x:e,y:r,width:Math.max(Math.min(s.x+s.width,t.x+t.width)-e,0),height:Math.max(Math.min(s.y+s.height,t.y+t.height)-r,0)}}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var kr;(function(s){s.SUCCESS="success",s.ABORTED="aborted"})(kr||(kr={}));let yg=(wx=class extends Md{constructor(e,r,n,a,o){super();l(this,un);l(this,ln);l(this,gi);l(this,Xu);l(this,dn);l(this,Ju,new Set);T(this,"_initializedDeferred",De.create());T(this,"_isClosedDeferred",De.create());T(this,"_targetId");f(this,ln,r),f(this,Xu,a),f(this,gi,e),f(this,un,n),this._targetId=e.targetId,f(this,dn,o),i(this,ln)&&i(this,ln)instanceof Cc&&i(this,ln)._setTarget(this)}async asPage(){const e=this._session();return e?await Ad._create(e,this,null):await this.createCDPSession().then(r=>Ad._create(r,this,null))}_subtype(){return i(this,gi).subtype}_session(){return i(this,ln)}_addChildTarget(e){i(this,Ju).add(e)}_removeChildTarget(e){i(this,Ju).delete(e)}_childTargets(){return i(this,Ju)}_sessionFactory(){if(!i(this,dn))throw new Error("sessionFactory is not initialized");return i(this,dn)}createCDPSession(){if(!i(this,dn))throw new Error("sessionFactory is not initialized");return i(this,dn).call(this,!1).then(e=>(e._setTarget(this),e))}url(){return i(this,gi).url}type(){switch(i(this,gi).type){case"page":return Ot.PAGE;case"background_page":return Ot.BACKGROUND_PAGE;case"service_worker":return Ot.SERVICE_WORKER;case"shared_worker":return Ot.SHARED_WORKER;case"browser":return Ot.BROWSER;case"webview":return Ot.WEBVIEW;case"tab":return Ot.TAB;default:return Ot.OTHER}}_targetManager(){if(!i(this,Xu))throw new Error("targetManager is not initialized");return i(this,Xu)}_getTargetInfo(){return i(this,gi)}browser(){if(!i(this,un))throw new Error("browserContext is not initialized");return i(this,un).browser()}browserContext(){if(!i(this,un))throw new Error("browserContext is not initialized");return i(this,un)}opener(){const{openerId:e}=i(this,gi);if(e)return this.browser().targets().find(r=>r._targetId===e)}_targetInfoChanged(e){f(this,gi,e),this._checkIfInitialized()}_initialize(){this._initializedDeferred.resolve(kr.SUCCESS)}_isTargetExposed(){return this.type()!==Ot.TAB&&!this._subtype()}_checkIfInitialized(){this._initializedDeferred.resolved()||this._initializedDeferred.resolve(kr.SUCCESS)}},un=new WeakMap,ln=new WeakMap,gi=new WeakMap,Xu=new WeakMap,dn=new WeakMap,Ju=new WeakMap,wx);const Nb=class Nb extends yg{constructor(e,r,n,a,o,c){super(e,r,n,a,o);l(this,Kf);T(this,"pagePromise");f(this,Kf,c??void 0)}_initialize(){this._initializedDeferred.valueOrThrow().then(async e=>{if(e===kr.ABORTED)return;const r=this.opener();if(!(r instanceof Nb))return;if(!r||!r.pagePromise||this.type()!=="page")return!0;const n=await r.pagePromise;if(!n.listenerCount("popup"))return!0;const a=await this.page();return n.emit("popup",a),!0}).catch(te),this._checkIfInitialized()}async page(){if(!this.pagePromise){const e=this._session();this.pagePromise=(e?Promise.resolve(e):this._sessionFactory()(!1)).then(r=>Ad._create(r,this,i(this,Kf)??null))}return await this.pagePromise??null}_checkIfInitialized(){this._initializedDeferred.resolved()||this._getTargetInfo().url!==""&&this._initializedDeferred.resolve(kr.SUCCESS)}};Kf=new WeakMap;let vg=Nb;class VM extends vg{}class GM extends yg{constructor(){super(...arguments);l(this,Yu)}async worker(){if(!i(this,Yu)){const e=this._session();f(this,Yu,(e?Promise.resolve(e):this._sessionFactory()(!1)).then(r=>new kk(r,this._getTargetInfo().url,this._targetId,this.type(),()=>{},()=>{})))}return await i(this,Yu)}}Yu=new WeakMap;class XM extends yg{}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function JM(s,t){return!!s._subtype()&&!t.subtype}class YM extends ie{constructor(e,r,n,a=!0){super();l(this,nr);l(this,kt);l(this,hn,new Map);l(this,Et,new Map);l(this,no,new Map);l(this,Uf,new Set);l(this,fn);l(this,ao);l(this,oo,new WeakMap);l(this,pn,new WeakMap);l(this,Hf,De.create());l(this,co,new Set);l(this,qf,!0);l(this,Qu,[{}]);l(this,Mw,()=>{if(i(this,qf))for(const[e,r]of i(this,hn).entries()){const n=new yg(r,void 0,void 0,this,void 0),a=r.type==="page"||r.type==="iframe",o=r.url.startsWith("chrome-extension://");(!i(this,fn)||i(this,fn).call(this,n))&&a&&!o&&i(this,co).add(e)}});l(this,Wf,e=>{g(this,nr,B0).call(this,e)});l(this,zf,async e=>{if(i(this,hn).set(e.targetInfo.targetId,e.targetInfo),this.emit("targetDiscovered",e.targetInfo),e.targetInfo.type==="browser"&&e.targetInfo.attached){if(i(this,Et).has(e.targetInfo.targetId))return;const r=i(this,ao).call(this,e.targetInfo,void 0);r._initialize(),i(this,Et).set(e.targetInfo.targetId,r)}});l(this,Vf,e=>{const r=i(this,hn).get(e.targetId);if(i(this,hn).delete(e.targetId),g(this,nr,ld).call(this,e.targetId),(r==null?void 0:r.type)==="service_worker"&&i(this,Et).has(e.targetId)){const n=i(this,Et).get(e.targetId);n&&(this.emit("targetGone",n),i(this,Et).delete(e.targetId))}});l(this,Gf,e=>{var o;if(i(this,hn).set(e.targetInfo.targetId,e.targetInfo),i(this,Uf).has(e.targetInfo.targetId)||!i(this,Et).has(e.targetInfo.targetId)||!e.targetInfo.attached)return;const r=i(this,Et).get(e.targetInfo.targetId);if(!r)return;const n=r.url(),a=r._initializedDeferred.value()===kr.SUCCESS;if(JM(r,e.targetInfo)){const c=r==null?void 0:r._session();z(c,"Target that is being activated is missing a CDPSession."),(o=c.parentSession())==null||o.emit(Oe.Swapped,c)}r._targetInfoChanged(e.targetInfo),a&&n!==r.url()&&this.emit("targetChanged",{target:r,wasInitialized:a,previousURL:n})});l(this,Aw,async(e,r)=>{const n=r.targetInfo,a=i(this,kt).session(r.sessionId);if(!a)throw new Error(`Session ${r.sessionId} was not created.`);const o=async()=>{await a.send("Runtime.runIfWaitingForDebugger").catch(te),await e.send("Target.detachFromTarget",{sessionId:a.id()}).catch(te)};if(!i(this,kt).isAutoAttached(n.targetId))return;if(n.type==="service_worker"){if(g(this,nr,ld).call(this,n.targetId),await o(),i(this,Et).has(n.targetId))return;const h=i(this,ao).call(this,n);h._initialize(),i(this,Et).set(n.targetId,h),this.emit("targetAvailable",h);return}const c=i(this,Et).has(n.targetId),u=c?i(this,Et).get(n.targetId):i(this,ao).call(this,n,a,e instanceof kd?e:void 0);if(i(this,fn)&&!i(this,fn).call(this,u)){i(this,Uf).add(n.targetId),g(this,nr,ld).call(this,n.targetId),await o();return}g(this,nr,$0).call(this,a),c?(a._setTarget(u),i(this,no).set(a.id(),i(this,Et).get(n.targetId))):(u._initialize(),i(this,Et).set(n.targetId,u),i(this,no).set(a.id(),u));const d=e instanceof kd?e._target():null;d==null||d._addChildTarget(u),e.emit(Oe.Ready,a),i(this,co).delete(u._targetId),c||this.emit("targetAvailable",u),g(this,nr,ld).call(this),await Promise.all([a.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:i(this,Qu)}),a.send("Runtime.runIfWaitingForDebugger")]).catch(te)});l(this,Fw,(e,r)=>{const n=i(this,no).get(r.sessionId);i(this,no).delete(r.sessionId),n&&(e instanceof kd&&e._target()._removeChildTarget(n),i(this,Et).delete(n._targetId),this.emit("targetGone",n))});f(this,kt,e),f(this,fn,n),f(this,ao,r),f(this,qf,a),i(this,kt).on("Target.targetCreated",i(this,zf)),i(this,kt).on("Target.targetDestroyed",i(this,Vf)),i(this,kt).on("Target.targetInfoChanged",i(this,Gf)),i(this,kt).on(Oe.SessionDetached,i(this,Wf)),g(this,nr,$0).call(this,i(this,kt))}async initialize(){await i(this,kt).send("Target.setDiscoverTargets",{discover:!0,filter:i(this,Qu)}),i(this,Mw).call(this),await i(this,kt).send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:[{type:"page",exclude:!0},...i(this,Qu)]}),g(this,nr,ld).call(this),await i(this,Hf).valueOrThrow()}getChildTargets(e){return e._childTargets()}dispose(){i(this,kt).off("Target.targetCreated",i(this,zf)),i(this,kt).off("Target.targetDestroyed",i(this,Vf)),i(this,kt).off("Target.targetInfoChanged",i(this,Gf)),i(this,kt).off(Oe.SessionDetached,i(this,Wf)),g(this,nr,B0).call(this,i(this,kt))}getAvailableTargets(){return i(this,Et)}}kt=new WeakMap,hn=new WeakMap,Et=new WeakMap,no=new WeakMap,Uf=new WeakMap,fn=new WeakMap,ao=new WeakMap,oo=new WeakMap,pn=new WeakMap,Hf=new WeakMap,co=new WeakMap,qf=new WeakMap,Qu=new WeakMap,Mw=new WeakMap,nr=new WeakSet,$0=function(e){const r=a=>{i(this,Aw).call(this,e,a)};z(!i(this,oo).has(e)),i(this,oo).set(e,r),e.on("Target.attachedToTarget",r);const n=a=>i(this,Fw).call(this,e,a);z(!i(this,pn).has(e)),i(this,pn).set(e,n),e.on("Target.detachedFromTarget",n)},B0=function(e){const r=i(this,oo).get(e);r&&(e.off("Target.attachedToTarget",r),i(this,oo).delete(e)),i(this,pn).has(e)&&(e.off("Target.detachedFromTarget",i(this,pn).get(e)),i(this,pn).delete(e))},Wf=new WeakMap,zf=new WeakMap,Vf=new WeakMap,Gf=new WeakMap,Aw=new WeakMap,ld=function(e){e!==void 0&&i(this,co).delete(e),i(this,co).size===0&&i(this,Hf).resolve()},Fw=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const $b=class $b extends FC{constructor(e,r,n,a,o,c,u,d,h=!0){super();l(this,uo);T(this,"protocol","cdp");l(this,Zu);l(this,Xf);l(this,xt);l(this,Jf);l(this,el);l(this,tl);l(this,mn);l(this,is,new Map);l(this,Qe);l(this,Yf,()=>{this.emit("disconnected",void 0)});l(this,Qf,(e,r)=>{var u;const{browserContextId:n}=e,a=n&&i(this,is).has(n)?i(this,is).get(n):i(this,mn);if(!a)throw new Error("Missing browser context");const o=d=>i(this,xt)._createSession(e,d),c=new XM(e,r,a,i(this,Qe),o);return(u=e.url)!=null&&u.startsWith("devtools://")?new VM(e,r,a,i(this,Qe),o,i(this,Zu)??null):i(this,tl).call(this,c)?new vg(e,r,a,i(this,Qe),o,i(this,Zu)??null):e.type==="service_worker"||e.type==="shared_worker"?new GM(e,r,a,i(this,Qe),o):c});l(this,Zf,async e=>{e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===kr.SUCCESS&&(this.emit("targetcreated",e),e.browserContext().emit("targetcreated",e))});l(this,ep,async e=>{e._initializedDeferred.resolve(kr.ABORTED),e._isClosedDeferred.resolve(),e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===kr.SUCCESS&&(this.emit("targetdestroyed",e),e.browserContext().emit("targetdestroyed",e))});l(this,tp,({target:e})=>{this.emit("targetchanged",e),e.browserContext().emit("targetchanged",e)});l(this,rp,e=>{this.emit("targetdiscovered",e)});e=e||"chrome",f(this,Zu,a),f(this,Xf,o),f(this,xt,r),f(this,Jf,c||(()=>{})),f(this,el,u||(()=>!0)),g(this,uo,$_).call(this,d),e==="firefox"?f(this,Qe,new ck(r,i(this,Qf),i(this,el))):f(this,Qe,new YM(r,i(this,Qf),i(this,el),h)),f(this,mn,new Sv(i(this,xt),this));for(const p of n)i(this,is).set(p,new Sv(i(this,xt),this,p))}static async _create(e,r,n,a,o,c,u,d,h,p=!0){const m=new $b(e,r,n,o,c,u,d,h,p);return a&&await r.send("Security.setIgnoreCertificateErrors",{ignore:!0}),await m._attach(),m}async _attach(){i(this,xt).on(Oe.Disconnected,i(this,Yf)),i(this,Qe).on("targetAvailable",i(this,Zf)),i(this,Qe).on("targetGone",i(this,ep)),i(this,Qe).on("targetChanged",i(this,tp)),i(this,Qe).on("targetDiscovered",i(this,rp)),await i(this,Qe).initialize()}_detach(){i(this,xt).off(Oe.Disconnected,i(this,Yf)),i(this,Qe).off("targetAvailable",i(this,Zf)),i(this,Qe).off("targetGone",i(this,ep)),i(this,Qe).off("targetChanged",i(this,tp)),i(this,Qe).off("targetDiscovered",i(this,rp))}process(){return i(this,Xf)??null}_targetManager(){return i(this,Qe)}_getIsPageTargetCallback(){return i(this,tl)}async createBrowserContext(e={}){const{proxyServer:r,proxyBypassList:n}=e,{browserContextId:a}=await i(this,xt).send("Target.createBrowserContext",{proxyServer:r,proxyBypassList:n&&n.join(",")}),o=new Sv(i(this,xt),this,a);return i(this,is).set(a,o),o}browserContexts(){return[i(this,mn),...Array.from(i(this,is).values())]}defaultBrowserContext(){return i(this,mn)}async _disposeContext(e){e&&(await i(this,xt).send("Target.disposeBrowserContext",{browserContextId:e}),i(this,is).delete(e))}wsEndpoint(){return i(this,xt).url()}async newPage(){return await i(this,mn).newPage()}async _createPageInContext(e){const{targetId:r}=await i(this,xt).send("Target.createTarget",{url:"about:blank",browserContextId:e||void 0}),n=await this.waitForTarget(c=>c._targetId===r);if(!n)throw new Error(`Missing target for page (id = ${r})`);if(!(await n._initializedDeferred.valueOrThrow()===kr.SUCCESS))throw new Error(`Failed to create target for page (id = ${r})`);const o=await n.page();if(!o)throw new Error(`Failed to create a page for context (id = ${e})`);return o}targets(){return Array.from(i(this,Qe).getAvailableTargets().values()).filter(e=>e._isTargetExposed()&&e._initializedDeferred.value()===kr.SUCCESS)}target(){const e=this.targets().find(r=>r.type()==="browser");if(!e)throw new Error("Browser target is not found");return e}async version(){return(await g(this,uo,j0).call(this)).product}async userAgent(){return(await g(this,uo,j0).call(this)).userAgent}async close(){await i(this,Jf).call(null),await this.disconnect()}disconnect(){return i(this,Qe).dispose(),i(this,xt).dispose(),this._detach(),Promise.resolve()}get connected(){return!i(this,xt)._closed}get debugInfo(){return{pendingProtocolErrors:i(this,xt).getPendingProtocolErrors()}}};Zu=new WeakMap,Xf=new WeakMap,xt=new WeakMap,Jf=new WeakMap,el=new WeakMap,tl=new WeakMap,mn=new WeakMap,is=new WeakMap,Qe=new WeakMap,Yf=new WeakMap,uo=new WeakSet,$_=function(e){f(this,tl,e||(r=>r.type()==="page"||r.type()==="background_page"||r.type()==="webview"))},Qf=new WeakMap,Zf=new WeakMap,ep=new WeakMap,tp=new WeakMap,rp=new WeakMap,j0=function(){return i(this,xt).send("Browser.getVersion")};let Mv=$b;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */async function QM(s,t,e){const{acceptInsecureCerts:r=!1,defaultViewport:n=xC,targetFilter:a,_isPageTarget:o,slowMo:c=0,protocolTimeout:u}=e,d=new sk(t,s,c,u),p=(await d.send("Browser.getVersion")).product.toLowerCase().includes("firefox")?"firefox":"chrome",{browserContextIds:m}=await d.send("Target.getBrowserContexts");return await Mv._create(p||"chrome",d,m,r,n,void 0,()=>d.send("Browser.close").catch(te),a,o)}const Ek={targetId:"tabTargetId",type:"tab",title:"tab",url:"about:blank",attached:!1,canAccessOpener:!1},xk={targetId:"pageTargetId",type:"page",title:"page",url:"about:blank",attached:!1,canAccessOpener:!1},Bb=class Bb{constructor(t){l(this,ar);T(this,"onmessage");T(this,"onclose");l(this,lo);l(this,ip,(t,e,r)=>{t.tabId===i(this,lo)&&g(this,ar,Or).call(this,{sessionId:t.sessionId??"pageTargetSessionId",method:e,params:r})});f(this,lo,t),chrome.debugger.onEvent.addListener(i(this,ip))}static async connectTab(t){return await chrome.debugger.attach({tabId:t},"1.3"),new Bb(t)}send(t){const e=JSON.parse(t);switch(e.method){case"Browser.getVersion":{g(this,ar,Or).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{protocolVersion:"1.3",product:"chrome",revision:"unknown",userAgent:"chrome",jsVersion:"unknown"}});return}case"Target.getBrowserContexts":{g(this,ar,Or).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{browserContextIds:[]}});return}case"Target.setDiscoverTargets":{g(this,ar,Or).call(this,{method:"Target.targetCreated",params:{targetInfo:Ek}}),g(this,ar,Or).call(this,{method:"Target.targetCreated",params:{targetInfo:xk}}),g(this,ar,Or).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}case"Target.setAutoAttach":{e.sessionId==="tabTargetSessionId"?g(this,ar,Or).call(this,{method:"Target.attachedToTarget",params:{targetInfo:xk,sessionId:"pageTargetSessionId"}}):e.sessionId||g(this,ar,Or).call(this,{method:"Target.attachedToTarget",params:{targetInfo:Ek,sessionId:"tabTargetSessionId"}}),g(this,ar,Or).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}}e.sessionId==="pageTargetSessionId"&&delete e.sessionId,chrome.debugger.sendCommand({tabId:i(this,lo),sessionId:e.sessionId},e.method,e.params).then(r=>{g(this,ar,Or).call(this,{id:e.id,sessionId:e.sessionId??"pageTargetSessionId",method:e.method,result:r})}).catch(r=>{g(this,ar,Or).call(this,{id:e.id,sessionId:e.sessionId??"pageTargetSessionId",method:e.method,error:r})})}close(){chrome.debugger.onEvent.removeListener(i(this,ip)),chrome.debugger.detach({tabId:i(this,lo)})}};lo=new WeakMap,ip=new WeakMap,ar=new WeakSet,Or=function(t){var e;(e=this.onmessage)==null||e.call(this,JSON.stringify(t))};let Av=Bb;const jb=class jb{constructor(t){l(this,ss);T(this,"onmessage");T(this,"onclose");f(this,ss,t),i(this,ss).addEventListener("message",e=>{this.onmessage&&this.onmessage.call(null,e.data)}),i(this,ss).addEventListener("close",()=>{this.onclose&&this.onclose.call(null)}),i(this,ss).addEventListener("error",()=>{})}static create(t){return new Promise((e,r)=>{const n=new WebSocket(t);n.addEventListener("open",()=>e(new jb(n))),n.addEventListener("error",r)})}send(t){i(this,ss).send(t)}close(){i(this,ss).close()}};ss=new WeakMap;let Fv=jb;const ZM=Object.freeze(Object.defineProperty({__proto__:null,BrowserWebSocketTransport:Fv},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const eA=[{name:"Blackberry PlayBook",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:600,height:1024,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Blackberry PlayBook landscape",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:1024,height:600,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"BlackBerry Z30",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"BlackBerry Z30 landscape",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note 3",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note 3 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note II",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note II landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S III",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S III landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S5",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S8",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:360,height:740,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S8 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:740,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S9+",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:320,height:658,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S9+ landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:658,height:320,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Tab S4",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:712,height:1138,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Tab S4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:1138,height:712,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 6)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 6) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 7)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 7) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Mini",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Mini landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:1366,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1366,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro 11",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro 11 landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 4",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:320,height:480,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 4 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:480,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 5",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 5 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone SE",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone SE landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone X",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone X landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone XR",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone XR landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:828,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:828,height:414,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:390,height:663,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:750,height:340,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:428,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:832,height:378,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"JioPhone 2",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:240,height:320,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"JioPhone 2 landscape",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:320,height:240,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Kindle Fire HDX",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Kindle Fire HDX landscape",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"LG Optimus L70",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"LG Optimus L70 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Microsoft Lumia 550",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950 landscape",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 10",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 10 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 4",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5X",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5X landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6P",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6P landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 7",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:600,height:960,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 7 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:960,height:600,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia Lumia 520",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia Lumia 520 landscape",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia N9",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia N9 landscape",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:731,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:731,height:411,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2 XL",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:823,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 XL landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:823,height:411,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 3",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:393,height:786,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 3 landscape",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:786,height:393,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4a (5G)",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4a (5G) landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 5",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:393,height:851,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:851,height:393,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Moto G4",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Moto G4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}}],_k={};for(const s of eA)_k[s.name]=s;Object.freeze(_k);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */async function tA(s,t,e){const{acceptInsecureCerts:r=!1,defaultViewport:n=xC}=e,{bidiConnection:a,cdpConnection:o,closeCallback:c}=await rA(s,t,e);return await(await Promise.resolve().then(()=>ux)).BidiBrowser.create({connection:a,cdpConnection:o,closeCallback:c,process:void 0,defaultViewport:n,acceptInsecureCerts:r,capabilities:e.capabilities})}async function rA(s,t,e){const r=await Promise.resolve().then(()=>ux),{slowMo:n=0,protocolTimeout:a}=e,o=new r.BidiConnection(t,s,n,a);try{const h=await o.send("session.status",{});if("type"in h&&h.type==="success")return{bidiConnection:o,closeCallback:async()=>{await o.send("browser.close",{}).catch(te)}}}catch(h){if(!(h instanceof Yn))throw h}o.unbind();const c=new sk(t,s,n,a);if((await c.send("Browser.getVersion")).product.toLowerCase().includes("firefox"))throw new fe("Firefox is not supported in BiDi over CDP mode.");const d=await r.connectBidiOverCdp(c);return{cdpConnection:c,bidiConnection:d,closeCallback:async()=>{await c.send("Browser.close").catch(te)}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Pk=async()=>SC?(await Promise.resolve().then(()=>hL)).NodeWebSocketTransport:(await Promise.resolve().then(()=>ZM)).BrowserWebSocketTransport;async function iA(s){const{connectionTransport:t,endpointUrl:e}=await sA(s);return s.protocol==="webDriverBiDi"?await tA(t,e,s):await QM(t,e,s)}async function sA(s){const{browserWSEndpoint:t,browserURL:e,transport:r,headers:n={}}=s;if(z(+!!t+ +!!e+ +!!r==1,"Exactly one of browserWSEndpoint, browserURL or transport must be passed to puppeteer.connect"),r)return{connectionTransport:r,endpointUrl:""};if(t)return{connectionTransport:await(await Pk()).create(t,n),endpointUrl:t};if(e){const a=await nA(e);return{connectionTransport:await(await Pk()).create(a),endpointUrl:a}}throw new Error("Invalid connection options")}async function nA(s){const t=new URL("/json/version",s);try{const e=await globalThis.fetch(t.toString(),{method:"GET"});if(!e.ok)throw new Error(`HTTP ${e.statusText}`);return(await e.json()).webSocketDebuggerUrl}catch(e){throw Cr(e)&&(e.message=`Failed to fetch browser webSocket URL from ${t}: `+e.message),e}}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Tk{constructor(t){T(this,"_isPuppeteerCore");T(this,"_changedBrowsers",!1);this._isPuppeteerCore=t.isPuppeteerCore,this.connect=this.connect.bind(this)}static registerCustomQueryHandler(t,e){return this.customQueryHandlers.register(t,e)}static unregisterCustomQueryHandler(t){return this.customQueryHandlers.unregister(t)}static customQueryHandlerNames(){return this.customQueryHandlers.names()}static clearCustomQueryHandlers(){return this.customQueryHandlers.clear()}connect(t){return iA(t)}}T(Tk,"customQueryHandlers",hv);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const aA=new Tk({isPuppeteerCore:!0}),{connect:oA}=aA,Ik="BOSS",Mk="51JOB",Ak="ZHILIAN",Fk="LAGOU",Dk="LIEPIN",bg="AUTOMATE_ERROR_UNKNOW",Ps="AUTOMATE_ERROR_HUMAN_VALID",cA="YYYY-MM-DD HH:mm:ss.SSS",uA={automateFetchJobItemData:async function(s,t){try{let e=await lA(t);zn(s,e)}catch(e){ei(s,"[background] automateFetchJobItemData error : "+e.message)}}},Ec=new Map;Ec.set(Mk,dA),Ec.set(Ik,hA),Ec.set(Ak,pA),Ec.set(Fk,mA),Ec.set(Dk,fA);async function lA({url:s,platform:t,delay:e,delayRandomRange:r,maxPage:n}){let a=await chrome.windows.create({url:s,width:800,height:600});const o=a.tabs[0];wd(`[puppeteer] create tab id = ${o.id}`);const c=await oA({transport:await Av.connectTab(o.id)}),[u]=await c.pages();try{const d=Ec.get(t);if(wd(`[puppeteer] get job item page handle function platform = ${t}`),d){const h=new Date,p=await d(o,u,t,e,r,n);return p.startDatetime=h,p.endDatetime=new Date,p}else throw`not support platform = ${t}`}finally{u&&u.close(),a&&chrome.windows.remove(a.id)}}function Ee(s,t){wd(t),s.push(`${$y(new Date).format(cA)} ${t}`)}async function dA(s,t,e,r,n,a){const o=[];let c=null,u=1;try{if(Ee(o,`[puppeteer] [${e}] handle _51jobHandle`),await t.waitForSelector(".btn-next",{timeout:5e3})){for(;;){if(u++,a&&a>0&&u>a){Ee(o,`[puppeteer] [${e}] page(${u}) over maxPage(${a})`);break}await t.waitForSelector(".__status_job_render_finish");let h=await t.waitForSelector(".btn-next");if(await(await h.getProperty("disabled")).jsonValue()){Ee(o,`[puppeteer] [${e}] is last page`),Ee(o,`[puppeteer] [${e}] close page tab id = ${s.id}`);break}else Ee(o,`[puppeteer] [${e}] has next page tab id = ${s.id}`),Ee(o,`[puppeteer] [${e}] will go to page no = ${u}`),await Lm(r,n),await h.click(),Ee(o,`[puppeteer] [${e}] go to page no = ${u}`)}return{logList:o,count:u,error:c}}else await chrome.tabs.reload(s.id)}catch(d){return bs(d),Ee(o,`[puppeteer] [${e}] handle has error`),c=await xc(e,t)?Ps:bg,{logList:o,count:u,error:c}}}async function hA(s,t,e,r,n,a){const o=[];let c=null,u=1;try{if(Ee(o,`[puppeteer] [${e}] handle _bossHandle`),await t.waitForNavigation(),c=await xc(e,t)?Ps:null,c==Ps)throw"navigate to human valid page";try{await t.waitForSelector(".__status_job_render_finish",{timeout:5e3})}catch{await chrome.tabs.reload(s.id),await t.waitForSelector(".__status_job_render_finish")}for(;;){if(u++,a&&a>0&&u>a){Ee(o,`[puppeteer] [${e}] page(${u}) over maxPage(${a})`);break}await t.waitForSelector(".__status_job_render_finish");let d=await t.waitForSelector(".ui-icon-arrow-right");if(await t.evaluate(()=>document.querySelector(".ui-icon-arrow-right").parentElement.className=="disabled")){Ee(o,`[puppeteer] [${e}] is last page`),Ee(o,`[puppeteer] [${e}] close page tab id = ${s.id}`);break}else Ee(o,`[puppeteer] [${e}] has next page tab id = ${s.id}`),Ee(o,`[puppeteer] [${e}] will go to page no = ${u}`),await Lm(r,n),await t.evaluate(p=>{p.click()},d),Ee(o,`[puppeteer] [${e}] go to page no = ${u}`)}return{logList:o,count:u,error:c}}catch(d){return bs(d),Ee(o,`[puppeteer] [${e}] handle has error`),c=await xc(e,t)?Ps:bg,{logList:o,count:u,error:c}}}async function fA(s,t,e,r,n,a){const o=[];let c=null,u=1;try{if(Ee(o,`[puppeteer] [${e}] handle _liepinHandle`),await t.waitForNavigation(),c=await xc(e,t)?Ps:null,c==Ps)throw"navigate to human valid page";for(await t.waitForSelector(".__status_job_render_finish");;){if(u++,a&&a>0&&u>a){Ee(o,`[puppeteer] [${e}] page(${u}) over maxPage(${a})`);break}await t.waitForSelector(".__status_job_render_finish");let d=await t.waitForSelector(".anticon-right");if(await t.evaluate(()=>document.querySelector(".anticon-right").parentElement.disabled)){Ee(o,`[puppeteer] [${e}] is last page`),Ee(o,`[puppeteer] [${e}] close page tab id = ${s.id}`);break}else Ee(o,`[puppeteer] [${e}] has next page tab id = ${s.id}`),Ee(o,`[puppeteer] [${e}] will go to page no = ${u}`),await Lm(r,n),await d.click(),Ee(o,`[puppeteer] [${e}] go to page no = ${u}`)}return{logList:o,count:u,error:c}}catch(d){return bs(d),Ee(o,`[puppeteer] [${e}] handle has error`),c=await xc(e,t)?Ps:bg,{logList:o,count:u,error:c}}}async function pA(s,t,e,r,n,a){return Ok(s,t,e,r,n,a,{nextButtonSelector:".btn ::-p-text()",lastPageButtonSelector:"a.btn.soupager__btn.soupager__btn--disable"})}async function mA(s,t,e,r,n,a){return Ok(s,t,e,r,n,a,{nextButtonSelector:".lg-pagination-next",lastPageButtonSelector:"li.lg-pagination-next.lg-pagination-disabled"})}async function Ok(s,t,e,r,n,a,{nextButtonSelector:o,lastPageButtonSelector:c}){const u=[];let d=null,h=1;try{Ee(u,`[puppeteer] [${e}] handle _handle`);try{await t.waitForNavigation({timeout:5e3})}catch{Ee(u,`[puppeteer] [${e}] waitForNavigation error`)}for(;;){if(h++,a&&a>0&&h>a){Ee(u,`[puppeteer] [${e}] page(${h}) over maxPage(${a})`);break}await t.waitForSelector(".__status_job_render_finish");let p=await t.waitForSelector(`${o}`);if(p.remoteObject().description==`${c}`){Ee(u,`[puppeteer] [${e}] is last page`),Ee(u,`[puppeteer] [${e}] close page tab id = ${s.id}`);break}else Ee(u,`[puppeteer] [${e}] has next page tab id = ${s.id}`),Ee(u,`[puppeteer] [${e}] will go to page no = ${h}`),p=await t.waitForSelector(`${o}`),await Lm(r,n),await p.click(),Ee(u,`[puppeteer] [${e}] go to page no = ${h}`)}return{logList:u,count:h,error:d}}catch(p){return bs(p),Ee(u,`[puppeteer] [${e}] handle has error`),d=await xc(e,t)?Ps:bg,{logList:u,count:h,error:d}}}async function xc(s,t){try{if(s==Ik)return t.url().startsWith("https://www.zhipin.com/web/user/safe/verify-slider");if(s==Mk)return!!await t.waitForSelector(".waf-nc-wrapper",{timeout:5e3});if(s==Ak)return!!await t.waitForSelector(".__status_job_render_error",{timeout:5e3});if(s==Fk)return!1;if(s==Dk)return!1;throw`checkValidHuman unknow platform ${s}`}catch{return!1}}chrome.runtime.onInstalled.addListener(async()=>{const s=[{id:1,action:{type:chrome.declarativeNetRequest.RuleActionType.MODIFY_HEADERS,requestHeaders:[{header:"Referer",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:"https://creditbj.jxj.beijing.gov.cn/credit-portal/credit_service/publicity/record/black"}]},condition:{initiatorDomains:[chrome.runtime.id],urlFilter:"|https://creditbj.jxj.beijing.gov.cn/credit-portal/api/publicity/record/BLACK/0",resourceTypes:[chrome.declarativeNetRequest.ResourceType.XMLHTTPREQUEST]}}];await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:s.map(t=>t.id),addRules:s})});const Rk=()=>setInterval(chrome.runtime.getPlatformInfo,2e4);chrome.runtime.onStartup.addListener(Rk),Rk(),chrome.action.onClicked.addListener(()=>{chrome.tabs.create({url:"src/sidepanel/index.html"})});const Lk=new Map,Nk=new Map;chrome.tabs.onUpdated.addListener(async(s,t,e)=>{let r=e.url;if(r!=null&&r.startsWith(YP)&&!gA(r)){let n=ZP();wA(r);let a=new URL(r);if(a.searchParams.has("error"))n.keys().forEach(o=>{ei(o)}),n.clear();else{let o=a.searchParams.get("code");try{const c=new URLSearchParams({client_id:LS,client_secret:zP,code:o});let u=`${XP}?${c.toString()}`,d=await qP(u,y=>{},{invokeEnv:gt}),h=new URLSearchParams(d);const p=BP(h);let m=AS(new FS,p);await $S(m);let w=await WP({url:JP,headers:{Authorization:`Bearer ${m.accessToken}`}},y=>{},{invokeEnv:gt}),b=AS(new jS,w);await US(b);let v=await BS();n.keys().forEach(y=>{zn(y,v)}),chrome.tabs.remove(s),n.clear()}catch(c){bs(c),n.keys().forEach(u=>{ei(u)})}}return}if((t==null?void 0:t.status)=="complete"&&!yA(e.id)&&e.url){let n=$P(e.url),a=await DS.getJobByDetailUrl(n,{invokeEnv:gt});a&&(wd(`save jobBrowseDetailHistory start jobId = ${a.jobId}`),await DS.addJobBrowseDetailHistory(a.jobId,{invokeEnv:gt}),wd(`save jobBrowseDetailHistory success jobId = ${a.jobId}`),vA(e.id))}});function gA(s){return Nk.has(s)}function wA(s){Nk.set(s,null)}function yA(s){return Lk.has(s)}function vA(s){Lk.set(s,null)}const _c=new Map;function Sg(s,t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];s.set(n,t[n])}}Sg(_c,QP),Sg(_c,eT),Sg(_c,rT),Sg(_c,uA);let Fd;async function bA(s){var t,e;await((e=(t=chrome.offscreen).hasDocument)==null?void 0:e.call(t))||(Fd?await Fd:(Fd=chrome.offscreen.createDocument({url:chrome.runtime.getURL(s),reasons:[chrome.offscreen.Reason.WORKERS||chrome.offscreen.Reason.BLOBS],justification:"To run web worker to run sqlite"}),await Fd,Fd=null),chrome.runtime.onMessage.addListener(async function(r,n,a){if(r){if(r.from==qt&&r.to==gt){n.tab&&(r.tabId=n.tab.id),""+r.from+r.to+r.action+r.invokeEnv+r.callbackId+r.error;let o=r.action;_c.has(o)?_c.get(o)(r,r.param):(r.from=gt,r.to=By,""+r.from+r.to+r.action+r.invokeEnv+r.callbackId+r.error,chrome.runtime.sendMessage(r))}else if(r.from==By&&r.to==gt){if(""+r.from+r.to+r.action+r.invokeEnv+r.callbackId+r.error,r.invokeEnv==qt)r.from=gt,r.to=qt,""+r.from+r.to+r.action+r.invokeEnv+r.callbackId+r.error,r.tabId?chrome.tabs.sendMessage(r.tabId,r):chrome.runtime.sendMessage(r);else if(r.invokeEnv==gt){let o=UP(r.callbackId);o?r.error?(r.message=r.error,o.reject(r)):o.resolve(r):bs(`callbackId = ${r.callbackId} lost callback promiseHook`)}}}}))}bA("src/offscreen/offscreen.html");var Dv={exports:{}},Ov,$k;function SA(){if($k)return Ov;$k=1;var s=1e3,t=s*60,e=t*60,r=e*24,n=r*7,a=r*365.25;Ov=function(h,p){p=p||{};var m=typeof h;if(m==="string"&&h.length>0)return o(h);if(m==="number"&&isFinite(h))return p.long?u(h):c(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(p){var m=parseFloat(p[1]),w=(p[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return m*a;case"weeks":case"week":case"w":return m*n;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*e;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function c(h){var p=Math.abs(h);return p>=r?Math.round(h/r)+"d":p>=e?Math.round(h/e)+"h":p>=t?Math.round(h/t)+"m":p>=s?Math.round(h/s)+"s":h+"ms"}function u(h){var p=Math.abs(h);return p>=r?d(h,p,r,"day"):p>=e?d(h,p,e,"hour"):p>=t?d(h,p,t,"minute"):p>=s?d(h,p,s,"second"):h+" ms"}function d(h,p,m,w){var b=p>=m*1.5;return Math.round(h/m)+" "+w+(b?"s":"")}return Ov}function CA(s){e.debug=e,e.default=e,e.coerce=u,e.disable=a,e.enable=n,e.enabled=o,e.humanize=SA(),e.destroy=d,Object.keys(s).forEach(h=>{e[h]=s[h]}),e.names=[],e.skips=[],e.formatters={};function t(h){let p=0;for(let m=0;m<h.length;m++)p=(p<<5)-p+h.charCodeAt(m),p|=0;return e.colors[Math.abs(p)%e.colors.length]}e.selectColor=t;function e(h){let p,m=null,w,b;function v(...y){if(!v.enabled)return;const S=v,E=Number(new Date),k=E-(p||E);S.diff=k,S.prev=p,S.curr=E,p=E,y[0]=e.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let _=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(D,P)=>{if(D==="%%")return"%";_++;const C=e.formatters[P];if(typeof C=="function"){const I=y[_];D=C.call(S,I),y.splice(_,1),_--}return D}),e.formatArgs.call(S,y),(S.log||e.log).apply(S,y)}return v.namespace=h,v.useColors=e.useColors(),v.color=e.selectColor(h),v.extend=r,v.destroy=e.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(w!==e.namespaces&&(w=e.namespaces,b=e.enabled(h)),b),set:y=>{m=y}}),typeof e.init=="function"&&e.init(v),v}function r(h,p){const m=e(this.namespace+(typeof p>"u"?":":p)+h);return m.log=this.log,m}function n(h){e.save(h),e.namespaces=h,e.names=[],e.skips=[];let p;const m=(typeof h=="string"?h:"").split(/[\s,]+/),w=m.length;for(p=0;p<w;p++)m[p]&&(h=m[p].replace(/\*/g,".*?"),h[0]==="-"?e.skips.push(new RegExp("^"+h.slice(1)+"$")):e.names.push(new RegExp("^"+h+"$")))}function a(){const h=[...e.names.map(c),...e.skips.map(c).map(p=>"-"+p)].join(",");return e.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let p,m;for(p=0,m=e.skips.length;p<m;p++)if(e.skips[p].test(h))return!1;for(p=0,m=e.names.length;p<m;p++)if(e.names[p].test(h))return!0;return!1}function c(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function u(h){return h instanceof Error?h.stack||h.message:h}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var kA=CA;(function(s,t){t.formatArgs=r,t.save=n,t.load=a,t.useColors=e,t.storage=o(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;u.splice(1,0,d,"color: inherit");let h=0,p=0;u[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(h++,m==="%c"&&(p=h))}),u.splice(p,0,d)}t.log=console.debug||console.log||(()=>{});function n(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function a(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function o(){try{return localStorage}catch{}}s.exports=kA(t);const{formatters:c}=s.exports;c.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(Dv,Dv.exports);var EA=Dv.exports;const xA=Object.freeze(Object.defineProperty({__proto__:null,default:ye(EA)},Symbol.toStringTag,{value:"Module"}));var Cg={},kg={},ra={};function _A(s){return{all:s=s||new Map,on:function(t,e){var r=s.get(t);r?r.push(e):s.set(t,[e])},off:function(t,e){var r=s.get(t);r&&(e?r.splice(r.indexOf(e)>>>0,1):s.set(t,[]))},emit:function(t,e){var r=s.get(t);r&&r.slice().map(function(n){n(e)}),(r=s.get("*"))&&r.slice().map(function(n){n(t,e)})}}}const PA=qe(Object.freeze(Object.defineProperty({__proto__:null,default:_A},Symbol.toStringTag,{value:"Module"})));var TA=le&&le.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ra,"__esModule",{value:!0}),ra.EventEmitter=void 0;const IA=TA(PA);class MA{constructor(){l(this,gn,(0,IA.default)())}on(t,e){return i(this,gn).on(t,e),this}once(t,e){const r=n=>{e(n),this.off(t,r)};return this.on(t,r)}off(t,e){return i(this,gn).off(t,e),this}emit(t,e){i(this,gn).emit(t,e)}removeAllListeners(t){return t?i(this,gn).all.delete(t):i(this,gn).all.clear(),this}}gn=new WeakMap,ra.EventEmitter=MA;var tr={};Object.defineProperty(tr,"__esModule",{value:!0}),tr.LogType=void 0;var Bk;(function(s){s.bidi="bidi",s.cdp="cdp",s.debug="debug",s.debugError="debug:error",s.debugInfo="debug:info"})(Bk||(tr.LogType=Bk={}));var Eg={};Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.ProcessingQueue=void 0;const Rv=tr,Ow=class Ow{constructor(t,e){l(this,Dw);l(this,ho);l(this,sp);l(this,rl,[]);l(this,il,!1);f(this,sp,t),f(this,ho,e)}add(t,e){i(this,rl).push([t,e]),g(this,Dw,B_).call(this)}};ho=new WeakMap,sp=new WeakMap,rl=new WeakMap,il=new WeakMap,Dw=new WeakSet,B_=async function(){var t;if(!i(this,il)){for(f(this,il,!0);i(this,rl).length>0;){const e=i(this,rl).shift();if(!e)continue;const[r,n]=e;(t=i(this,ho))==null||t.call(this,Ow.LOGGER_PREFIX,"Processing event:",n),await r.then(a=>{var o;if(a.kind==="error"){(o=i(this,ho))==null||o.call(this,Rv.LogType.debugError,"Event threw before sending:",a.error.message,a.error.stack);return}return i(this,sp).call(this,a.value)}).catch(a=>{var o;(o=i(this,ho))==null||o.call(this,Rv.LogType.debugError,"Event was not processed:",a==null?void 0:a.message)})}f(this,il,!1)}},T(Ow,"LOGGER_PREFIX",`${Rv.LogType.debug}:queue`);let Lv=Ow;Eg.ProcessingQueue=Lv;var xg={},Re={},jk={};Object.defineProperty(jk,"__esModule",{value:!0});var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.EVENT_NAMES=Vt.Network=Vt.BrowsingContext=Vt.Log=Vt.Script=Vt.BiDiModule=void 0;var Nv;(function(s){s.Browser="browser",s.BrowsingContext="browsingContext",s.Cdp="cdp",s.Input="input",s.Log="log",s.Network="network",s.Script="script",s.Session="session"})(Nv||(Vt.BiDiModule=Nv={}));var $v;(function(s){(function(t){t.Message="script.message",t.RealmCreated="script.realmCreated",t.RealmDestroyed="script.realmDestroyed"})(s.EventNames||(s.EventNames={}))})($v||(Vt.Script=$v={}));var Bv;(function(s){(function(t){t.LogEntryAdded="log.entryAdded"})(s.EventNames||(s.EventNames={}))})(Bv||(Vt.Log=Bv={}));var jv;(function(s){(function(t){t.ContextCreated="browsingContext.contextCreated",t.ContextDestroyed="browsingContext.contextDestroyed",t.DomContentLoaded="browsingContext.domContentLoaded",t.DownloadWillBegin="browsingContext.downloadWillBegin",t.FragmentNavigated="browsingContext.fragmentNavigated",t.Load="browsingContext.load",t.NavigationAborted="browsingContext.navigationAborted",t.NavigationFailed="browsingContext.navigationFailed",t.NavigationStarted="browsingContext.navigationStarted",t.UserPromptClosed="browsingContext.userPromptClosed",t.UserPromptOpened="browsingContext.userPromptOpened"})(s.EventNames||(s.EventNames={}))})(jv||(Vt.BrowsingContext=jv={}));var Kv;(function(s){(function(t){t.AuthRequired="network.authRequired",t.BeforeRequestSent="network.beforeRequestSent",t.FetchError="network.fetchError",t.ResponseCompleted="network.responseCompleted",t.ResponseStarted="network.responseStarted"})(s.EventNames||(s.EventNames={}))})(Kv||(Vt.Network=Kv={})),Vt.EVENT_NAMES=new Set([...Object.values(Nv),...Object.values(jv.EventNames),...Object.values(Bv.EventNames),...Object.values(Kv.EventNames),...Object.values($v.EventNames)]);var Kk={};Object.defineProperty(Kk,"__esModule",{value:!0});var oe={};Object.defineProperty(oe,"__esModule",{value:!0}),oe.UnderspecifiedStoragePartitionException=oe.UnableToSetFileInputException=oe.UnableToSetCookieException=oe.NoSuchStoragePartitionException=oe.UnsupportedOperationException=oe.UnableToCloseBrowserException=oe.UnableToCaptureScreenException=oe.UnknownErrorException=oe.UnknownCommandException=oe.SessionNotCreatedException=oe.NoSuchUserContextException=oe.NoSuchScriptException=oe.NoSuchRequestException=oe.NoSuchNodeException=oe.NoSuchInterceptException=oe.NoSuchHistoryEntryException=oe.NoSuchHandleException=oe.NoSuchFrameException=oe.NoSuchElementException=oe.NoSuchAlertException=oe.MoveTargetOutOfBoundsException=oe.InvalidSessionIdException=oe.InvalidSelectorException=oe.InvalidArgumentException=oe.Exception=void 0;class Be extends Error{constructor(e,r,n){super();T(this,"error");T(this,"message");T(this,"stacktrace");this.error=e,this.message=r,this.stacktrace=n}toErrorResponse(e){return{type:"error",id:e,error:this.error,message:this.message,stacktrace:this.stacktrace}}}oe.Exception=Be;class AA extends Be{constructor(t,e){super("invalid argument",t,e)}}oe.InvalidArgumentException=AA;class FA extends Be{constructor(t,e){super("invalid selector",t,e)}}oe.InvalidSelectorException=FA;class DA extends Be{constructor(t,e){super("invalid session id",t,e)}}oe.InvalidSessionIdException=DA;class OA extends Be{constructor(t,e){super("move target out of bounds",t,e)}}oe.MoveTargetOutOfBoundsException=OA;class RA extends Be{constructor(t,e){super("no such alert",t,e)}}oe.NoSuchAlertException=RA;class LA extends Be{constructor(t,e){super("no such element",t,e)}}oe.NoSuchElementException=LA;class NA extends Be{constructor(t,e){super("no such frame",t,e)}}oe.NoSuchFrameException=NA;class $A extends Be{constructor(t,e){super("no such handle",t,e)}}oe.NoSuchHandleException=$A;class BA extends Be{constructor(t,e){super("no such history entry",t,e)}}oe.NoSuchHistoryEntryException=BA;class jA extends Be{constructor(t,e){super("no such intercept",t,e)}}oe.NoSuchInterceptException=jA;class KA extends Be{constructor(t,e){super("no such node",t,e)}}oe.NoSuchNodeException=KA;class UA extends Be{constructor(t,e){super("no such request",t,e)}}oe.NoSuchRequestException=UA;class HA extends Be{constructor(t,e){super("no such script",t,e)}}oe.NoSuchScriptException=HA;class qA extends Be{constructor(t,e){super("no such user context",t,e)}}oe.NoSuchUserContextException=qA;class WA extends Be{constructor(t,e){super("session not created",t,e)}}oe.SessionNotCreatedException=WA;class zA extends Be{constructor(t,e){super("unknown command",t,e)}}oe.UnknownCommandException=zA;class VA extends Be{constructor(t,e=new Error().stack){super("unknown error",t,e)}}oe.UnknownErrorException=VA;class GA extends Be{constructor(t,e){super("unable to capture screen",t,e)}}oe.UnableToCaptureScreenException=GA;class XA extends Be{constructor(t,e){super("unable to close browser",t,e)}}oe.UnableToCloseBrowserException=XA;class JA extends Be{constructor(t,e){super("unsupported operation",t,e)}}oe.UnsupportedOperationException=JA;class YA extends Be{constructor(t,e){super("no such storage partition",t,e)}}oe.NoSuchStoragePartitionException=YA;class QA extends Be{constructor(t,e){super("unable to set cookie",t,e)}}oe.UnableToSetCookieException=QA;class ZA extends Be{constructor(t,e){super("unable to set file input",t,e)}}oe.UnableToSetFileInputException=ZA;class eF extends Be{constructor(t,e){super("underspecified storage partition",t,e)}}oe.UnderspecifiedStoragePartitionException=eF;var Uk={};Object.defineProperty(Uk,"__esModule",{value:!0}),function(s){var t=le&&le.__createBinding||(Object.create?function(a,o,c,u){u===void 0&&(u=c);var d=Object.getOwnPropertyDescriptor(o,c);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(a,u,d)}:function(a,o,c,u){u===void 0&&(u=c),a[u]=o[c]}),e=le&&le.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=le&&le.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var c in a)c!=="default"&&Object.prototype.hasOwnProperty.call(a,c)&&t(o,a,c);return e(o,a),o},n=le&&le.__exportStar||function(a,o){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&t(o,a,c)};Object.defineProperty(s,"__esModule",{value:!0}),s.ChromiumBidi=s.Cdp=void 0,s.Cdp=r(jk),s.ChromiumBidi=r(Vt),n(Kk,s),n(oe,s),n(Uk,s)}(Re);var _g={};Object.defineProperty(_g,"__esModule",{value:!0}),_g.BidiNoOpParser=void 0;class tF{parseRemoveUserContextParams(t){return t}parseActivateParams(t){return t}parseCaptureScreenshotParams(t){return t}parseCloseParams(t){return t}parseCreateParams(t){return t}parseGetTreeParams(t){return t}parseHandleUserPromptParams(t){return t}parseLocateNodesParams(t){return t}parseNavigateParams(t){return t}parsePrintParams(t){return t}parseReloadParams(t){return t}parseSetViewportParams(t){return t}parseTraverseHistoryParams(t){return t}parseGetSessionParams(t){return t}parseResolveRealmParams(t){return t}parseSendCommandParams(t){return t}parseAddPreloadScriptParams(t){return t}parseCallFunctionParams(t){return t}parseDisownParams(t){return t}parseEvaluateParams(t){return t}parseGetRealmsParams(t){return t}parseRemovePreloadScriptParams(t){return t}parsePerformActionsParams(t){return t}parseReleaseActionsParams(t){return t}parseSetFilesParams(t){return t}parseAddInterceptParams(t){return t}parseContinueRequestParams(t){return t}parseContinueResponseParams(t){return t}parseContinueWithAuthParams(t){return t}parseFailRequestParams(t){return t}parseProvideResponseParams(t){return t}parseRemoveInterceptParams(t){return t}parseSetPermissionsParams(t){return t}parseSubscribeParams(t){return t}parseDeleteCookiesParams(t){return t}parseGetCookiesParams(t){return t}parseSetCookieParams(t){return t}}_g.BidiNoOpParser=tF;var Pg={};Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.BrowserProcessor=void 0;const Hk=Re;class rF{constructor(t){l(this,wn);f(this,wn,t)}close(){return setTimeout(()=>i(this,wn).sendCommand("Browser.close"),0),{}}async createUserContext(t){const e={proxyServer:t["goog:proxyServer"]??void 0},r=t["goog:proxyBypassList"]??void 0;return r&&(e.proxyBypassList=r.join(",")),{userContext:(await i(this,wn).sendCommand("Target.createBrowserContext",e)).browserContextId}}async removeUserContext(t){const e=t.userContext;if(e==="default")throw new Hk.InvalidArgumentException("`default` user context cannot be removed");try{await i(this,wn).sendCommand("Target.disposeBrowserContext",{browserContextId:e})}catch(r){throw r.message.startsWith("Failed to find context with id")?new Hk.NoSuchUserContextException(r.message):r}return{}}async getUserContexts(){const t=await i(this,wn).sendCommand("Target.getBrowserContexts");return{userContexts:[{userContext:"default"},...t.browserContextIds.map(e=>({userContext:e}))]}}}wn=new WeakMap,Pg.BrowserProcessor=rF;var Tg={};Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.CdpProcessor=void 0;const iF=Re;class sF{constructor(t,e,r,n){l(this,np);l(this,ap);l(this,op);l(this,cp);f(this,np,t),f(this,ap,e),f(this,op,r),f(this,cp,n)}getSession(t){const e=t.context,r=i(this,np).getContext(e).cdpTarget.cdpSessionId;return r===void 0?{}:{session:r}}resolveRealm(t){const e=t.realm,r=i(this,ap).getRealm({realmId:e});if(r===void 0)throw new iF.UnknownErrorException(`Could not find realm ${t.realm}`);return{executionContextId:r.executionContextId}}async sendCommand(t){return{result:await(t.session?i(this,op).getCdpClient(t.session):i(this,cp)).sendCommand(t.method,t.params),session:t.session}}}np=new WeakMap,ap=new WeakMap,op=new WeakMap,cp=new WeakMap,Tg.CdpProcessor=sF;var Ig={};Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.BrowsingContextProcessor=void 0;const $i=Re;class nF{constructor(t,e,r){l(this,Rw);l(this,yn);l(this,Ze);l(this,sl);f(this,yn,t),f(this,Ze,e),f(this,sl,r),i(this,sl).addSubscribeHook($i.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,g(this,Rw,j_).bind(this))}getTree(t){return{contexts:(t.root===void 0?i(this,Ze).getTopLevelContexts():[i(this,Ze).getContext(t.root)]).map(r=>r.serializeToBidiValue(t.maxDepth??Number.MAX_VALUE))}}async create(t){let e,r="default";if(t.referenceContext!==void 0){if(e=i(this,Ze).getContext(t.referenceContext),!e.isTopLevelContext())throw new $i.InvalidArgumentException("referenceContext should be a top-level context");r=e.userContext}t.userContext!==void 0&&(r=t.userContext);const n=i(this,Ze).getAllContexts().filter(d=>d.userContext===r);let a=!1;switch(t.type){case"tab":a=!1;break;case"window":a=!0;break}n.length||(a=!0);let o;try{o=await i(this,yn).sendCommand("Target.createTarget",{url:"about:blank",newWindow:a,browserContextId:r==="default"?void 0:r,background:t.background===!0})}catch(d){throw d.message.startsWith("Failed to find browser context with id")||d.message==="browserContextId"?new $i.NoSuchUserContextException(`The context ${r} was not found`):d}const c=o.targetId,u=i(this,Ze).getContext(c);return await u.lifecycleLoaded(),{context:u.id}}navigate(t){return i(this,Ze).getContext(t.context).navigate(t.url,t.wait??"none")}reload(t){return i(this,Ze).getContext(t.context).reload(t.ignoreCache??!1,t.wait??"none")}async activate(t){const e=i(this,Ze).getContext(t.context);if(!e.isTopLevelContext())throw new $i.InvalidArgumentException("Activation is only supported on the top-level context");return await e.activate(),{}}async captureScreenshot(t){return await i(this,Ze).getContext(t.context).captureScreenshot(t)}async print(t){return await i(this,Ze).getContext(t.context).print(t)}async setViewport(t){const e=i(this,Ze).getContext(t.context);if(!e.isTopLevelContext())throw new $i.InvalidArgumentException("Emulating viewport is only supported on the top-level context");return await e.setViewport(t.viewport,t.devicePixelRatio),{}}async traverseHistory(t){const e=i(this,Ze).getContext(t.context);if(!e)throw new $i.InvalidArgumentException(`No browsing context with id ${t.context}`);return await e.traverseHistory(t.delta),{}}async handleUserPrompt(t){var r;const e=i(this,Ze).getContext(t.context);try{await e.handleUserPrompt(t.accept,t.userText)}catch(n){throw(r=n.message)!=null&&r.includes("No dialog is showing")?new $i.NoSuchAlertException("No dialog is showing"):n}return{}}async close(t){const e=i(this,Ze).getContext(t.context);if(!e.isTopLevelContext())throw new $i.InvalidArgumentException(`Non top-level browsing context ${e.id} cannot be closed.`);try{const r=new Promise(n=>{const a=o=>{o.targetId===t.context&&(i(this,yn).off("Target.detachedFromTarget",a),n())};i(this,yn).on("Target.detachedFromTarget",a)});t.promptUnload?await e.close():await i(this,yn).sendCommand("Target.closeTarget",{targetId:t.context}),await r}catch(r){if(!(r.code===-32e3&&r.message==="Not attached to an active page"))throw r}return{}}async locateNodes(t){return await i(this,Ze).getContext(t.context).locateNodes(t)}}yn=new WeakMap,Ze=new WeakMap,sl=new WeakMap,Rw=new WeakSet,j_=function(t){return[i(this,Ze).getContext(t),...i(this,Ze).getContext(t).allChildren].forEach(n=>{i(this,sl).registerEvent({type:"event",method:$i.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,params:n.serializeToBidiValue()},n.id)}),Promise.resolve()},Ig.BrowsingContextProcessor=nF;var Mg={},Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.assert=aF;function aF(s,t){if(!s)throw new Error(t??"Internal assertion failed.")}var Ag={},Fg={};Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.isSingleComplexGrapheme=oF,Fg.isSingleGrapheme=qk;function oF(s){return qk(s)&&s.length>1}function qk(s){return[...new Intl.Segmenter("en",{granularity:"grapheme"}).segment(s)].length===1}var Br={};Object.defineProperty(Br,"__esModule",{value:!0}),Br.WheelSource=Br.PointerSource=Br.KeySource=Br.NoneSource=void 0;class cF{constructor(){T(this,"type","none")}}Br.NoneSource=cF;class uF{constructor(){l(this,fo);T(this,"type","key");T(this,"pressed",new Set);l(this,wi,0)}get modifiers(){return i(this,wi)}get alt(){return(i(this,wi)&1)===1}set alt(t){g(this,fo,Im).call(this,t,1)}get ctrl(){return(i(this,wi)&2)===2}set ctrl(t){g(this,fo,Im).call(this,t,2)}get meta(){return(i(this,wi)&4)===4}set meta(t){g(this,fo,Im).call(this,t,4)}get shift(){return(i(this,wi)&8)===8}set shift(t){g(this,fo,Im).call(this,t,8)}}wi=new WeakMap,fo=new WeakSet,Im=function(t,e){t?f(this,wi,i(this,wi)|e):f(this,wi,i(this,wi)&~e)},Br.KeySource=uF;class Wk{constructor(t,e){T(this,"type","pointer");T(this,"subtype");T(this,"pointerId");T(this,"pressed",new Set);T(this,"x",0);T(this,"y",0);T(this,"radiusX");T(this,"radiusY");T(this,"force");l(this,cl,new Map);this.pointerId=t,this.subtype=e}get buttons(){let t=0;for(const e of this.pressed)switch(e){case 0:t|=1;break;case 1:t|=4;break;case 2:t|=2;break;case 3:t|=8;break;case 4:t|=16;break}return t}setClickCount(t,e){let r=i(this,cl).get(t);return(!r||r.compare(e))&&(r=e),++r.count,i(this,cl).set(t,r),r.count}getClickCount(t){var e;return((e=i(this,cl).get(t))==null?void 0:e.count)??0}}cl=new WeakMap,T(Wk,"ClickContext",(yi=class{constructor(e,r,n){T(this,"count",0);l(this,nl);l(this,al);l(this,ol);f(this,nl,e),f(this,al,r),f(this,ol,n)}compare(e){return i(e,ol)-i(this,ol)>i(yi,Lw)||Math.abs(i(e,nl)-i(this,nl))>i(yi,up)||Math.abs(i(e,al)-i(this,al))>i(yi,up)}},Lw=new WeakMap,up=new WeakMap,nl=new WeakMap,al=new WeakMap,ol=new WeakMap,l(yi,Lw,500),l(yi,up,2),yi)),Br.PointerSource=Wk;class lF{constructor(){T(this,"type","wheel")}}Br.WheelSource=lF;var Dd={};Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.getNormalizedKey=dF,Dd.getKeyCode=hF,Dd.getKeyLocation=fF;function dF(s){switch(s){case"":return"Unidentified";case"":return"Cancel";case"":return"Help";case"":return"Backspace";case"":return"Tab";case"":return"Clear";case"":case"":return"Enter";case"":return"Shift";case"":return"Control";case"":return"Alt";case"":return"Pause";case"":return"Escape";case"":return" ";case"":return"PageUp";case"":return"PageDown";case"":return"End";case"":return"Home";case"":return"ArrowLeft";case"":return"ArrowUp";case"":return"ArrowRight";case"":return"ArrowDown";case"":return"Insert";case"":return"Delete";case"":return";";case"":return"=";case"":return"0";case"":return"1";case"":return"2";case"":return"3";case"":return"4";case"":return"5";case"":return"6";case"":return"7";case"":return"8";case"":return"9";case"":return"*";case"":return"+";case"":return",";case"":return"-";case"":return".";case"":return"/";case"":return"F1";case"":return"F2";case"":return"F3";case"":return"F4";case"":return"F5";case"":return"F6";case"":return"F7";case"":return"F8";case"":return"F9";case"":return"F10";case"":return"F11";case"":return"F12";case"":return"Meta";case"":return"ZenkakuHankaku";case"":return"Shift";case"":return"Control";case"":return"Alt";case"":return"Meta";case"":return"PageUp";case"":return"PageDown";case"":return"End";case"":return"Home";case"":return"ArrowLeft";case"":return"ArrowUp";case"":return"ArrowRight";case"":return"ArrowDown";case"":return"Insert";case"":return"Delete";default:return s}}function hF(s){switch(s){case"`":case"~":return"Backquote";case"\\":case"|":return"Backslash";case"":return"Backspace";case"[":case"{":return"BracketLeft";case"]":case"}":return"BracketRight";case",":case"<":return"Comma";case"0":case")":return"Digit0";case"1":case"!":return"Digit1";case"2":case"@":return"Digit2";case"3":case"#":return"Digit3";case"4":case"$":return"Digit4";case"5":case"%":return"Digit5";case"6":case"^":return"Digit6";case"7":case"&":return"Digit7";case"8":case"*":return"Digit8";case"9":case"(":return"Digit9";case"=":case"+":return"Equal";case">":return"IntlBackslash";case"a":case"A":return"KeyA";case"b":case"B":return"KeyB";case"c":case"C":return"KeyC";case"d":case"D":return"KeyD";case"e":case"E":return"KeyE";case"f":case"F":return"KeyF";case"g":case"G":return"KeyG";case"h":case"H":return"KeyH";case"i":case"I":return"KeyI";case"j":case"J":return"KeyJ";case"k":case"K":return"KeyK";case"l":case"L":return"KeyL";case"m":case"M":return"KeyM";case"n":case"N":return"KeyN";case"o":case"O":return"KeyO";case"p":case"P":return"KeyP";case"q":case"Q":return"KeyQ";case"r":case"R":return"KeyR";case"s":case"S":return"KeyS";case"t":case"T":return"KeyT";case"u":case"U":return"KeyU";case"v":case"V":return"KeyV";case"w":case"W":return"KeyW";case"x":case"X":return"KeyX";case"y":case"Y":return"KeyY";case"z":case"Z":return"KeyZ";case"-":case"_":return"Minus";case".":return"Period";case"'":case'"':return"Quote";case";":case":":return"Semicolon";case"/":case"?":return"Slash";case"":return"AltLeft";case"":return"AltRight";case"":return"ControlLeft";case"":return"ControlRight";case"":return"Enter";case"":return"Pause";case"":return"MetaLeft";case"":return"MetaRight";case"":return"ShiftLeft";case"":return"ShiftRight";case" ":case"":return"Space";case"":return"Tab";case"":return"Delete";case"":return"End";case"":return"Help";case"":return"Home";case"":return"Insert";case"":return"PageDown";case"":return"PageUp";case"":return"ArrowDown";case"":return"ArrowLeft";case"":return"ArrowRight";case"":return"ArrowUp";case"":return"Escape";case"":return"F1";case"":return"F2";case"":return"F3";case"":return"F4";case"":return"F5";case"":return"F6";case"":return"F7";case"":return"F8";case"":return"F9";case"":return"F10";case"":return"F11";case"":return"F12";case"":return"NumpadEqual";case"":case"":return"Numpad0";case"":case"":return"Numpad1";case"":case"":return"Numpad2";case"":case"":return"Numpad3";case"":case"":return"Numpad4";case"":return"Numpad5";case"":case"":return"Numpad6";case"":case"":return"Numpad7";case"":case"":return"Numpad8";case"":case"":return"Numpad9";case"":return"NumpadAdd";case"":return"NumpadComma";case"":case"":return"NumpadDecimal";case"":return"NumpadDivide";case"":return"NumpadEnter";case"":return"NumpadMultiply";case"":return"NumpadSubtract";default:return}}function fF(s){switch(s){case"":case"":case"":case"":case"":return 1;case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":return 3;case"":case"":case"":case"":return 2;default:return 0}}var Dg={};Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.KeyToKeyCode=void 0,Dg.KeyToKeyCode={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,Abort:3,Help:6,Backspace:8,Tab:9,Numpad5:12,NumpadEnter:13,Enter:13,"\\r":13,"\\n":13,ShiftLeft:16,ShiftRight:16,ControlLeft:17,ControlRight:17,AltLeft:18,AltRight:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Space:32,Numpad9:33,PageUp:33,Numpad3:34,PageDown:34,End:35,Numpad1:35,Home:36,Numpad7:36,ArrowLeft:37,Numpad4:37,Numpad8:38,ArrowUp:38,ArrowRight:39,Numpad6:39,Numpad2:40,ArrowDown:40,Select:41,Open:43,PrintScreen:44,Insert:45,Numpad0:45,Delete:46,NumpadDecimal:46,Digit0:48,Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,MetaLeft:91,MetaRight:92,ContextMenu:93,NumpadMultiply:106,NumpadAdd:107,NumpadSubtract:109,NumpadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,AudioVolumeMute:173,AudioVolumeDown:174,AudioVolumeUp:175,MediaTrackNext:176,MediaTrackPrevious:177,MediaStop:178,MediaPlayPause:179,Semicolon:186,Equal:187,NumpadEqual:187,Comma:188,Minus:189,Period:190,Slash:191,Backquote:192,BracketLeft:219,Backslash:220,BracketRight:221,Quote:222,AltGraph:225,Props:247,Cancel:3,Clear:12,Shift:16,Control:17,Alt:18,Accept:30,ModeChange:31," ":32,Print:42,Execute:43,"\\u0000":46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,Meta:91,"*":106,"+":107,"-":109,"/":111,";":186,"=":187,",":188,".":190,"`":192,"[":219,"\\\\":220,"]":221,"'":222,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251,")":48,"!":49,"@":50,"#":51,$:52,"%":53,"^":54,"&":55,"(":57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,":":186,"<":188,_:189,">":190,"?":191,"~":192,"{":219,"|":220,"}":221,'"':222,Camera:44,EndCall:95,VolumeDown:182,VolumeUp:183},Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.ActionDispatcher=void 0;const Pc=Re,Od=Bi,Og=Fg,pF=Br,Tc=Dd,zk=Dg,mF=(s=>{const t=s.getClientRects()[0],e=Math.max(0,Math.min(t.x,t.x+t.width)),r=Math.min(window.innerWidth,Math.max(t.x,t.x+t.width)),n=Math.max(0,Math.min(t.y,t.y+t.height)),a=Math.min(window.innerHeight,Math.max(t.y,t.y+t.height));return[e+(r-e>>1),n+(a-n>>1)]}).toString(),gF=(()=>navigator.platform.toLowerCase().includes("mac")).toString();async function wF(s,t){var o,c,u,d;const r=await(await s.getOrCreateSandbox(void 0)).callFunction(mF,!1,{type:"undefined"},[t]);if(r.type==="exception")throw new Pc.NoSuchElementException(`Origin element ${t.sharedId} was not found`);(0,Od.assert)(r.result.type==="array"),(0,Od.assert)(((c=(o=r.result.value)==null?void 0:o[0])==null?void 0:c.type)==="number"),(0,Od.assert)(((d=(u=r.result.value)==null?void 0:u[1])==null?void 0:d.type)==="number");const{result:{value:[{value:n},{value:a}]}}=r;return{x:n,y:a}}class Vk{constructor(t,e,r){l(this,dt);l(this,ul,0);l(this,ns,0);l(this,as);l(this,Ut);l(this,po);f(this,as,t),f(this,Ut,e),f(this,po,r)}async dispatchActions(t){await i(this,as).queue.run(async()=>{for(const e of t)await this.dispatchTickActions(e)})}async dispatchTickActions(t){f(this,ul,performance.now()),f(this,ns,0);for(const{action:r}of t)"duration"in r&&r.duration!==void 0&&f(this,ns,Math.max(i(this,ns),r.duration));const e=[new Promise(r=>setTimeout(r,i(this,ns)))];for(const r of t)e.push(g(this,dt,K_).call(this,r));await Promise.all(e)}}ul=new WeakMap,ns=new WeakMap,as=new WeakMap,Ut=new WeakMap,po=new WeakMap,dt=new WeakSet,K_=async function({id:t,action:e}){const r=i(this,as).get(t),n=i(this,as).getGlobalKeyState();switch(e.type){case"keyDown":{await g(this,dt,z_).call(this,r,e),i(this,as).cancelList.push({id:t,action:{...e,type:"keyUp"}});break}case"keyUp":{await g(this,dt,V_).call(this,r,e);break}case"pause":break;case"pointerDown":{await g(this,dt,U_).call(this,r,n,e),i(this,as).cancelList.push({id:t,action:{...e,type:"pointerUp"}});break}case"pointerMove":{await g(this,dt,q_).call(this,r,n,e);break}case"pointerUp":{await g(this,dt,H_).call(this,r,n,e);break}case"scroll":{await g(this,dt,W_).call(this,r,n,e);break}}},U_=async function(t,e,r){const{button:n}=r;if(t.pressed.has(n))return;t.pressed.add(n);const{x:a,y:o,subtype:c}=t,{width:u,height:d,pressure:h,twist:p,tangentialPressure:m}=r,{tiltX:w,tiltY:b}=Jk(r),{modifiers:v}=e,{radiusX:y,radiusY:S}=Yk(u??1,d??1);switch(c){case"mouse":case"pen":await i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mousePressed",x:a,y:o,modifiers:v,button:Rg(n),buttons:t.buttons,clickCount:t.setClickCount(n,new pF.PointerSource.ClickContext(a,o,performance.now())),pointerType:c,tangentialPressure:m,tiltX:w,tiltY:b,twist:p,force:h});break;case"touch":await i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:[{x:a,y:o,radiusX:y,radiusY:S,tangentialPressure:m,tiltX:w,tiltY:b,twist:p,force:h,id:t.pointerId}],modifiers:v});break}t.radiusX=y,t.radiusY=S,t.force=h},H_=function(t,e,r){const{button:n}=r;if(!t.pressed.has(n))return;t.pressed.delete(n);const{x:a,y:o,force:c,radiusX:u,radiusY:d,subtype:h}=t,{modifiers:p}=e;switch(h){case"mouse":case"pen":return i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseReleased",x:a,y:o,modifiers:p,button:Rg(n),buttons:t.buttons,clickCount:t.getClickCount(n),pointerType:h});case"touch":return i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[{x:a,y:o,id:t.pointerId,force:c,radiusX:u,radiusY:d}],modifiers:p})}},q_=async function(t,e,r){const{x:n,y:a,subtype:o}=t,{width:c,height:u,pressure:d,twist:h,tangentialPressure:p,x:m,y:w,origin:b="viewport",duration:v=i(this,ns)}=r,{tiltX:y,tiltY:S}=Jk(r),{radiusX:E,radiusY:k}=Yk(c??1,u??1),{targetX:_,targetY:A}=await g(this,dt,K0).call(this,b,m,w,n,a);if(_<0||A<0)throw new Pc.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${_}, y: ${A})`);let D;do{const P=v>0?(performance.now()-i(this,ul))/v:1;D=P>=1;let C,I;if(D?(C=_,I=A):(C=Math.round(P*(_-n)+n),I=Math.round(P*(A-a)+a)),t.x!==C||t.y!==I){const{modifiers:B}=e;switch(o){case"mouse":await i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseMoved",x:C,y:I,modifiers:B,clickCount:0,button:Rg(t.pressed.values().next().value??5),buttons:t.buttons,pointerType:o,tangentialPressure:p,tiltX:y,tiltY:S,twist:h,force:d});break;case"pen":t.pressed.size!==0&&await i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseMoved",x:C,y:I,modifiers:B,clickCount:0,button:Rg(t.pressed.values().next().value??5),buttons:t.buttons,pointerType:o,tangentialPressure:p,tiltX:y,tiltY:S,twist:h,force:d});break;case"touch":t.pressed.size!==0&&await i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:[{x:C,y:I,radiusX:E,radiusY:k,tangentialPressure:p,tiltX:y,tiltY:S,twist:h,force:d,id:t.pointerId}],modifiers:B});break}t.x=C,t.y=I,t.radiusX=E,t.radiusY=k,t.force=d}}while(!D)},K0=async function(t,e,r,n,a){let o,c;switch(t){case"viewport":o=e,c=r;break;case"pointer":o=n+e,c=a+r;break;default:{const{x:u,y:d}=await wF(i(this,Ut),t.element);o=u+e,c=d+r;break}}return{targetX:o,targetY:c}},W_=async function(t,e,r){const{deltaX:n,deltaY:a,x:o,y:c,origin:u="viewport",duration:d=i(this,ns)}=r;if(u==="pointer")throw new Pc.InvalidArgumentException('"pointer" origin is invalid for scrolling.');const{targetX:h,targetY:p}=await g(this,dt,K0).call(this,u,o,c,0,0);if(h<0||p<0)throw new Pc.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${h}, y: ${p})`);let m=0,w=0,b;do{const v=d>0?(performance.now()-i(this,ul))/d:1;b=v>=1;let y,S;if(b?(y=n-m,S=a-w):(y=Math.round(v*n-m),S=Math.round(v*a-w)),y!==0||S!==0){const{modifiers:E}=e;await i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseWheel",deltaX:y,deltaY:S,x:h,y:p,modifiers:E}),m+=y,w+=S}}while(!b)},z_=async function(t,e){const r=e.value;if(!(0,Og.isSingleGrapheme)(r))throw new Pc.InvalidArgumentException(`Invalid key value: ${r}`);const n=(0,Og.isSingleComplexGrapheme)(r),a=(0,Tc.getNormalizedKey)(r),o=t.pressed.has(a),c=(0,Tc.getKeyCode)(r),u=(0,Tc.getKeyLocation)(r);switch(a){case"Alt":t.alt=!0;break;case"Shift":t.shift=!0;break;case"Control":t.ctrl=!0;break;case"Meta":t.meta=!0;break}t.pressed.add(a);const{modifiers:d}=t,h=Gk(a,t,n),p=Xk(c??"",t)??h;let m;if(i(this,po)&&t.meta)switch(c){case"KeyA":m="SelectAll";break;case"KeyC":m="Copy";break;case"KeyV":m=t.shift?"PasteAndMatchStyle":"Paste";break;case"KeyX":m="Cut";break;case"KeyZ":m=t.shift?"Redo":"Undo";break}const w=[i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchKeyEvent",{type:p?"keyDown":"rawKeyDown",windowsVirtualKeyCode:zk.KeyToKeyCode[a],key:a,code:c,text:p,unmodifiedText:h,autoRepeat:o,isSystemKey:t.alt||void 0,location:u<3?u:void 0,isKeypad:u===3,modifiers:d,commands:m?[m]:void 0})];a==="Escape"&&!t.alt&&(i(this,po)&&!t.ctrl&&!t.meta||!i(this,po))&&w.push(i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.cancelDragging")),await Promise.all(w)},V_=function(t,e){const r=e.value;if(!(0,Og.isSingleGrapheme)(r))throw new Pc.InvalidArgumentException(`Invalid key value: ${r}`);const n=(0,Og.isSingleComplexGrapheme)(r),a=(0,Tc.getNormalizedKey)(r);if(!t.pressed.has(a))return;const o=(0,Tc.getKeyCode)(r),c=(0,Tc.getKeyLocation)(r);switch(a){case"Alt":t.alt=!1;break;case"Shift":t.shift=!1;break;case"Control":t.ctrl=!1;break;case"Meta":t.meta=!1;break}t.pressed.delete(a);const{modifiers:u}=t,d=Gk(a,t,n),h=Xk(o??"",t)??d;return i(this,Ut).cdpTarget.cdpClient.sendCommand("Input.dispatchKeyEvent",{type:"keyUp",windowsVirtualKeyCode:zk.KeyToKeyCode[a],key:a,code:o,text:h,unmodifiedText:d,location:c<3?c:void 0,isSystemKey:t.alt||void 0,isKeypad:c===3,modifiers:u})},T(Vk,"isMacOS",async t=>{const e=await(await t.getOrCreateSandbox(void 0)).callFunction(gF,!1);return(0,Od.assert)(e.type!=="exception"),(0,Od.assert)(e.result.type==="boolean"),e.result.value}),Ag.ActionDispatcher=Vk;const Gk=(s,t,e)=>e?s:s==="Enter"?"\r":[...s].length===1?t.shift?s.toLocaleUpperCase("en-US"):s:void 0,Xk=(s,t)=>{if(t.ctrl){switch(s){case"Digit2":if(t.shift)return"\0";break;case"KeyA":return"";case"KeyB":return"";case"KeyC":return"";case"KeyD":return"";case"KeyE":return"";case"KeyF":return"";case"KeyG":return"\x07";case"KeyH":return"\b";case"KeyI":return"	";case"KeyJ":return`
`;case"KeyK":return"\v";case"KeyL":return"\f";case"KeyM":return"\r";case"KeyN":return"";case"KeyO":return"";case"KeyP":return"";case"KeyQ":return"";case"KeyR":return"";case"KeyS":return"";case"KeyT":return"";case"KeyU":return"";case"KeyV":return"";case"KeyW":return"";case"KeyX":return"";case"KeyY":return"";case"KeyZ":return"";case"BracketLeft":return"\x1B";case"Backslash":return"";case"BracketRight":return"";case"Digit6":if(t.shift)return"";break;case"Minus":return""}return""}if(t.alt)return""};function Rg(s){switch(s){case 0:return"left";case 1:return"middle";case 2:return"right";case 3:return"back";case 4:return"forward";default:return"none"}}function Jk(s){const t=s.altitudeAngle??0,e=s.azimuthAngle??0;let r=0,n=0;if(t===0&&((e===0||e===2*Math.PI)&&(r=Math.PI/2),e===Math.PI/2&&(n=Math.PI/2),e===Math.PI&&(r=-Math.PI/2),e===3*Math.PI/2&&(n=-Math.PI/2),e>0&&e<Math.PI/2&&(r=Math.PI/2,n=Math.PI/2),e>Math.PI/2&&e<Math.PI&&(r=-Math.PI/2,n=Math.PI/2),e>Math.PI&&e<3*Math.PI/2&&(r=-Math.PI/2,n=-Math.PI/2),e>3*Math.PI/2&&e<2*Math.PI&&(r=Math.PI/2,n=-Math.PI/2)),t!==0){const o=Math.tan(t);r=Math.atan(Math.cos(e)/o),n=Math.atan(Math.sin(e)/o)}const a=180/Math.PI;return{tiltX:Math.round(r*a),tiltY:Math.round(n*a)}}function Yk(s,t){return{radiusX:s?s/2:.5,radiusY:t?t/2:.5}}var Lg={},Ng={},$g={};Object.defineProperty($g,"__esModule",{value:!0}),$g.Mutex=void 0;class yF{constructor(){l(this,dp);l(this,ll,!1);l(this,lp,[])}acquire(){const t={resolved:!1};return i(this,ll)?new Promise(e=>{i(this,lp).push(()=>e(g(this,dp,U0).bind(this,t)))}):(f(this,ll,!0),Promise.resolve(g(this,dp,U0).bind(this,t)))}async run(t){const e=await this.acquire();try{return await t()}finally{e()}}}ll=new WeakMap,lp=new WeakMap,dp=new WeakSet,U0=function(t){if(t.resolved)throw new Error("Cannot release more than once.");t.resolved=!0;const e=i(this,lp).shift();if(!e){f(this,ll,!1);return}e()},$g.Mutex=yF,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.InputState=void 0;const Uv=Re,vF=$g,Rd=Br;class bF{constructor(){T(this,"cancelList",[]);l(this,vn,new Map);l(this,Nw,new vF.Mutex)}getOrCreate(t,e,r){let n=i(this,vn).get(t);if(!n){switch(e){case"none":n=new Rd.NoneSource;break;case"key":n=new Rd.KeySource;break;case"pointer":{let a=r==="mouse"?0:2;const o=new Set;for(const[,c]of i(this,vn))c.type==="pointer"&&o.add(c.pointerId);for(;o.has(a);)++a;n=new Rd.PointerSource(a,r);break}case"wheel":n=new Rd.WheelSource;break;default:throw new Uv.InvalidArgumentException(`Expected "none", "key", "pointer", or "wheel". Found unknown source type ${e}.`)}return i(this,vn).set(t,n),n}if(n.type!==e)throw new Uv.InvalidArgumentException(`Input source type of ${t} is ${n.type}, but received ${e}.`);return n}get(t){const e=i(this,vn).get(t);if(!e)throw new Uv.UnknownErrorException("Internal error.");return e}getGlobalKeyState(){const t=new Rd.KeySource;for(const[,e]of i(this,vn))if(e.type==="key"){for(const r of e.pressed)t.pressed.add(r);t.alt||(t.alt=e.alt),t.ctrl||(t.ctrl=e.ctrl),t.meta||(t.meta=e.meta),t.shift||(t.shift=e.shift)}return t}get queue(){return i(this,Nw)}}vn=new WeakMap,Nw=new WeakMap,Ng.InputState=bF,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.InputStateManager=void 0;const SF=Bi,CF=Ng;class kF extends WeakMap{get(t){return(0,SF.assert)(t.isTopLevelContext()),this.has(t)||this.set(t,new CF.InputState),super.get(t)}}Lg.InputStateManager=kF,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.InputProcessor=void 0;const ia=Re,Bg=Bi,jg=Ag,EF=Lg;class xF{constructor(t,e){l(this,Bw);l(this,mo);l(this,$w);l(this,dl,new EF.InputStateManager);f(this,mo,t),f(this,$w,e)}async performActions(t){const e=i(this,mo).getContext(t.context),r=i(this,dl).get(e.top),n=g(this,Bw,G_).call(this,t,r);return await new jg.ActionDispatcher(r,e,await jg.ActionDispatcher.isMacOS(e).catch(()=>!1)).dispatchActions(n),{}}async releaseActions(t){const e=i(this,mo).getContext(t.context),r=e.top,n=i(this,dl).get(r);return await new jg.ActionDispatcher(n,e,await jg.ActionDispatcher.isMacOS(e).catch(()=>!1)).dispatchTickActions(n.cancelList.reverse()),i(this,dl).delete(r),{}}async setFiles(t){const r=await i(this,mo).getContext(t.context).getOrCreateSandbox(void 0);let n;try{n=await r.callFunction(String(function(u){if(!(this instanceof HTMLInputElement))return this instanceof Element?1:0;if(this.type!=="file")return 2;if(this.disabled)return 3;if(u>1&&!this.multiple)return 4}),!1,t.element,[{type:"number",value:t.files.length}])}catch{throw new ia.NoSuchNodeException(`Could not find element ${t.element.sharedId}`)}if((0,Bg.assert)(n.type==="success"),n.result.type==="number")switch(n.result.value){case 0:throw new ia.NoSuchElementException(`Could not find element ${t.element.sharedId}`);case 1:throw new ia.UnableToSetFileInputException(`Element ${t.element.sharedId} is not a input`);case 2:throw new ia.UnableToSetFileInputException(`Input element ${t.element.sharedId} is not a file type`);case 3:throw new ia.UnableToSetFileInputException(`Input element ${t.element.sharedId} is disabled`);case 4:throw new ia.UnableToSetFileInputException("Cannot set multiple files on a non-multiple input element")}if(t.files.length===0)return await r.callFunction(String(function(){var u;if(((u=this.files)==null?void 0:u.length)===0){this.dispatchEvent(new Event("cancel",{bubbles:!0}));return}this.files=new DataTransfer().files,this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}),!1,t.element),{};const a=[];for(let c=0;c<t.files.length;++c){const u=await r.callFunction(String(function(m){var w;return(w=this.files)==null?void 0:w.item(m)}),!1,t.element,[{type:"number",value:0}],"root");if((0,Bg.assert)(u.type==="success"),u.result.type!=="object")break;const{handle:d}=u.result;(0,Bg.assert)(d!==void 0);const{path:h}=await r.cdpClient.sendCommand("DOM.getFileInfo",{objectId:d});a.push(h),r.disown(d).catch(void 0)}a.sort();const o=[...t.files].sort();if(a.length!==t.files.length||o.some((c,u)=>a[u]!==c)){const{objectId:c}=await r.deserializeForCdp(t.element);(0,Bg.assert)(c!==void 0),await r.cdpClient.sendCommand("DOM.setFileInputFiles",{files:t.files,objectId:c})}else await r.callFunction(String(function(){this.dispatchEvent(new Event("cancel",{bubbles:!0}))}),!1,t.element);return{}}}mo=new WeakMap,$w=new WeakMap,dl=new WeakMap,Bw=new WeakSet,G_=function(t,e){var n;const r=[];for(const a of t.actions){switch(a.type){case"pointer":{a.parameters??(a.parameters={pointerType:"mouse"}),(n=a.parameters).pointerType??(n.pointerType="mouse");const c=e.getOrCreate(a.id,"pointer",a.parameters.pointerType);if(c.subtype!==a.parameters.pointerType)throw new ia.InvalidArgumentException(`Expected input source ${a.id} to be ${c.subtype}; got ${a.parameters.pointerType}.`);break}default:e.getOrCreate(a.id,a.type)}const o=a.actions.map(c=>({id:a.id,action:c}));for(let c=0;c<o.length;c++)r.length===c&&r.push([]),r[c].push(o[c])}return r},Mg.InputProcessor=xF;var Ld={};Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.NetworkProcessor=void 0;const lt=Re,_r=class _r{constructor(t,e){l(this,vi);l(this,go);l(this,wo);f(this,go,t),f(this,wo,e)}async addIntercept(t){i(this,go).verifyTopLevelContextsList(t.contexts);const e=t.urlPatterns??[],r=_r.parseUrlPatterns(e),n=i(this,wo).addIntercept({urlPatterns:r,phases:t.phases,contexts:t.contexts});return await Promise.all(i(this,go).getAllContexts().map(a=>a.cdpTarget.toggleFetchIfNeeded())),{intercept:n}}async continueRequest(t){if(t.url!==void 0&&_r.parseUrlString(t.url),t.method!==void 0&&!_r.isMethodValid(t.method))throw new lt.InvalidArgumentException(`Method '${t.method}' is invalid.`);t.headers&&_r.validateHeaders(t.headers);const e=g(this,vi,Mm).call(this,t.request,["beforeRequestSent"]);try{await e.continueRequest(t)}catch(r){throw _r.wrapInterceptionError(r)}return{}}async continueResponse(t){t.headers&&_r.validateHeaders(t.headers);const e=g(this,vi,Mm).call(this,t.request,["authRequired","responseStarted"]);try{await e.continueResponse(t)}catch(r){throw _r.wrapInterceptionError(r)}return{}}async continueWithAuth(t){const e=t.request;return await g(this,vi,Mm).call(this,e,["authRequired"]).continueWithAuth(t),{}}async failRequest({request:t}){const e=g(this,vi,H0).call(this,t);if(e.interceptPhase==="authRequired")throw new lt.InvalidArgumentException(`Request '${t}' in 'authRequired' phase cannot be failed`);if(!e.interceptPhase)throw new lt.NoSuchRequestException(`No blocked request found for network id '${t}'`);return await e.failRequest("Failed"),{}}async provideResponse(t){t.headers&&_r.validateHeaders(t.headers);const e=g(this,vi,Mm).call(this,t.request,["beforeRequestSent","responseStarted","authRequired"]);try{await e.provideResponse(t)}catch(r){throw _r.wrapInterceptionError(r)}return{}}async removeIntercept(t){return i(this,wo).removeIntercept(t.intercept),await Promise.all(i(this,go).getAllContexts().map(e=>e.cdpTarget.toggleFetchIfNeeded())),{}}static validateHeaders(t){for(const e of t){let r;if(e.value.type==="string"?r=e.value.value:r=atob(e.value.value),r!==r.trim()||r.includes(`
`)||r.includes("\0"))throw new lt.InvalidArgumentException(`Header value '${r}' is not acceptable value`)}}static isMethodValid(t){return/^[!#$%&'*+\-.^_`|~a-zA-Z\d]+$/.test(t)}static parseUrlString(t){try{return new URL(t)}catch(e){throw new lt.InvalidArgumentException(`Invalid URL '${t}': ${e}`)}}static parseUrlPatterns(t){return t.map(e=>{var r,n,a;switch(e.type){case"string":return _r.parseUrlString(e.pattern),e;case"pattern":if(e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0)return e;if(e.protocol&&(e.protocol=Nd(e.protocol),!e.protocol.match(/^[a-zA-Z+-.]+$/)))throw new lt.InvalidArgumentException("Forbidden characters");if(e.hostname&&(e.hostname=Nd(e.hostname)),e.port&&(e.port=Nd(e.port)),e.pathname){if(e.pathname=Nd(e.pathname),e.pathname[0]!=="/"&&(e.pathname=`/${e.pathname}`),e.pathname.includes("#")||e.pathname.includes("?"))throw new lt.InvalidArgumentException("Forbidden characters")}else e.pathname===""&&(e.pathname="/");if(e.search&&(e.search=Nd(e.search),e.search[0]!=="?"&&(e.search=`?${e.search}`),e.search.includes("#")))throw new lt.InvalidArgumentException("Forbidden characters");if(e.protocol==="")throw new lt.InvalidArgumentException("URL pattern must specify a protocol");if(e.hostname==="")throw new lt.InvalidArgumentException("URL pattern must specify a hostname");if((((r=e.hostname)==null?void 0:r.length)??0)>0){if((n=e.protocol)!=null&&n.match(/^file/i))throw new lt.InvalidArgumentException("URL pattern protocol cannot be 'file'");if((a=e.hostname)!=null&&a.includes(":"))throw new lt.InvalidArgumentException("URL pattern hostname must not contain a colon")}if(e.port==="")throw new lt.InvalidArgumentException("URL pattern must specify a port");try{new URLPattern(e)}catch(o){throw new lt.InvalidArgumentException(`${o}`)}return e}})}static wrapInterceptionError(t){return t!=null&&t.message.includes("Invalid header")?new lt.InvalidArgumentException("Invalid header"):t}};go=new WeakMap,wo=new WeakMap,vi=new WeakSet,H0=function(t){const e=i(this,wo).getRequestById(t);if(!e)throw new lt.NoSuchRequestException(`Network request with ID '${t}' doesn't exist`);return e},Mm=function(t,e){const r=g(this,vi,H0).call(this,t);if(!r.interceptPhase)throw new lt.NoSuchRequestException(`No blocked request found for network id '${t}'`);if(r.interceptPhase&&!e.includes(r.interceptPhase))throw new lt.InvalidArgumentException(`Blocked request for network id '${t}' is in '${r.interceptPhase}' phase`);return r};let Hv=_r;Ld.NetworkProcessor=Hv;function Nd(s){const t=new Set(["(",")","*","{","}"]);let e="",r=!1;for(const n of s){if(!r){if(t.has(n))throw new lt.InvalidArgumentException("Forbidden characters");if(n==="\\"){r=!0;continue}}e+=n,r=!1}return e}var Kg={};Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.PermissionsProcessor=void 0;const _F=Re;class PF{constructor(t){l(this,hp);f(this,hp,t)}async setPermissions(t){try{const e=t["goog:userContext"]||t.userContext;await i(this,hp).sendCommand("Browser.setPermission",{origin:t.origin,browserContextId:e&&e!=="default"?e:void 0,permission:{name:t.descriptor.name},setting:t.state})}catch(e){if(e.message==="Permission can't be granted to opaque origins.")return{};throw new _F.InvalidArgumentException(e.message)}return{}}}hp=new WeakMap,Kg.PermissionsProcessor=PF;var Ug={},Hg={},sa={};Object.defineProperty(sa,"__esModule",{value:!0}),sa.uuidv4=TF;function $d(s){return s.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function TF(){if("crypto"in globalThis&&"randomUUID"in globalThis.crypto)return globalThis.crypto.randomUUID();const s=new Uint8Array(16);return"crypto"in globalThis&&"getRandomValues"in globalThis.crypto?globalThis.crypto.getRandomValues(s):IS.webcrypto.getRandomValues(s),s[6]=s[6]&15|64,s[8]=s[8]&63|128,[$d(s.subarray(0,4)),$d(s.subarray(4,6)),$d(s.subarray(6,8)),$d(s.subarray(8,10)),$d(s.subarray(10,16))].join("-")}var Bd={};Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.ChannelProxy=void 0;const IF=Re,Qk=tr,MF=sa,pl=class pl{constructor(t,e){l(this,vo);l(this,yo);l(this,hl,(0,MF.uuidv4)());l(this,fl);f(this,yo,t),f(this,fl,e)}async init(t,e){var a,o;const r=await g(a=pl,os,X_).call(a,t),n=await g(o=pl,os,J_).call(o,t,r);return g(this,vo,W0).call(this,t,r,e),n}async startListenerFromWindow(t,e){var r;try{const n=await g(this,vo,Y_).call(this,t);g(this,vo,W0).call(this,t,n,e)}catch(n){(r=i(this,fl))==null||r.call(this,Qk.LogType.debugError,n)}}getEvalInWindowStr(){var r;const t=String((n,a)=>{const o=window;return o[n]===void 0?o[n]=a:(o[n](a),delete o[n]),a.sendMessage}),e=g(r=pl,os,q0).call(r);return`(${t})('${i(this,hl)}',${e})`}};yo=new WeakMap,hl=new WeakMap,fl=new WeakMap,os=new WeakSet,q0=function(){return`(${String(()=>{const e=[];let r=null;return{async getMessage(){return await(e.length>0?Promise.resolve():new Promise(a=>{r=a})),e.shift()},sendMessage(n){e.push(n),r!==null&&(r(),r=null)}}})})()`},X_=async function(t){const e=await t.cdpClient.sendCommand("Runtime.evaluate",{expression:g(this,os,q0).call(this),contextId:t.executionContextId,serializationOptions:{serialization:"idOnly"}});if(e.exceptionDetails||e.result.objectId===void 0)throw new Error("Cannot create channel");return e.result.objectId},J_=async function(t,e){return(await t.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(n=>n.sendMessage),arguments:[{objectId:e}],executionContextId:t.executionContextId,serializationOptions:{serialization:"idOnly"}})).result.objectId},vo=new WeakSet,W0=async function(t,e,r){var n,a;for(;;)try{const o=await t.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(async c=>await c.getMessage()),arguments:[{objectId:e}],awaitPromise:!0,executionContextId:t.executionContextId,serializationOptions:{serialization:"deep",maxDepth:((n=i(this,yo).serializationOptions)==null?void 0:n.maxObjectDepth)??void 0}});if(o.exceptionDetails)throw new Error("Runtime.callFunctionOn in ChannelProxy",{cause:o.exceptionDetails});for(const c of t.associatedBrowsingContexts)r.registerEvent({type:"event",method:IF.ChromiumBidi.Script.EventNames.Message,params:{channel:i(this,yo).channel,data:t.cdpToBidiValue(o,i(this,yo).ownership??"none"),source:t.source}},c.id)}catch(o){(a=i(this,fl))==null||a.call(this,Qk.LogType.debugError,o);break}},Y_=async function(t){const e=await t.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(r=>{const n=window;if(n[r]===void 0)return new Promise(o=>n[r]=o);const a=n[r];return delete n[r],a}),arguments:[{value:i(this,hl)}],executionContextId:t.executionContextId,awaitPromise:!0,serializationOptions:{serialization:"idOnly"}});if(e.exceptionDetails!==void 0||e.result.objectId===void 0)throw new Error(`ChannelHandle not found in window["${i(this,hl)}"]`);return e.result.objectId},l(pl,os);let qv=pl;Bd.ChannelProxy=qv,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.PreloadScript=void 0;const AF=sa,FF=Bd;class DF{constructor(t,e){l(this,Kw);l(this,jw,(0,AF.uuidv4)());l(this,bo,[]);l(this,fp);l(this,ml,new Set);l(this,pp);l(this,mp);l(this,gp);var r;f(this,pp,((r=t.arguments)==null?void 0:r.map(n=>new FF.ChannelProxy(n.value,e)))??[]),f(this,fp,t.functionDeclaration),f(this,mp,t.sandbox),f(this,gp,t.contexts)}get id(){return i(this,jw)}get targetIds(){return i(this,ml)}get channels(){return i(this,pp)}get contexts(){return i(this,gp)}async initInTargets(t,e){await Promise.all(Array.from(t).map(r=>this.initInTarget(r,e)))}async initInTarget(t,e){const r=await t.cdpClient.sendCommand("Page.addScriptToEvaluateOnNewDocument",{source:g(this,Kw,Q_).call(this),worldName:i(this,mp),runImmediately:e});i(this,bo).push({target:t,preloadScriptId:r.identifier}),i(this,ml).add(t.id)}async remove(){await Promise.all([i(this,bo).map(async t=>{const e=t.target,r=t.preloadScriptId;return await e.cdpClient.sendCommand("Page.removeScriptToEvaluateOnNewDocument",{identifier:r})})])}dispose(t){f(this,bo,i(this,bo).filter(e=>{var r;return((r=e.target)==null?void 0:r.id)!==t})),i(this,ml).delete(t)}}jw=new WeakMap,bo=new WeakMap,fp=new WeakMap,ml=new WeakMap,pp=new WeakMap,mp=new WeakMap,gp=new WeakMap,Kw=new WeakSet,Q_=function(){const t=`[${this.channels.map(e=>e.getEvalInWindowStr()).join(", ")}]`;return`(()=>{(${i(this,fp)})(...${t})})()`},Hg.PreloadScript=DF,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.ScriptProcessor=void 0;const OF=Re,RF=Hg;class LF{constructor(t,e,r,n){l(this,wl);l(this,bn);l(this,gl);l(this,So);l(this,wp);f(this,bn,t),f(this,gl,e),f(this,So,r),f(this,wp,n)}async addPreloadScript(t){const e=i(this,bn).verifyTopLevelContextsList(t.contexts),r=new RF.PreloadScript(t,i(this,wp));i(this,So).add(r);const n=e.size===0?new Set(i(this,bn).getTopLevelContexts().map(a=>a.cdpTarget)):new Set([...e.values()].map(a=>a.cdpTarget));return await r.initInTargets(n,!1),{script:r.id}}async removePreloadScript(t){const{script:e}=t,r=i(this,So).find({id:e});if(r.length===0)throw new OF.NoSuchScriptException(`No preload script with id '${e}'`);return await Promise.all(r.map(n=>n.remove())),i(this,So).remove({id:e}),{}}async callFunction(t){return await(await g(this,wl,Sy).call(this,t.target)).callFunction(t.functionDeclaration,t.awaitPromise,t.this,t.arguments,t.resultOwnership,t.serializationOptions,t.userActivation)}async evaluate(t){return await(await g(this,wl,Sy).call(this,t.target)).evaluate(t.expression,t.awaitPromise,t.resultOwnership,t.serializationOptions,t.userActivation)}async disown(t){const e=await g(this,wl,Sy).call(this,t.target);return await Promise.all(t.handles.map(async r=>await e.disown(r))),{}}getRealms(t){return t.context!==void 0&&i(this,bn).getContext(t.context),{realms:i(this,gl).findRealms({browsingContextId:t.context,type:t.type}).map(r=>r.realmInfo)}}}bn=new WeakMap,gl=new WeakMap,So=new WeakMap,wp=new WeakMap,wl=new WeakSet,Sy=async function(t){return"context"in t?await i(this,bn).getContext(t.context).getOrCreateSandbox(t.sandbox):i(this,gl).getRealm({realmId:t.realm})},Ug.ScriptProcessor=LF;var qg={};Object.defineProperty(qg,"__esModule",{value:!0}),qg.SessionProcessor=void 0;const Wv=Re;class NF{constructor(t,e,r){l(this,vl);l(this,yl);l(this,yp);l(this,vp);l(this,bp,!1);f(this,yl,t),f(this,yp,e),f(this,vp,r)}status(){return{ready:!1,message:"already connected"}}async new(t){if(i(this,bp))throw new Error("Session has been already created.");f(this,bp,!0);const e=g(this,vl,Z_).call(this,t.capabilities);await i(this,vp).call(this,e);const r=await i(this,yp).sendCommand("Browser.getVersion");return{sessionId:"unknown",capabilities:{...e,acceptInsecureCerts:e.acceptInsecureCerts??!1,browserName:r.product,browserVersion:r.revision,platformName:"",setWindowRect:!1,webSocketUrl:"",userAgent:r.userAgent}}}async subscribe(t,e=null){return await i(this,yl).subscribe(t.events,t.contexts??[null],e),{}}async unsubscribe(t,e=null){return await i(this,yl).unsubscribe(t.events,t.contexts??[null],e),{}}}yl=new WeakMap,yp=new WeakMap,vp=new WeakMap,bp=new WeakMap,vl=new WeakSet,Z_=function(t){const e=[];for(const n of t.firstMatch??[{}]){const a={...t.alwaysMatch};for(const o of Object.keys(n)){if(a[o]!==void 0)throw new Wv.InvalidArgumentException(`Capability ${o} in firstMatch is already defined in alwaysMatch`);a[o]=n[o]}e.push(a)}const r=e.find(n=>n.browserName==="chrome")??e[0]??{};return r.unhandledPromptBehavior=g(this,vl,e1).call(this,r.unhandledPromptBehavior),r},e1=function(t){if(t!==void 0){if(typeof t=="object")return t;if(typeof t!="string")throw new Wv.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' type: ${typeof t}`);switch(t){case"accept":case"accept and notify":return{default:"accept"};case"dismiss":case"dismiss and notify":return{default:"dismiss"};case"ignore":return{default:"ignore"};default:throw new Wv.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' value: ${t}`)}}},qg.SessionProcessor=NF;var Wg={},st={},zv={};Object.defineProperty(zv,"__esModule",{value:!0}),zv.base64ToString=$F;function $F(s){return"atob"in globalThis?globalThis.atob(s):Buffer.from(s,"base64").toString("ascii")}var jd={},Vv=Object.defineProperty,BF=Object.getOwnPropertyDescriptor,jF=Object.getOwnPropertyNames,KF=Object.prototype.hasOwnProperty,UF=(s,t)=>{for(var e in t)Vv(s,e,{get:t[e],enumerable:!0})},HF=(s,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of jF(t))!KF.call(s,n)&&n!==e&&Vv(s,n,{get:()=>t[n],enumerable:!(r=BF(t,n))||r.enumerable});return s},qF=s=>HF(Vv({},"__esModule",{value:!0}),s),Zk={};UF(Zk,{URLPattern:()=>wD});var WF=qF(Zk),Kd=class{constructor(s,t,e,r,n,a){T(this,"type",3);T(this,"name","");T(this,"prefix","");T(this,"value","");T(this,"suffix","");T(this,"modifier",3);this.type=s,this.name=t,this.prefix=e,this.value=r,this.suffix=n,this.modifier=a}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},zF=/[$_\p{ID_Start}]/u,VF=/[$_\u200C\u200D\p{ID_Continue}]/u,Gv=".*";function GF(s,t){return/^[\x00-\x7F]*$/.test(s)}function eE(s,t=!1){let e=[],r=0;for(;r<s.length;){let n=s[r],a=function(o){if(!t)throw new TypeError(o);e.push({type:"INVALID_CHAR",index:r,value:s[r++]})};if(n==="*"){e.push({type:"ASTERISK",index:r,value:s[r++]});continue}if(n==="+"||n==="?"){e.push({type:"OTHER_MODIFIER",index:r,value:s[r++]});continue}if(n==="\\"){e.push({type:"ESCAPED_CHAR",index:r++,value:s[r++]});continue}if(n==="{"){e.push({type:"OPEN",index:r,value:s[r++]});continue}if(n==="}"){e.push({type:"CLOSE",index:r,value:s[r++]});continue}if(n===":"){let o="",c=r+1;for(;c<s.length;){let u=s.substr(c,1);if(c===r+1&&zF.test(u)||c!==r+1&&VF.test(u)){o+=s[c++];continue}break}if(!o){a(`Missing parameter name at ${r}`);continue}e.push({type:"NAME",index:r,value:o}),r=c;continue}if(n==="("){let o=1,c="",u=r+1,d=!1;if(s[u]==="?"){a(`Pattern cannot start with "?" at ${u}`);continue}for(;u<s.length;){if(!GF(s[u])){a(`Invalid character '${s[u]}' at ${u}.`),d=!0;break}if(s[u]==="\\"){c+=s[u++]+s[u++];continue}if(s[u]===")"){if(o--,o===0){u++;break}}else if(s[u]==="("&&(o++,s[u+1]!=="?")){a(`Capturing groups are not allowed at ${u}`),d=!0;break}c+=s[u++]}if(d)continue;if(o){a(`Unbalanced pattern at ${r}`);continue}if(!c){a(`Missing pattern at ${r}`);continue}e.push({type:"REGEX",index:r,value:c}),r=u;continue}e.push({type:"CHAR",index:r,value:s[r++]})}return e.push({type:"END",index:r,value:""}),e}function tE(s,t={}){let e=eE(s);t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./");let r=`[^${Er(t.delimiter)}]+?`,n=[],a=0,o=0,c=new Set,u=E=>{if(o<e.length&&e[o].type===E)return e[o++].value},d=()=>u("OTHER_MODIFIER")??u("ASTERISK"),h=E=>{let k=u(E);if(k!==void 0)return k;let{type:_,index:A}=e[o];throw new TypeError(`Unexpected ${_} at ${A}, expected ${E}`)},p=()=>{let E="",k;for(;k=u("CHAR")??u("ESCAPED_CHAR");)E+=k;return E},m=E=>E,w=t.encodePart||m,b="",v=E=>{b+=E},y=()=>{b.length&&(n.push(new Kd(3,"","",w(b),"",3)),b="")},S=(E,k,_,A,D)=>{let P=3;switch(D){case"?":P=1;break;case"*":P=0;break;case"+":P=2;break}if(!k&&!_&&P===3){v(E);return}if(y(),!k&&!_){if(!E)return;n.push(new Kd(3,"","",w(E),"",P));return}let C;_?_==="*"?C=Gv:C=_:C=r;let I=2;C===r?(I=1,C=""):C===Gv&&(I=0,C="");let B;if(k?B=k:_&&(B=a++),c.has(B))throw new TypeError(`Duplicate name '${B}'.`);c.add(B),n.push(new Kd(I,B,w(E),C,w(A),P))};for(;o<e.length;){let E=u("CHAR"),k=u("NAME"),_=u("REGEX");if(!k&&!_&&(_=u("ASTERISK")),k||_){let D=E??"";t.prefixes.indexOf(D)===-1&&(v(D),D=""),y();let P=d();S(D,k,_,"",P);continue}let A=E??u("ESCAPED_CHAR");if(A){v(A);continue}if(u("OPEN")){let D=p(),P=u("NAME"),C=u("REGEX");!P&&!C&&(C=u("ASTERISK"));let I=p();h("CLOSE");let B=d();S(D,P,C,I,B);continue}y(),h("END")}return n}function Er(s){return s.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function rE(s){return s&&s.ignoreCase?"ui":"u"}function XF(s,t,e){return iE(tE(s,e),t,e)}function Ic(s){switch(s){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function iE(s,t,e={}){e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./"),e.sensitive??(e.sensitive=!1),e.strict??(e.strict=!1),e.end??(e.end=!0),e.start??(e.start=!0),e.endsWith="";let r=e.start?"^":"";for(let c of s){if(c.type===3){c.modifier===3?r+=Er(c.value):r+=`(?:${Er(c.value)})${Ic(c.modifier)}`;continue}t&&t.push(c.name);let u=`[^${Er(e.delimiter)}]+?`,d=c.value;if(c.type===1?d=u:c.type===0&&(d=Gv),!c.prefix.length&&!c.suffix.length){c.modifier===3||c.modifier===1?r+=`(${d})${Ic(c.modifier)}`:r+=`((?:${d})${Ic(c.modifier)})`;continue}if(c.modifier===3||c.modifier===1){r+=`(?:${Er(c.prefix)}(${d})${Er(c.suffix)})`,r+=Ic(c.modifier);continue}r+=`(?:${Er(c.prefix)}`,r+=`((?:${d})(?:`,r+=Er(c.suffix),r+=Er(c.prefix),r+=`(?:${d}))*)${Er(c.suffix)})`,c.modifier===0&&(r+="?")}let n=`[${Er(e.endsWith)}]|$`,a=`[${Er(e.delimiter)}]`;if(e.end)return e.strict||(r+=`${a}?`),e.endsWith.length?r+=`(?=${n})`:r+="$",new RegExp(r,rE(e));e.strict||(r+=`(?:${a}(?=${n}))?`);let o=!1;if(s.length){let c=s[s.length-1];c.type===3&&c.modifier===3&&(o=e.delimiter.indexOf(c)>-1)}return o||(r+=`(?=${a}|${n})`),new RegExp(r,rE(e))}var Ts={delimiter:"",prefixes:"",sensitive:!0,strict:!0},JF={delimiter:".",prefixes:"",sensitive:!0,strict:!0},YF={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function QF(s,t){return s.length?s[0]==="/"?!0:!t||s.length<2?!1:(s[0]=="\\"||s[0]=="{")&&s[1]=="/":!1}function sE(s,t){return s.startsWith(t)?s.substring(t.length,s.length):s}function ZF(s,t){return s.endsWith(t)?s.substr(0,s.length-t.length):s}function nE(s){return!s||s.length<2?!1:s[0]==="["||(s[0]==="\\"||s[0]==="{")&&s[1]==="["}var aE=["ftp","file","http","https","ws","wss"];function oE(s){if(!s)return!0;for(let t of aE)if(s.test(t))return!0;return!1}function eD(s,t){if(s=sE(s,"#"),t||s==="")return s;let e=new URL("https://example.com");return e.hash=s,e.hash?e.hash.substring(1,e.hash.length):""}function tD(s,t){if(s=sE(s,"?"),t||s==="")return s;let e=new URL("https://example.com");return e.search=s,e.search?e.search.substring(1,e.search.length):""}function rD(s,t){return t||s===""?s:nE(s)?lE(s):uE(s)}function iD(s,t){if(t||s==="")return s;let e=new URL("https://example.com");return e.password=s,e.password}function sD(s,t){if(t||s==="")return s;let e=new URL("https://example.com");return e.username=s,e.username}function nD(s,t,e){if(e||s==="")return s;if(t&&!aE.includes(t))return new URL(`${t}:${s}`).pathname;let r=s[0]=="/";return s=new URL(r?s:"/-"+s,"https://example.com").pathname,r||(s=s.substring(2,s.length)),s}function aD(s,t,e){return cE(t)===s&&(s=""),e||s===""?s:dE(s)}function oD(s,t){return s=ZF(s,":"),t||s===""?s:Xv(s)}function cE(s){switch(s){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function Xv(s){if(s==="")return s;if(/^[-+.A-Za-z0-9]*$/.test(s))return s.toLowerCase();throw new TypeError(`Invalid protocol '${s}'.`)}function cD(s){if(s==="")return s;let t=new URL("https://example.com");return t.username=s,t.username}function uD(s){if(s==="")return s;let t=new URL("https://example.com");return t.password=s,t.password}function uE(s){if(s==="")return s;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(s))throw new TypeError(`Invalid hostname '${s}'`);let t=new URL("https://example.com");return t.hostname=s,t.hostname}function lE(s){if(s==="")return s;if(/[^0-9a-fA-F[\]:]/g.test(s))throw new TypeError(`Invalid IPv6 hostname '${s}'`);return s.toLowerCase()}function dE(s){if(s===""||/^[0-9]*$/.test(s)&&parseInt(s)<=65535)return s;throw new TypeError(`Invalid port '${s}'.`)}function lD(s){if(s==="")return s;let t=new URL("https://example.com");return t.pathname=s[0]!=="/"?"/-"+s:s,s[0]!=="/"?t.pathname.substring(2,t.pathname.length):t.pathname}function dD(s){return s===""?s:new URL(`data:${s}`).pathname}function hD(s){if(s==="")return s;let t=new URL("https://example.com");return t.search=s,t.search.substring(1,t.search.length)}function fD(s){if(s==="")return s;let t=new URL("https://example.com");return t.hash=s,t.hash.substring(1,t.hash.length)}var pD=(yx=class{constructor(s){l(this,q);l(this,bl);l(this,Yt,[]);l(this,_t,{});l(this,He,0);l(this,Co,1);l(this,Sl,0);l(this,yr,0);l(this,Cl,0);l(this,kl,0);l(this,El,!1);f(this,bl,s)}get result(){return i(this,_t)}parse(){for(f(this,Yt,eE(i(this,bl),!0));i(this,He)<i(this,Yt).length;f(this,He,i(this,He)+i(this,Co))){if(f(this,Co,1),i(this,Yt)[i(this,He)].type==="END"){if(i(this,yr)===0){g(this,q,z0).call(this),g(this,q,nc).call(this)?g(this,q,mt).call(this,9,1):g(this,q,dd).call(this)?g(this,q,mt).call(this,8,1):g(this,q,mt).call(this,7,0);continue}else if(i(this,yr)===2){g(this,q,Am).call(this,5);continue}g(this,q,mt).call(this,10,0);break}if(i(this,Cl)>0)if(g(this,q,a1).call(this))f(this,Cl,i(this,Cl)-1);else continue;if(g(this,q,n1).call(this)){f(this,Cl,i(this,Cl)+1);continue}switch(i(this,yr)){case 0:g(this,q,V0).call(this)&&g(this,q,Am).call(this,1);break;case 1:if(g(this,q,V0).call(this)){g(this,q,u1).call(this);let s=7,t=1;g(this,q,r1).call(this)?(s=2,t=3):i(this,El)&&(s=2),g(this,q,mt).call(this,s,t)}break;case 2:g(this,q,ky).call(this)?g(this,q,Am).call(this,3):(g(this,q,Ey).call(this)||g(this,q,dd).call(this)||g(this,q,nc).call(this))&&g(this,q,Am).call(this,5);break;case 3:g(this,q,i1).call(this)?g(this,q,mt).call(this,4,1):g(this,q,ky).call(this)&&g(this,q,mt).call(this,5,1);break;case 4:g(this,q,ky).call(this)&&g(this,q,mt).call(this,5,1);break;case 5:g(this,q,o1).call(this)?f(this,kl,i(this,kl)+1):g(this,q,c1).call(this)&&f(this,kl,i(this,kl)-1),g(this,q,s1).call(this)&&!i(this,kl)?g(this,q,mt).call(this,6,1):g(this,q,Ey).call(this)?g(this,q,mt).call(this,7,0):g(this,q,dd).call(this)?g(this,q,mt).call(this,8,1):g(this,q,nc).call(this)&&g(this,q,mt).call(this,9,1);break;case 6:g(this,q,Ey).call(this)?g(this,q,mt).call(this,7,0):g(this,q,dd).call(this)?g(this,q,mt).call(this,8,1):g(this,q,nc).call(this)&&g(this,q,mt).call(this,9,1);break;case 7:g(this,q,dd).call(this)?g(this,q,mt).call(this,8,1):g(this,q,nc).call(this)&&g(this,q,mt).call(this,9,1);break;case 8:g(this,q,nc).call(this)&&g(this,q,mt).call(this,9,1);break}}i(this,_t).hostname!==void 0&&i(this,_t).port===void 0&&(i(this,_t).port="")}},bl=new WeakMap,Yt=new WeakMap,_t=new WeakMap,He=new WeakMap,Co=new WeakMap,Sl=new WeakMap,yr=new WeakMap,Cl=new WeakMap,kl=new WeakMap,El=new WeakMap,q=new WeakSet,mt=function(s,t){var e,r,n;switch(i(this,yr)){case 0:break;case 1:i(this,_t).protocol=g(this,q,Di).call(this);break;case 2:break;case 3:i(this,_t).username=g(this,q,Di).call(this);break;case 4:i(this,_t).password=g(this,q,Di).call(this);break;case 5:i(this,_t).hostname=g(this,q,Di).call(this);break;case 6:i(this,_t).port=g(this,q,Di).call(this);break;case 7:i(this,_t).pathname=g(this,q,Di).call(this);break;case 8:i(this,_t).search=g(this,q,Di).call(this);break;case 9:i(this,_t).hash=g(this,q,Di).call(this);break}i(this,yr)!==0&&s!==10&&([1,2,3,4].includes(i(this,yr))&&[6,7,8,9].includes(s)&&((e=i(this,_t)).hostname??(e.hostname="")),[1,2,3,4,5,6].includes(i(this,yr))&&[8,9].includes(s)&&((r=i(this,_t)).pathname??(r.pathname=i(this,El)?"/":"")),[1,2,3,4,5,6,7].includes(i(this,yr))&&s===9&&((n=i(this,_t)).search??(n.search=""))),g(this,q,t1).call(this,s,t)},t1=function(s,t){f(this,yr,s),f(this,Sl,i(this,He)+t),f(this,He,i(this,He)+t),f(this,Co,0)},z0=function(){f(this,He,i(this,Sl)),f(this,Co,0)},Am=function(s){g(this,q,z0).call(this),f(this,yr,s)},Cy=function(s){return s<0&&(s=i(this,Yt).length-s),s<i(this,Yt).length?i(this,Yt)[s]:i(this,Yt)[i(this,Yt).length-1]},Rr=function(s,t){let e=g(this,q,Cy).call(this,s);return e.value===t&&(e.type==="CHAR"||e.type==="ESCAPED_CHAR"||e.type==="INVALID_CHAR")},V0=function(){return g(this,q,Rr).call(this,i(this,He),":")},r1=function(){return g(this,q,Rr).call(this,i(this,He)+1,"/")&&g(this,q,Rr).call(this,i(this,He)+2,"/")},ky=function(){return g(this,q,Rr).call(this,i(this,He),"@")},i1=function(){return g(this,q,Rr).call(this,i(this,He),":")},s1=function(){return g(this,q,Rr).call(this,i(this,He),":")},Ey=function(){return g(this,q,Rr).call(this,i(this,He),"/")},dd=function(){if(g(this,q,Rr).call(this,i(this,He),"?"))return!0;if(i(this,Yt)[i(this,He)].value!=="?")return!1;let s=g(this,q,Cy).call(this,i(this,He)-1);return s.type!=="NAME"&&s.type!=="REGEX"&&s.type!=="CLOSE"&&s.type!=="ASTERISK"},nc=function(){return g(this,q,Rr).call(this,i(this,He),"#")},n1=function(){return i(this,Yt)[i(this,He)].type=="OPEN"},a1=function(){return i(this,Yt)[i(this,He)].type=="CLOSE"},o1=function(){return g(this,q,Rr).call(this,i(this,He),"[")},c1=function(){return g(this,q,Rr).call(this,i(this,He),"]")},Di=function(){let s=i(this,Yt)[i(this,He)],t=g(this,q,Cy).call(this,i(this,Sl)).index;return i(this,bl).substring(t,s.index)},u1=function(){let s={};Object.assign(s,Ts),s.encodePart=Xv;let t=XF(g(this,q,Di).call(this),void 0,s);f(this,El,oE(t))},yx),Jv=["protocol","username","password","hostname","port","pathname","search","hash"],Is="*";function hE(s,t){if(typeof s!="string")throw new TypeError("parameter 1 is not of type 'string'.");let e=new URL(s,t);return{protocol:e.protocol.substring(0,e.protocol.length-1),username:e.username,password:e.password,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search!==""?e.search.substring(1,e.search.length):void 0,hash:e.hash!==""?e.hash.substring(1,e.hash.length):void 0}}function ji(s,t){return t?Hd(s):s}function Ud(s,t,e){let r;if(typeof t.baseURL=="string")try{r=new URL(t.baseURL),t.protocol===void 0&&(s.protocol=ji(r.protocol.substring(0,r.protocol.length-1),e)),!e&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&(s.username=ji(r.username,e)),!e&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&t.password===void 0&&(s.password=ji(r.password,e)),t.protocol===void 0&&t.hostname===void 0&&(s.hostname=ji(r.hostname,e)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&(s.port=ji(r.port,e)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&(s.pathname=ji(r.pathname,e)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&(s.search=ji(r.search.substring(1,r.search.length),e)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&t.hash===void 0&&(s.hash=ji(r.hash.substring(1,r.hash.length),e))}catch{throw new TypeError(`invalid baseURL '${t.baseURL}'.`)}if(typeof t.protocol=="string"&&(s.protocol=oD(t.protocol,e)),typeof t.username=="string"&&(s.username=sD(t.username,e)),typeof t.password=="string"&&(s.password=iD(t.password,e)),typeof t.hostname=="string"&&(s.hostname=rD(t.hostname,e)),typeof t.port=="string"&&(s.port=aD(t.port,s.protocol,e)),typeof t.pathname=="string"){if(s.pathname=t.pathname,r&&!QF(s.pathname,e)){let n=r.pathname.lastIndexOf("/");n>=0&&(s.pathname=ji(r.pathname.substring(0,n+1),e)+s.pathname)}s.pathname=nD(s.pathname,s.protocol,e)}return typeof t.search=="string"&&(s.search=tD(t.search,e)),typeof t.hash=="string"&&(s.hash=eD(t.hash,e)),s}function Hd(s){return s.replace(/([+*?:{}()\\])/g,"\\$1")}function mD(s){return s.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function gD(s,t){t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./"),t.sensitive??(t.sensitive=!1),t.strict??(t.strict=!1),t.end??(t.end=!0),t.start??(t.start=!0),t.endsWith="";let e=".*",r=`[^${mD(t.delimiter)}]+?`,n=/[$_\u200C\u200D\p{ID_Continue}]/u,a="";for(let o=0;o<s.length;++o){let c=s[o];if(c.type===3){if(c.modifier===3){a+=Hd(c.value);continue}a+=`{${Hd(c.value)}}${Ic(c.modifier)}`;continue}let u=c.hasCustomName(),d=!!c.suffix.length||!!c.prefix.length&&(c.prefix.length!==1||!t.prefixes.includes(c.prefix)),h=o>0?s[o-1]:null,p=o<s.length-1?s[o+1]:null;if(!d&&u&&c.type===1&&c.modifier===3&&p&&!p.prefix.length&&!p.suffix.length)if(p.type===3){let m=p.value.length>0?p.value[0]:"";d=n.test(m)}else d=!p.hasCustomName();if(!d&&!c.prefix.length&&h&&h.type===3){let m=h.value[h.value.length-1];d=t.prefixes.includes(m)}d&&(a+="{"),a+=Hd(c.prefix),u&&(a+=`:${c.name}`),c.type===2?a+=`(${c.value})`:c.type===1?u||(a+=`(${r})`):c.type===0&&(!u&&(!h||h.type===3||h.modifier!==3||d||c.prefix!=="")?a+="*":a+=`(${e})`),c.type===1&&u&&c.suffix.length&&n.test(c.suffix[0])&&(a+="\\"),a+=Hd(c.suffix),d&&(a+="}"),c.modifier!==3&&(a+=Ic(c.modifier))}return a}var wD=(vx=class{constructor(s={},t,e){l(this,bi);l(this,ko,{});l(this,xl,{});l(this,Pt,{});l(this,Gr,{});l(this,_l,!1);try{let r;if(typeof t=="string"?r=t:e=t,typeof s=="string"){let c=new pD(s);if(c.parse(),s=c.result,r===void 0&&typeof s.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");s.baseURL=r}else{if(!s||typeof s!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(r)throw new TypeError("parameter 1 is not of type 'string'.")}typeof e>"u"&&(e={ignoreCase:!1});let n={ignoreCase:e.ignoreCase===!0};f(this,bi,Ud({pathname:Is,protocol:Is,username:Is,password:Is,hostname:Is,port:Is,search:Is,hash:Is},s,!0)),cE(i(this,bi).protocol)===i(this,bi).port&&(i(this,bi).port="");let o;for(o of Jv){if(!(o in i(this,bi)))continue;let c={},u=i(this,bi)[o];switch(i(this,xl)[o]=[],o){case"protocol":Object.assign(c,Ts),c.encodePart=Xv;break;case"username":Object.assign(c,Ts),c.encodePart=cD;break;case"password":Object.assign(c,Ts),c.encodePart=uD;break;case"hostname":Object.assign(c,JF),nE(u)?c.encodePart=lE:c.encodePart=uE;break;case"port":Object.assign(c,Ts),c.encodePart=dE;break;case"pathname":oE(i(this,ko).protocol)?(Object.assign(c,YF,n),c.encodePart=lD):(Object.assign(c,Ts,n),c.encodePart=dD);break;case"search":Object.assign(c,Ts,n),c.encodePart=hD;break;case"hash":Object.assign(c,Ts,n),c.encodePart=fD;break}try{i(this,Gr)[o]=tE(u,c),i(this,ko)[o]=iE(i(this,Gr)[o],i(this,xl)[o],c),i(this,Pt)[o]=gD(i(this,Gr)[o],c),f(this,_l,i(this,_l)||i(this,Gr)[o].some(d=>d.type===2))}catch{throw new TypeError(`invalid ${o} pattern '${i(this,bi)[o]}'.`)}}}catch(r){throw new TypeError(`Failed to construct 'URLPattern': ${r.message}`)}}test(s={},t){let e={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof s!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof s>"u")return!1;try{typeof s=="object"?e=Ud(e,s,!1):e=Ud(e,hE(s,t),!1)}catch{return!1}let r;for(r of Jv)if(!i(this,ko)[r].exec(e[r]))return!1;return!0}exec(s={},t){let e={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof s!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof s>"u")return;try{typeof s=="object"?e=Ud(e,s,!1):e=Ud(e,hE(s,t),!1)}catch{return null}let r={};t?r.inputs=[s,t]:r.inputs=[s];let n;for(n of Jv){let a=i(this,ko)[n].exec(e[n]);if(!a)return null;let o={};for(let[c,u]of i(this,xl)[n].entries())if(typeof u=="string"||typeof u=="number"){let d=a[c+1];o[u]=d}r[n]={input:e[n]??"",groups:o}}return r}static compareComponent(s,t,e){let r=(c,u)=>{for(let d of["type","modifier","prefix","value","suffix"]){if(c[d]<u[d])return-1;if(c[d]!==u[d])return 1}return 0},n=new Kd(3,"","","","",3),a=new Kd(0,"","","","",3),o=(c,u)=>{let d=0;for(;d<Math.min(c.length,u.length);++d){let h=r(c[d],u[d]);if(h)return h}return c.length===u.length?0:r(c[d]??n,u[d]??n)};return!i(t,Pt)[s]&&!i(e,Pt)[s]?0:i(t,Pt)[s]&&!i(e,Pt)[s]?o(i(t,Gr)[s],[a]):!i(t,Pt)[s]&&i(e,Pt)[s]?o([a],i(e,Gr)[s]):o(i(t,Gr)[s],i(e,Gr)[s])}get protocol(){return i(this,Pt).protocol}get username(){return i(this,Pt).username}get password(){return i(this,Pt).password}get hostname(){return i(this,Pt).hostname}get port(){return i(this,Pt).port}get pathname(){return i(this,Pt).pathname}get search(){return i(this,Pt).search}get hash(){return i(this,Pt).hash}get hasRegExpGroups(){return i(this,_l)}},bi=new WeakMap,ko=new WeakMap,xl=new WeakMap,Pt=new WeakMap,Gr=new WeakMap,_l=new WeakMap,vx);const{URLPattern:fE}=WF;var yD={URLPattern:fE};globalThis.URLPattern||(globalThis.URLPattern=fE),Object.defineProperty(jd,"__esModule",{value:!0}),jd.URLPattern=void 0;let pE=yD.URLPattern;jd.URLPattern=pE,"URLPattern"in globalThis&&(jd.URLPattern=pE=globalThis.URLPattern),Object.defineProperty(st,"__esModule",{value:!0}),st.computeHeadersSize=SD,st.bidiNetworkHeadersFromCdpNetworkHeaders=CD,st.bidiNetworkHeadersFromCdpNetworkHeadersEntries=kD,st.cdpNetworkHeadersFromBidiNetworkHeaders=ED,st.bidiNetworkHeadersFromCdpFetchHeaders=xD,st.cdpFetchHeadersFromBidiNetworkHeaders=_D,st.networkHeaderFromCookieHeaders=PD,st.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction=TD,st.cdpToBiDiCookie=ID,st.deserializeByteValue=mE,st.bidiToCdpCookie=MD,st.sameSiteBiDiToCdp=gE,st.isSpecialScheme=FD,st.matchUrlPattern=DD,st.bidiBodySizeFromCdpPostDataEntries=OD,st.getTiming=RD;const vD=oe,bD=zv,Yv=jd;function SD(s){const t=s.reduce((e,r)=>`${e}${r.name}: ${r.value.value}\r
`,"");return new TextEncoder().encode(t).length}function CD(s){return s?Object.entries(s).map(([t,e])=>({name:t,value:{type:"string",value:e}})):[]}function kD(s){return s?s.map(({name:t,value:e})=>({name:t,value:{type:"string",value:e}})):[]}function ED(s){if(s!==void 0)return s.reduce((t,e)=>(t[e.name]=e.value.value,t),{})}function xD(s){return s?s.map(({name:t,value:e})=>({name:t,value:{type:"string",value:e}})):[]}function _D(s){if(s!==void 0)return s.map(({name:t,value:e})=>({name:t,value:e.value}))}function PD(s){return s===void 0?void 0:{name:"Cookie",value:{type:"string",value:s.reduce((e,r,n)=>{n>0&&(e+=";");const a=r.value.type==="base64"?btoa(r.value.value):r.value.value;return e+=`${r.name}=${a}`,e},"")}}}function TD(s){switch(s){case"default":return"Default";case"cancel":return"CancelAuth";case"provideCredentials":return"ProvideCredentials"}}function ID(s){const t={name:s.name,value:{type:"string",value:s.value},domain:s.domain,path:s.path,size:s.size,httpOnly:s.httpOnly,secure:s.secure,sameSite:s.sameSite===void 0?"none":AD(s.sameSite),...s.expires>=0?{expiry:s.expires}:void 0};return t["goog:session"]=s.session,t["goog:priority"]=s.priority,t["goog:sameParty"]=s.sameParty,t["goog:sourceScheme"]=s.sourceScheme,t["goog:sourcePort"]=s.sourcePort,s.partitionKey!==void 0&&(t["goog:partitionKey"]=s.partitionKey),s.partitionKeyOpaque!==void 0&&(t["goog:partitionKeyOpaque"]=s.partitionKeyOpaque),t}function mE(s){return s.type==="base64"?(0,bD.base64ToString)(s.value):s.value}function MD(s,t){const e=mE(s.cookie.value),r={name:s.cookie.name,value:e,domain:s.cookie.domain,path:s.cookie.path??"/",secure:s.cookie.secure??!1,httpOnly:s.cookie.httpOnly??!1,...t.sourceOrigin!==void 0&&{partitionKey:{hasCrossSiteAncestor:!1,topLevelSite:t.sourceOrigin}},...s.cookie.expiry!==void 0&&{expires:s.cookie.expiry},...s.cookie.sameSite!==void 0&&{sameSite:gE(s.cookie.sameSite)}};return s.cookie["goog:url"]!==void 0&&(r.url=s.cookie["goog:url"]),s.cookie["goog:priority"]!==void 0&&(r.priority=s.cookie["goog:priority"]),s.cookie["goog:sameParty"]!==void 0&&(r.sameParty=s.cookie["goog:sameParty"]),s.cookie["goog:sourceScheme"]!==void 0&&(r.sourceScheme=s.cookie["goog:sourceScheme"]),s.cookie["goog:sourcePort"]!==void 0&&(r.sourcePort=s.cookie["goog:sourcePort"]),r}function AD(s){switch(s){case"Strict":return"strict";case"None":return"none";case"Lax":return"lax";default:return"lax"}}function gE(s){switch(s){case"strict":return"Strict";case"lax":return"Lax";case"none":return"None"}throw new vD.InvalidArgumentException(`Unknown 'sameSite' value ${s}`)}function FD(s){return["ftp","file","http","https","ws","wss"].includes(s.replace(/:$/,""))}function DD(s,t){switch(s.type){case"string":{const e=new Yv.URLPattern(s.pattern);return new Yv.URLPattern({protocol:e.protocol,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search}).test(t)}case"pattern":return new Yv.URLPattern(s).test(t)}}function OD(s){let t=0;for(const e of s)t+=atob(e.bytes??"").length;return t}function RD(s){return!s||s<0?0:s}Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.StorageProcessor=void 0;const zg=Re,LD=Bi,wE=tr,ND=Ld,qd=st;class $D{constructor(t,e,r){l(this,Je);l(this,Sn);l(this,Sp);l(this,Pl);f(this,Sp,e),f(this,Sn,t),f(this,Pl,r)}async deleteCookies(t){const e=g(this,Je,_y).call(this,t.partition);let r;try{r=await i(this,Sn).sendCommand("Storage.getCookies",{browserContextId:g(this,Je,Fm).call(this,e)})}catch(a){throw g(this,Je,xy).call(this,a)?new zg.NoSuchUserContextException(a.message):a}const n=r.cookies.filter(a=>{var o;return e.sourceOrigin===void 0||((o=a.partitionKey)==null?void 0:o.topLevelSite)===e.sourceOrigin}).filter(a=>{const o=(0,qd.cdpToBiDiCookie)(a);return g(this,Je,G0).call(this,o,t.filter)}).map(a=>({...a,expires:1}));return await i(this,Sn).sendCommand("Storage.setCookies",{cookies:n,browserContextId:g(this,Je,Fm).call(this,e)}),{partitionKey:e}}async getCookies(t){const e=g(this,Je,_y).call(this,t.partition);let r;try{r=await i(this,Sn).sendCommand("Storage.getCookies",{browserContextId:g(this,Je,Fm).call(this,e)})}catch(a){throw g(this,Je,xy).call(this,a)?new zg.NoSuchUserContextException(a.message):a}return{cookies:r.cookies.filter(a=>{var o;return e.sourceOrigin===void 0||((o=a.partitionKey)==null?void 0:o.topLevelSite)===e.sourceOrigin}).map(a=>(0,qd.cdpToBiDiCookie)(a)).filter(a=>g(this,Je,G0).call(this,a,t.filter)),partitionKey:e}}async setCookie(t){var n;const e=g(this,Je,_y).call(this,t.partition),r=(0,qd.bidiToCdpCookie)(t,e);try{await i(this,Sn).sendCommand("Storage.setCookies",{cookies:[r],browserContextId:g(this,Je,Fm).call(this,e)})}catch(a){throw g(this,Je,xy).call(this,a)?new zg.NoSuchUserContextException(a.message):((n=i(this,Pl))==null||n.call(this,wE.LogType.debugError,a),new zg.UnableToSetCookieException(a.toString()))}return{partitionKey:e}}}Sn=new WeakMap,Sp=new WeakMap,Pl=new WeakMap,Je=new WeakSet,xy=function(t){var e;return(e=t.message)==null?void 0:e.startsWith("Failed to find browser context for id")},Fm=function(t){return t.userContext==="default"?void 0:t.userContext},l1=function(t){const e=t.context;return{userContext:i(this,Sp).getContext(e).userContext}},d1=function(t){var a;const e=new Map;let r=t.sourceOrigin;if(r!==void 0){const o=ND.NetworkProcessor.parseUrlString(r);o.origin==="null"?r=o.origin:r=`${o.protocol}//${o.hostname}`}for(const[o,c]of Object.entries(t))o!==void 0&&c!==void 0&&!["type","sourceOrigin","userContext"].includes(o)&&e.set(o,c);return e.size>0&&((a=i(this,Pl))==null||a.call(this,wE.LogType.debugInfo,`Unsupported partition keys: ${JSON.stringify(Object.fromEntries(e))}`)),{userContext:t.userContext??"default",...r===void 0?{}:{sourceOrigin:r}}},_y=function(t){return t===void 0?{userContext:"default"}:t.type==="context"?g(this,Je,l1).call(this,t):((0,LD.assert)(t.type==="storageKey","Unknown partition type"),g(this,Je,d1).call(this,t))},G0=function(t,e){return e===void 0?!0:(e.domain===void 0||e.domain===t.domain)&&(e.name===void 0||e.name===t.name)&&(e.value===void 0||(0,qd.deserializeByteValue)(e.value)===(0,qd.deserializeByteValue)(t.value))&&(e.path===void 0||e.path===t.path)&&(e.size===void 0||e.size===t.size)&&(e.httpOnly===void 0||e.httpOnly===t.httpOnly)&&(e.secure===void 0||e.secure===t.secure)&&(e.sameSite===void 0||e.sameSite===t.sameSite)&&(e.expiry===void 0||e.expiry===t.expiry)},Wg.StorageProcessor=$D;var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.OutgoingMessage=void 0;const Uw=class Uw{constructor(t,e=null){l(this,Cp);l(this,kp);f(this,Cp,t),f(this,kp,e)}static createFromPromise(t,e){return t.then(r=>r.kind==="success"?{kind:"success",value:new Uw(r.value,e)}:r)}static createResolved(t,e){return Promise.resolve({kind:"success",value:new Uw(t,e)})}get message(){return i(this,Cp)}get channel(){return i(this,kp)}};Cp=new WeakMap,kp=new WeakMap;let Qv=Uw;Mc.OutgoingMessage=Qv,Object.defineProperty(xg,"__esModule",{value:!0}),xg.CommandProcessor=void 0;const Vg=Re,BD=ra,jD=tr,KD=_g,UD=Pg,HD=Tg,qD=Ig,WD=Mg,zD=Ld,VD=Kg,GD=Ug,XD=qg,JD=Wg,Zv=Mc;class YD extends BD.EventEmitter{constructor(e,r,n,a,o,c,u,d=new KD.BidiNoOpParser,h,p){super();l(this,En);l(this,Cn);l(this,Ht);l(this,Eo);l(this,xo);l(this,Xr);l(this,Ep);l(this,Si);l(this,kn);l(this,_o);l(this,pe);l(this,xp);f(this,pe,d),f(this,xp,p),f(this,Cn,new UD.BrowserProcessor(r)),f(this,Ht,new qD.BrowsingContextProcessor(r,a,n)),f(this,Eo,new HD.CdpProcessor(a,o,e,r)),f(this,xo,new WD.InputProcessor(a,o)),f(this,Xr,new zD.NetworkProcessor(a,u)),f(this,Ep,new VD.PermissionsProcessor(r)),f(this,Si,new GD.ScriptProcessor(a,o,c,p)),f(this,kn,new XD.SessionProcessor(n,r,h)),f(this,_o,new JD.StorageProcessor(r,a,p))}async processCommand(e){var r;try{const n=await g(this,En,h1).call(this,e),a={type:"success",id:e.id,result:n};this.emit("response",{message:Zv.OutgoingMessage.createResolved(a,e.channel),event:e.method})}catch(n){if(n instanceof Vg.Exception)this.emit("response",{message:Zv.OutgoingMessage.createResolved(n.toErrorResponse(e.id),e.channel),event:e.method});else{const a=n;(r=i(this,xp))==null||r.call(this,jD.LogType.bidi,a),this.emit("response",{message:Zv.OutgoingMessage.createResolved(new Vg.UnknownErrorException(a.message,a.stack).toErrorResponse(e.id),e.channel),event:e.method})}}}}Cn=new WeakMap,Ht=new WeakMap,Eo=new WeakMap,xo=new WeakMap,Xr=new WeakMap,Ep=new WeakMap,Si=new WeakMap,kn=new WeakMap,_o=new WeakMap,pe=new WeakMap,xp=new WeakMap,En=new WeakSet,h1=async function(e){switch(e.method){case"session.end":break;case"browser.close":return i(this,Cn).close();case"browser.createUserContext":return await i(this,Cn).createUserContext(e.params);case"browser.getUserContexts":return await i(this,Cn).getUserContexts();case"browser.removeUserContext":return await i(this,Cn).removeUserContext(i(this,pe).parseRemoveUserContextParams(e.params));case"browsingContext.activate":return await i(this,Ht).activate(i(this,pe).parseActivateParams(e.params));case"browsingContext.captureScreenshot":return await i(this,Ht).captureScreenshot(i(this,pe).parseCaptureScreenshotParams(e.params));case"browsingContext.close":return await i(this,Ht).close(i(this,pe).parseCloseParams(e.params));case"browsingContext.create":return await i(this,Ht).create(i(this,pe).parseCreateParams(e.params));case"browsingContext.getTree":return i(this,Ht).getTree(i(this,pe).parseGetTreeParams(e.params));case"browsingContext.handleUserPrompt":return await i(this,Ht).handleUserPrompt(i(this,pe).parseHandleUserPromptParams(e.params));case"browsingContext.locateNodes":return await i(this,Ht).locateNodes(i(this,pe).parseLocateNodesParams(e.params));case"browsingContext.navigate":return await i(this,Ht).navigate(i(this,pe).parseNavigateParams(e.params));case"browsingContext.print":return await i(this,Ht).print(i(this,pe).parsePrintParams(e.params));case"browsingContext.reload":return await i(this,Ht).reload(i(this,pe).parseReloadParams(e.params));case"browsingContext.setViewport":return await i(this,Ht).setViewport(i(this,pe).parseSetViewportParams(e.params));case"browsingContext.traverseHistory":return await i(this,Ht).traverseHistory(i(this,pe).parseTraverseHistoryParams(e.params));case"cdp.getSession":return i(this,Eo).getSession(i(this,pe).parseGetSessionParams(e.params));case"cdp.resolveRealm":return i(this,Eo).resolveRealm(i(this,pe).parseResolveRealmParams(e.params));case"cdp.sendCommand":return await i(this,Eo).sendCommand(i(this,pe).parseSendCommandParams(e.params));case"input.performActions":return await i(this,xo).performActions(i(this,pe).parsePerformActionsParams(e.params));case"input.releaseActions":return await i(this,xo).releaseActions(i(this,pe).parseReleaseActionsParams(e.params));case"input.setFiles":return await i(this,xo).setFiles(i(this,pe).parseSetFilesParams(e.params));case"network.addIntercept":return await i(this,Xr).addIntercept(i(this,pe).parseAddInterceptParams(e.params));case"network.continueRequest":return await i(this,Xr).continueRequest(i(this,pe).parseContinueRequestParams(e.params));case"network.continueResponse":return await i(this,Xr).continueResponse(i(this,pe).parseContinueResponseParams(e.params));case"network.continueWithAuth":return await i(this,Xr).continueWithAuth(i(this,pe).parseContinueWithAuthParams(e.params));case"network.failRequest":return await i(this,Xr).failRequest(i(this,pe).parseFailRequestParams(e.params));case"network.provideResponse":return await i(this,Xr).provideResponse(i(this,pe).parseProvideResponseParams(e.params));case"network.removeIntercept":return await i(this,Xr).removeIntercept(i(this,pe).parseRemoveInterceptParams(e.params));case"network.setCacheBehavior":throw new Vg.UnknownErrorException("Method 'network.setCacheBehavior' is not implemented.");case"permissions.setPermission":return await i(this,Ep).setPermissions(i(this,pe).parseSetPermissionsParams(e.params));case"script.addPreloadScript":return await i(this,Si).addPreloadScript(i(this,pe).parseAddPreloadScriptParams(e.params));case"script.callFunction":return await i(this,Si).callFunction(i(this,pe).parseCallFunctionParams(g(this,En,Py).call(this,e.params)));case"script.disown":return await i(this,Si).disown(i(this,pe).parseDisownParams(g(this,En,Py).call(this,e.params)));case"script.evaluate":return await i(this,Si).evaluate(i(this,pe).parseEvaluateParams(g(this,En,Py).call(this,e.params)));case"script.getRealms":return i(this,Si).getRealms(i(this,pe).parseGetRealmsParams(e.params));case"script.removePreloadScript":return await i(this,Si).removePreloadScript(i(this,pe).parseRemovePreloadScriptParams(e.params));case"session.new":return await i(this,kn).new(e.params);case"session.status":return i(this,kn).status();case"session.subscribe":return await i(this,kn).subscribe(i(this,pe).parseSubscribeParams(e.params),e.channel);case"session.unsubscribe":return await i(this,kn).unsubscribe(i(this,pe).parseSubscribeParams(e.params),e.channel);case"storage.deleteCookies":return await i(this,_o).deleteCookies(i(this,pe).parseDeleteCookiesParams(e.params));case"storage.getCookies":return await i(this,_o).getCookies(i(this,pe).parseGetCookiesParams(e.params));case"storage.setCookie":return await i(this,_o).setCookie(i(this,pe).parseSetCookieParams(e.params))}throw new Vg.UnknownCommandException(`Unknown command '${e.method}'.`)},Py=function(e){return typeof e=="object"&&e&&"target"in e&&typeof e.target=="object"&&e.target&&"context"in e.target&&delete e.target.realm,e},xg.CommandProcessor=YD;var Gg={},Ac={},Fc={};Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.Deferred=void 0,bx=Symbol.toStringTag;class QD{constructor(){l(this,cs,!1);l(this,xn);l(this,_p);l(this,Pp);l(this,Tp);T(this,bx,"Promise");f(this,xn,new Promise((t,e)=>{f(this,Pp,t),f(this,Tp,e)})),i(this,xn).catch(t=>{})}get isFinished(){return i(this,cs)}get result(){if(!i(this,cs))throw new Error("Deferred is not finished yet");return i(this,_p)}then(t,e){return i(this,xn).then(t,e)}catch(t){return i(this,xn).catch(t)}resolve(t){f(this,_p,t),i(this,cs)||(f(this,cs,!0),i(this,Pp).call(this,t))}reject(t){i(this,cs)||(f(this,cs,!0),i(this,Tp).call(this,t))}finally(t){return i(this,xn).finally(t)}}cs=new WeakMap,xn=new WeakMap,_p=new WeakMap,Pp=new WeakMap,Tp=new WeakMap,Fc.Deferred=QD;var eb={};Object.defineProperty(eb,"__esModule",{value:!0}),eb.inchesFromCm=ZD;function ZD(s){return s/2.54}var Wd={},zd={};Object.defineProperty(zd,"__esModule",{value:!0}),zd.Realm=void 0;const Xg=Re,eO=tr,tO=sa,rO=Bd;let iO=(Yr=class{constructor(t,e,r,n,a,o,c){l(this,ht);l(this,Ip);l(this,Po);l(this,Mp);l(this,Tl);l(this,Ap);l(this,Fp);l(this,_n);f(this,Ip,t),f(this,Po,e),f(this,Mp,r),f(this,Tl,n),f(this,Ap,a),f(this,Fp,o),f(this,_n,c),i(this,_n).addRealm(this)}cdpToBidiValue(t,e){const r=this.serializeForBiDi(t.result.deepSerializedValue,new Map);if(t.result.objectId){const n=t.result.objectId;e==="root"?(r.handle=n,i(this,_n).knownHandlesToRealmMap.set(n,this.realmId)):g(this,ht,eS).call(this,n).catch(a=>{var o;return(o=i(this,Tl))==null?void 0:o.call(this,eO.LogType.debugError,a)})}return r}serializeForBiDi(t,e){if(Object.hasOwn(t,"weakLocalObjectReference")){const n=t.weakLocalObjectReference;e.has(n)||e.set(n,(0,tO.uuidv4)()),t.internalId=e.get(n),delete t.weakLocalObjectReference}if(t.type==="platformobject")return{type:"object"};const r=t.value;if(r===void 0)return t;if(["array","set","htmlcollection","nodelist"].includes(t.type))for(const n in r)r[n]=this.serializeForBiDi(r[n],e);if(["object","map"].includes(t.type))for(const n in r)r[n]=[this.serializeForBiDi(r[n][0],e),this.serializeForBiDi(r[n][1],e)];return t}get realmId(){return i(this,Fp)}get executionContextId(){return i(this,Mp)}get origin(){return i(this,Ap)}get source(){return{realm:this.realmId}}get cdpClient(){return i(this,Ip)}get baseInfo(){return{realm:this.realmId,origin:this.origin}}async evaluate(t,e,r="none",n={},a=!1,o=!1){var u;const c=await this.cdpClient.sendCommand("Runtime.evaluate",{contextId:this.executionContextId,expression:t,awaitPromise:e,serializationOptions:g(u=Yr,Jr,Z0).call(u,"deep",n),userGesture:a,includeCommandLineAPI:o});return c.exceptionDetails?await g(this,ht,Q0).call(this,c.exceptionDetails,0,r):{realm:this.realmId,result:this.cdpToBidiValue(c,r),type:"success"}}initialize(){g(this,ht,X0).call(this,{type:"event",method:Xg.ChromiumBidi.Script.EventNames.RealmCreated,params:this.realmInfo})}async serializeCdpObject(t,e){var a;const r=g(a=Yr,Jr,f1).call(a,t),n=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(o=>o),awaitPromise:!1,arguments:[r],serializationOptions:{serialization:"deep"},executionContextId:this.executionContextId});return this.cdpToBidiValue(n,e)}async stringifyObject(t){const{result:e}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(r=>String(r)),awaitPromise:!1,arguments:[t],returnByValue:!0,executionContextId:this.executionContextId});return e.value}async callFunction(t,e,r={type:"undefined"},n=[],a="none",o={},c=!1){var p;const u=`(...args) => {
      function callFunction(f, args) {
        const deserializedThis = args.shift();
        const deserializedArgs = args;
        return f.apply(deserializedThis, deserializedArgs);
      }
      return callFunction((
        ${t}
      ), args);
    }`,d=[await this.deserializeForCdp(r),...await Promise.all(n.map(async m=>await this.deserializeForCdp(m)))];let h;try{h=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:u,awaitPromise:e,arguments:d,serializationOptions:g(p=Yr,Jr,Z0).call(p,"deep",o),executionContextId:this.executionContextId,userGesture:c})}catch(m){throw m.code===-32e3&&["Could not find object with given id","Argument should belong to the same JavaScript world as target object","Invalid remote object id"].includes(m.message)?new Xg.NoSuchHandleException("Handle was not found."):m}return h.exceptionDetails?await g(this,ht,Q0).call(this,h.exceptionDetails,1,a):{type:"success",result:this.cdpToBidiValue(h,a),realm:this.realmId}}async deserializeForCdp(t){if("handle"in t&&t.handle)return{objectId:t.handle};if("handle"in t||"sharedId"in t)throw new Xg.NoSuchHandleException("Handle was not found.");switch(t.type){case"undefined":return{unserializableValue:"undefined"};case"null":return{unserializableValue:"null"};case"string":return{value:t.value};case"number":return t.value==="NaN"?{unserializableValue:"NaN"}:t.value==="-0"?{unserializableValue:"-0"}:t.value==="Infinity"?{unserializableValue:"Infinity"}:t.value==="-Infinity"?{unserializableValue:"-Infinity"}:{value:t.value};case"boolean":return{value:!!t.value};case"bigint":return{unserializableValue:`BigInt(${JSON.stringify(t.value)})`};case"date":return{unserializableValue:`new Date(Date.parse(${JSON.stringify(t.value)}))`};case"regexp":return{unserializableValue:`new RegExp(${JSON.stringify(t.value.pattern)}, ${JSON.stringify(t.value.flags)})`};case"map":{const e=await g(this,ht,J0).call(this,t.value),{result:r}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((...n)=>{const a=new Map;for(let o=0;o<n.length;o+=2)a.set(n[o],n[o+1]);return a}),awaitPromise:!1,arguments:e,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:r.objectId}}case"object":{const e=await g(this,ht,J0).call(this,t.value),{result:r}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((...n)=>{const a={};for(let o=0;o<n.length;o+=2){const c=n[o];a[c]=n[o+1]}return a}),awaitPromise:!1,arguments:e,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:r.objectId}}case"array":{const e=await g(this,ht,Y0).call(this,t.value),{result:r}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((...n)=>n),awaitPromise:!1,arguments:e,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:r.objectId}}case"set":{const e=await g(this,ht,Y0).call(this,t.value),{result:r}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((...n)=>new Set(n)),awaitPromise:!1,arguments:e,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:r.objectId}}case"channel":return{objectId:await new rO.ChannelProxy(t.value,i(this,Tl)).init(this,i(this,Po))}}throw new Error(`Value ${JSON.stringify(t)} is not deserializable.`)}async disown(t){i(this,_n).knownHandlesToRealmMap.get(t)===this.realmId&&(await g(this,ht,eS).call(this,t),i(this,_n).knownHandlesToRealmMap.delete(t))}dispose(){g(this,ht,X0).call(this,{type:"event",method:Xg.ChromiumBidi.Script.EventNames.RealmDestroyed,params:{realm:this.realmId}})}},Ip=new WeakMap,Po=new WeakMap,Mp=new WeakMap,Tl=new WeakMap,Ap=new WeakMap,Fp=new WeakMap,_n=new WeakMap,ht=new WeakSet,X0=function(t){if(this.associatedBrowsingContexts.length===0)i(this,Po).registerEvent(t,null);else for(const e of this.associatedBrowsingContexts)i(this,Po).registerEvent(t,e.id)},Jr=new WeakSet,f1=function(t){return t.objectId!==void 0?{objectId:t.objectId}:t.unserializableValue!==void 0?{unserializableValue:t.unserializableValue}:{value:t.value}},J0=async function(t){return(await Promise.all(t.map(async([r,n])=>{let a;typeof r=="string"?a={value:r}:a=await this.deserializeForCdp(r);const o=await this.deserializeForCdp(n);return[a,o]}))).flat()},Y0=async function(t){return await Promise.all(t.map(e=>this.deserializeForCdp(e)))},p1=async function(t,e,r){var o;const n=((o=t.stackTrace)==null?void 0:o.callFrames.map(c=>({url:c.url,functionName:c.functionName,lineNumber:c.lineNumber-e,columnNumber:c.columnNumber})))??[],a=t.exception;return{exception:await this.serializeCdpObject(a,r),columnNumber:t.columnNumber,lineNumber:t.lineNumber-e,stackTrace:{callFrames:n},text:await this.stringifyObject(a)||t.text}},Q0=async function(t,e,r){return{exceptionDetails:await g(this,ht,p1).call(this,t,e,r),realm:this.realmId,type:"exception"}},Z0=function(t,e){var r,n;return{serialization:t,additionalParameters:g(r=Yr,Jr,m1).call(r,e),...g(n=Yr,Jr,g1).call(n,e)}},m1=function(t){const e={};return t.maxDomDepth!==void 0&&(e.maxNodeDepth=t.maxDomDepth===null?1e3:t.maxDomDepth),t.includeShadowTree!==void 0&&(e.includeShadowTree=t.includeShadowTree),e},g1=function(t){return t.maxObjectDepth===void 0||t.maxObjectDepth===null?{}:{maxDepth:t.maxObjectDepth}},eS=async function(t){try{await this.cdpClient.sendCommand("Runtime.releaseObject",{objectId:t})}catch(e){if(!(e.code===-32e3&&e.message==="Invalid remote object id"))throw e}},l(Yr,Jr),Yr);zd.Realm=iO;var Jg={};Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.getSharedId=nO,Jg.parseSharedId=oO;const sO="_element_";function nO(s,t,e){return`f.${s}.d.${t}.e.${e}`}function aO(s){const t=s.match(new RegExp(`(.*)${sO}(.*)`));if(!t)return null;const e=t[1],r=t[2];if(e===void 0||r===void 0)return null;const n=parseInt(r??"");return isNaN(n)?null:{documentId:e,backendNodeId:n}}function oO(s){const t=aO(s);if(t!==null)return{...t,frameId:void 0};const e=s.match(/f\.(.*)\.d\.(.*)\.e\.([0-9]*)/);if(!e)return null;const r=e[1],n=e[2],a=e[3];if(r===void 0||n===void 0||a===void 0)return null;const o=parseInt(a??"");return isNaN(o)?null:{frameId:r,documentId:n,backendNodeId:o}}Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.WindowRealm=void 0;const Yg=Re,cO=zd,yE=Jg;let uO=(Sx=class extends cO.Realm{constructor(e,r,n,a,o,c,u,d,h,p){super(n,a,o,c,u,d,h);l(this,Hw);l(this,Pn);l(this,Tn);T(this,"sandbox");f(this,Pn,e),f(this,Tn,r),this.sandbox=p,this.initialize()}get browsingContext(){return i(this,Tn).getContext(i(this,Pn))}get associatedBrowsingContexts(){return[this.browsingContext]}get realmType(){return"window"}get realmInfo(){return{...this.baseInfo,type:this.realmType,context:i(this,Pn),sandbox:this.sandbox}}get source(){return{realm:this.realmId,context:this.browsingContext.id}}serializeForBiDi(e,r){const n=e.value;if(e.type==="node"&&n!==void 0){if(Object.hasOwn(n,"backendNodeId")){let a=this.browsingContext.navigableId??"UNKNOWN";Object.hasOwn(n,"loaderId")&&(a=n.loaderId,delete n.loaderId),e.sharedId=(0,yE.getSharedId)(g(this,Hw,w1).call(this,a),a,n.backendNodeId),delete n.backendNodeId}if(Object.hasOwn(n,"children"))for(const a in n.children)n.children[a]=this.serializeForBiDi(n.children[a],r);Object.hasOwn(n,"shadowRoot")&&n.shadowRoot!==null&&(n.shadowRoot=this.serializeForBiDi(n.shadowRoot,r)),n.namespaceURI===""&&(n.namespaceURI=null)}return super.serializeForBiDi(e,r)}async deserializeForCdp(e){if("sharedId"in e&&e.sharedId){const r=(0,yE.parseSharedId)(e.sharedId);if(r===null)throw new Yg.NoSuchNodeException(`SharedId "${e.sharedId}" was not found.`);const{documentId:n,backendNodeId:a}=r;if(this.browsingContext.navigableId!==n)throw new Yg.NoSuchNodeException(`SharedId "${e.sharedId}" belongs to different document. Current document is ${this.browsingContext.navigableId}.`);try{const{object:o}=await this.cdpClient.sendCommand("DOM.resolveNode",{backendNodeId:a,executionContextId:this.executionContextId});return{objectId:o.objectId}}catch(o){throw o.code===-32e3&&o.message==="No node with given id found"?new Yg.NoSuchNodeException(`SharedId "${e.sharedId}" was not found.`):new Yg.UnknownErrorException(o.message,o.stack)}}return await super.deserializeForCdp(e)}async evaluate(e,r,n,a,o,c){return await i(this,Tn).getContext(i(this,Pn)).targetUnblockedOrThrow(),await super.evaluate(e,r,n,a,o,c)}async callFunction(e,r,n,a,o,c,u){return await i(this,Tn).getContext(i(this,Pn)).targetUnblockedOrThrow(),await super.callFunction(e,r,n,a,o,c,u)}},Pn=new WeakMap,Tn=new WeakMap,Hw=new WeakSet,w1=function(e){const r=i(this,Tn).getAllContexts().find(n=>n.navigableId===e);return(r==null?void 0:r.id)??"UNKNOWN"},Sx);Wd.WindowRealm=uO,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.BrowsingContextImpl=void 0,Ac.serializeOrigin=bE;const Se=Re,Vd=Bi,Ki=Fc,Qg=tr,Dc=eb,vE=sa,lO=Wd,cr=class cr{constructor(t,e,r,n,a,o,c,u,d,h,p){l(this,ze);l(this,Il);T(this,"userContext");l(this,us,null);l(this,Ml,new Set);l(this,In);l(this,Tt,{DOMContentLoaded:new Ki.Deferred,load:new Ki.Deferred});l(this,Mn,{withinDocument:new Ki.Deferred});l(this,Pr);l(this,or);l(this,Ci);l(this,ki);l(this,we);l(this,Qt,new Ki.Deferred);l(this,Tr);l(this,To,{width:0,height:0});l(this,ls);l(this,Ir,(0,vE.uuidv4)());l(this,Dp);l(this,Io);l(this,Mr);f(this,we,n),f(this,Il,t),f(this,us,e),this.userContext=r,f(this,or,a),f(this,In,o),f(this,Ci,c),f(this,Mr,h),f(this,Tr,p),f(this,Pr,u),f(this,Dp,d)}static create(t,e,r,n,a,o,c,u,d,h,p){var w;const m=new cr(t,e,r,n,a,o,c,u,d,h,p);return g(w=m,ze,rS).call(w),o.addContext(m),m.isTopLevelContext()||m.parent.addChild(m.id),a.registerPromiseEvent(m.targetUnblockedOrThrow().then(()=>({kind:"success",value:{type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,params:m.serializeToBidiValue()}}),b=>({kind:"error",error:b})),m.id,Se.ChromiumBidi.BrowsingContext.EventNames.ContextCreated),m}static getTimestamp(){return new Date().getTime()}get navigableId(){return i(this,ki)}get virtualNavigationId(){return i(this,Ir)}dispose(){g(this,ze,tS).call(this),i(this,Ci).deleteRealms({browsingContextId:this.id}),this.isTopLevelContext()||i(this.parent,Ml).delete(this.id),g(this,ze,b1).call(this),i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.ContextDestroyed,params:this.serializeToBidiValue()},this.id),i(this,In).deleteContextById(this.id)}get id(){return i(this,Il)}get parentId(){return i(this,us)}set parentId(t){var e;if(i(this,us)!==null){(e=i(this,Tr))==null||e.call(this,Qg.LogType.debugError,"Parent context already set");return}f(this,us,t),this.isTopLevelContext()||this.parent.addChild(this.id)}get parent(){return this.parentId===null?null:i(this,In).getContext(this.parentId)}get directChildren(){return[...i(this,Ml)].map(t=>i(this,In).getContext(t))}get allChildren(){const t=this.directChildren;return t.concat(...t.map(e=>e.allChildren))}isTopLevelContext(){return i(this,us)===null}get top(){let t=this,e=t.parent;for(;e;)t=e,e=t.parent;return t}addChild(t){i(this,Ml).add(t)}get cdpTarget(){return i(this,we)}updateCdpTarget(t){f(this,we,t),g(this,ze,rS).call(this)}get url(){return i(this,Pr)}async lifecycleLoaded(){await i(this,Tt).load}async targetUnblockedOrThrow(){const t=await i(this,we).unblocked;if(t.kind==="error")throw t.error}async getOrCreateSandbox(t){if(t===void 0||t==="")return await i(this,Qt);let e=i(this,Ci).findRealms({browsingContextId:this.id,sandbox:t});return e.length===0&&(await i(this,we).cdpClient.sendCommand("Page.createIsolatedWorld",{frameId:this.id,worldName:t}),e=i(this,Ci).findRealms({browsingContextId:this.id,sandbox:t}),(0,Vd.assert)(e.length!==0)),e[0]}serializeToBidiValue(t=0,e=!0){return{context:i(this,Il),url:this.url,userContext:this.userContext,originalOpener:i(this,Dp)??null,children:t>0?this.directChildren.map(r=>r.serializeToBidiValue(t-1,!1)):null,...e?{parent:i(this,us)}:{}}}onTargetInfoChanged(t){f(this,Pr,t.targetInfo.url)}async navigate(t,e){try{new URL(t)}catch{throw new Se.InvalidArgumentException(`Invalid URL: ${t}`)}await this.targetUnblockedOrThrow(),f(this,ls,t);const r=await i(this,we).cdpClient.sendCommand("Page.navigate",{url:t,frameId:this.id});if(r.errorText)throw f(this,ls,void 0),i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.NavigationFailed,params:{context:this.id,navigation:i(this,Ir),timestamp:cr.getTimestamp(),url:t}},this.id),new Se.UnknownErrorException(r.errorText);switch(g(this,ze,iS).call(this,r.loaderId),e){case"none":break;case"interactive":r.loaderId===void 0?await i(this,Mn).withinDocument:await i(this,Tt).DOMContentLoaded;break;case"complete":r.loaderId===void 0?await i(this,Mn).withinDocument:await i(this,Tt).load;break}return{navigation:i(this,Ir),url:e==="none"?t:i(this,Pr)}}async reload(t,e){switch(await this.targetUnblockedOrThrow(),g(this,ze,sS).call(this),await i(this,we).cdpClient.sendCommand("Page.reload",{ignoreCache:t}),e){case"none":break;case"interactive":await i(this,Tt).DOMContentLoaded;break;case"complete":await i(this,Tt).load;break}return{navigation:i(this,Ir),url:this.url}}async setViewport(t,e){if(t===null&&e===null)await i(this,we).cdpClient.sendCommand("Emulation.clearDeviceMetricsOverride");else try{let r;t===void 0?r=i(this,To):t===null?r={width:0,height:0}:r=t,f(this,To,r),await i(this,we).cdpClient.sendCommand("Emulation.setDeviceMetricsOverride",{width:i(this,To).width,height:i(this,To).height,deviceScaleFactor:e||0,mobile:!1,dontSetVisibleSize:!0})}catch(r){throw r.message.startsWith("Width and height values must be positive")?new Se.UnsupportedOperationException("Provided viewport dimensions are not supported"):r}}async handleUserPrompt(t,e){await i(this,we).cdpClient.sendCommand("Page.handleJavaScriptDialog",{accept:t??!0,promptText:e})}async activate(){await i(this,we).cdpClient.sendCommand("Page.bringToFront")}async captureScreenshot(t){if(!this.isTopLevelContext())throw new Se.UnsupportedOperationException(`Non-top-level 'context' (${t.context}) is currently not supported`);const e=dO(t);await i(this,we).cdpClient.sendCommand("Page.bringToFront");let r=!1,n;switch(t.origin??(t.origin="viewport"),t.origin){case"document":{n=String(()=>{const d=document.documentElement;return{x:0,y:0,width:d.scrollWidth,height:d.scrollHeight}}),r=!0;break}case"viewport":{n=String(()=>{const d=window.visualViewport;return{x:d.pageLeft,y:d.pageTop,width:d.width,height:d.height}});break}}const o=await(await this.getOrCreateSandbox(void 0)).callFunction(n,!1);(0,Vd.assert)(o.type==="success");const c=SE(o.result);(0,Vd.assert)(c);let u=c;if(t.clip){const d=t.clip;t.origin==="viewport"&&d.type==="box"&&(d.x+=c.x,d.y+=c.y),u=hO(await g(this,ze,S1).call(this,d),c)}if(u.width===0||u.height===0)throw new Se.UnableToCaptureScreenException(`Unable to capture screenshot with zero dimensions: width=${u.width}, height=${u.height}`);return await i(this,we).cdpClient.sendCommand("Page.captureScreenshot",{clip:{...u,scale:1},...e,captureBeyondViewport:r})}async print(t){var r,n,a,o,c,u;const e={};if(t.background!==void 0&&(e.printBackground=t.background),((r=t.margin)==null?void 0:r.bottom)!==void 0&&(e.marginBottom=(0,Dc.inchesFromCm)(t.margin.bottom)),((n=t.margin)==null?void 0:n.left)!==void 0&&(e.marginLeft=(0,Dc.inchesFromCm)(t.margin.left)),((a=t.margin)==null?void 0:a.right)!==void 0&&(e.marginRight=(0,Dc.inchesFromCm)(t.margin.right)),((o=t.margin)==null?void 0:o.top)!==void 0&&(e.marginTop=(0,Dc.inchesFromCm)(t.margin.top)),t.orientation!==void 0&&(e.landscape=t.orientation==="landscape"),((c=t.page)==null?void 0:c.height)!==void 0&&(e.paperHeight=(0,Dc.inchesFromCm)(t.page.height)),((u=t.page)==null?void 0:u.width)!==void 0&&(e.paperWidth=(0,Dc.inchesFromCm)(t.page.width)),t.pageRanges!==void 0){for(const d of t.pageRanges){if(typeof d=="number")continue;const h=d.split("-");if(h.length<1||h.length>2)throw new Se.InvalidArgumentException(`Invalid page range: ${d} is not a valid integer range.`);if(h.length===1){rb(h[0]??"");continue}let p,m;const[w="",b=""]=h;if(w===""?p=1:p=rb(w),b===""?m=Number.MAX_SAFE_INTEGER:m=rb(b),p>m)throw new Se.InvalidArgumentException(`Invalid page range: ${w} > ${b}`)}e.pageRanges=t.pageRanges.join(",")}t.scale!==void 0&&(e.scale=t.scale),t.shrinkToFit!==void 0&&(e.preferCSSPageSize=!t.shrinkToFit);try{return{data:(await i(this,we).cdpClient.sendCommand("Page.printToPDF",e)).data}}catch(d){throw d.message==="invalid print parameters: content area is empty"?new Se.UnsupportedOperationException(d.message):d}}async close(){await i(this,we).cdpClient.sendCommand("Page.close")}async traverseHistory(t){if(t===0)return;const e=await i(this,we).cdpClient.sendCommand("Page.getNavigationHistory"),r=e.entries[e.currentIndex+t];if(!r)throw new Se.NoSuchHistoryEntryException(`No history entry at delta ${t}`);await i(this,we).cdpClient.sendCommand("Page.navigateToHistoryEntry",{entryId:r.id})}async toggleModulesIfNeeded(){await i(this,we).toggleNetworkIfNeeded()}async locateNodes(t){return await g(this,ze,k1).call(this,await i(this,Qt),t.locator,t.startNodes??[],t.maxNodeCount,t.serializationOptions)}};Il=new WeakMap,us=new WeakMap,Ml=new WeakMap,In=new WeakMap,Tt=new WeakMap,Mn=new WeakMap,Pr=new WeakMap,or=new WeakMap,Ci=new WeakMap,ki=new WeakMap,we=new WeakMap,Qt=new WeakMap,Tr=new WeakMap,To=new WeakMap,ls=new WeakMap,Ir=new WeakMap,Dp=new WeakMap,Io=new WeakMap,Mr=new WeakMap,ze=new WeakSet,tS=function(){this.directChildren.map(t=>t.dispose())},rS=function(){i(this,we).cdpClient.on("Page.frameNavigated",t=>{this.id===t.frame.id&&(f(this,Pr,t.frame.url+(t.frame.urlFragment??"")),f(this,ls,void 0),g(this,ze,tS).call(this))}),i(this,we).cdpClient.on("Page.navigatedWithinDocument",t=>{if(this.id!==t.frameId)return;f(this,ls,void 0);const e=cr.getTimestamp();f(this,Pr,t.url),i(this,Mn).withinDocument.resolve(),i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.FragmentNavigated,params:{context:this.id,navigation:i(this,Ir),timestamp:e,url:i(this,Pr)}},this.id)}),i(this,we).cdpClient.on("Page.frameStartedLoading",t=>{this.id===t.frameId&&(f(this,Ir,(0,vE.uuidv4)()),i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.NavigationStarted,params:{context:this.id,navigation:i(this,Ir),timestamp:cr.getTimestamp(),url:i(this,ls)??"UNKNOWN"}},this.id))}),i(this,we).cdpClient.on("Page.frameScheduledNavigation",t=>{this.id===t.frameId&&f(this,ls,t.url)}),i(this,we).cdpClient.on("Page.lifecycleEvent",t=>{if(this.id!==t.frameId)return;if(t.name==="init"){g(this,ze,iS).call(this,t.loaderId);return}if(t.name==="commit"){f(this,ki,t.loaderId);return}if(i(this,ki)||f(this,ki,t.loaderId),t.loaderId!==i(this,ki))return;const e=cr.getTimestamp();switch(t.name){case"DOMContentLoaded":i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.DomContentLoaded,params:{context:this.id,navigation:i(this,Ir),timestamp:e,url:i(this,Pr)}},this.id),i(this,Tt).DOMContentLoaded.resolve();break;case"load":i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.Load,params:{context:this.id,navigation:i(this,Ir),timestamp:e,url:i(this,Pr)}},this.id),i(this,Tt).load.resolve();break}}),i(this,we).cdpClient.on("Runtime.executionContextCreated",t=>{var d;const{auxData:e,name:r,uniqueId:n,id:a}=t.context;if(!e||e.frameId!==this.id)return;let o,c;switch(e.type){case"isolated":c=r,i(this,Qt).isFinished||(d=i(this,Tr))==null||d.call(this,Qg.LogType.debugError,"Unexpectedly, isolated realm created before the default one"),o=i(this,Qt).isFinished?i(this,Qt).result.origin:"";break;case"default":o=bE(t.context.origin);break;default:return}const u=new lO.WindowRealm(this.id,i(this,In),i(this,we).cdpClient,i(this,or),a,i(this,Tr),o,n,i(this,Ci),c);e.isDefault&&(i(this,Qt).resolve(u),Promise.all(i(this,we).getChannels().map(h=>h.startListenerFromWindow(u,i(this,or)))))}),i(this,we).cdpClient.on("Runtime.executionContextDestroyed",t=>{i(this,Qt).isFinished&&i(this,Qt).result.executionContextId===t.executionContextId&&f(this,Qt,new Ki.Deferred),i(this,Ci).deleteRealms({cdpSessionId:i(this,we).cdpSessionId,executionContextId:t.executionContextId})}),i(this,we).cdpClient.on("Runtime.executionContextsCleared",()=>{i(this,Qt).isFinished||i(this,Qt).reject(new Se.UnknownErrorException("execution contexts cleared")),f(this,Qt,new Ki.Deferred),i(this,Ci).deleteRealms({cdpSessionId:i(this,we).cdpSessionId})}),i(this,we).cdpClient.on("Page.javascriptDialogClosed",t=>{var r;const e=t.result;i(this,Io)===void 0&&((r=i(this,Tr))==null||r.call(this,Qg.LogType.debugError,"Unexpectedly no opening prompt event before closing one")),i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.UserPromptClosed,params:{context:this.id,accepted:e,type:i(this,Io)??"UNKNOWN",userText:e&&t.userInput?t.userInput:void 0}},this.id),f(this,Io,void 0)}),i(this,we).cdpClient.on("Page.javascriptDialogOpening",t=>{var n;const e=g(n=cr,qw,y1).call(n,t.type);f(this,Io,e);const r=g(this,ze,v1).call(this,e);switch(i(this,or).registerEvent({type:"event",method:Se.ChromiumBidi.BrowsingContext.EventNames.UserPromptOpened,params:{context:this.id,handler:r,type:e,message:t.message,...t.type==="prompt"?{defaultValue:t.defaultPrompt}:{}}},this.id),r){case"accept":this.handleUserPrompt(!0);break;case"dismiss":this.handleUserPrompt(!1);break}})},qw=new WeakSet,y1=function(t){switch(t){case"alert":return"alert";case"beforeunload":return"beforeunload";case"confirm":return"confirm";case"prompt":return"prompt"}},v1=function(t){var r,n,a,o,c,u,d,h;const e="dismiss";switch(t){case"alert":return((r=i(this,Mr))==null?void 0:r.alert)??((n=i(this,Mr))==null?void 0:n.default)??e;case"beforeunload":return((a=i(this,Mr))==null?void 0:a.beforeUnload)??((o=i(this,Mr))==null?void 0:o.default)??"accept";case"confirm":return((c=i(this,Mr))==null?void 0:c.confirm)??((u=i(this,Mr))==null?void 0:u.default)??e;case"prompt":return((d=i(this,Mr))==null?void 0:d.prompt)??((h=i(this,Mr))==null?void 0:h.default)??e}},iS=function(t){var e;if(t===void 0||i(this,ki)===t){i(this,Mn).withinDocument.isFinished?i(this,Mn).withinDocument=new Ki.Deferred:(e=i(this,Tr))==null||e.call(this,cr.LOGGER_PREFIX,"Document changed (navigatedWithinDocument)");return}g(this,ze,sS).call(this),f(this,ki,t)},sS=function(){var t,e;i(this,Tt).DOMContentLoaded.isFinished?i(this,Tt).DOMContentLoaded=new Ki.Deferred:(t=i(this,Tr))==null||t.call(this,cr.LOGGER_PREFIX,"Document changed (DOMContentLoaded)"),i(this,Tt).load.isFinished?i(this,Tt).load=new Ki.Deferred:(e=i(this,Tr))==null||e.call(this,cr.LOGGER_PREFIX,"Document changed (load)")},b1=function(){i(this,Tt).DOMContentLoaded.isFinished||i(this,Tt).DOMContentLoaded.reject(new Se.UnknownErrorException("navigation canceled")),i(this,Tt).load.isFinished||i(this,Tt).load.reject(new Se.UnknownErrorException("navigation canceled"))},S1=async function(t){switch(t.type){case"box":return{x:t.x,y:t.y,width:t.width,height:t.height};case"element":{const e=await this.getOrCreateSandbox(void 0),r=await e.callFunction(String(n=>n instanceof Element),!1,{type:"undefined"},[t.element]);if(r.type==="exception")throw new Se.NoSuchElementException(`Element '${t.element.sharedId}' was not found`);if((0,Vd.assert)(r.result.type==="boolean"),!r.result.value)throw new Se.NoSuchElementException(`Node '${t.element.sharedId}' is not an Element`);{const n=await e.callFunction(String(o=>{const c=o.getBoundingClientRect();return{x:c.x,y:c.y,height:c.height,width:c.width}}),!1,{type:"undefined"},[t.element]);(0,Vd.assert)(n.type==="success");const a=SE(n.result);if(!a)throw new Se.UnableToCaptureScreenException(`Could not get bounding box for Element '${t.element.sharedId}'`);return a}}}},C1=async function(t,e,r,n){switch(e.type){case"css":return{functionDeclaration:String((a,o,...c)=>{const u=h=>{if(!(h instanceof HTMLElement||h instanceof Document||h instanceof DocumentFragment))throw new Error("startNodes in css selector should be HTMLElement, Document or DocumentFragment");return[...h.querySelectorAll(a)]};c=c.length>0?c:[document.body];const d=c.map(h=>u(h)).flat(1);return o===0?d:d.slice(0,o)}),argumentsLocalValues:[{type:"string",value:e.value},{type:"number",value:r??0},...n]};case"xpath":return{functionDeclaration:String((a,o,...c)=>{const d=new XPathEvaluator().createExpression(a),h=m=>{const w=d.evaluate(m,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),b=[];for(let v=0;v<w.snapshotLength;v++)b.push(w.snapshotItem(v));return b};c=c.length>0?c:[document.body];const p=c.map(m=>h(m)).flat(1);return o===0?p:p.slice(0,o)}),argumentsLocalValues:[{type:"string",value:e.value},{type:"number",value:r??0},...n]};case"innerText":if(e.value==="")throw new Se.InvalidSelectorException("innerText locator cannot be empty");return{functionDeclaration:String((a,o,c,u,d,...h)=>{const p=c?a.toUpperCase():a,m=(b,v)=>{var _;const y=[];if(b instanceof DocumentFragment||b instanceof Document)return[...b.children].forEach(D=>y.push(...m(D,v))),y;if(!(b instanceof HTMLElement))return[];const S=b,E=c?(_=S.innerText)==null?void 0:_.toUpperCase():S.innerText;if(!E.includes(p))return[];const k=[];for(const A of S.children)A instanceof HTMLElement&&k.push(A);if(k.length===0)o&&E===p?y.push(S):o||y.push(S);else{const A=v<=0?[]:k.map(D=>m(D,v-1)).flat(1);A.length===0?(!o||E===p)&&y.push(S):y.push(...A)}return y};h=h.length>0?h:[document];const w=h.map(b=>m(b,d)).flat(1);return u===0?w:w.slice(0,u)}),argumentsLocalValues:[{type:"string",value:e.value},{type:"boolean",value:e.matchType!=="partial"},{type:"boolean",value:e.ignoreCase===!0},{type:"number",value:r??0},{type:"number",value:e.maxDepth??1e3},...n]};case"accessibility":{if(!e.value.name&&!e.value.role)throw new Se.InvalidSelectorException("Either name or role has to be specified");await Promise.all([i(this,we).cdpClient.sendCommand("Accessibility.enable"),i(this,we).cdpClient.sendCommand("Accessibility.getRootAXNode")]);const a=await t.evaluate("({getAccessibleName, getAccessibleRole})",!1,"root",void 0,!1,!0);if(a.type!=="success")throw new Error("Could not get bindings");if(a.result.type!=="object")throw new Error("Could not get bindings");return{functionDeclaration:String((o,c,u,d,...h)=>{const p=[];let m=!1;function w(b,v){if(!m)for(const y of b){let S=!0;if(v.role){const k=u.getAccessibleRole(y);v.role!==k&&(S=!1)}if(v.name){const k=u.getAccessibleName(y);v.name!==k&&(S=!1)}if(S){if(d!==0&&p.length===d){m=!0;break}p.push(y)}const E=[];for(const k of y.children)k instanceof HTMLElement&&E.push(k);w(E,v)}}return h=h.length>0?h:[document.body],w(h,{role:c,name:o}),p}),argumentsLocalValues:[{type:"string",value:e.value.name||""},{type:"string",value:e.value.role||""},{handle:a.result.handle},{type:"number",value:r??0},...n]}}}},k1=async function(t,e,r,n,a){var d,h,p;const o=await g(this,ze,C1).call(this,t,e,n,r);a={...a,maxObjectDepth:1};const c=await t.callFunction(o.functionDeclaration,!1,{type:"undefined"},o.argumentsLocalValues,"none",a);if(c.type!=="success")throw(d=i(this,Tr))==null||d.call(this,cr.LOGGER_PREFIX,"Failed locateNodesByLocator",c),(h=c.exceptionDetails.text)!=null&&h.endsWith("is not a valid selector.")||(p=c.exceptionDetails.text)!=null&&p.endsWith("is not a valid XPath expression.")?new Se.InvalidSelectorException(`Not valid selector ${typeof e.value=="string"?e.value:JSON.stringify(e.value)}`):c.exceptionDetails.text==="Error: startNodes in css selector should be HTMLElement, Document or DocumentFragment"?new Se.InvalidArgumentException("startNodes in css selector should be HTMLElement, Document or DocumentFragment"):new Se.UnknownErrorException(`Unexpected error in selector script: ${c.exceptionDetails.text}`);if(c.result.type!=="array")throw new Se.UnknownErrorException(`Unexpected selector script result type: ${c.result.type}`);return{nodes:c.result.value.map(m=>{if(m.type!=="node")throw new Se.UnknownErrorException(`Unexpected selector script result element: ${m.type}`);return m})}},l(cr,qw),T(cr,"LOGGER_PREFIX",`${Qg.LogType.debug}:browsingContext`);let tb=cr;Ac.BrowsingContextImpl=tb;function bE(s){return["://",""].includes(s)&&(s="null"),s}function dO(s){const{quality:t,type:e}=s.format??{type:"image/png"};switch(e){case"image/png":return{format:"png"};case"image/jpeg":return{format:"jpeg",...t===void 0?{}:{quality:Math.round(t*100)}};case"image/webp":return{format:"webp",...t===void 0?{}:{quality:Math.round(t*100)}}}throw new Se.InvalidArgumentException(`Image format '${e}' is not a supported format`)}function SE(s){var a,o,c,u;if(s.type!=="object"||s.value===void 0)return;const t=(a=s.value.find(([d])=>d==="x"))==null?void 0:a[1],e=(o=s.value.find(([d])=>d==="y"))==null?void 0:o[1],r=(c=s.value.find(([d])=>d==="height"))==null?void 0:c[1],n=(u=s.value.find(([d])=>d==="width"))==null?void 0:u[1];if(!((t==null?void 0:t.type)!=="number"||(e==null?void 0:e.type)!=="number"||(r==null?void 0:r.type)!=="number"||(n==null?void 0:n.type)!=="number"))return{x:t.value,y:e.value,width:n.value,height:r.value}}function CE(s){return{...s.width<0?{x:s.x+s.width,width:-s.width}:{x:s.x,width:s.width},...s.height<0?{y:s.y+s.height,height:-s.height}:{y:s.y,height:s.height}}}function hO(s,t){s=CE(s),t=CE(t);const e=Math.max(s.x,t.x),r=Math.max(s.y,t.y);return{x:e,y:r,width:Math.max(Math.min(s.x+s.width,t.x+t.width)-e,0),height:Math.max(Math.min(s.y+s.height,t.y+t.height)-r,0)}}function rb(s){if(s=s.trim(),!/^[0-9]+$/.test(s))throw new Se.InvalidArgumentException(`Invalid integer: ${s}`);return parseInt(s)}var Zg={};Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.WorkerRealm=void 0;const fO=zd;class pO extends fO.Realm{constructor(e,r,n,a,o,c,u,d,h){super(e,r,n,a,o,u,d);l(this,Op);l(this,Al);f(this,Al,c),f(this,Op,h),this.initialize()}get associatedBrowsingContexts(){return i(this,Al).flatMap(e=>e.associatedBrowsingContexts)}get realmType(){return i(this,Op)}get source(){var e;return{realm:this.realmId,context:(e=this.associatedBrowsingContexts[0])==null?void 0:e.id}}get realmInfo(){const e=i(this,Al).map(n=>n.realmId),{realmType:r}=this;switch(r){case"dedicated-worker":{const n=e[0];if(n===void 0||e.length!==1)throw new Error("Dedicated worker must have exactly one owner");return{...this.baseInfo,type:r,owners:[n]}}case"service-worker":case"shared-worker":return{...this.baseInfo,type:r}}}}Op=new WeakMap,Al=new WeakMap,Zg.WorkerRealm=pO;var ew={},tw={},rw={};Object.defineProperty(rw,"__esModule",{value:!0}),rw.logMessageFormatter=xE,rw.getRemoteValuesText=nb;const mO=Bi,kE=["%s","%d","%i","%f","%o","%O","%c"];function EE(s){return kE.some(t=>s.includes(t))}function xE(s){let t="";const e=s[0].value.toString(),r=s.slice(1,void 0),n=e.split(new RegExp(kE.map(a=>`(${a})`).join("|"),"g"));for(const a of n)if(!(a===void 0||a===""))if(EE(a)){const o=r.shift();(0,mO.assert)(o,`Less value is provided: "${nb(s,!1)}"`),a==="%s"?t+=sb(o):a==="%d"||a==="%i"?o.type==="bigint"||o.type==="number"||o.type==="string"?t+=parseInt(o.value.toString(),10):t+="NaN":a==="%f"?o.type==="bigint"||o.type==="number"||o.type==="string"?t+=parseFloat(o.value.toString()):t+="NaN":t+=ib(o)}else t+=a;if(r.length>0)throw new Error(`More value is provided: "${nb(s,!1)}"`);return t}function ib(s){var t;if(s.type!=="array"&&s.type!=="bigint"&&s.type!=="date"&&s.type!=="number"&&s.type!=="object"&&s.type!=="string")return sb(s);if(s.type==="bigint")return`${s.value.toString()}n`;if(s.type==="number")return s.value.toString();if(["date","string"].includes(s.type))return JSON.stringify(s.value);if(s.type==="object")return`{${s.value.map(e=>`${JSON.stringify(e[0])}:${ib(e[1])}`).join(",")}}`;if(s.type==="array")return`[${((t=s.value)==null?void 0:t.map(e=>ib(e)).join(","))??""}]`;throw Error(`Invalid value type: ${s}`)}function sb(s){var t,e,r,n;if(!Object.hasOwn(s,"value"))return s.type;switch(s.type){case"string":case"number":case"boolean":case"bigint":return String(s.value);case"regexp":return`/${s.value.pattern}/${s.value.flags??""}`;case"date":return new Date(s.value).toString();case"object":return`Object(${((t=s.value)==null?void 0:t.length)??""})`;case"array":return`Array(${((e=s.value)==null?void 0:e.length)??""})`;case"map":return`Map(${(r=s.value)==null?void 0:r.length})`;case"set":return`Set(${(n=s.value)==null?void 0:n.length})`;default:return s.type}}function nb(s,t){const e=s[0];return e?e.type==="string"&&EE(e.value.toString())&&t?xE(s):s.map(r=>sb(r)).join(" "):""}Object.defineProperty(tw,"__esModule",{value:!0}),tw.LogManager=void 0;const iw=Re,_E=tr,gO=rw;function PE(s){const t=s==null?void 0:s.callFrames.map(e=>({columnNumber:e.columnNumber,functionName:e.functionName,lineNumber:e.lineNumber,url:e.url}));return t?{callFrames:t}:void 0}function wO(s){return["error","assert"].includes(s)?"error":["debug","trace"].includes(s)?"debug":["warn","warning"].includes(s)?"warn":"info"}const Rp=class Rp{constructor(t,e,r,n){l(this,Ww);l(this,Fl);l(this,Dl);l(this,An);l(this,Ol);f(this,An,t),f(this,Dl,e),f(this,Fl,r),f(this,Ol,n)}static create(t,e,r,n){var o;const a=new Rp(t,e,r,n);return g(o=a,Ww,E1).call(o),a}};Fl=new WeakMap,Dl=new WeakMap,An=new WeakMap,Ol=new WeakMap,Ww=new WeakSet,E1=function(){i(this,An).cdpClient.on("Runtime.consoleAPICalled",t=>{var n;const e=i(this,Dl).findRealm({cdpSessionId:i(this,An).cdpSessionId,executionContextId:t.executionContextId});if(e===void 0){(n=i(this,Ol))==null||n.call(this,_E.LogType.cdp,t);return}const r=e===void 0?Promise.resolve(t.args):Promise.all(t.args.map(a=>e.serializeCdpObject(a,"none")));for(const a of e.associatedBrowsingContexts)i(this,Fl).registerPromiseEvent(r.then(o=>({kind:"success",value:{type:"event",method:iw.ChromiumBidi.Log.EventNames.LogEntryAdded,params:{level:wO(t.type),source:e.source,text:(0,gO.getRemoteValuesText)(o,!0),timestamp:Math.round(t.timestamp),stackTrace:PE(t.stackTrace),type:"console",method:t.type==="warning"?"warn":t.type,args:o}}}),o=>({kind:"error",error:o})),a.id,iw.ChromiumBidi.Log.EventNames.LogEntryAdded)}),i(this,An).cdpClient.on("Runtime.exceptionThrown",t=>{var r,n;const e=i(this,Dl).findRealm({cdpSessionId:i(this,An).cdpSessionId,executionContextId:t.exceptionDetails.executionContextId});if(e===void 0){(r=i(this,Ol))==null||r.call(this,_E.LogType.cdp,t);return}for(const a of e.associatedBrowsingContexts)i(this,Fl).registerPromiseEvent(g(n=Rp,zw,x1).call(n,t,e).then(o=>({kind:"success",value:{type:"event",method:iw.ChromiumBidi.Log.EventNames.LogEntryAdded,params:{level:"error",source:e.source,text:o,timestamp:Math.round(t.timestamp),stackTrace:PE(t.exceptionDetails.stackTrace),type:"javascript"}}}),o=>({kind:"error",error:o})),a.id,iw.ChromiumBidi.Log.EventNames.LogEntryAdded)})},zw=new WeakSet,x1=async function(t,e){return t.exceptionDetails.exception?e===void 0?JSON.stringify(t.exceptionDetails.exception):await e.stringifyObject(t.exceptionDetails.exception):t.exceptionDetails.text},l(Rp,zw);let ab=Rp;tw.LogManager=ab,Object.defineProperty(ew,"__esModule",{value:!0}),ew.CdpTarget=void 0;const yO=Vt,vO=Fc,TE=tr,bO=Ac,SO=tw,Kb=class Kb{constructor(t,e,r,n,a,o,c,u,d,h){l(this,Qr);l(this,Lp);l(this,Rt);l(this,Np);l(this,$p);l(this,Mo);l(this,Rl);l(this,Fn);l(this,Bp);l(this,Ll,new vO.Deferred);l(this,jp);l(this,Ao);l(this,Fo,!1);l(this,Do,{request:!1,response:!1,auth:!1});f(this,Lp,t),f(this,Rt,e),f(this,Np,r),f(this,Mo,n),f(this,$p,a),f(this,Rl,o),f(this,Bp,u),f(this,Fn,c),f(this,jp,d),f(this,Ao,h)}static create(t,e,r,n,a,o,c,u,d,h){var m,w;const p=new Kb(t,e,r,a,n,o,c,u,d,h);return SO.LogManager.create(p,n,a,h),g(m=p,Qr,P1).call(m),g(w=p,Qr,_1).call(w),p}get unblocked(){return i(this,Ll)}get id(){return i(this,Lp)}get cdpClient(){return i(this,Rt)}get browserCdpClient(){return i(this,Np)}get cdpSessionId(){return i(this,Rt).sessionId}async toggleFetchIfNeeded(){const t=i(this,Bp).getInterceptionStages(this.topLevelId);if(!i(this,Fo)||i(this,Do).request===t.request&&i(this,Do).response===t.response&&i(this,Do).auth===t.auth)return;const e=[];f(this,Do,t),(t.request||t.auth)&&e.push({urlPattern:"*",requestStage:"Request"}),t.response&&e.push({urlPattern:"*",requestStage:"Response"}),e.length?await i(this,Rt).sendCommand("Fetch.enable",{patterns:e,handleAuthRequests:t.auth}):await i(this,Rt).sendCommand("Fetch.disable")}async toggleNetworkIfNeeded(){var e;const t=this.isSubscribedTo(yO.BiDiModule.Network);if(t!==i(this,Fo)){f(this,Fo,t);try{await Promise.all([i(this,Rt).sendCommand(t?"Network.enable":"Network.disable"),this.toggleFetchIfNeeded()])}catch(r){(e=i(this,Ao))==null||e.call(this,TE.LogType.debugError,r),f(this,Fo,!t)}}}getChannels(){return i(this,Rl).find().flatMap(t=>t.channels)}get topLevelId(){return i(this,Fn).findTopLevelContextId(this.id)??this.id}isSubscribedTo(t){return i(this,Mo).subscriptionManager.isSubscribedTo(t,this.topLevelId)}};Lp=new WeakMap,Rt=new WeakMap,Np=new WeakMap,$p=new WeakMap,Mo=new WeakMap,Rl=new WeakMap,Fn=new WeakMap,Bp=new WeakMap,Ll=new WeakMap,jp=new WeakMap,Ao=new WeakMap,Fo=new WeakMap,Do=new WeakMap,Qr=new WeakSet,_1=async function(){var t;try{await Promise.all([i(this,Rt).sendCommand("Page.enable"),i(this,Rt).sendCommand("Page.getFrameTree").then(e=>g(this,Qr,nS).call(this,e.frameTree)),i(this,Rt).sendCommand("Runtime.enable"),i(this,Rt).sendCommand("Page.setLifecycleEventsEnabled",{enabled:!0}),this.toggleNetworkIfNeeded(),i(this,Rt).sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),g(this,Qr,T1).call(this),i(this,Rt).sendCommand("Runtime.runIfWaitingForDebugger")])}catch(e){if((t=i(this,Ao))==null||t.call(this,TE.LogType.debugError,"Failed to unblock target",e),!i(this,Rt).isCloseError(e)){i(this,Ll).resolve({kind:"error",error:e});return}}i(this,Ll).resolve({kind:"success",value:void 0})},nS=function(t){var n;const e=t.frame,r=i(this,Fn).findContext(e.id);if(r!==void 0&&r.parentId===null&&e.parentId!==null&&e.parentId!==void 0&&(r.parentId=e.parentId),r===void 0&&e.parentId!==void 0){const a=i(this,Fn).getContext(e.parentId);bO.BrowsingContextImpl.create(e.id,e.parentId,a.userContext,a.cdpTarget,i(this,Mo),i(this,Fn),i(this,$p),e.url,void 0,i(this,jp),i(this,Ao))}(n=t.childFrames)==null||n.map(a=>g(this,Qr,nS).call(this,a))},P1=function(){i(this,Rt).on("*",(t,e)=>{typeof t=="string"&&i(this,Mo).registerEvent({type:"event",method:`cdp.${t}`,params:{event:t,params:e,session:this.cdpSessionId}},this.id)})},T1=async function(){await Promise.all(i(this,Rl).find({targetId:this.topLevelId,global:!0}).map(t=>t.initInTarget(this,!0)))};let ob=Kb;ew.CdpTarget=ob,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.CdpTargetManager=void 0;const CO=tr,cb=Ac,kO=Zg,EO=ew,IE={service_worker:"service-worker",shared_worker:"shared-worker",worker:"dedicated-worker"};class xO{constructor(t,e,r,n,a,o,c,u,d,h,p){l(this,Ve);l(this,Kp);l(this,Up);l(this,Nl,new Set);l(this,$l);l(this,Dn);l(this,Ar);l(this,Bl);l(this,jl);l(this,Zr);l(this,Hp);l(this,ds);l(this,Oo);l(this,qp,new Map);f(this,Up,t),f(this,Kp,e),i(this,Nl).add(r),f(this,$l,r),f(this,Dn,n),f(this,Ar,a),f(this,jl,u),f(this,Bl,c),f(this,Zr,o),f(this,Hp,d),f(this,Oo,h),f(this,ds,p),g(this,Ve,aS).call(this,e)}}Kp=new WeakMap,Up=new WeakMap,Nl=new WeakMap,$l=new WeakMap,Dn=new WeakMap,Ar=new WeakMap,Bl=new WeakMap,jl=new WeakMap,Zr=new WeakMap,Hp=new WeakMap,ds=new WeakMap,Oo=new WeakMap,Ve=new WeakSet,aS=function(t){t.on("Target.attachedToTarget",e=>{g(this,Ve,A1).call(this,e,t)}),t.on("Target.detachedFromTarget",g(this,Ve,F1).bind(this)),t.on("Target.targetInfoChanged",g(this,Ve,D1).bind(this)),t.on("Inspector.targetCrashed",()=>{g(this,Ve,O1).call(this,t)}),t.on("Page.frameAttached",g(this,Ve,I1).bind(this)),t.on("Page.frameDetached",g(this,Ve,M1).bind(this))},I1=function(t){const e=i(this,Ar).findContext(t.parentFrameId);e!==void 0&&cb.BrowsingContextImpl.create(t.frameId,t.parentFrameId,e.userContext,e.cdpTarget,i(this,Dn),i(this,Ar),i(this,Zr),"about:blank",void 0,i(this,Oo),i(this,ds))},M1=function(t){var e;t.reason!=="swap"&&((e=i(this,Ar).findContext(t.frameId))==null||e.dispose())},A1=function(t,e){const{sessionId:r,targetInfo:n}=t,a=i(this,Up).getCdpClient(r),o=async()=>{await a.sendCommand("Runtime.runIfWaitingForDebugger").then(()=>e.sendCommand("Target.detachFromTarget",t)).catch(c=>{var u;return(u=i(this,ds))==null?void 0:u.call(this,CO.LogType.debugError,c)})};if(i(this,$l)!==n.targetId){const c=n.type==="service_worker"?`${e.sessionId}_${n.targetId}`:n.targetId;if(i(this,Nl).has(c))return;i(this,Nl).add(c)}switch(n.type){case"page":case"iframe":{if(i(this,$l)===n.targetId){o();return}const c=g(this,Ve,Ty).call(this,a,n),u=i(this,Ar).findContext(n.targetId);if(u&&n.type==="iframe")u.updateCdpTarget(c);else{const d=n.browserContextId&&n.browserContextId!==i(this,Hp)?n.browserContextId:"default";cb.BrowsingContextImpl.create(n.targetId,null,d,c,i(this,Dn),i(this,Ar),i(this,Zr),n.url===""?"about:blank":n.url,n.openerFrameId??n.openerId,i(this,Oo),i(this,ds))}return}case"service_worker":case"worker":{const c=i(this,Zr).findRealm({cdpSessionId:e.sessionId});if(!c){o();return}const u=g(this,Ve,Ty).call(this,a,n);g(this,Ve,oS).call(this,IE[n.type],u,c);return}case"shared_worker":{const c=g(this,Ve,Ty).call(this,a,n);g(this,Ve,oS).call(this,IE[n.type],c);return}}o()},Ty=function(t,e){g(this,Ve,aS).call(this,t);const r=EO.CdpTarget.create(e.targetId,t,i(this,Kp),i(this,Zr),i(this,Dn),i(this,jl),i(this,Ar),i(this,Bl),i(this,Oo),i(this,ds));return i(this,Bl).onCdpTargetCreated(r),r},qp=new WeakMap,oS=function(t,e,r){e.cdpClient.on("Runtime.executionContextCreated",n=>{const{uniqueId:a,id:o,origin:c}=n.context,u=new kO.WorkerRealm(e.cdpClient,i(this,Dn),o,i(this,ds),(0,cb.serializeOrigin)(c),r?[r]:[],a,i(this,Zr),t);i(this,qp).set(e.cdpSessionId,u)})},F1=function({sessionId:t,targetId:e}){e&&i(this,jl).find({targetId:e}).map(a=>{a.dispose(e)});const r=i(this,Ar).findContextBySession(t);if(r){r.dispose();return}const n=i(this,qp).get(t);n&&i(this,Zr).deleteRealms({cdpSessionId:n.cdpClient.sessionId})},D1=function(t){const e=i(this,Ar).findContext(t.targetInfo.targetId);e&&e.onTargetInfoChanged(t)},O1=function(t){const e=i(this,Zr).findRealms({cdpSessionId:t.sessionId});for(const r of e)r.dispose()},Gg.CdpTargetManager=xO;var sw={};Object.defineProperty(sw,"__esModule",{value:!0}),sw.BrowsingContextStorage=void 0;const ME=Re;class _O{constructor(){l(this,Ei,new Map)}getTopLevelContexts(){return this.getAllContexts().filter(t=>t.isTopLevelContext())}getAllContexts(){return Array.from(i(this,Ei).values())}deleteContextById(t){i(this,Ei).delete(t)}deleteContext(t){i(this,Ei).delete(t.id)}addContext(t){i(this,Ei).set(t.id,t)}hasContext(t){return i(this,Ei).has(t)}findContext(t){return i(this,Ei).get(t)}findTopLevelContextId(t){if(t===null)return null;const e=this.findContext(t),r=(e==null?void 0:e.parentId)??null;return r===null?t:this.findTopLevelContextId(r)}findContextBySession(t){for(const e of i(this,Ei).values())if(e.cdpTarget.cdpSessionId===t)return e}getContext(t){const e=this.findContext(t);if(e===void 0)throw new ME.NoSuchFrameException(`Context ${t} not found`);return e}verifyTopLevelContextsList(t){const e=new Set;if(!t)return e;for(const r of t){const n=this.getContext(r);if(n.isTopLevelContext())e.add(n);else throw new ME.InvalidArgumentException(`Non top-level context '${r}' given.`)}return e}}Ei=new WeakMap,sw.BrowsingContextStorage=_O;var nw={},aw={};Object.defineProperty(aw,"__esModule",{value:!0}),aw.NetworkRequest=void 0;const dr=Re,Oc=Bi,AE=Fc,PO=tr,je=st,TO=new RegExp('(?<=realm=").*(?=")'),$o=class $o{constructor(t,e,r,n,a=0,o){l(this,V);l(this,Kl);l(this,ft);l(this,vr);l(this,On,!1);l(this,Ul);l(this,de,{});l(this,xi);l(this,ce,{});l(this,Wp);l(this,Ro);l(this,Lo);l(this,zp);l(this,No,{[dr.ChromiumBidi.Network.EventNames.AuthRequired]:!1,[dr.ChromiumBidi.Network.EventNames.BeforeRequestSent]:!1,[dr.ChromiumBidi.Network.EventNames.FetchError]:!1,[dr.ChromiumBidi.Network.EventNames.ResponseCompleted]:!1,[dr.ChromiumBidi.Network.EventNames.ResponseStarted]:!1});T(this,"waitNextPhase",new AE.Deferred);f(this,Kl,t),f(this,Wp,e),f(this,Ro,r),f(this,Lo,n),f(this,Ul,a),f(this,zp,o)}get id(){return i(this,Kl)}get fetchId(){return i(this,ft)}get interceptPhase(){return i(this,vr)}get url(){var r,n,a,o,c,u,d,h;const t=((r=i(this,de).info)==null?void 0:r.request.urlFragment)??((n=i(this,de).paused)==null?void 0:n.request.urlFragment)??"";return`${((a=i(this,ce).info)==null?void 0:a.url)??((o=i(this,ce).paused)==null?void 0:o.request.url)??((c=i(this,xi))==null?void 0:c.url)??((u=i(this,de).auth)==null?void 0:u.request.url)??((d=i(this,de).info)==null?void 0:d.request.url)??((h=i(this,de).paused)==null?void 0:h.request.url)??$o.unknownParameter}${t}`}get redirectCount(){return i(this,Ul)}get cdpTarget(){return i(this,Lo)}get cdpClient(){return i(this,Lo).cdpClient}isRedirecting(){return!!i(this,de).info}handleRedirect(t){i(this,ce).hasExtraInfo=!1,i(this,ce).info=t.redirectResponse,g(this,V,vs).call(this,{wasRedirected:!0})}onRequestWillBeSentEvent(t){i(this,de).info=t,g(this,V,vs).call(this)}onRequestWillBeSentExtraInfoEvent(t){i(this,de).extraInfo=t,g(this,V,vs).call(this)}onResponseReceivedExtraInfoEvent(t){t.statusCode>=300&&t.statusCode<=399&&i(this,de).info&&t.headers.location===i(this,de).info.request.url||(i(this,ce).extraInfo=t,g(this,V,vs).call(this))}onResponseReceivedEvent(t){i(this,ce).hasExtraInfo=t.hasExtraInfo,i(this,ce).info=t.response,g(this,V,vs).call(this)}onServedFromCache(){f(this,On,!0),g(this,V,vs).call(this)}onLoadingFailedEvent(t){g(this,V,vs).call(this,{hasFailed:!0}),g(this,V,md).call(this,()=>({method:dr.ChromiumBidi.Network.EventNames.FetchError,params:{...g(this,V,gd).call(this),errorText:t.errorText}}))}async failRequest(t){(0,Oc.assert)(i(this,ft),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.failRequest",{requestId:i(this,ft),errorReason:t}),f(this,vr,void 0)}onRequestPaused(t){f(this,ft,t.requestId),t.responseStatusCode||t.responseErrorReason?(i(this,ce).paused=t,g(this,V,fd).call(this,"responseStarted")&&!i(this,No)[dr.ChromiumBidi.Network.EventNames.ResponseStarted]&&i(this,ft)!==this.id?f(this,vr,"responseStarted"):g(this,V,dS).call(this)):(i(this,de).paused=t,g(this,V,fd).call(this,"beforeRequestSent")&&!i(this,No)[dr.ChromiumBidi.Network.EventNames.BeforeRequestSent]&&i(this,ft)!==this.id?f(this,vr,"beforeRequestSent"):g(this,V,My).call(this)),g(this,V,vs).call(this)}onAuthRequired(t){f(this,ft,t.requestId),i(this,de).auth=t,g(this,V,fd).call(this,"authRequired")&&i(this,ft)!==this.id?f(this,vr,"authRequired"):g(this,V,pd).call(this,{response:"Default"}),g(this,V,md).call(this,()=>({method:dr.ChromiumBidi.Network.EventNames.AuthRequired,params:{...g(this,V,gd).call(this,"authRequired"),response:g(this,V,Ay).call(this)}}))}async continueRequest(t={}){const e=g(this,V,Fy).call(this,t.headers,t.cookies),r=(0,je.cdpFetchHeadersFromBidiNetworkHeaders)(e),n=FE(t.body);await g(this,V,My).call(this,{url:t.url,method:t.method,headers:r,postData:n}),f(this,xi,{url:t.url,method:t.method,headers:t.headers,cookies:t.cookies,bodySize:IO(t.body)})}async continueResponse(t={}){if(this.interceptPhase==="authRequired")if(t.credentials)await Promise.all([this.waitNextPhase,await g(this,V,pd).call(this,{response:"ProvideCredentials",username:t.credentials.username,password:t.credentials.password})]);else return await g(this,V,pd).call(this,{response:"ProvideCredentials"});if(i(this,vr)==="responseStarted"){const e=g(this,V,Fy).call(this,t.headers,t.cookies),r=(0,je.cdpFetchHeadersFromBidiNetworkHeaders)(e);await g(this,V,dS).call(this,{responseCode:t.statusCode,responsePhrase:t.reasonPhrase,responseHeaders:r})}}async continueWithAuth(t){let e,r;if(t.action==="provideCredentials"){const{credentials:a}=t;e=a.username,r=a.password}const n=(0,je.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction)(t.action);await g(this,V,pd).call(this,{response:n,username:e,password:r})}async provideResponse(t){if((0,Oc.assert)(i(this,ft),"Network Interception not set-up."),this.interceptPhase==="authRequired")return await g(this,V,pd).call(this,{response:"ProvideCredentials"});if(!t.body&&!t.headers)return await g(this,V,My).call(this);const e=g(this,V,Fy).call(this,t.headers,t.cookies),r=(0,je.cdpFetchHeadersFromBidiNetworkHeaders)(e),n=t.statusCode??i(this,V,hd)??200;await this.cdpClient.sendCommand("Fetch.fulfillRequest",{requestId:i(this,ft),responseCode:n,responsePhrase:t.reasonPhrase,responseHeaders:r,body:FE(t.body)}),f(this,vr,void 0)}};Kl=new WeakMap,ft=new WeakMap,vr=new WeakMap,On=new WeakMap,Ul=new WeakMap,de=new WeakMap,xi=new WeakMap,ce=new WeakMap,Wp=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,zp=new WeakMap,No=new WeakMap,V=new WeakSet,cS=function(){return this.url.startsWith("data:")},R1=function(){var t,e,r,n,a;return((t=i(this,xi))==null?void 0:t.method)??((e=i(this,de).info)==null?void 0:e.request.method)??((r=i(this,de).paused)==null?void 0:r.request.method)??((n=i(this,de).auth)==null?void 0:n.request.method)??((a=i(this,ce).paused)==null?void 0:a.request.method)},L1=function(){return!i(this,de).info||!i(this,de).info.loaderId||i(this,de).info.loaderId!==i(this,de).info.requestId?null:i(this,Ro).getVirtualNavigationId(i(this,V,Iy)??void 0)},N1=function(){let t=[];return i(this,de).extraInfo&&(t=i(this,de).extraInfo.associatedCookies.filter(({blockedReasons:e})=>!Array.isArray(e)||e.length===0).map(({cookie:e})=>(0,je.cdpToBiDiCookie)(e))),t},$1=function(){var e,r;let t=0;return typeof((e=i(this,xi))==null?void 0:e.bodySize)=="number"?t=i(this,xi).bodySize:t=(0,je.bidiBodySizeFromCdpPostDataEntries)(((r=i(this,de).info)==null?void 0:r.request.postDataEntries)??[]),t},Iy=function(){var t,e,r,n;return((t=i(this,ce).paused)==null?void 0:t.frameId)??((e=i(this,de).info)==null?void 0:e.frameId)??((r=i(this,de).paused)==null?void 0:r.frameId)??((n=i(this,de).auth)==null?void 0:n.frameId)??null},hd=function(){var t,e,r;return((t=i(this,ce).paused)==null?void 0:t.responseStatusCode)??((e=i(this,ce).extraInfo)==null?void 0:e.statusCode)??((r=i(this,ce).info)==null?void 0:r.status)},uS=function(){var e,r,n;let t=[];return(e=i(this,xi))!=null&&e.headers?t=i(this,xi).headers:t=[...(0,je.bidiNetworkHeadersFromCdpNetworkHeaders)((r=i(this,de).info)==null?void 0:r.request.headers),...(0,je.bidiNetworkHeadersFromCdpNetworkHeaders)((n=i(this,de).extraInfo)==null?void 0:n.headers)],t},B1=function(){var r;if(!i(this,ce).info||!(i(this,V,hd)===401||i(this,V,hd)===407))return;const t=i(this,V,hd)===401?"WWW-Authenticate":"Proxy-Authenticate",e=[];for(const[n,a]of Object.entries(i(this,ce).info.headers))n.localeCompare(t,void 0,{sensitivity:"base"})===0&&e.push({scheme:a.split(" ").at(0)??"",realm:((r=a.match(TO))==null?void 0:r.at(0))??""});return e},j1=function(){var t,e,r,n,a,o,c,u,d,h,p,m,w,b,v,y,S,E,k,_,A,D;return{timeOrigin:(0,je.getTiming)((e=(t=i(this,ce).info)==null?void 0:t.timing)==null?void 0:e.requestTime),requestTime:(0,je.getTiming)((n=(r=i(this,ce).info)==null?void 0:r.timing)==null?void 0:n.requestTime),redirectStart:0,redirectEnd:0,fetchStart:(0,je.getTiming)((o=(a=i(this,ce).info)==null?void 0:a.timing)==null?void 0:o.requestTime),dnsStart:(0,je.getTiming)((u=(c=i(this,ce).info)==null?void 0:c.timing)==null?void 0:u.dnsStart),dnsEnd:(0,je.getTiming)((h=(d=i(this,ce).info)==null?void 0:d.timing)==null?void 0:h.dnsEnd),connectStart:(0,je.getTiming)((m=(p=i(this,ce).info)==null?void 0:p.timing)==null?void 0:m.connectStart),connectEnd:(0,je.getTiming)((b=(w=i(this,ce).info)==null?void 0:w.timing)==null?void 0:b.connectEnd),tlsStart:(0,je.getTiming)((y=(v=i(this,ce).info)==null?void 0:v.timing)==null?void 0:y.sslStart),requestStart:(0,je.getTiming)((E=(S=i(this,ce).info)==null?void 0:S.timing)==null?void 0:E.sendStart),responseStart:(0,je.getTiming)((_=(k=i(this,ce).info)==null?void 0:k.timing)==null?void 0:_.receiveHeadersStart),responseEnd:(0,je.getTiming)((D=(A=i(this,ce).info)==null?void 0:A.timing)==null?void 0:D.receiveHeadersEnd)}},K1=function(){this.waitNextPhase.resolve(),this.waitNextPhase=new AE.Deferred},lS=function(t){return i(this,Lo).isSubscribedTo(`network.${t}`)?i(this,Ro).getInterceptsForPhase(this,t):new Set},fd=function(t){return g(this,V,lS).call(this,t).size>0},vs=function(t={}){const e=t.wasRedirected||t.hasFailed||g(this,V,cS).call(this)||!!i(this,de).extraInfo||i(this,On)||!!(i(this,ce).info&&!i(this,ce).hasExtraInfo),r=g(this,V,cS).call(this)||i(this,On),n=!r&&g(this,V,fd).call(this,"beforeRequestSent"),a=!n||n&&!!i(this,de).paused;i(this,de).info&&(n?a:e)&&g(this,V,md).call(this,g(this,V,H1).bind(this));const o=!!i(this,ce).extraInfo||i(this,On)||!!(i(this,ce).info&&!i(this,ce).hasExtraInfo),c=!r&&g(this,V,fd).call(this,"responseStarted");(i(this,ce).info||c&&i(this,ce).paused)&&g(this,V,md).call(this,g(this,V,q1).bind(this));const u=!c||c&&!!i(this,ce).paused;i(this,ce).info&&o&&u&&(g(this,V,md).call(this,g(this,V,W1).bind(this)),i(this,Ro).deleteRequest(this.id))},My=async function(t={}){(0,Oc.assert)(i(this,ft),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueRequest",{requestId:i(this,ft),url:t.url,method:t.method,headers:t.headers,postData:t.postData}),f(this,vr,void 0)},dS=async function({responseCode:t,responsePhrase:e,responseHeaders:r}={}){(0,Oc.assert)(i(this,ft),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueResponse",{requestId:i(this,ft),responseCode:t,responsePhrase:e,responseHeaders:r}),f(this,vr,void 0)},pd=async function(t){(0,Oc.assert)(i(this,ft),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueWithAuth",{requestId:i(this,ft),authChallengeResponse:t}),f(this,vr,void 0)},md=function(t){var r;let e;try{e=t()}catch(n){(r=i(this,zp))==null||r.call(this,PO.LogType.debugError,n);return}g(this,V,z1).call(this)||i(this,No)[e.method]&&e.method!==dr.ChromiumBidi.Network.EventNames.AuthRequired||(g(this,V,K1).call(this),i(this,No)[e.method]=!0,i(this,Wp).registerEvent(Object.assign(e,{type:"event"}),i(this,V,Iy)))},gd=function(t){var r;const e={isBlocked:!1};if(t){const n=g(this,V,lS).call(this,t);e.isBlocked=n.size>0,e.isBlocked&&(e.intercepts=[...n])}return{context:i(this,V,Iy),navigation:i(this,V,L1),redirectCount:i(this,Ul),request:g(this,V,U1).call(this),timestamp:Math.round((0,je.getTiming)((r=i(this,de).info)==null?void 0:r.wallTime)*1e3),...e}},Ay=function(){var r,n,a,o,c,u,d,h,p,m,w;(r=i(this,ce).info)!=null&&r.fromDiskCache&&(i(this,ce).extraInfo=void 0);const t=[...(0,je.bidiNetworkHeadersFromCdpNetworkHeaders)((n=i(this,ce).info)==null?void 0:n.headers),...(0,je.bidiNetworkHeadersFromCdpNetworkHeaders)((a=i(this,ce).extraInfo)==null?void 0:a.headers)],e=i(this,V,B1);return{url:this.url,protocol:((o=i(this,ce).info)==null?void 0:o.protocol)??"",status:i(this,V,hd)??-1,statusText:((c=i(this,ce).info)==null?void 0:c.statusText)||((u=i(this,ce).paused)==null?void 0:u.responseStatusText)||"",fromCache:((d=i(this,ce).info)==null?void 0:d.fromDiskCache)||((h=i(this,ce).info)==null?void 0:h.fromPrefetchCache)||i(this,On),headers:t,mimeType:((p=i(this,ce).info)==null?void 0:p.mimeType)||"",bytesReceived:((m=i(this,ce).info)==null?void 0:m.encodedDataLength)||0,headersSize:(0,je.computeHeadersSize)(t),bodySize:0,content:{size:0},...e?{authChallenges:e}:{},"goog:securityDetails":(w=i(this,ce).info)==null?void 0:w.securityDetails}},U1=function(){var e,r,n,a,o;const t=i(this,V,uS);return{request:i(this,Kl),url:this.url,method:i(this,V,R1)??$o.unknownParameter,headers:t,cookies:i(this,V,N1),headersSize:(0,je.computeHeadersSize)(t),bodySize:i(this,V,$1),timings:i(this,V,j1),"goog:postData":(r=(e=i(this,de).info)==null?void 0:e.request)==null?void 0:r.postData,"goog:hasPostData":(a=(n=i(this,de).info)==null?void 0:n.request)==null?void 0:a.hasPostData,"goog:resourceType":(o=i(this,de).info)==null?void 0:o.type}},H1=function(){var t;return(0,Oc.assert)(i(this,de).info,"RequestWillBeSentEvent is not set"),{method:dr.ChromiumBidi.Network.EventNames.BeforeRequestSent,params:{...g(this,V,gd).call(this,"beforeRequestSent"),initiator:{type:g(t=$o,Vw,V1).call(t,i(this,de).info.initiator.type),columnNumber:i(this,de).info.initiator.columnNumber,lineNumber:i(this,de).info.initiator.lineNumber,stackTrace:i(this,de).info.initiator.stack,request:i(this,de).info.initiator.requestId}}}},q1=function(){return{method:dr.ChromiumBidi.Network.EventNames.ResponseStarted,params:{...g(this,V,gd).call(this,"responseStarted"),response:g(this,V,Ay).call(this)}}},W1=function(){return{method:dr.ChromiumBidi.Network.EventNames.ResponseCompleted,params:{...g(this,V,gd).call(this),response:g(this,V,Ay).call(this)}}},z1=function(){var e,r;const t="/favicon.ico";return((e=i(this,de).paused)==null?void 0:e.request.url.endsWith(t))??((r=i(this,de).info)==null?void 0:r.request.url.endsWith(t))??!1},Fy=function(t,e){if(!t&&!e)return;let r=t;const n=(0,je.networkHeaderFromCookieHeaders)(e);return n&&!r&&(r=i(this,V,uS)),n&&r&&(r.filter(a=>a.name.localeCompare("cookie",void 0,{sensitivity:"base"})!==0),r.push(n)),r},Vw=new WeakSet,V1=function(t){switch(t){case"parser":case"script":case"preflight":return t;default:return"other"}},l($o,Vw),T($o,"unknownParameter","UNKNOWN");let ub=$o;aw.NetworkRequest=ub;function FE(s){let t;return(s==null?void 0:s.type)==="string"?t=btoa(s.value):(s==null?void 0:s.type)==="base64"&&(t=s.value),t}function IO(s){return(s==null?void 0:s.type)==="string"?s.value.length:(s==null?void 0:s.type)==="base64"?atob(s.value).length:0}Object.defineProperty(nw,"__esModule",{value:!0}),nw.NetworkStorage=void 0;const MO=Re,AO=sa,DE=aw,FO=st;class DO{constructor(t,e,r,n){l(this,Fr);l(this,Vp);l(this,Gp);l(this,Xp);l(this,hs,new Map);l(this,Rn,new Map);f(this,Vp,e),f(this,Gp,t),r.on("Target.detachedFromTarget",({sessionId:a})=>{this.disposeRequestMap(a)}),f(this,Xp,n)}onCdpTargetCreated(t){const e=t.cdpClient,r=[["Network.requestWillBeSent",n=>{const a=this.getRequestById(n.requestId);a&&a.isRedirecting()?(a.handleRedirect(n),this.deleteRequest(n.requestId),g(this,Fr,Oi).call(this,n.requestId,t,a.redirectCount+1).onRequestWillBeSentEvent(n)):g(this,Fr,Oi).call(this,n.requestId,t).onRequestWillBeSentEvent(n)}],["Network.requestWillBeSentExtraInfo",n=>{g(this,Fr,Oi).call(this,n.requestId,t).onRequestWillBeSentExtraInfoEvent(n)}],["Network.responseReceived",n=>{g(this,Fr,Oi).call(this,n.requestId,t).onResponseReceivedEvent(n)}],["Network.responseReceivedExtraInfo",n=>{g(this,Fr,Oi).call(this,n.requestId,t).onResponseReceivedExtraInfoEvent(n)}],["Network.requestServedFromCache",n=>{g(this,Fr,Oi).call(this,n.requestId,t).onServedFromCache()}],["Network.loadingFailed",n=>{g(this,Fr,Oi).call(this,n.requestId,t).onLoadingFailedEvent(n)}],["Fetch.requestPaused",n=>{g(this,Fr,Oi).call(this,n.networkId??n.requestId,t).onRequestPaused(n)}],["Fetch.authRequired",n=>{let a=this.getRequestByFetchId(n.requestId);a||(a=g(this,Fr,Oi).call(this,n.requestId,t)),a.onAuthRequired(n)}]];for(const[n,a]of r)e.on(n,a)}getInterceptionStages(t){const e={request:!1,response:!1,auth:!1};for(const r of i(this,Rn).values())r.contexts&&!r.contexts.includes(t)||(e.request||(e.request=r.phases.includes("beforeRequestSent")),e.response||(e.response=r.phases.includes("responseStarted")),e.auth||(e.auth=r.phases.includes("authRequired")));return e}getInterceptsForPhase(t,e){if(t.url===DE.NetworkRequest.unknownParameter)return new Set;const r=new Set;for(const[n,a]of i(this,Rn).entries())if(!(!a.phases.includes(e)||a.contexts&&!a.contexts.includes(t.cdpTarget.topLevelId))){if(a.urlPatterns.length===0){r.add(n);continue}for(const o of a.urlPatterns)if((0,FO.matchUrlPattern)(o,t.url)){r.add(n);break}}return r}disposeRequestMap(t){for(const e of i(this,hs).values())e.cdpClient.sessionId===t&&i(this,hs).delete(e.id)}addIntercept(t){const e=(0,AO.uuidv4)();return i(this,Rn).set(e,t),e}removeIntercept(t){if(!i(this,Rn).has(t))throw new MO.NoSuchInterceptException(`Intercept '${t}' does not exist.`);i(this,Rn).delete(t)}getRequestById(t){return i(this,hs).get(t)}getRequestByFetchId(t){for(const e of i(this,hs).values())if(e.fetchId===t)return e}addRequest(t){i(this,hs).set(t.id,t)}deleteRequest(t){i(this,hs).delete(t)}getVirtualNavigationId(t){var e;return t===void 0?null:((e=i(this,Vp).findContext(t))==null?void 0:e.virtualNavigationId)??null}}Vp=new WeakMap,Gp=new WeakMap,Xp=new WeakMap,hs=new WeakMap,Rn=new WeakMap,Fr=new WeakSet,Oi=function(t,e,r){let n=this.getRequestById(t);return n||(n=new DE.NetworkRequest(t,i(this,Gp),this,e,r,i(this,Xp)),this.addRequest(n),n)},nw.NetworkStorage=DO;var ow={};Object.defineProperty(ow,"__esModule",{value:!0}),ow.PreloadScriptStorage=void 0;class OO{constructor(){l(this,Bo,new Set)}find(t){return t?[...i(this,Bo)].filter(e=>!!(t.id!==void 0&&t.id===e.id||t.targetId!==void 0&&e.targetIds.has(t.targetId)||t.global!==void 0&&(t.global&&e.contexts===void 0||!t.global&&e.contexts!==void 0))):[...i(this,Bo)]}add(t){i(this,Bo).add(t)}remove(t){for(const e of this.find(t))i(this,Bo).delete(e)}}Bo=new WeakMap,ow.PreloadScriptStorage=OO;var cw={};Object.defineProperty(cw,"__esModule",{value:!0}),cw.RealmStorage=void 0;const RO=Re,LO=Wd;class NO{constructor(){l(this,Gw,new Map);l(this,Hl,new Map)}get knownHandlesToRealmMap(){return i(this,Gw)}addRealm(t){i(this,Hl).set(t.realmId,t)}findRealms(t){return Array.from(i(this,Hl).values()).filter(e=>!(t.realmId!==void 0&&t.realmId!==e.realmId||t.browsingContextId!==void 0&&!e.associatedBrowsingContexts.map(r=>r.id).includes(t.browsingContextId)||t.sandbox!==void 0&&(!(e instanceof LO.WindowRealm)||t.sandbox!==e.sandbox)||t.executionContextId!==void 0&&t.executionContextId!==e.executionContextId||t.origin!==void 0&&t.origin!==e.origin||t.type!==void 0&&t.type!==e.realmType||t.cdpSessionId!==void 0&&t.cdpSessionId!==e.cdpClient.sessionId))}findRealm(t){const e=this.findRealms(t);if(e.length===1)return e[0]}getRealm(t){const e=this.findRealm(t);if(e===void 0)throw new RO.NoSuchFrameException(`Realm ${JSON.stringify(t)} not found`);return e}deleteRealms(t){this.findRealms(t).map(e=>{e.dispose(),i(this,Hl).delete(e.realmId),Array.from(this.knownHandlesToRealmMap.entries()).filter(([,r])=>r===e.realmId).map(([r])=>this.knownHandlesToRealmMap.delete(r))})}}Gw=new WeakMap,Hl=new WeakMap,cw.RealmStorage=NO;var uw={},lw={};Object.defineProperty(lw,"__esModule",{value:!0}),lw.Buffer=void 0;let $O=(Cx=class{constructor(t,e){l(this,Jp);l(this,jo,[]);l(this,Yp);f(this,Jp,t),f(this,Yp,e)}get(){return i(this,jo)}add(t){var e;for(i(this,jo).push(t);i(this,jo).length>i(this,Jp);){const r=i(this,jo).shift();r!==void 0&&((e=i(this,Yp))==null||e.call(this,r))}}},Jp=new WeakMap,jo=new WeakMap,Yp=new WeakMap,Cx);lw.Buffer=$O;var dw={};Object.defineProperty(dw,"__esModule",{value:!0}),dw.DefaultMap=void 0;class BO extends Map{constructor(e,r){super(r);l(this,Qp);f(this,Qp,e)}get(e){return this.has(e)||this.set(e,i(this,Qp).call(this,e)),super.get(e)}}Qp=new WeakMap,dw.DefaultMap=BO;var hw={};Object.defineProperty(hw,"__esModule",{value:!0}),hw.distinctValues=jO,hw.deterministicJSONStringify=OE;function jO(s){const t=new Map;for(const e of s)t.set(OE(e),e);return Array.from(t.values())}function OE(s){return JSON.stringify(RE(s))}function RE(s){if(s==null||Array.isArray(s)||typeof s!="object")return s;const t={};for(const e of Object.keys(s).sort()){const r=s[e];t[e]=RE(r)}return t}var fw={};Object.defineProperty(fw,"__esModule",{value:!0}),fw.IdWrapper=void 0;const Jw=class Jw{constructor(){l(this,Zp);f(this,Zp,++ic(Jw,Xw)._)}get id(){return i(this,Zp)}};Xw=new WeakMap,Zp=new WeakMap,l(Jw,Xw,0);let lb=Jw;fw.IdWrapper=lb;var Gd={};Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.isCdpEvent=LE,Gd.assertSupportedEvent=KO;const db=Re;function LE(s){var t;return((t=s.split(".").at(0))==null?void 0:t.startsWith(db.ChromiumBidi.BiDiModule.Cdp))??!1}function KO(s){if(!db.ChromiumBidi.EVENT_NAMES.has(s)&&!LE(s))throw new db.InvalidArgumentException(`Unknown event: ${s}`)}var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.SubscriptionManager=void 0,Rc.cartesianProduct=NE,Rc.unrollEvents=$E;const nt=Re,UO=Gd;function NE(...s){return s.reduce((t,e)=>t.flatMap(r=>e.map(n=>[r,n].flat())))}function $E(s){const t=new Set;function e(r){for(const n of r)t.add(n)}for(const r of s)switch(r){case nt.ChromiumBidi.BiDiModule.BrowsingContext:e(Object.values(nt.ChromiumBidi.BrowsingContext.EventNames));break;case nt.ChromiumBidi.BiDiModule.Log:e(Object.values(nt.ChromiumBidi.Log.EventNames));break;case nt.ChromiumBidi.BiDiModule.Network:e(Object.values(nt.ChromiumBidi.Network.EventNames));break;case nt.ChromiumBidi.BiDiModule.Script:e(Object.values(nt.ChromiumBidi.Script.EventNames));break;default:t.add(r)}return[...t.values()]}class HO{constructor(t){l(this,ql);l(this,Yw,0);l(this,Dr,new Map);l(this,_i);f(this,_i,t)}getChannelsSubscribedToEvent(t,e){return Array.from(i(this,Dr).keys()).map(n=>({priority:g(this,ql,G1).call(this,t,e,n),channel:n})).filter(({priority:n})=>n!==null).sort((n,a)=>n.priority-a.priority).map(({channel:n})=>n)}isSubscribedTo(t,e=null){const r=i(this,_i).findTopLevelContextId(e);for(const n of i(this,Dr).values())for(const[a,o]of n.entries())if(!(r!==a&&a!==null)){for(const c of o.keys())if(c===t||c===t.split(".").at(0)||c.split(".").at(0)===t)return!0}return!1}subscribe(t,e,r){switch(e=i(this,_i).findTopLevelContextId(e),t){case nt.ChromiumBidi.BiDiModule.BrowsingContext:return Object.values(nt.ChromiumBidi.BrowsingContext.EventNames).map(c=>this.subscribe(c,e,r)).flat();case nt.ChromiumBidi.BiDiModule.Log:return Object.values(nt.ChromiumBidi.Log.EventNames).map(c=>this.subscribe(c,e,r)).flat();case nt.ChromiumBidi.BiDiModule.Network:return Object.values(nt.ChromiumBidi.Network.EventNames).map(c=>this.subscribe(c,e,r)).flat();case nt.ChromiumBidi.BiDiModule.Script:return Object.values(nt.ChromiumBidi.Script.EventNames).map(c=>this.subscribe(c,e,r)).flat()}i(this,Dr).has(r)||i(this,Dr).set(r,new Map);const n=i(this,Dr).get(r);n.has(e)||n.set(e,new Map);const a=n.get(e),o=(e===null?i(this,_i).getTopLevelContexts().map(c=>c.id):[e]).filter(c=>!this.isSubscribedTo(t,c));return a.has(t)||a.set(t,ic(this,Yw)._++),o.map(c=>({event:t,contextId:c}))}unsubscribeAll(t,e,r){for(const a of e)a!==null&&i(this,_i).getContext(a);NE($E(t),e).map(([a,o])=>g(this,ql,X1).call(this,a,o,r)).forEach(a=>a())}unsubscribe(t,e,r){this.unsubscribeAll([t],[e],r)}}Yw=new WeakMap,Dr=new WeakMap,_i=new WeakMap,ql=new WeakSet,G1=function(t,e,r){const n=i(this,Dr).get(r);if(n===void 0)return null;const a=i(this,_i).findTopLevelContextId(e),c=[...new Set([null,a])].map(u=>{var h,p;const d=(h=n.get(u))==null?void 0:h.get(t);if((0,UO.isCdpEvent)(t)){const m=(p=n.get(u))==null?void 0:p.get(nt.ChromiumBidi.BiDiModule.Cdp);return d&&m?Math.min(d,m):d??m}return d}).filter(u=>u!==void 0);return c.length===0?null:Math.min(...c)},X1=function(t,e,r){if(e=i(this,_i).findTopLevelContextId(e),!i(this,Dr).has(r))throw new nt.InvalidArgumentException(`Cannot unsubscribe from ${t}, ${e===null?"null":e}. No subscription found.`);const n=i(this,Dr).get(r);if(!n.has(e))throw new nt.InvalidArgumentException(`Cannot unsubscribe from ${t}, ${e===null?"null":e}. No subscription found.`);const a=n.get(e);if(!a.has(t))throw new nt.InvalidArgumentException(`Cannot unsubscribe from ${t}, ${e===null?"null":e}. No subscription found.`);return()=>{a.delete(t),a.size===0&&n.delete(t),n.size===0&&i(this,Dr).delete(r)}},Rc.SubscriptionManager=HO,Object.defineProperty(uw,"__esModule",{value:!0}),uw.EventManager=void 0;const qO=Re,WO=lw,BE=dw,zO=hw,VO=ra,GO=fw,jE=Mc,KE=Gd,XO=Rc;class JO{constructor(t,e){l(this,Qw,new GO.IdWrapper);l(this,em);l(this,tm);f(this,tm,t),f(this,em,e)}get id(){return i(this,Qw).id}get contextId(){return i(this,em)}get event(){return i(this,tm)}}Qw=new WeakMap,em=new WeakMap,tm=new WeakMap;const hb=new Map([[qO.ChromiumBidi.Log.EventNames.LogEntryAdded,100]]),qo=class qo extends VO.EventEmitter{constructor(e){super();l(this,Pi);l(this,rm,new BE.DefaultMap(()=>new Set));l(this,Ko,new Map);l(this,Wl,new Map);l(this,Ln);l(this,Uo);l(this,zl);f(this,Uo,e),f(this,Ln,new XO.SubscriptionManager(e)),f(this,zl,new BE.DefaultMap(()=>[]))}get subscriptionManager(){return i(this,Ln)}addSubscribeHook(e,r){i(this,zl).get(e).push(r)}registerEvent(e,r){this.registerPromiseEvent(Promise.resolve({kind:"success",value:e}),r,e.method)}registerPromiseEvent(e,r,n){const a=new JO(e,r),o=i(this,Ln).getChannelsSubscribedToEvent(n,r);g(this,Pi,J1).call(this,a,n);for(const c of o)this.emit("event",{message:jE.OutgoingMessage.createFromPromise(e,c),event:n}),g(this,Pi,hS).call(this,a,c,n)}async subscribe(e,r,n){for(const o of e)(0,KE.assertSupportedEvent)(o);for(const o of r)o!==null&&i(this,Uo).getContext(o);const a=[];for(const o of e)for(const c of r){a.push(...i(this,Ln).subscribe(o,c,n));for(const u of g(this,Pi,fS).call(this,o,c,n))this.emit("event",{message:jE.OutgoingMessage.createFromPromise(u.event,n),event:o}),g(this,Pi,hS).call(this,u,n,o)}(0,zO.distinctValues)(a).forEach(({contextId:o,event:c})=>{i(this,zl).get(c).forEach(u=>u(o))}),await this.toggleModulesIfNeeded()}async unsubscribe(e,r,n){for(const a of e)(0,KE.assertSupportedEvent)(a);i(this,Ln).unsubscribeAll(e,r,n),await this.toggleModulesIfNeeded()}async toggleModulesIfNeeded(){await Promise.all(i(this,Uo).getAllContexts().map(async e=>await e.toggleModulesIfNeeded()))}};rm=new WeakMap,Ko=new WeakMap,Wl=new WeakMap,Ln=new WeakMap,Uo=new WeakMap,zl=new WeakMap,Ho=new WeakSet,Dm=function(e,r,n){return JSON.stringify({eventName:e,browsingContext:r,channel:n})},Pi=new WeakSet,J1=function(e,r){var a;if(!hb.has(r))return;const n=g(a=qo,Ho,Dm).call(a,r,e.contextId);i(this,Ko).has(n)||i(this,Ko).set(n,new WO.Buffer(hb.get(r))),i(this,Ko).get(n).add(e),i(this,rm).get(r).add(e.contextId)},hS=function(e,r,n){var o;if(!hb.has(n))return;const a=g(o=qo,Ho,Dm).call(o,n,e.contextId,r);i(this,Wl).set(a,Math.max(i(this,Wl).get(a)??0,e.id))},fS=function(e,r,n){var d,h,p;const a=g(d=qo,Ho,Dm).call(d,e,r),o=g(h=qo,Ho,Dm).call(h,e,r,n),c=i(this,Wl).get(o)??-1/0,u=((p=i(this,Ko).get(a))==null?void 0:p.get().filter(m=>m.id>c))??[];return r===null&&Array.from(i(this,rm).get(e).keys()).filter(m=>m!==null&&i(this,Uo).hasContext(m)).map(m=>g(this,Pi,fS).call(this,e,m,n)).forEach(m=>u.push(...m)),u.sort((m,w)=>m.id-w.id)},l(qo,Ho);let fb=qo;uw.EventManager=fb,Object.defineProperty(kg,"__esModule",{value:!0}),kg.BidiServer=void 0;const YO=ra,QO=tr,ZO=Eg,eR=xg,tR=Gg,rR=sw,iR=nw,sR=ow,nR=cw,aR=uw,Ub=class Ub extends YO.EventEmitter{constructor(e,r,n,a,o,c,u){super();l(this,ty);l(this,im);l(this,Wo);l(this,Vl);l(this,Nn);l(this,$n,new rR.BrowsingContextStorage);l(this,sm,new nR.RealmStorage);l(this,nm,new sR.PreloadScriptStorage);l(this,zo);l(this,Zw,e=>{i(this,Vl).processCommand(e).catch(r=>{var n;(n=i(this,zo))==null||n.call(this,QO.LogType.debugError,r)})});l(this,ey,async e=>{const r=e.message;e.channel!==null&&(r.channel=e.channel),await i(this,Wo).sendMessage(r)});f(this,zo,u),f(this,im,new ZO.ProcessingQueue(i(this,ey),i(this,zo))),f(this,Wo,e),i(this,Wo).setOnMessage(i(this,Zw)),f(this,Nn,new aR.EventManager(i(this,$n)));const d=new iR.NetworkStorage(i(this,Nn),i(this,$n),n,u);f(this,Vl,new eR.CommandProcessor(r,n,i(this,Nn),i(this,$n),i(this,sm),i(this,nm),d,c,async h=>{await n.sendCommand("Security.setIgnoreCertificateErrors",{ignore:h.acceptInsecureCerts??!1}),new tR.CdpTargetManager(r,n,a,i(this,Nn),i(this,$n),i(this,sm),d,i(this,nm),o,h==null?void 0:h.unhandledPromptBehavior,u),await n.sendCommand("Target.setDiscoverTargets",{discover:!0}),await n.sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),await g(this,ty,Y1).call(this)},i(this,zo))),i(this,Nn).on("event",({message:h,event:p})=>{this.emitOutgoingMessage(h,p)}),i(this,Vl).on("response",({message:h,event:p})=>{this.emitOutgoingMessage(h,p)})}static async createAndStart(e,r,n,a,o,c){const[{browserContextIds:u},{targetInfos:d}]=await Promise.all([n.sendCommand("Target.getBrowserContexts"),n.sendCommand("Target.getTargets")]);let h="default";for(const m of d)if(m.browserContextId&&!u.includes(m.browserContextId)){h=m.browserContextId;break}return new Ub(e,r,n,a,h,o,c)}emitOutgoingMessage(e,r){i(this,im).add(e,r)}close(){i(this,Wo).close()}};im=new WeakMap,Wo=new WeakMap,Vl=new WeakMap,Nn=new WeakMap,$n=new WeakMap,sm=new WeakMap,nm=new WeakMap,zo=new WeakMap,Zw=new WeakMap,ey=new WeakMap,ty=new WeakSet,Y1=async function(){await Promise.all(i(this,$n).getTopLevelContexts().map(e=>e.lifecycleLoaded()))};let pb=Ub;kg.BidiServer=pb,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.OutgoingMessage=s.EventEmitter=s.BidiServer=void 0;var t=kg;Object.defineProperty(s,"BidiServer",{enumerable:!0,get:function(){return t.BidiServer}});var e=ra;Object.defineProperty(s,"EventEmitter",{enumerable:!0,get:function(){return e.EventEmitter}});var r=Mc;Object.defineProperty(s,"OutgoingMessage",{enumerable:!0,get:function(){return r.OutgoingMessage}})}(Cg);const Vo=class Vo extends kd{constructor(e,r){super();l(this,Gl,!1);l(this,Bn);l(this,fs,De.create());T(this,"frame");T(this,"onClose",()=>{Vo.sessions.delete(this.id()),f(this,Gl,!0)});if(this.frame=e,!this.frame.page().browser().cdpSupported)return;const n=this.frame.page().browser().connection;f(this,Bn,n),r?(i(this,fs).resolve(r),Vo.sessions.set(r,this)):(async()=>{try{const{result:a}=await n.send("cdp.getSession",{context:e._id});i(this,fs).resolve(a.session),Vo.sessions.set(a.session,this)}catch(a){i(this,fs).reject(a)}})(),Vo.sessions.set(i(this,fs).value(),this)}connection(){}async send(e,r,n){if(i(this,Bn)===void 0)throw new fe("CDP support is required for this feature. The current browser does not support CDP.");if(i(this,Gl))throw new Nr(`Protocol error (${e}): Session closed. Most likely the page has been closed.`);const a=await i(this,fs).valueOrThrow(),{result:o}=await i(this,Bn).send("cdp.sendCommand",{method:e,params:r,session:a},n==null?void 0:n.timeout);return o.result}async detach(){if(!(i(this,Bn)===void 0||i(this,Bn).closed||i(this,Gl)))try{await this.frame.client.send("Target.detachFromTarget",{sessionId:this.id()})}finally{this.onClose()}}id(){const e=i(this,fs).value();return typeof e=="string"?e:""}};Gl=new WeakMap,Bn=new WeakMap,fs=new WeakMap,T(Vo,"sessions",new Map);let Xd=Vo;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const oR=pc("puppeteer:webDriverBiDi:SEND "),cR=pc("puppeteer:webDriverBiDi:RECV ");class UE extends ie{constructor(e,r,n=0,a){super();l(this,am);l(this,Ti);l(this,Xl);l(this,om,0);l(this,Go,!1);l(this,ps,new Cv);l(this,cm,[]);f(this,am,e),f(this,Xl,n),f(this,om,a??18e4),f(this,Ti,r),i(this,Ti).onmessage=this.onMessage.bind(this),i(this,Ti).onclose=this.unbind.bind(this)}get closed(){return i(this,Go)}get url(){return i(this,am)}pipeTo(e){i(this,cm).push(e)}emit(e,r){for(const n of i(this,cm))n.emit(e,r);return super.emit(e,r)}send(e,r,n){return z(!i(this,Go),"Protocol error: Connection closed."),i(this,ps).create(e,n??i(this,om),a=>{const o=JSON.stringify({id:a,method:e,params:r});oR(o),i(this,Ti).send(o)})}async onMessage(e){var n;i(this,Xl)&&await new Promise(a=>setTimeout(a,i(this,Xl))),cR(e);const r=JSON.parse(e);if("type"in r)switch(r.type){case"success":i(this,ps).resolve(r.id,r);return;case"error":if(r.id===null)break;i(this,ps).reject(r.id,uR(r),`${r.error}: ${r.message}`);return;case"event":if(lR(r)){(n=Xd.sessions.get(r.params.session))==null||n.emit(r.params.event,r.params.params);return}this.emit(r.method,r.params);return}"id"in r&&i(this,ps).reject(r.id,`Protocol Error. Message is not in BiDi protocol format: '${e}'`,r.message),te(r)}unbind(){i(this,Go)||(f(this,Go,!0),i(this,Ti).onmessage=()=>{},i(this,Ti).onclose=()=>{},i(this,ps).clear())}dispose(){this.unbind(),i(this,Ti).close()}getPendingProtocolErrors(){return i(this,ps).getPendingProtocolErrors()}}am=new WeakMap,Ti=new WeakMap,Xl=new WeakMap,om=new WeakMap,Go=new WeakMap,ps=new WeakMap,cm=new WeakMap;function uR(s){let t=`${s.error} ${s.message}`;return s.stacktrace&&(t+=` ${s.stacktrace}`),t}function lR(s){return s.method.startsWith("cdp.")}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const dR=(s,...t)=>{pc(`bidi:${s}`)(t)};async function hR(s){const t=new pR,e=new fR(s),r={send(o){t.emitMessage(JSON.parse(o))},close(){a.close(),e.close(),s.dispose()},onmessage(o){}};t.on("bidiResponse",o=>{r.onmessage(JSON.stringify(o))});const n=new UE(s.url(),r,s.delay,s.timeout),a=await Cg.BidiServer.createAndStart(t,e,e.browserClient(),"",void 0,dR);return n}class fR{constructor(t){l(this,um);l(this,Xo,new Map);l(this,Jo);f(this,um,t),f(this,Jo,new HE(t))}browserClient(){return i(this,Jo)}getCdpClient(t){const e=i(this,um).session(t);if(!e)throw new Error(`Unknown CDP session with id ${t}`);if(!i(this,Xo).has(e)){const r=new HE(e,t,i(this,Jo));return i(this,Xo).set(e,r),r}return i(this,Xo).get(e)}close(){i(this,Jo).close();for(const t of i(this,Xo).values())t.close()}}um=new WeakMap,Xo=new WeakMap,Jo=new WeakMap;class HE extends Cg.EventEmitter{constructor(e,r,n){super();l(this,Jl,!1);l(this,Yo);T(this,"sessionId");l(this,lm);l(this,dm,(e,r)=>{this.emit(e,r)});f(this,Yo,e),this.sessionId=r,f(this,lm,n),i(this,Yo).on("*",i(this,dm))}browserClient(){return i(this,lm)}async sendCommand(e,...r){if(!i(this,Jl))try{return await i(this,Yo).send(e,...r)}catch(n){if(i(this,Jl))return;throw n}}close(){i(this,Yo).off("*",i(this,dm)),f(this,Jl,!0)}isCloseError(e){return e instanceof Nr}}Jl=new WeakMap,Yo=new WeakMap,lm=new WeakMap,dm=new WeakMap;class pR extends Cg.EventEmitter{constructor(){super(...arguments);l(this,Yl,async e=>{})}emitMessage(e){i(this,Yl).call(this,e)}setOnMessage(e){f(this,Yl,e)}async sendMessage(e){this.emit("bidiResponse",e)}close(){f(this,Yl,async e=>{})}}Yl=new WeakMap;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var mR=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},gR=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let wR=(()=>{var r,n,a,o,c,u,Q1,Dy,Z1,m;let s=ie,t=[],e;return m=class extends s{constructor(v){super();l(this,u);l(this,r,mR(this,t));l(this,n);l(this,a);l(this,o,new rt);l(this,c);f(this,a,v)}static from(v){var S;const y=new m(v);return g(S=y,u,Q1).call(S),y}get disposed(){return i(this,o).disposed}get request(){return i(this,r)}get navigation(){return i(this,n)}dispose(){this[ae]()}[(e=[Es],ae)](){i(this,o).dispose(),super[ae]()}},r=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,Q1=function(){const v=i(this,o).use(new ie(i(this,a)));v.once("closed",()=>{this.emit("failed",{url:i(this,a).url,timestamp:new Date}),this.dispose()}),v.on("request",({request:S})=>{if(S.navigation===void 0||!g(this,u,Dy).call(this,S.navigation))return;f(this,r,S),this.emit("request",S),i(this,o).use(new ie(i(this,r))).on("redirect",k=>{f(this,r,k)})});const y=i(this,o).use(new ie(i(this,u,Z1)));y.on("browsingContext.navigationStarted",S=>{S.context!==i(this,a).id||i(this,n)!==void 0||f(this,n,m.from(i(this,a)))});for(const S of["browsingContext.domContentLoaded","browsingContext.load"])y.on(S,E=>{E.context!==i(this,a).id||E.navigation===null||!g(this,u,Dy).call(this,E.navigation)||this.dispose()});for(const[S,E]of[["browsingContext.fragmentNavigated","fragment"],["browsingContext.navigationFailed","failed"],["browsingContext.navigationAborted","aborted"]])y.on(S,k=>{k.context!==i(this,a).id||!g(this,u,Dy).call(this,k.navigation)||(this.emit(E,{url:k.url,timestamp:new Date(k.timestamp)}),this.dispose())})},Dy=function(v){return i(this,n)!==void 0&&!i(this,n).disposed?!1:i(this,c)===void 0?(f(this,c,v),!0):i(this,c)===v},Z1=function(){return i(this,a).userContext.browser.session},(()=>{const v=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;gR(m,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:y=>"dispose"in y,get:y=>y.dispose},metadata:v},null,t),v&&Object.defineProperty(m,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),m})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var yR=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},Jd=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},mb;let gb=(()=>{var c,u;let s=ie,t=[],e,r,n,a,o;return u=class extends s{constructor(p,m){super();l(this,c,yR(this,t));T(this,"disposables",new rt);T(this,"id");T(this,"origin");T(this,"executionContextId");this.id=p,this.origin=m}get disposed(){return i(this,c)!==void 0}get target(){return{realm:this.id}}dispose(p){f(this,c,p),this[ae]()}async disown(p){await this.session.send("script.disown",{target:this.target,handles:p})}async callFunction(p,m,w={}){const{result:b}=await this.session.send("script.callFunction",{functionDeclaration:p,awaitPromise:m,target:this.target,...w});return b}async evaluate(p,m,w={}){const{result:b}=await this.session.send("script.evaluate",{expression:p,awaitPromise:m,target:this.target,...w});return b}async resolveExecutionContextId(){if(!this.executionContextId){const{result:p}=await this.session.connection.send("cdp.resolveRealm",{realm:this.id});this.executionContextId=p.executionContextId}return this.executionContextId}[(e=[Es],r=[G(p=>i(p,c))],n=[G(p=>i(p,c))],a=[G(p=>i(p,c))],o=[G(p=>i(p,c))],ae)](){i(this,c)??f(this,c,"Realm already destroyed, probably because all associated browsing contexts closed."),this.emit("destroyed",{reason:i(this,c)}),this.disposables.dispose(),super[ae]()}},c=new WeakMap,(()=>{const p=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;Jd(u,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:m=>"dispose"in m,get:m=>m.dispose},metadata:p},null,t),Jd(u,null,r,{kind:"method",name:"disown",static:!1,private:!1,access:{has:m=>"disown"in m,get:m=>m.disown},metadata:p},null,t),Jd(u,null,n,{kind:"method",name:"callFunction",static:!1,private:!1,access:{has:m=>"callFunction"in m,get:m=>m.callFunction},metadata:p},null,t),Jd(u,null,a,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:m=>"evaluate"in m,get:m=>m.evaluate},metadata:p},null,t),Jd(u,null,o,{kind:"method",name:"resolveExecutionContextId",static:!1,private:!1,access:{has:m=>"resolveExecutionContextId"in m,get:m=>m.resolveExecutionContextId},metadata:p},null,t),p&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p})})(),u})();const Hb=class Hb extends gb{constructor(e,r){super("","");l(this,ry);T(this,"browsingContext");T(this,"sandbox");l(this,hm,new Map);this.browsingContext=e,this.sandbox=r}static from(e,r){var a;const n=new Hb(e,r);return g(a=n,ry,eP).call(a),n}get session(){return this.browsingContext.userContext.browser.session}get target(){return{context:this.browsingContext.id,sandbox:this.sandbox}}};hm=new WeakMap,ry=new WeakSet,eP=function(){this.disposables.use(new ie(this.browsingContext)).on("closed",({reason:n})=>{this.dispose(n)});const r=this.disposables.use(new ie(this.session));r.on("script.realmCreated",n=>{n.type!=="window"||n.context!==this.browsingContext.id||n.sandbox!==this.sandbox||(this.id=n.realm,this.origin=n.origin,this.executionContextId=void 0,this.emit("updated",this))}),r.on("script.realmCreated",n=>{if(n.type!=="dedicated-worker"||!n.owners.includes(this.id))return;const a=yb.from(this,n.realm,n.origin);i(this,hm).set(a.id,a);const o=this.disposables.use(new ie(a));o.once("destroyed",()=>{o.removeAllListeners(),i(this,hm).delete(a.id)}),this.emit("worker",a)})};let wb=Hb;class yb extends gb{constructor(e,r,n){super(r,n);l(this,iy);l(this,fm,new Map);T(this,"owners");this.owners=new Set([e])}static from(e,r,n){var o;const a=new mb(e,r,n);return g(o=a,iy,tP).call(o),a}get session(){return this.owners.values().next().value.session}}fm=new WeakMap,iy=new WeakSet,tP=function(){const e=this.disposables.use(new ie(this.session));e.on("script.realmDestroyed",r=>{r.realm===this.id&&this.dispose("Realm already destroyed.")}),e.on("script.realmCreated",r=>{if(r.type!=="dedicated-worker"||!r.owners.includes(this.id))return;const n=mb.from(this,r.realm,r.origin);i(this,fm).set(n.id,n),this.disposables.use(new ie(n)).once("destroyed",()=>{i(this,fm).delete(n.id)}),this.emit("worker",n)})},mb=yb;const qb=class qb extends gb{constructor(e,r,n){super(r,n);l(this,sy);l(this,pm,new Map);T(this,"browser");this.browser=e}static from(e,r,n){var o;const a=new qb(e,r,n);return g(o=a,sy,rP).call(o),a}get session(){return this.browser.session}};pm=new WeakMap,sy=new WeakSet,rP=function(){const e=this.disposables.use(new ie(this.session));e.on("script.realmDestroyed",r=>{r.realm===this.id&&this.dispose("Realm already destroyed.")}),e.on("script.realmCreated",r=>{if(r.type!=="dedicated-worker"||!r.owners.includes(this.id))return;const n=yb.from(this,r.realm,r.origin);i(this,pm).set(n.id,n),this.disposables.use(new ie(n)).once("destroyed",()=>{i(this,pm).delete(n.id)}),this.emit("worker",n)})};let vb=qb;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var vR=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},bR=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let SR=(()=>{var r,n,a,o,c,u,d,iP,ac,m;let s=ie,t=[],e;return m=class extends s{constructor(v,y){super();l(this,d);l(this,r,vR(this,t));l(this,n);l(this,a);l(this,o);l(this,c,new rt);l(this,u);f(this,o,v),f(this,u,y)}static from(v,y){var E;const S=new m(v,y);return g(E=S,d,iP).call(E),S}get disposed(){return i(this,c).disposed}get error(){return i(this,r)}get headers(){return i(this,u).request.headers}get id(){return i(this,u).request.request}get initiator(){return i(this,u).initiator}get method(){return i(this,u).request.method}get navigation(){return i(this,u).navigation??void 0}get redirect(){return i(this,n)}get lastRedirect(){let v=i(this,n);for(;v;){if(v&&!i(v,n))return v;v=i(v,n)}return v}get response(){return i(this,a)}get url(){return i(this,u).request.url}get isBlocked(){return i(this,u).isBlocked}get resourceType(){return i(this,u).request["goog:resourceType"]??void 0}get postData(){return i(this,u).request["goog:postData"]??void 0}get hasPostData(){return i(this,u).request["goog:hasPostData"]??!1}async continueRequest({url:v,method:y,headers:S,cookies:E,body:k}){await i(this,d,ac).send("network.continueRequest",{request:this.id,url:v,method:y,headers:S,body:k,cookies:E})}async failRequest(){await i(this,d,ac).send("network.failRequest",{request:this.id})}async provideResponse({statusCode:v,reasonPhrase:y,headers:S,body:E}){await i(this,d,ac).send("network.provideResponse",{request:this.id,statusCode:v,reasonPhrase:y,headers:S,body:E})}async continueWithAuth(v){v.action==="provideCredentials"?await i(this,d,ac).send("network.continueWithAuth",{request:this.id,action:v.action,credentials:v.credentials}):await i(this,d,ac).send("network.continueWithAuth",{request:this.id,action:v.action})}dispose(){this[ae]()}[(e=[Es],ae)](){i(this,c).dispose(),super[ae]()}timing(){return i(this,u).request.timings}},r=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakSet,iP=function(){i(this,c).use(new ie(i(this,o))).once("closed",({reason:S})=>{f(this,r,S),this.emit("error",i(this,r)),this.dispose()});const y=i(this,c).use(new ie(i(this,d,ac)));y.on("network.beforeRequestSent",S=>{S.context!==i(this,o).id||S.request.request!==this.id||S.redirectCount!==i(this,u).redirectCount+1||(f(this,n,m.from(i(this,o),S)),this.emit("redirect",i(this,n)),this.dispose())}),y.on("network.authRequired",S=>{S.context!==i(this,o).id||S.request.request!==this.id||!S.isBlocked||this.emit("authenticate",void 0)}),y.on("network.fetchError",S=>{S.context!==i(this,o).id||S.request.request!==this.id||i(this,u).redirectCount!==S.redirectCount||(f(this,r,S.errorText),this.emit("error",i(this,r)),this.dispose())}),y.on("network.responseCompleted",S=>{S.context!==i(this,o).id||S.request.request!==this.id||i(this,u).redirectCount!==S.redirectCount||(f(this,a,S.response),i(this,u).request.timings=S.request.timings,this.emit("success",i(this,a)),!(i(this,a).status>=300&&i(this,a).status<400)&&this.dispose())})},ac=function(){return i(this,o).userContext.browser.session},(()=>{const v=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;bR(m,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:y=>"dispose"in y,get:y=>y.dispose},metadata:v},null,t),v&&Object.defineProperty(m,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),m})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var CR=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},qE=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let kR=(()=>{var n,a,o,c,sP,pS,h;let s=ie,t=[],e,r;return h=class extends s{constructor(w,b){super();l(this,c);l(this,n,CR(this,t));l(this,a);l(this,o,new rt);T(this,"browsingContext");T(this,"info");this.browsingContext=w,this.info=b}static from(w,b){var y;const v=new h(w,b);return g(y=v,c,sP).call(y),v}get closed(){return i(this,n)!==void 0}get disposed(){return this.closed}get handled(){return this.info.handler==="accept"||this.info.handler==="dismiss"?!0:i(this,a)!==void 0}get result(){return i(this,a)}dispose(w){f(this,n,w),this[ae]()}async handle(w={}){return await i(this,c,pS).send("browsingContext.handleUserPrompt",{...w,context:this.info.context}),i(this,a)}[(e=[Es],r=[G(w=>i(w,n))],ae)](){i(this,n)??f(this,n,"User prompt already closed, probably because the associated browsing context was destroyed."),this.emit("closed",{reason:i(this,n)}),i(this,o).dispose(),super[ae]()}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,sP=function(){i(this,o).use(new ie(this.browsingContext)).once("closed",({reason:v})=>{this.dispose(`User prompt already closed: ${v}`)}),i(this,o).use(new ie(i(this,c,pS))).on("browsingContext.userPromptClosed",v=>{v.context===this.browsingContext.id&&(f(this,a,v),this.emit("handled",v),this.dispose("User prompt already handled."))})},pS=function(){return this.browsingContext.userContext.browser.session},(()=>{const w=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;qE(h,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:b=>"dispose"in b,get:b=>b.dispose},metadata:w},null,t),qE(h,null,r,{kind:"method",name:"handle",static:!1,private:!1,access:{has:b=>"handle"in b,get:b=>b.handle},metadata:w},null,t),w&&Object.defineProperty(h,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w})})(),h})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ER=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},We=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let xR=(()=>{var B,O,F,M,j,N,K,U,nP,et,mS,ee;let s=ie,t=[],e,r,n,a,o,c,u,d,h,p,m,w,b,v,y,S,E,k,_,A,D,P,C,I;return ee=class extends s{constructor($,R,he,Ae,pt){super();l(this,U);l(this,B,ER(this,t));l(this,O);l(this,F);l(this,M,new Map);l(this,j,new rt);l(this,N,new Map);l(this,K,new Map);T(this,"defaultRealm");T(this,"id");T(this,"parent");T(this,"userContext");T(this,"originalOpener");f(this,F,Ae),this.id=he,this.parent=R,this.userContext=$,this.originalOpener=pt,this.defaultRealm=g(this,U,mS).call(this)}static from($,R,he,Ae,pt){var ot;const Lt=new ee($,R,he,Ae,pt);return g(ot=Lt,U,nP).call(ot),Lt}get children(){return i(this,M).values()}get closed(){return i(this,O)!==void 0}get disposed(){return this.closed}get realms(){const $=this;return function*(){yield $.defaultRealm,yield*i($,N).values()}()}get top(){let $=this;for(let{parent:R}=$;R;{parent:R}=$)$=R;return $}get url(){return i(this,F)}dispose($){f(this,O,$),this[ae]()}async activate(){await i(this,U,et).send("browsingContext.activate",{context:this.id})}async captureScreenshot($={}){const{result:{data:R}}=await i(this,U,et).send("browsingContext.captureScreenshot",{context:this.id,...$});return R}async close($){await Promise.all([...i(this,M).values()].map(async R=>{await R.close($)})),await i(this,U,et).send("browsingContext.close",{context:this.id,promptUnload:$})}async traverseHistory($){await i(this,U,et).send("browsingContext.traverseHistory",{context:this.id,delta:$})}async navigate($,R){await i(this,U,et).send("browsingContext.navigate",{context:this.id,url:$,wait:R})}async reload($={}){await i(this,U,et).send("browsingContext.reload",{context:this.id,...$})}async setCacheBehavior($){await i(this,U,et).send("network.setCacheBehavior",{contexts:[this.id],cacheBehavior:$})}async print($={}){const{result:{data:R}}=await i(this,U,et).send("browsingContext.print",{context:this.id,...$});return R}async handleUserPrompt($={}){await i(this,U,et).send("browsingContext.handleUserPrompt",{context:this.id,...$})}async setViewport($={}){await i(this,U,et).send("browsingContext.setViewport",{context:this.id,...$})}async performActions($){await i(this,U,et).send("input.performActions",{context:this.id,actions:$})}async releaseActions(){await i(this,U,et).send("input.releaseActions",{context:this.id})}createWindowRealm($){return g(this,U,mS).call(this,$)}async addPreloadScript($,R={}){return await this.userContext.browser.addPreloadScript($,{...R,contexts:[this]})}async addIntercept($){const{result:{intercept:R}}=await this.userContext.browser.session.send("network.addIntercept",{...$,contexts:[this.id]});return R}async removePreloadScript($){await this.userContext.browser.removePreloadScript($)}async getCookies($={}){const{result:{cookies:R}}=await i(this,U,et).send("storage.getCookies",{...$,partition:{type:"context",context:this.id}});return R}async setCookie($){await i(this,U,et).send("storage.setCookie",{cookie:$,partition:{type:"context",context:this.id}})}async setFiles($,R){await i(this,U,et).send("input.setFiles",{context:this.id,element:$,files:R})}async subscribe($){await i(this,U,et).subscribe($,[this.id])}async addInterception($){await i(this,U,et).subscribe($,[this.id])}[(e=[Es],r=[G($=>i($,O))],n=[G($=>i($,O))],a=[G($=>i($,O))],o=[G($=>i($,O))],c=[G($=>i($,O))],u=[G($=>i($,O))],d=[G($=>i($,O))],h=[G($=>i($,O))],p=[G($=>i($,O))],m=[G($=>i($,O))],w=[G($=>i($,O))],b=[G($=>i($,O))],v=[G($=>i($,O))],y=[G($=>i($,O))],S=[G($=>i($,O))],E=[G($=>i($,O))],k=[G($=>i($,O))],_=[G($=>i($,O))],A=[G($=>i($,O))],D=[G($=>i($,O))],P=[G($=>i($,O))],ae)](){i(this,O)??f(this,O,"Browsing context already closed, probably because the user context closed."),this.emit("closed",{reason:i(this,O)}),i(this,j).dispose(),super[ae]()}async deleteCookie(...$){await Promise.all($.map(async R=>{await i(this,U,et).send("storage.deleteCookies",{filter:R,partition:{type:"context",context:this.id}})}))}async locateNodes($,R){return(await i(this,U,et).send("browsingContext.locateNodes",{context:this.id,locator:$,startNodes:R.length?R:void 0})).result.nodes}},B=new WeakMap,O=new WeakMap,F=new WeakMap,M=new WeakMap,j=new WeakMap,N=new WeakMap,K=new WeakMap,U=new WeakSet,nP=function(){i(this,j).use(new ie(this.userContext)).once("closed",({reason:he})=>{this.dispose(`Browsing context already closed: ${he}`)});const R=i(this,j).use(new ie(i(this,U,et)));R.on("browsingContext.contextCreated",he=>{if(he.parent!==this.id)return;const Ae=ee.from(this.userContext,this,he.context,he.url,he.originalOpener);i(this,M).set(he.context,Ae);const pt=i(this,j).use(new ie(Ae));pt.once("closed",()=>{pt.removeAllListeners(),i(this,M).delete(Ae.id)}),this.emit("browsingcontext",{browsingContext:Ae})}),R.on("browsingContext.contextDestroyed",he=>{he.context===this.id&&this.dispose("Browsing context already closed.")}),R.on("browsingContext.domContentLoaded",he=>{he.context===this.id&&(f(this,F,he.url),this.emit("DOMContentLoaded",void 0))}),R.on("browsingContext.load",he=>{he.context===this.id&&(f(this,F,he.url),this.emit("load",void 0))}),R.on("browsingContext.navigationStarted",he=>{if(he.context!==this.id)return;for(const[pt,Lt]of i(this,K))Lt.disposed&&i(this,K).delete(pt);if(i(this,B)!==void 0&&!i(this,B).disposed)return;f(this,B,wR.from(this));const Ae=i(this,j).use(new ie(i(this,B)));for(const pt of["fragment","failed","aborted"])Ae.once(pt,({url:Lt})=>{Ae[ae](),f(this,F,Lt)});this.emit("navigation",{navigation:i(this,B)})}),R.on("network.beforeRequestSent",he=>{if(he.context!==this.id||i(this,K).has(he.request.request))return;const Ae=SR.from(this,he);i(this,K).set(Ae.id,Ae),this.emit("request",{request:Ae})}),R.on("log.entryAdded",he=>{he.source.context===this.id&&this.emit("log",{entry:he})}),R.on("browsingContext.userPromptOpened",he=>{if(he.context!==this.id)return;const Ae=kR.from(this,he);this.emit("userprompt",{userPrompt:Ae})})},et=function(){return this.userContext.browser.session},mS=function($){const R=wb.from(this,$);return R.on("worker",he=>{this.emit("worker",{realm:he})}),R},(()=>{const $=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;C=[G(R=>i(R,O))],I=[G(R=>i(R,O))],We(ee,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:R=>"dispose"in R,get:R=>R.dispose},metadata:$},null,t),We(ee,null,r,{kind:"method",name:"activate",static:!1,private:!1,access:{has:R=>"activate"in R,get:R=>R.activate},metadata:$},null,t),We(ee,null,n,{kind:"method",name:"captureScreenshot",static:!1,private:!1,access:{has:R=>"captureScreenshot"in R,get:R=>R.captureScreenshot},metadata:$},null,t),We(ee,null,a,{kind:"method",name:"close",static:!1,private:!1,access:{has:R=>"close"in R,get:R=>R.close},metadata:$},null,t),We(ee,null,o,{kind:"method",name:"traverseHistory",static:!1,private:!1,access:{has:R=>"traverseHistory"in R,get:R=>R.traverseHistory},metadata:$},null,t),We(ee,null,c,{kind:"method",name:"navigate",static:!1,private:!1,access:{has:R=>"navigate"in R,get:R=>R.navigate},metadata:$},null,t),We(ee,null,u,{kind:"method",name:"reload",static:!1,private:!1,access:{has:R=>"reload"in R,get:R=>R.reload},metadata:$},null,t),We(ee,null,d,{kind:"method",name:"setCacheBehavior",static:!1,private:!1,access:{has:R=>"setCacheBehavior"in R,get:R=>R.setCacheBehavior},metadata:$},null,t),We(ee,null,h,{kind:"method",name:"print",static:!1,private:!1,access:{has:R=>"print"in R,get:R=>R.print},metadata:$},null,t),We(ee,null,p,{kind:"method",name:"handleUserPrompt",static:!1,private:!1,access:{has:R=>"handleUserPrompt"in R,get:R=>R.handleUserPrompt},metadata:$},null,t),We(ee,null,m,{kind:"method",name:"setViewport",static:!1,private:!1,access:{has:R=>"setViewport"in R,get:R=>R.setViewport},metadata:$},null,t),We(ee,null,w,{kind:"method",name:"performActions",static:!1,private:!1,access:{has:R=>"performActions"in R,get:R=>R.performActions},metadata:$},null,t),We(ee,null,b,{kind:"method",name:"releaseActions",static:!1,private:!1,access:{has:R=>"releaseActions"in R,get:R=>R.releaseActions},metadata:$},null,t),We(ee,null,v,{kind:"method",name:"createWindowRealm",static:!1,private:!1,access:{has:R=>"createWindowRealm"in R,get:R=>R.createWindowRealm},metadata:$},null,t),We(ee,null,y,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:R=>"addPreloadScript"in R,get:R=>R.addPreloadScript},metadata:$},null,t),We(ee,null,S,{kind:"method",name:"addIntercept",static:!1,private:!1,access:{has:R=>"addIntercept"in R,get:R=>R.addIntercept},metadata:$},null,t),We(ee,null,E,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:R=>"removePreloadScript"in R,get:R=>R.removePreloadScript},metadata:$},null,t),We(ee,null,k,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:R=>"getCookies"in R,get:R=>R.getCookies},metadata:$},null,t),We(ee,null,_,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:R=>"setCookie"in R,get:R=>R.setCookie},metadata:$},null,t),We(ee,null,A,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:R=>"setFiles"in R,get:R=>R.setFiles},metadata:$},null,t),We(ee,null,D,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:R=>"subscribe"in R,get:R=>R.subscribe},metadata:$},null,t),We(ee,null,P,{kind:"method",name:"addInterception",static:!1,private:!1,access:{has:R=>"addInterception"in R,get:R=>R.addInterception},metadata:$},null,t),We(ee,null,C,{kind:"method",name:"deleteCookie",static:!1,private:!1,access:{has:R=>"deleteCookie"in R,get:R=>R.deleteCookie},metadata:$},null,t),We(ee,null,I,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:R=>"locateNodes"in R,get:R=>R.locateNodes},metadata:$},null,t),$&&Object.defineProperty(ee,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:$})})(),ee})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var _R=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},Lc=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let pw=(()=>{var u,d,h,p,m,w,aP,oc;let s=ie,t=[],e,r,n,a,o,c;return u=class extends s{constructor(E,k){super();l(this,w);l(this,d,_R(this,t));l(this,h,new Map);l(this,p,new rt);l(this,m);T(this,"browser");f(this,m,k),this.browser=E}static create(E,k){var A;const _=new u(E,k);return g(A=_,w,aP).call(A),_}get browsingContexts(){return i(this,h).values()}get closed(){return i(this,d)!==void 0}get disposed(){return this.closed}get id(){return i(this,m)}dispose(E){f(this,d,E),this[ae]()}async createBrowsingContext(E,k={}){var D;const{result:{context:_}}=await i(this,w,oc).send("browsingContext.create",{type:E,...k,referenceContext:(D=k.referenceContext)==null?void 0:D.id,userContext:i(this,m)}),A=i(this,h).get(_);return z(A,"The WebDriver BiDi implementation is failing to create a browsing context correctly."),A}async remove(){try{await i(this,w,oc).send("browser.removeUserContext",{userContext:i(this,m)})}finally{this.dispose("User context already closed.")}}async getCookies(E={},k=void 0){const{result:{cookies:_}}=await i(this,w,oc).send("storage.getCookies",{...E,partition:{type:"storageKey",userContext:i(this,m),sourceOrigin:k}});return _}async setCookie(E,k){await i(this,w,oc).send("storage.setCookie",{cookie:E,partition:{type:"storageKey",sourceOrigin:k,userContext:this.id}})}async setPermissions(E,k,_){await i(this,w,oc).send("permissions.setPermission",{origin:E,descriptor:k,state:_,userContext:i(this,m)})}[(e=[Es],r=[G(E=>i(E,d))],n=[G(E=>i(E,d))],a=[G(E=>i(E,d))],o=[G(E=>i(E,d))],c=[G(E=>i(E,d))],ae)](){i(this,d)??f(this,d,"User context already closed, probably because the browser disconnected/closed."),this.emit("closed",{reason:i(this,d)}),i(this,p).dispose(),super[ae]()}},d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,w=new WeakSet,aP=function(){const E=i(this,p).use(new ie(this.browser));E.once("closed",({reason:_})=>{this.dispose(`User context was closed: ${_}`)}),E.once("disconnected",({reason:_})=>{this.dispose(`User context was closed: ${_}`)}),i(this,p).use(new ie(i(this,w,oc))).on("browsingContext.contextCreated",_=>{if(_.parent||_.userContext!==i(this,m))return;const A=xR.from(this,void 0,_.context,_.url,_.originalOpener);i(this,h).set(A.id,A);const D=i(this,p).use(new ie(A));D.on("closed",()=>{D.removeAllListeners(),i(this,h).delete(A.id)}),this.emit("browsingcontext",{browsingContext:A})})},oc=function(){return this.browser.session},(()=>{const E=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;Lc(u,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:k=>"dispose"in k,get:k=>k.dispose},metadata:E},null,t),Lc(u,null,r,{kind:"method",name:"createBrowsingContext",static:!1,private:!1,access:{has:k=>"createBrowsingContext"in k,get:k=>k.createBrowsingContext},metadata:E},null,t),Lc(u,null,n,{kind:"method",name:"remove",static:!1,private:!1,access:{has:k=>"remove"in k,get:k=>k.remove},metadata:E},null,t),Lc(u,null,a,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:k=>"getCookies"in k,get:k=>k.getCookies},metadata:E},null,t),Lc(u,null,o,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:k=>"setCookie"in k,get:k=>k.setCookie},metadata:E},null,t),Lc(u,null,c,{kind:"method",name:"setPermissions",static:!1,private:!1,access:{has:k=>"setPermissions"in k,get:k=>k.setPermissions},metadata:E},null,t),E&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:E})})(),T(u,"DEFAULT","default"),u})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Yd{static deserialize(t){var e,r,n,a;if(!t){te("Service did not produce a result.");return}switch(t.type){case"array":return(e=t.value)==null?void 0:e.map(o=>this.deserialize(o));case"set":return(r=t.value)==null?void 0:r.reduce((o,c)=>o.add(this.deserialize(c)),new Set);case"object":return(n=t.value)==null?void 0:n.reduce((o,c)=>{const{key:u,value:d}=g(this,Qo,gS).call(this,c);return o[u]=d,o},{});case"map":return(a=t.value)==null?void 0:a.reduce((o,c)=>{const{key:u,value:d}=g(this,Qo,gS).call(this,c);return o.set(u,d)},new Map);case"promise":return{};case"regexp":return new RegExp(t.value.pattern,t.value.flags);case"date":return new Date(t.value);case"undefined":return;case"null":return null;case"number":return g(this,Qo,oP).call(this,t.value);case"bigint":return BigInt(t.value);case"boolean":return!!t.value;case"string":return t.value}te(`Deserialization of type ${t.type} not supported.`)}}Qo=new WeakSet,oP=function(t){switch(t){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:return t}},gS=function([t,e]){const r=typeof t=="string"?t:this.deserialize(t),n=this.deserialize(e);return{key:r,value:n}},l(Yd,Qo);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Wb=class Wb extends OC{constructor(e){super(e.info.type,e.info.message,e.info.defaultValue);l(this,mm);f(this,mm,e),this.handled=e.handled}static from(e){return new Wb(e)}async handle(e){await i(this,mm).handle({accept:e.accept,userText:e.text})}};mm=new WeakMap;let bb=Wb;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const zb=class zb extends Zn{constructor(e,r){super();l(this,Ii);T(this,"realm");l(this,Ql,!1);f(this,Ii,e),this.realm=r}static from(e,r){return new zb(e,r)}get disposed(){return i(this,Ql)}async jsonValue(){return await this.evaluate(e=>e)}asElement(){return null}async dispose(){i(this,Ql)||(f(this,Ql,!0),await this.realm.destroyHandles([this]))}get isPrimitiveValue(){switch(i(this,Ii).type){case"string":case"number":case"bigint":case"boolean":case"undefined":case"null":return!0;default:return!1}}toString(){return this.isPrimitiveValue?"JSHandle:"+Yd.deserialize(i(this,Ii)):"JSHandle@"+i(this,Ii).type}get id(){return"handle"in i(this,Ii)?i(this,Ii).handle:void 0}remoteValue(){return i(this,Ii)}remoteObject(){throw new fe("Not available in WebDriver BiDi")}};Ii=new WeakMap,Ql=new WeakMap;let Ms=zb;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var PR=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},WE=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},TR=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},IR=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});let Qd=(()=>{var a;var s;let t=Id,e=[],r,n;return a=class extends t{static from(c,u){return new a(c,u)}constructor(c,u){super(Ms.from(c,u)),PR(this,e)}get realm(){return this.handle.realm}get frame(){return this.realm.environment}remoteValue(){return this.handle.remoteValue()}async autofill(c){const u=this.frame.client,h=(await u.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,p=this.frame._id;await u.send("Autofill.trigger",{fieldId:h,frameId:p,card:c.creditCard})}async contentFrame(){const c={stack:[],error:void 0,hasError:!1};try{const d=TR(c,await this.evaluateHandle(h=>{if(h instanceof HTMLIFrameElement||h instanceof HTMLFrameElement)return h.contentWindow}),!1).remoteValue();return d.type==="window"?this.frame.page().frames().find(h=>h._id===d.value.context)??null:null}catch(u){c.error=u,c.hasError=!0}finally{IR(c)}}async uploadFile(...c){const u=ks.value.path;c=c.map(d=>u.win32.isAbsolute(d)||u.posix.isAbsolute(d)?d:u.resolve(d)),await this.frame.setFiles(this,c)}async*queryAXTree(c,u){const d=await this.frame.locateNodes(this,{type:"accessibility",value:{role:u,name:c}});return yield*yc.map(d,h=>Promise.resolve(a.from(h,this.realm)))}},(()=>{const c=typeof Symbol=="function"&&Symbol.metadata?Object.create(t[Symbol.metadata]??null):void 0;r=[G()],n=[G(),(s=Id).bindIsolatedHandle.bind(s)],WE(a,null,r,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:u=>"autofill"in u,get:u=>u.autofill},metadata:c},null,e),WE(a,null,n,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:u=>"contentFrame"in u,get:u=>u.contentFrame},metadata:c},null,e),c&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),a})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Sb=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},MR=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});const Vb=class Vb{constructor(t,e,r,n=!1){l(this,Mi);l(this,jn);T(this,"name");l(this,gm);l(this,Zl);l(this,ed);l(this,wm,[]);l(this,ym,new rt);l(this,ny,async t=>{const e={stack:[],error:void 0,hasError:!1};try{if(t.channel!==i(this,ed))return;const r=g(this,Mi,lP).call(this,t.source);if(!r)return;const n=Sb(e,Ms.from(t.data,r),!1),a=Sb(e,await n.evaluateHandle(([,,d])=>d),!1),o=Sb(e,new rt,!1),c=[];for(const[d,h]of await a.getProperties()){if(o.use(h),h instanceof Qd){c[+d]=h,o.use(h);continue}c[+d]=h.jsonValue()}let u;try{u=await i(this,gm).call(this,...await Promise.all(c))}catch(d){try{d instanceof Error?await n.evaluate(([,h],p,m,w)=>{const b=new Error(m);b.name=p,w&&(b.stack=w),h(b)},d.name,d.message,d.stack):await n.evaluate(([,h],p)=>{h(p)},d)}catch(h){te(h)}return}try{await n.evaluate(([d],h)=>{d(h)},u)}catch(d){te(d)}}catch(r){e.error=r,e.hasError=!0}finally{MR(e)}});f(this,jn,t),this.name=e,f(this,gm,r),f(this,Zl,n),f(this,ed,`__puppeteer__${i(this,jn)._id}_page_exposeFunction_${this.name}`)}static async from(t,e,r,n=!1){var o;const a=new Vb(t,e,r,n);return await g(o=a,Mi,cP).call(o),a}[Symbol.dispose](){this[Symbol.asyncDispose]().catch(te)}async[Symbol.asyncDispose](){i(this,ym).dispose(),await Promise.all(i(this,wm).map(async([t,e])=>{const r=i(this,Zl)?t.isolatedRealm():t.mainRealm();try{await Promise.all([r.evaluate(n=>{delete globalThis[n]},this.name),...t.childFrames().map(n=>n.evaluate(a=>{delete globalThis[a]},this.name)),t.browsingContext.removePreloadScript(e)])}catch(n){te(n)}}))}};jn=new WeakMap,gm=new WeakMap,Zl=new WeakMap,ed=new WeakMap,wm=new WeakMap,ym=new WeakMap,Mi=new WeakSet,cP=async function(){const t=i(this,Mi,uP),e={type:"channel",value:{channel:i(this,ed),ownership:"root"}};i(this,ym).use(new ie(t)).on(Re.ChromiumBidi.Script.EventNames.Message,i(this,ny));const n=ri(wc(o=>{Object.assign(globalThis,{[PLACEHOLDER("name")]:function(...c){return new Promise((u,d)=>{o([u,d,c])})}})},{name:JSON.stringify(this.name)})),a=[i(this,jn)];for(const o of a)a.push(...o.childFrames());await Promise.all(a.map(async o=>{const c=i(this,Zl)?o.isolatedRealm():o.mainRealm();try{const[u]=await Promise.all([o.browsingContext.addPreloadScript(n,{arguments:[e],sandbox:c.sandbox}),c.realm.callFunction(n,!1,{arguments:[e]})]);i(this,wm).push([o,u])}catch(u){te(u)}}))},uP=function(){return i(this,jn).page().browser().connection},ny=new WeakMap,lP=function(t){const e=g(this,Mi,dP).call(this,t.context);if(e)return e.realm(t.realm)},dP=function(t){const e=[i(this,jn)];for(const r of e){if(r._id===t)return r;e.push(...r.childFrames())}};let Zd=Vb;var AR=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},FR=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let zE=(()=>{var r,n,a,o,c,hP,d;let s=zC,t=[],e;return d=class extends s{constructor(m,w,b){super();l(this,c);l(this,r,AR(this,t));l(this,n);l(this,a);l(this,o,!1);f(this,r,m),f(this,n,w),f(this,o,b);const v=m["goog:securityDetails"];b&&v&&f(this,a,new yk(v))}static from(m,w,b){var y;const v=new d(m,w,b);return g(y=v,c,hP).call(y),v}remoteAddress(){return{ip:"",port:-1}}url(){return i(this,r).url}status(){return i(this,r).status}statusText(){return i(this,r).statusText}headers(){const m={};for(const w of i(this,r).headers)w.value.type==="string"&&(m[w.name.toLowerCase()]=w.value.value);return m}request(){return i(this,n)}fromCache(){return i(this,r).fromCache}timing(){const m=i(this,n).timing();return{requestTime:m.requestTime,proxyStart:-1,proxyEnd:-1,dnsStart:m.dnsStart,dnsEnd:m.dnsEnd,connectStart:m.connectStart,connectEnd:m.connectEnd,sslStart:m.tlsStart,sslEnd:-1,workerStart:-1,workerReady:-1,workerFetchStart:-1,workerRespondWithSettled:-1,workerRouterEvaluationStart:-1,workerCacheLookupStart:-1,sendStart:m.requestStart,sendEnd:-1,pushStart:-1,pushEnd:-1,receiveHeadersStart:m.responseStart,receiveHeadersEnd:m.responseEnd}}frame(){return i(this,n).frame()}fromServiceWorker(){return!1}securityDetails(){if(!i(this,o))throw new fe;return i(this,a)??null}content(){throw new fe}},r=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,hP=function(){var m,w;i(this,r).fromCache&&((m=i(this,n).frame())==null||m.page().trustedEmitter.emit("requestservedfromcache",i(this,n))),(w=i(this,n).frame())==null||w.page().trustedEmitter.emit("response",this)},(()=>{const m=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[$r],FR(d,null,e,{kind:"method",name:"remoteAddress",static:!1,private:!1,access:{has:w=>"remoteAddress"in w,get:w=>w.remoteAddress},metadata:m},null,t),m&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})})(),d})();var Cb;const kb=new WeakMap;class Eb extends hg{constructor(e,r,n){super();l(this,br);l(this,Zo);l(this,vm,null);T(this,"id");l(this,It);l(this,Xe);l(this,bm,!1);l(this,ay,async()=>{if(!i(this,It))return;const e=i(this,It).page()._credentials;e&&!i(this,bm)?(f(this,bm,!0),i(this,Xe).continueWithAuth({action:"provideCredentials",credentials:{type:"password",username:e.username,password:e.password}})):i(this,Xe).continueWithAuth({action:"cancel"})});kb.set(e,this),this.interception.enabled=e.isBlocked,f(this,Xe,e),f(this,It,r),f(this,Zo,n?i(n,Zo):[]),this.id=e.id}static from(e,r,n){var o;const a=new Cb(e,r,n);return g(o=a,br,fP).call(o),a}get client(){return i(this,It).client}url(){return i(this,Xe).url}resourceType(){if(!i(this,It).page().browser().cdpSupported)throw new fe;return(i(this,Xe).resourceType||"other").toLowerCase()}method(){return i(this,Xe).method}postData(){if(!i(this,It).page().browser().cdpSupported)throw new fe;return i(this,Xe).postData}hasPostData(){if(!i(this,It).page().browser().cdpSupported)throw new fe;return i(this,Xe).hasPostData}async fetchPostData(){throw new fe}headers(){const e={};for(const r of i(this,Xe).headers)e[r.name.toLowerCase()]=r.value.value;return{...e,...i(this,br,yS),...i(this,br,vS)}}response(){return i(this,vm)}failure(){return i(this,Xe).error===void 0?null:{errorText:i(this,Xe).error}}isNavigationRequest(){return i(this,Xe).navigation!==void 0}initiator(){return i(this,Xe).initiator}redirectChain(){return i(this,Zo).slice()}frame(){return i(this,It)}async continue(e,r){return await super.continue({headers:i(this,br,wS)?this.headers():void 0,...e},r)}async _continue(e={}){const r=VE(e.headers);return this.interception.handled=!0,await i(this,Xe).continueRequest({url:e.url,method:e.method,body:e.postData?{type:"base64",value:kC(e.postData)}:void 0,headers:r.length>0?r:void 0}).catch(n=>(this.interception.handled=!1,fg(n)))}async _abort(){return this.interception.handled=!0,await i(this,Xe).failRequest().catch(e=>{throw this.interception.handled=!1,e})}async _respond(e,r){this.interception.handled=!0;let n;e.body&&(n=hg.getResponse(e.body));const a=VE(e.headers),o=a.some(u=>u.name==="content-length");e.contentType&&a.push({name:"content-type",value:{type:"string",value:e.contentType}}),n!=null&&n.contentLength&&!o&&a.push({name:"content-length",value:{type:"string",value:String(n.contentLength)}});const c=e.status||200;return await i(this,Xe).provideResponse({statusCode:c,headers:a.length>0?a:void 0,reasonPhrase:WC[c],body:n!=null&&n.base64?{type:"base64",value:n==null?void 0:n.base64}:void 0}).catch(u=>{throw this.interception.handled=!1,u})}timing(){return i(this,Xe).timing()}}Zo=new WeakMap,vm=new WeakMap,It=new WeakMap,Xe=new WeakMap,br=new WeakSet,fP=function(){i(this,Xe).on("redirect",e=>{const r=Cb.from(e,i(this,It),this);i(this,Zo).push(this),e.once("success",()=>{i(this,It).page().trustedEmitter.emit("requestfinished",r)}),e.once("error",()=>{i(this,It).page().trustedEmitter.emit("requestfailed",r)}),r.finalizeInterceptions()}),i(this,Xe).once("success",e=>{f(this,vm,zE.from(e,this,i(this,It).page().browser().cdpSupported))}),i(this,Xe).on("authenticate",i(this,ay)),i(this,It).page().trustedEmitter.emit("request",this),i(this,br,wS)&&this.interception.handlers.push(async()=>{await this.continue({headers:this.headers()},0)})},wS=function(){return!!(Object.keys(i(this,br,yS)).length||Object.keys(i(this,br,vS)).length)},yS=function(){var e;return((e=i(this,It))==null?void 0:e.page()._extraHTTPHeaders)??{}},vS=function(){var e;return((e=i(this,It))==null?void 0:e.page()._userAgentHeaders)??{}},bm=new WeakMap,ay=new WeakMap,Cb=Eb;function VE(s){const t=[];for(const[e,r]of Object.entries(s??[]))if(!Object.is(r,void 0)){const n=Array.isArray(r)?r:[r];for(const a of n)t.push({name:e.toLowerCase(),value:{type:"string",value:String(a)}})}return t}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class GE extends Error{}class XE{static serialize(t){switch(typeof t){case"symbol":case"function":throw new GE(`Unable to serializable ${typeof t}`);case"object":return g(this,td,mP).call(this,t);case"undefined":return{type:"undefined"};case"number":return g(this,td,pP).call(this,t);case"bigint":return{type:"bigint",value:t.toString()};case"string":return{type:"string",value:t};case"boolean":return{type:"boolean",value:t}}}}td=new WeakSet,pP=function(t){let e;return Object.is(t,-0)?e="-0":Object.is(t,1/0)?e="Infinity":Object.is(t,-1/0)?e="-Infinity":Object.is(t,NaN)?e="NaN":e=t,{type:"number",value:e}},mP=function(t){if(t===null)return{type:"null"};if(Array.isArray(t))return{type:"array",value:t.map(r=>this.serialize(r))};if(wI(t)){try{JSON.stringify(t)}catch(r){throw r instanceof TypeError&&r.message.startsWith("Converting circular structure to JSON")&&(r.message+=" Recursive objects are not allowed."),r}const e=[];for(const r in t)e.push([this.serialize(r),this.serialize(t[r])]);return{type:"object",value:e}}else{if(yI(t))return{type:"regexp",value:{pattern:t.source,flags:t.flags}};if(vI(t))return{type:"date",value:t.toISOString()}}throw new GE("Custom object serialization not possible. Use plain objects instead.")},l(XE,td);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function DR(s){if(s.exception.type!=="error")return Yd.deserialize(s.exception);const[t="",...e]=s.text.split(": "),r=e.join(": "),n=new Error(r);n.name=t;const a=[];if(s.stackTrace&&a.length<Error.stackTraceLimit)for(const o of s.stackTrace.callFrames.reverse()){if(ur.isPuppeteerURL(o.url)&&o.url!==ur.INTERNAL_URL){const c=ur.parse(o.url);a.unshift(`    at ${o.functionName||c.functionName} (${c.functionName} at ${c.siteString}, <anonymous>:${o.lineNumber}:${o.columnNumber})`)}else a.push(`    at ${o.functionName||"<anonymous>"} (${o.url}:${o.lineNumber}:${o.columnNumber})`);if(a.length>=Error.stackTraceLimit)break}return n.stack=[s.text,...a].join(`
`),n}function JE(s,t){return e=>{throw e instanceof Yn?e.message+=` at ${s}`:e instanceof Xm&&(e.message=`Navigation timeout of ${t} ms exceeded`),e}}var OR=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},RR=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});class xb extends tk{constructor(e,r){super(r);l(this,Sm);T(this,"realm");T(this,"internalPuppeteerUtil");this.realm=e}initialize(){this.realm.on("destroyed",({reason:e})=>{this.taskManager.terminateAll(new Error(e)),this.dispose()}),this.realm.on("updated",()=>{this.internalPuppeteerUtil=void 0,this.taskManager.rerunAll()})}get puppeteerUtil(){const e=Promise.resolve();return Ed.inject(r=>{this.internalPuppeteerUtil&&this.internalPuppeteerUtil.then(n=>{n.dispose()}),this.internalPuppeteerUtil=e.then(()=>this.evaluateHandle(r))},!this.internalPuppeteerUtil),this.internalPuppeteerUtil}async evaluateHandle(e,...r){return await g(this,Sm,bS).call(this,!1,e,...r)}async evaluate(e,...r){return await g(this,Sm,bS).call(this,!0,e,...r)}createHandle(e){return(e.type==="node"||e.type==="window")&&this instanceof As?Qd.from(e,this):Ms.from(e,this)}async serializeAsync(e){return e instanceof lr&&(e=await e.get(this)),this.serialize(e)}serialize(e){if(e instanceof Ms||e instanceof Qd){if(e.realm!==this){if(!(e.realm instanceof As)||!(this instanceof As))throw new Error("Trying to evaluate JSHandle from different global types. Usually this means you're using a handle from a worker in a page or vice versa.");if(e.realm.environment!==this.environment)throw new Error("Trying to evaluate JSHandle from different frames. Usually this means you're using a handle from a page on a different page.")}if(e.disposed)throw new Error("JSHandle is disposed!");return e.remoteValue()}return XE.serialize(e)}async destroyHandles(e){if(this.disposed)return;const r=e.map(({id:n})=>n).filter(n=>n!==void 0);r.length!==0&&await this.realm.disown(r).catch(n=>{te(n)})}async adoptHandle(e){return await this.evaluateHandle(r=>r,e)}async transferHandle(e){if(e.realm===this)return e;const r=this.adoptHandle(e);return await e.dispose(),await r}}Sm=new WeakSet,bS=async function(e,r,...n){var h;const a=MC(((h=_C(r))==null?void 0:h.toString())??ur.INTERNAL_URL);let o;const c=e?"none":"root",u=e?{}:{maxObjectDepth:0,maxDomDepth:0};if(Li(r)){const p=Ym.test(r)?r:`${r}
${a}
`;o=this.realm.evaluate(p,!0,{resultOwnership:c,userActivation:!0,serializationOptions:u})}else{let p=ri(r);p=Ym.test(p)?p:`${p}
${a}
`,o=this.realm.callFunction(p,!0,{arguments:n.some(m=>m instanceof lr)?await Promise.all(n.map(m=>this.serializeAsync(m))):n.map(m=>this.serialize(m)),resultOwnership:c,userActivation:!0,serializationOptions:u})}const d=await o;if("type"in d&&d.type==="exception")throw DR(d.exceptionDetails);return e?Yd.deserialize(d.result):this.createHandle(d.result)};const cy=class cy extends xb{constructor(e,r){super(e,r.timeoutSettings);l(this,oy);l(this,rd);l(this,id,!1);f(this,rd,r)}static from(e,r){var a;const n=new cy(e,r);return g(a=n,oy,gP).call(a),n}get puppeteerUtil(){let e=Promise.resolve();return i(this,id)||(e=Promise.all([Zd.from(this.environment,"__ariaQuerySelector",Qn.queryOne,!!this.sandbox),Zd.from(this.environment,"__ariaQuerySelectorAll",async(r,n)=>{const a=Qn.queryAll(r,n);return await r.realm.evaluateHandle((...o)=>o,...await yc.collect(a))},!!this.sandbox)]),f(this,id,!0)),e.then(()=>super.puppeteerUtil)}get sandbox(){return this.realm.sandbox}get environment(){return i(this,rd)}async adoptBackendNode(e){const r={stack:[],error:void 0,hasError:!1};try{const{object:n}=await i(this,rd).client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:await this.realm.resolveExecutionContextId()});return await OR(r,Qd.from({handle:n.objectId,type:"node"},this),!1).evaluateHandle(o=>o)}catch(n){r.error=n,r.hasError=!0}finally{RR(r)}}};rd=new WeakMap,oy=new WeakSet,gP=function(){Px(cy.prototype,this,"initialize").call(this),this.realm.on("updated",()=>{this.environment.clearDocumentHandle(),f(this,id,!1)})},id=new WeakMap;let As=cy;const Gb=class Gb extends xb{constructor(e,r){super(e,r.timeoutSettings);l(this,Cm);f(this,Cm,r)}static from(e,r){const n=new Gb(e,r);return n.initialize(),n}get environment(){return i(this,Cm)}async adoptBackendNode(){throw new Error("Cannot adopt DOM nodes into a worker.")}};Cm=new WeakMap;let mw=Gb;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Xb=class Xb extends rk{constructor(e,r){super(r.origin);l(this,km);l(this,Em);f(this,km,e),f(this,Em,mw.from(r,this))}static from(e,r){return new Xb(e,r)}get frame(){return i(this,km)}mainRealm(){return i(this,Em)}get client(){throw new fe}};km=new WeakMap,Em=new WeakMap;let _b=Xb;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var LR=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},na=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},YE=function(s,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",t):t})};let QE=(()=>{var p,m,w,wP,SS,Oy,S,Ry,Ly,_;let s=HC,t=[],e,r,n,a,o,c,u,d,h;return _=class extends s{constructor(P,C){super();l(this,w);l(this,p,LR(this,t));T(this,"browsingContext");l(this,m,new WeakMap);T(this,"realms");T(this,"_id");T(this,"client");T(this,"accessibility");l(this,S,new Map);f(this,p,P),this.browsingContext=C,this._id=C.id,this.client=new Xd(this),this.realms={default:As.from(this.browsingContext.defaultRealm,this),internal:As.from(this.browsingContext.createWindowRealm(`__puppeteer_internal_${Math.ceil(Math.random()*1e4)}`),this)},this.accessibility=new ik(this.realms.default)}static from(P,C){var B;const I=new _(P,C);return g(B=I,w,wP).call(B),I}get timeoutSettings(){return this.page()._timeoutSettings}mainRealm(){return this.realms.default}isolatedRealm(){return this.realms.internal}realm(P){for(const C of Object.values(this.realms))if(C.realm.id===P)return C}page(){let P=i(this,p);for(;P instanceof _;)P=i(P,p);return P}url(){return this.browsingContext.url}parentFrame(){return i(this,p)instanceof _?i(this,p):null}childFrames(){return[...this.browsingContext.children].map(P=>i(this,m).get(P))}async goto(P,C={}){const[I]=await Promise.all([this.waitForNavigation(C),this.browsingContext.navigate(P,"interactive").catch(B=>{if(!(Cr(B)&&B.message.includes("net::ERR_HTTP_RESPONSE_CODE_FAILURE")))throw B})]).catch(JE(P,C.timeout??this.timeoutSettings.navigationTimeout()));return I}async setContent(P,C={}){await Promise.all([this.setFrameContent(P),yt(Um([i(this,w,Ry).call(this,C),i(this,w,Ly).call(this,C)]))])}async waitForNavigation(P={}){const{timeout:C=this.timeoutSettings.navigationTimeout(),signal:I}=P,B=this.childFrames().map(O=>{var F;return g(F=O,w,Oy).call(F)});return await yt(Um([Me(this.browsingContext,"navigation").pipe(fc()).pipe(zm(({navigation:O})=>i(this,w,Ry).call(this,P).pipe(oI(()=>B.length===0?Cs(void 0):Um(B)),Ft(Me(O,"fragment"),Me(O,"failed"),Me(O,"aborted").pipe(tt(({url:F})=>{throw new Error(`Navigation aborted: ${F}`)}))),zm(()=>{if(O.request){let F=function(M){return M.response||M.error?Cs(O):M.redirect?F(M.redirect):Me(M,"success").pipe(Ft(Me(M,"error")),Ft(Me(M,"redirect"))).pipe(zm(()=>F(M)))};return F(O.request)}return Cs(O)})))),i(this,w,Ly).call(this,P)]).pipe(tt(([O])=>{const F=O.request;if(!F)return null;const M=F.lastRedirect??F;return kb.get(M).response()}),Ft(er(C),gc(I),g(this,w,Oy).call(this).pipe(tt(()=>{throw new Nr("Frame detached.")})))))}waitForDevicePrompt(){throw new fe}get detached(){return this.browsingContext.closed}async exposeFunction(P,C){if(i(this,S).has(P))throw new Error(`Failed to add page binding with name ${P}: globalThis['${P}'] already exists!`);const I=await Zd.from(this,P,C);i(this,S).set(P,I)}async removeExposedFunction(P){const C=i(this,S).get(P);if(!C)throw new Error(`Failed to remove page binding with name ${P}: window['${P}'] does not exists!`);i(this,S).delete(P),await C[Symbol.asyncDispose]()}async createCDPSession(){if(!this.page().browser().cdpSupported)throw new fe;return await this.page().browser().cdpConnection._createSession({targetId:this._id})}async setFiles(P,C){await this.browsingContext.setFiles(P.remoteValue(),C)}async locateNodes(P,C){return await this.browsingContext.locateNodes(C,[P.remoteValue()])}},p=new WeakMap,m=new WeakMap,w=new WeakSet,wP=function(){for(const P of this.browsingContext.children)g(this,w,SS).call(this,P);this.browsingContext.on("browsingcontext",({browsingContext:P})=>{g(this,w,SS).call(this,P)}),this.browsingContext.on("closed",()=>{for(const P of Xd.sessions.values())P.frame===this&&P.onClose();this.page().trustedEmitter.emit("framedetached",this)}),this.browsingContext.on("request",({request:P})=>{const C=Eb.from(P,this);P.once("success",()=>{this.page().trustedEmitter.emit("requestfinished",C)}),P.once("error",()=>{this.page().trustedEmitter.emit("requestfailed",C)}),C.finalizeInterceptions()}),this.browsingContext.on("navigation",({navigation:P})=>{P.once("fragment",()=>{this.page().trustedEmitter.emit("framenavigated",this)})}),this.browsingContext.on("load",()=>{this.page().trustedEmitter.emit("load",void 0)}),this.browsingContext.on("DOMContentLoaded",()=>{this._hasStartedLoading=!0,this.page().trustedEmitter.emit("domcontentloaded",void 0),this.page().trustedEmitter.emit("framenavigated",this)}),this.browsingContext.on("userprompt",({userPrompt:P})=>{this.page().trustedEmitter.emit("dialog",bb.from(P))}),this.browsingContext.on("log",({entry:P})=>{if(this._id===P.source.context)if(NR(P)){const C=P.args.map(B=>this.mainRealm().createHandle(B)),I=C.reduce((B,O)=>{const F=O instanceof Ms&&O.isPrimitiveValue?Yd.deserialize(O.remoteValue()):O.toString();return`${B} ${F}`},"").slice(1);this.page().trustedEmitter.emit("console",new kv(P.method,I,C,BR(P.stackTrace)))}else if($R(P)){const C=new Error(P.text??""),I=C.message.split(`
`).length,B=C.stack.split(`
`).splice(0,I),O=[];if(P.stackTrace){for(const F of P.stackTrace.callFrames)if(O.push(`    at ${F.functionName||"<anonymous>"} (${F.url}:${F.lineNumber+1}:${F.columnNumber+1})`),O.length>=Error.stackTraceLimit)break}C.stack=[...B,...O].join(`
`),this.page().trustedEmitter.emit("pageerror",C)}else te(`Unhandled LogEntry with type "${P.type}", text "${P.text}" and level "${P.level}"`)}),this.browsingContext.on("worker",({realm:P})=>{const C=_b.from(this,P);P.on("destroyed",()=>{this.page().trustedEmitter.emit("workerdestroyed",C)}),this.page().trustedEmitter.emit("workercreated",C)})},SS=function(P){const C=_.from(this,P);return i(this,m).set(P,C),this.page().trustedEmitter.emit("frameattached",C),P.on("closed",()=>{i(this,m).delete(P)}),C},Oy=function(){return Xn(()=>this.detached?Cs(this):Me(this.page().trustedEmitter,"framedetached").pipe(Jn(P=>P===this)))},S=new WeakMap,Ry=function(){return o.value},Ly=function(){return u.value},(()=>{const P=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[be],r=[be],n=[be],a=[be],c=[be],d=[be],h=[be],na(_,null,e,{kind:"method",name:"goto",static:!1,private:!1,access:{has:C=>"goto"in C,get:C=>C.goto},metadata:P},null,t),na(_,null,r,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:C=>"setContent"in C,get:C=>C.setContent},metadata:P},null,t),na(_,null,n,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:C=>"waitForNavigation"in C,get:C=>C.waitForNavigation},metadata:P},null,t),na(_,o={value:YE(function(C={}){let{waitUntil:I="load"}=C;const{timeout:B=this.timeoutSettings.navigationTimeout()}=C;Array.isArray(I)||(I=[I]);const O=new Set;for(const F of I)switch(F){case"load":{O.add("load");break}case"domcontentloaded":{O.add("DOMContentLoaded");break}}return O.size===0?Cs(void 0):Um([...O].map(F=>Me(this.browsingContext,F))).pipe(tt(()=>{}),fc(),Ft(er(B),g(this,w,Oy).call(this).pipe(tt(()=>{throw new Error("Frame detached.")}))))},"#waitForLoad$")},a,{kind:"method",name:"#waitForLoad$",static:!1,private:!0,access:{has:C=>Zt(w,C),get:C=>i(C,w,Ry)},metadata:P},null,t),na(_,u={value:YE(function(C={}){let{waitUntil:I="load"}=C;Array.isArray(I)||(I=[I]);let B=1/0;for(const O of I)switch(O){case"networkidle0":{B=Math.min(0,B);break}case"networkidle2":{B=Math.min(2,B);break}}return B===1/0?Cs(void 0):this.page().waitForNetworkIdle$({idleTime:500,timeout:C.timeout??this.timeoutSettings.timeout(),concurrency:B})},"#waitForNetworkIdle$")},c,{kind:"method",name:"#waitForNetworkIdle$",static:!1,private:!0,access:{has:C=>Zt(w,C),get:C=>i(C,w,Ly)},metadata:P},null,t),na(_,null,d,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:C=>"setFiles"in C,get:C=>C.setFiles},metadata:P},null,t),na(_,null,h,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:C=>"locateNodes"in C,get:C=>C.locateNodes},metadata:P},null,t),P&&Object.defineProperty(_,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:P})})(),_})();function NR(s){return s.type==="console"}function $R(s){return s.type==="javascript"}function BR(s){const t=[];if(s)for(const e of s.callFrames)t.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});return t}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var rr;(function(s){s.None="none",s.Key="key",s.Pointer="pointer",s.Wheel="wheel"})(rr||(rr={}));var Ke;(function(s){s.Pause="pause",s.KeyDown="keyDown",s.KeyUp="keyUp",s.PointerUp="pointerUp",s.PointerDown="pointerDown",s.PointerMove="pointerMove",s.Scroll="scroll"})(Ke||(Ke={}));const eh=s=>{switch(s){case"\r":case`
`:s="Enter";break}if([...s].length===1)return s;switch(s){case"Cancel":return"";case"Help":return"";case"Backspace":return"";case"Tab":return"";case"Clear":return"";case"Enter":return"";case"Shift":case"ShiftLeft":return"";case"Control":case"ControlLeft":return"";case"Alt":case"AltLeft":return"";case"Pause":return"";case"Escape":return"";case"PageUp":return"";case"PageDown":return"";case"End":return"";case"Home":return"";case"ArrowLeft":return"";case"ArrowUp":return"";case"ArrowRight":return"";case"ArrowDown":return"";case"Insert":return"";case"Delete":return"";case"NumpadEqual":return"";case"Numpad0":return"";case"Numpad1":return"";case"Numpad2":return"";case"Numpad3":return"";case"Numpad4":return"";case"Numpad5":return"";case"Numpad6":return"";case"Numpad7":return"";case"Numpad8":return"";case"Numpad9":return"";case"NumpadMultiply":return"";case"NumpadAdd":return"";case"NumpadSubtract":return"";case"NumpadDecimal":return"";case"NumpadDivide":return"";case"F1":return"";case"F2":return"";case"F3":return"";case"F4":return"";case"F5":return"";case"F6":return"";case"F7":return"";case"F8":return"";case"F9":return"";case"F10":return"";case"F11":return"";case"F12":return"";case"Meta":case"MetaLeft":return"";case"ShiftRight":return"";case"ControlRight":return"";case"AltRight":return"";case"MetaRight":return"";case"Digit0":return"0";case"Digit1":return"1";case"Digit2":return"2";case"Digit3":return"3";case"Digit4":return"4";case"Digit5":return"5";case"Digit6":return"6";case"Digit7":return"7";case"Digit8":return"8";case"Digit9":return"9";case"KeyA":return"a";case"KeyB":return"b";case"KeyC":return"c";case"KeyD":return"d";case"KeyE":return"e";case"KeyF":return"f";case"KeyG":return"g";case"KeyH":return"h";case"KeyI":return"i";case"KeyJ":return"j";case"KeyK":return"k";case"KeyL":return"l";case"KeyM":return"m";case"KeyN":return"n";case"KeyO":return"o";case"KeyP":return"p";case"KeyQ":return"q";case"KeyR":return"r";case"KeyS":return"s";case"KeyT":return"t";case"KeyU":return"u";case"KeyV":return"v";case"KeyW":return"w";case"KeyX":return"x";case"KeyY":return"y";case"KeyZ":return"z";case"Semicolon":return";";case"Equal":return"=";case"Comma":return",";case"Minus":return"-";case"Period":return".";case"Slash":return"/";case"Backquote":return"`";case"BracketLeft":return"[";case"Backslash":return"\\";case"BracketRight":return"]";case"Quote":return'"';default:throw new Error(`Unknown key: "${s}"`)}};class ZE extends VC{constructor(e){super();l(this,ms);f(this,ms,e)}async down(e,r){await i(this,ms).mainFrame().browsingContext.performActions([{type:rr.Key,id:"__puppeteer_keyboard",actions:[{type:Ke.KeyDown,value:eh(e)}]}])}async up(e){await i(this,ms).mainFrame().browsingContext.performActions([{type:rr.Key,id:"__puppeteer_keyboard",actions:[{type:Ke.KeyUp,value:eh(e)}]}])}async press(e,r={}){const{delay:n=0}=r,a=[{type:Ke.KeyDown,value:eh(e)}];n>0&&a.push({type:Ke.Pause,duration:n}),a.push({type:Ke.KeyUp,value:eh(e)}),await i(this,ms).mainFrame().browsingContext.performActions([{type:rr.Key,id:"__puppeteer_keyboard",actions:a}])}async type(e,r={}){const{delay:n=0}=r,a=[...e].map(eh),o=[];if(n<=0)for(const c of a)o.push({type:Ke.KeyDown,value:c},{type:Ke.KeyUp,value:c});else for(const c of a)o.push({type:Ke.KeyDown,value:c},{type:Ke.Pause,duration:n},{type:Ke.KeyUp,value:c});await i(this,ms).mainFrame().browsingContext.performActions([{type:rr.Key,id:"__puppeteer_keyboard",actions:o}])}async sendCharacter(e){if([...e].length>1)throw new Error("Cannot send more than 1 character.");await(await i(this,ms).focusedFrame()).isolatedRealm().evaluate(async n=>{document.execCommand("insertText",!1,n)},e)}}ms=new WeakMap;const Pb=s=>{switch(s){case $e.Left:return 0;case $e.Middle:return 1;case $e.Right:return 2;case $e.Back:return 3;case $e.Forward:return 4}};class ex extends GC{constructor(e){super();l(this,Ai);l(this,ec,{x:0,y:0});f(this,Ai,e)}async reset(){f(this,ec,{x:0,y:0}),await i(this,Ai).mainFrame().browsingContext.releaseActions()}async move(e,r,n={}){const a=i(this,ec),o={x:Math.round(e),y:Math.round(r)},c=[],u=n.steps??0;for(let d=0;d<u;++d)c.push({type:Ke.PointerMove,x:a.x+(o.x-a.x)*(d/u),y:a.y+(o.y-a.y)*(d/u),origin:n.origin});c.push({type:Ke.PointerMove,...o,origin:n.origin}),f(this,ec,o),await i(this,Ai).mainFrame().browsingContext.performActions([{type:rr.Pointer,id:"__puppeteer_mouse",actions:c}])}async down(e={}){await i(this,Ai).mainFrame().browsingContext.performActions([{type:rr.Pointer,id:"__puppeteer_mouse",actions:[{type:Ke.PointerDown,button:Pb(e.button??$e.Left)}]}])}async up(e={}){await i(this,Ai).mainFrame().browsingContext.performActions([{type:rr.Pointer,id:"__puppeteer_mouse",actions:[{type:Ke.PointerUp,button:Pb(e.button??$e.Left)}]}])}async click(e,r,n={}){const a=[{type:Ke.PointerMove,x:Math.round(e),y:Math.round(r),origin:n.origin}],o={type:Ke.PointerDown,button:Pb(n.button??$e.Left)},c={type:Ke.PointerUp,button:o.button};for(let u=1;u<(n.count??1);++u)a.push(o,c);a.push(o),n.delay&&a.push({type:Ke.Pause,duration:n.delay}),a.push(c),await i(this,Ai).mainFrame().browsingContext.performActions([{type:rr.Pointer,id:"__puppeteer_mouse",actions:a}])}async wheel(e={}){await i(this,Ai).mainFrame().browsingContext.performActions([{type:rr.Wheel,id:"__puppeteer_wheel",actions:[{type:Ke.Scroll,...i(this,ec)??{x:0,y:0},deltaX:e.deltaX??0,deltaY:e.deltaY??0}]}])}drag(){throw new fe}dragOver(){throw new fe}dragEnter(){throw new fe}drop(){throw new fe}dragAndDrop(){throw new fe}}Ai=new WeakMap,ec=new WeakMap;class tx extends XC{constructor(e){super();l(this,tc);f(this,tc,e)}async touchStart(e,r,n={}){await i(this,tc).mainFrame().browsingContext.performActions([{type:rr.Pointer,id:"__puppeteer_finger",parameters:{pointerType:"touch"},actions:[{type:Ke.PointerMove,x:Math.round(e),y:Math.round(r),origin:n.origin},{type:Ke.PointerDown,button:0,width:.5*2,height:.5*2,pressure:.5,altitudeAngle:Math.PI/2}]}])}async touchMove(e,r,n={}){await i(this,tc).mainFrame().browsingContext.performActions([{type:rr.Pointer,id:"__puppeteer_finger",parameters:{pointerType:"touch"},actions:[{type:Ke.PointerMove,x:Math.round(e),y:Math.round(r),origin:n.origin,width:.5*2,height:.5*2,pressure:.5,altitudeAngle:Math.PI/2}]}])}async touchEnd(){await i(this,tc).mainFrame().browsingContext.performActions([{type:rr.Pointer,id:"__puppeteer_finger",parameters:{pointerType:"touch"},actions:[{type:Ke.PointerUp,button:0}]}])}}tc=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var jR=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},rx=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},ix=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},sx=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});let th=(()=>{var n,a,o,c,u,d,h,p,yP,w,b,v,y,S,Om,CS,kS,A;let s=QC,t,e=[],r=[];return A=class extends s{constructor(C,I){super();l(this,p);l(this,n,rx(this,e,new ie));l(this,a,rx(this,r));l(this,o);l(this,c,null);l(this,u,new Set);T(this,"keyboard");T(this,"mouse");T(this,"touchscreen");T(this,"tracing");T(this,"coverage");l(this,d);l(this,h);T(this,"_userAgentHeaders",{});l(this,w);l(this,b);l(this,v);T(this,"_extraHTTPHeaders",{});l(this,y);T(this,"_credentials",null);l(this,S);f(this,a,C),f(this,o,QE.from(this,I)),f(this,d,new ok(i(this,o).client)),this.tracing=new Ck(i(this,o).client),this.coverage=new nk(i(this,o).client),this.keyboard=new ZE(this),this.mouse=new ex(this),this.touchscreen=new tx(this)}static from(C,I){var O;const B=new A(C,I);return g(O=B,p,yP).call(O),B}get trustedEmitter(){return i(this,n)}set trustedEmitter(C){f(this,n,C)}_client(){return i(this,o).client}async setUserAgent(C,I){if(!i(this,a).browser().cdpSupported&&I)throw new fe("Current Browser does not support `userAgentMetadata`");if(i(this,a).browser().cdpSupported&&I)return await this._client().send("Network.setUserAgentOverride",{userAgent:C,userAgentMetadata:I});const B=C!=="";C=C??await i(this,a).browser().userAgent(),this._userAgentHeaders=B?{"User-Agent":C}:{},f(this,w,await g(this,p,Om).call(this,["beforeRequestSent"],i(this,w),B));const O=j=>{Object.defineProperty(navigator,"userAgent",{value:j})},F=[i(this,o)];for(const j of F)F.push(...j.childFrames());i(this,b)&&await this.removeScriptToEvaluateOnNewDocument(i(this,b));const[M]=await Promise.all([B?this.evaluateOnNewDocument(O,C):void 0,F.map(j=>j.evaluate(O,C))]);f(this,b,M==null?void 0:M.identifier)}async setBypassCSP(C){await this._client().send("Page.setBypassCSP",{enabled:C})}async queryObjects(C){z(!C.disposed,"Prototype JSHandle is disposed!"),z(C.id,"Prototype JSHandle must not be referencing primitive value");const I=await i(this,o).client.send("Runtime.queryObjects",{prototypeObjectId:C.id});return i(this,o).mainRealm().createHandle({type:"array",handle:I.objects.objectId})}browser(){return this.browserContext().browser()}browserContext(){return i(this,a)}mainFrame(){return i(this,o)}async focusedFrame(){const C={stack:[],error:void 0,hasError:!1};try{const B=ix(C,await this.mainFrame().isolatedRealm().evaluateHandle(()=>{let F=window;for(;(F.document.activeElement instanceof F.HTMLIFrameElement||F.document.activeElement instanceof F.HTMLFrameElement)&&F.document.activeElement.contentWindow!==null;)F=F.document.activeElement.contentWindow;return F}),!1).remoteValue();z(B.type==="window");const O=this.frames().find(F=>F._id===B.value.context);return z(O),O}catch(I){C.error=I,C.hasError=!0}finally{sx(C)}}frames(){const C=[i(this,o)];for(const I of C)C.push(...I.childFrames());return C}isClosed(){return i(this,o).detached}async close(C){const I={stack:[],error:void 0,hasError:!1};try{const B=ix(I,await i(this,a).waitForScreenshotOperations(),!1);try{await i(this,o).browsingContext.close(C==null?void 0:C.runBeforeUnload)}catch{return}}catch(B){I.error=B,I.hasError=!0}finally{sx(I)}}async reload(C={}){const[I]=await Promise.all([i(this,o).waitForNavigation(C),i(this,o).browsingContext.reload()]).catch(JE(this.url(),C.timeout??this._timeoutSettings.navigationTimeout()));return I}setDefaultNavigationTimeout(C){this._timeoutSettings.setDefaultNavigationTimeout(C)}setDefaultTimeout(C){this._timeoutSettings.setDefaultTimeout(C)}getDefaultTimeout(){return this._timeoutSettings.timeout()}isJavaScriptEnabled(){return i(this,d).javascriptEnabled}async setGeolocation(C){return await i(this,d).setGeolocation(C)}async setJavaScriptEnabled(C){return await i(this,d).setJavaScriptEnabled(C)}async emulateMediaType(C){return await i(this,d).emulateMediaType(C)}async emulateCPUThrottling(C){return await i(this,d).emulateCPUThrottling(C)}async emulateMediaFeatures(C){return await i(this,d).emulateMediaFeatures(C)}async emulateTimezone(C){return await i(this,d).emulateTimezone(C)}async emulateIdleState(C){return await i(this,d).emulateIdleState(C)}async emulateVisionDeficiency(C){return await i(this,d).emulateVisionDeficiency(C)}async setViewport(C){if(!this.browser().cdpSupported){await i(this,o).browsingContext.setViewport({viewport:C!=null&&C.width&&(C!=null&&C.height)?{width:C.width,height:C.height}:null,devicePixelRatio:C!=null&&C.deviceScaleFactor?C.deviceScaleFactor:null}),f(this,c,C);return}const I=await i(this,d).emulateViewport(C);f(this,c,C),I&&await this.reload()}viewport(){return i(this,c)}async pdf(C={}){const{timeout:I=this._timeoutSettings.timeout(),path:B=void 0}=C,{printBackground:O,margin:F,landscape:M,width:j,height:N,pageRanges:K,scale:U,preferCSSPageSize:W}=AC(C,"cm"),re=K?K.split(", "):[];await yt(ke(this.mainFrame().isolatedRealm().evaluate(()=>document.fonts.ready)).pipe(Ft(er(I))));const H=await yt(ke(i(this,o).browsingContext.print({background:O,margin:F,orientation:M?"landscape":"portrait",page:{width:j,height:N},pageRanges:re,scale:U,shrinkToFit:!W})).pipe(Ft(er(I)))),ee=sv(H,!0);return await this._maybeWriteTypedArrayToFile(B,ee),ee}async createPDFStream(C){const I=await this.pdf(C);return new ReadableStream({start(B){B.enqueue(I),B.close()}})}async _screenshot(C){const{clip:I,type:B,captureBeyondViewport:O,quality:F}=C;if(C.omitBackground!==void 0&&C.omitBackground)throw new fe("BiDi does not support 'omitBackground'.");if(C.optimizeForSpeed!==void 0&&C.optimizeForSpeed)throw new fe("BiDi does not support 'optimizeForSpeed'.");if(C.fromSurface!==void 0&&!C.fromSurface)throw new fe("BiDi does not support 'fromSurface'.");if(I!==void 0&&I.scale!==void 0&&I.scale!==1)throw new fe("BiDi does not support 'scale' in 'clip'.");let M;if(I)if(O)M=I;else{const[N,K]=await this.evaluate(()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]});M={...I,x:I.x-N,y:I.y-K}}return await i(this,o).browsingContext.captureScreenshot({origin:O?"document":"viewport",format:{type:`image/${B}`,...F!==void 0?{quality:F/100}:{}},...M?{clip:{type:"box",...M}}:{}})}async createCDPSession(){return await i(this,o).createCDPSession()}async bringToFront(){await i(this,o).browsingContext.activate()}async evaluateOnNewDocument(C,...I){const B=KR(C,...I);return{identifier:await i(this,o).browsingContext.addPreloadScript(B)}}async removeScriptToEvaluateOnNewDocument(C){await i(this,o).browsingContext.removePreloadScript(C)}async exposeFunction(C,I){return await this.mainFrame().exposeFunction(C,"default"in I?I.default:I)}isDragInterceptionEnabled(){return!1}async setCacheEnabled(C){if(!i(this,a).browser().cdpSupported){await i(this,o).browsingContext.setCacheBehavior(C?"default":"bypass");return}await this._client().send("Network.setCacheDisabled",{cacheDisabled:!C})}async cookies(...C){const I=(C.length?C:[this.url()]).map(O=>new URL(O));return(await i(this,o).browsingContext.getCookies()).map(O=>WR(O)).filter(O=>I.some(F=>qR(O,F)))}isServiceWorkerBypassed(){throw new fe}target(){throw new fe}waitForFileChooser(){throw new fe}workers(){return[...i(this,u)]}async setRequestInterception(C){f(this,v,await g(this,p,Om).call(this,["beforeRequestSent"],i(this,v),C))}async setExtraHTTPHeaders(C){const I={};for(const[B,O]of Object.entries(C))z(Li(O),`Expected value of header "${B}" to be String, but "${typeof O}" is found.`),I[B.toLowerCase()]=O;this._extraHTTPHeaders=I,f(this,y,await g(this,p,Om).call(this,["beforeRequestSent"],i(this,y),!!Object.keys(this._extraHTTPHeaders).length))}async authenticate(C){f(this,S,await g(this,p,Om).call(this,["authRequired"],i(this,S),!!C)),this._credentials=C}setDragInterception(){throw new fe}setBypassServiceWorker(){throw new fe}async setOfflineMode(C){if(!i(this,a).browser().cdpSupported)throw new fe;return i(this,h)||f(this,h,{offline:!1,upload:-1,download:-1,latency:0}),i(this,h).offline=C,await g(this,p,CS).call(this)}async emulateNetworkConditions(C){if(!i(this,a).browser().cdpSupported)throw new fe;return i(this,h)||f(this,h,{offline:!1,upload:-1,download:-1,latency:0}),i(this,h).upload=C?C.upload:-1,i(this,h).download=C?C.download:-1,i(this,h).latency=C?C.latency:0,await g(this,p,CS).call(this)}async setCookie(...C){const I=this.url(),B=I.startsWith("http");for(const O of C){let F=O.url||"";!F&&B&&(F=I),z(F!=="about:blank",`Blank page can not have cookie "${O.name}"`),z(!String.prototype.startsWith.call(F||"","data:"),`Data URL page can not have cookie "${O.name}"`);const M=URL.canParse(F)?new URL(F):void 0,j=O.domain??(M==null?void 0:M.hostname);z(j!==void 0,"At least one of the url and domain needs to be specified");const N={domain:j,name:O.name,value:{type:"string",value:O.value},...O.path!==void 0?{path:O.path}:{},...O.httpOnly!==void 0?{httpOnly:O.httpOnly}:{},...O.secure!==void 0?{secure:O.secure}:{},...O.sameSite!==void 0?{sameSite:XR(O.sameSite)}:{},...O.expires!==void 0?{expiry:O.expires}:{},...VR(O,"sameParty","sourceScheme","priority","url")};O.partitionKey!==void 0?await this.browserContext().userContext.setCookie(N,O.partitionKey):await i(this,o).browsingContext.setCookie(N)}}async deleteCookie(...C){await Promise.all(C.map(async I=>{const B=I.url??this.url(),O=URL.canParse(B)?new URL(B):void 0,F=I.domain??(O==null?void 0:O.hostname);z(F!==void 0,"At least one of the url and domain needs to be specified");const M={domain:F,name:I.name,...I.path!==void 0?{path:I.path}:{}};await i(this,o).browsingContext.deleteCookie(M)}))}async removeExposedFunction(C){await i(this,o).removeExposedFunction(C)}metrics(){throw new fe}async goBack(C={}){return await g(this,p,kS).call(this,-1,C)}async goForward(C={}){return await g(this,p,kS).call(this,1,C)}waitForDevicePrompt(){throw new fe}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakSet,yP=function(){i(this,o).browsingContext.on("closed",()=>{this.trustedEmitter.emit("close",void 0),this.trustedEmitter.removeAllListeners()}),this.trustedEmitter.on("workercreated",C=>{i(this,u).add(C)}),this.trustedEmitter.on("workerdestroyed",C=>{i(this,u).delete(C)})},w=new WeakMap,b=new WeakMap,v=new WeakMap,y=new WeakMap,S=new WeakMap,Om=async function(C,I,B){if(B&&!I)return await i(this,o).browsingContext.addIntercept({phases:C});if(!B&&I){await i(this,o).browsingContext.userContext.browser.removeIntercept(I);return}return I},CS=async function(){i(this,h)&&await this._client().send("Network.emulateNetworkConditions",{offline:i(this,h).offline,latency:i(this,h).latency,uploadThroughput:i(this,h).upload,downloadThroughput:i(this,h).download})},kS=async function(C,I){try{const[B]=await Promise.all([this.waitForNavigation(I),i(this,o).browsingContext.traverseHistory(C)]);return B}catch(B){if(Cr(B)&&B.message.includes("no such history entry"))return null;throw B}},(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ag()],jR(A,null,t,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:I=>"trustedEmitter"in I,get:I=>I.trustedEmitter,set:(I,B)=>{I.trustedEmitter=B}},metadata:C},e,r),C&&Object.defineProperty(A,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})(),A})();function KR(s,...t){return`() => {${ov(s,...t)}}`}function UR(s,t){const e=s.domain.toLowerCase(),r=t.hostname.toLowerCase();return e===r}function HR(s,t){const e=t.pathname,r=s.path;return!!(e===r||e.startsWith(r)&&(r.endsWith("/")||e[r.length]==="/"))}function qR(s,t){const e=new URL(t);return z(s!==void 0),UR(s,e)?HR(s,e):!1}function WR(s){return{name:s.name,value:s.value.value,domain:s.domain,path:s.path,size:s.size,httpOnly:s.httpOnly,secure:s.secure,sameSite:GR(s.sameSite),expires:s.expiry??-1,session:s.expiry===void 0||s.expiry<=0,...zR(s,"sameParty","sourceScheme","partitionKey","partitionKeyOpaque","priority")}}const Tb="goog:";function zR(s,...t){const e={};for(const r of t)s[Tb+r]!==void 0&&(e[r]=s[Tb+r]);return e}function VR(s,...t){const e={};for(const r of t)s[r]!==void 0&&(e[Tb+r]=s[r]);return e}function GR(s){return s==="strict"?"Strict":s==="lax"?"Lax":"None"}function XR(s){return s==="Strict"?"strict":s==="Lax"?"lax":"none"}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class JR extends Md{constructor(e){super();l(this,sd);f(this,sd,e)}asPage(){throw new fe}url(){return""}createCDPSession(){throw new fe}type(){return Ot.BROWSER}browser(){return i(this,sd)}browserContext(){return i(this,sd).defaultBrowserContext()}opener(){throw new fe}}sd=new WeakMap;class YR extends Md{constructor(e){super();l(this,gs);f(this,gs,e)}async page(){return i(this,gs)}async asPage(){return th.from(this.browserContext(),i(this,gs).mainFrame().browsingContext)}url(){return i(this,gs).url()}createCDPSession(){return i(this,gs).createCDPSession()}type(){return Ot.PAGE}browser(){return this.browserContext().browser()}browserContext(){return i(this,gs).browserContext()}opener(){throw new fe}}gs=new WeakMap;class QR extends Md{constructor(e){super();l(this,ws);l(this,nd);f(this,ws,e)}async page(){return i(this,nd)===void 0&&f(this,nd,th.from(this.browserContext(),i(this,ws).browsingContext)),i(this,nd)}async asPage(){return th.from(this.browserContext(),i(this,ws).browsingContext)}url(){return i(this,ws).url()}createCDPSession(){return i(this,ws).createCDPSession()}type(){return Ot.PAGE}browser(){return this.browserContext().browser()}browserContext(){return i(this,ws).page().browserContext()}opener(){throw new fe}}ws=new WeakMap,nd=new WeakMap;class ZR extends Md{constructor(e){super();l(this,ad);f(this,ad,e)}async page(){throw new fe}async asPage(){throw new fe}url(){return i(this,ad).url()}createCDPSession(){throw new fe}type(){return Ot.OTHER}browser(){return this.browserContext().browser()}browserContext(){return i(this,ad).frame.page().browserContext()}opener(){throw new fe}}ad=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var eL=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},nx=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},tL=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},rL=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});let ax=(()=>{var n,a,o,c,u,d,h,vP,ES,w;let s=DC,t,e=[],r=[];return w=class extends s{constructor(y,S,E){super();l(this,h);l(this,n,nx(this,e,new ie));l(this,a,nx(this,r));l(this,o);T(this,"userContext");l(this,c,new WeakMap);l(this,u,new Map);l(this,d,[]);f(this,a,y),this.userContext=S,f(this,o,E.defaultViewport)}static from(y,S,E){var _;const k=new w(y,S,E);return g(_=k,h,vP).call(_),k}get trustedEmitter(){return i(this,n)}set trustedEmitter(y){f(this,n,y)}targets(){return[...i(this,u).values()].flatMap(([y,S])=>[y,...S.values()])}async newPage(){const y={stack:[],error:void 0,hasError:!1};try{const S=tL(y,await this.waitForScreenshotOperations(),!1),E=await this.userContext.createBrowsingContext("tab"),k=i(this,c).get(E);if(!k)throw new Error("Page is not found");if(i(this,o))try{await k.setViewport(i(this,o))}catch{}return k}catch(S){y.error=S,y.hasError=!0}finally{rL(y)}}async close(){z(this.userContext.id!==pw.DEFAULT,"Default BrowserContext cannot be closed!");try{await this.userContext.remove()}catch(y){te(y)}i(this,u).clear()}browser(){return i(this,a)}async pages(){return[...this.userContext.browsingContexts].map(y=>i(this,c).get(y))}async overridePermissions(y,S){const E=new Set(S.map(k=>{if(!uv.get(k))throw new Error("Unknown permission: "+k);return k}));await Promise.all(Array.from(uv.keys()).map(k=>{const _=this.userContext.setPermissions(y,{name:k},E.has(k)?"granted":"denied");return i(this,d).push({origin:y,permission:k}),E.has(k)?_:_.catch(te)}))}async clearPermissionOverrides(){const y=i(this,d).map(({permission:S,origin:E})=>this.userContext.setPermissions(E,{name:S},"prompt").catch(te));f(this,d,[]),await Promise.all(y)}get id(){if(this.userContext.id!==pw.DEFAULT)return this.userContext.id}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,vP=function(){for(const y of this.userContext.browsingContexts)g(this,h,ES).call(this,y);this.userContext.on("browsingcontext",({browsingContext:y})=>{const S=g(this,h,ES).call(this,y);y.once("DOMContentLoaded",()=>{if(y.originalOpener)for(const E of this.userContext.browsingContexts)E.id===y.originalOpener&&i(this,c).get(E).trustedEmitter.emit("popup",S)})}),this.userContext.on("closed",()=>{this.trustedEmitter.removeAllListeners()})},ES=function(y){const S=th.from(this,y);i(this,c).set(y,S),S.trustedEmitter.on("close",()=>{i(this,c).delete(y)});const E=new YR(S),k=new Map;return i(this,u).set(S,[E,k]),S.trustedEmitter.on("frameattached",_=>{const A=_,D=new QR(A);k.set(A,D),this.trustedEmitter.emit("targetcreated",D)}),S.trustedEmitter.on("framenavigated",_=>{const A=_,D=k.get(A);D===void 0?this.trustedEmitter.emit("targetchanged",E):this.trustedEmitter.emit("targetchanged",D)}),S.trustedEmitter.on("framedetached",_=>{const A=_,D=k.get(A);D!==void 0&&(k.delete(A),this.trustedEmitter.emit("targetdestroyed",D))}),S.trustedEmitter.on("workercreated",_=>{const A=_,D=new ZR(A);k.set(A,D),this.trustedEmitter.emit("targetcreated",D)}),S.trustedEmitter.on("workerdestroyed",_=>{const A=_,D=k.get(A);D!==void 0&&(k.delete(_),this.trustedEmitter.emit("targetdestroyed",D))}),S.trustedEmitter.on("close",()=>{i(this,u).delete(S),this.trustedEmitter.emit("targetdestroyed",E)}),this.trustedEmitter.emit("targetcreated",E),S},(()=>{const y=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ag()],eL(w,null,t,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:S=>"trustedEmitter"in S,get:S=>S.trustedEmitter,set:(S,E)=>{S.trustedEmitter=E}},metadata:y},e,r),y&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y})})(),w})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var iL=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},Nc=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},sL=function(s,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s.stack.push({value:t,dispose:r,async:e})}else e&&s.stack.push({async:!0});return t},nL=function(s){return function(t){function e(n){t.error=t.hasError?new s(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}}(typeof SuppressedError=="function"?SuppressedError:function(s,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=s,r.suppressed=t,r});let aL=(()=>{var u,d,h,p,m,w,bP,SP,CP,xS,E;let s=ie,t=[],e,r,n,a,o,c;return E=class extends s{constructor(A){super();l(this,w);l(this,u,(iL(this,t),!1));l(this,d);l(this,h,new rt);l(this,p,new Map);T(this,"session");l(this,m,new Map);this.session=A}static async from(A){var P;const D=new E(A);return await g(P=D,w,bP).call(P),D}get closed(){return i(this,u)}get defaultUserContext(){return i(this,p).get(pw.DEFAULT)}get disconnected(){return i(this,d)!==void 0}get disposed(){return this.disconnected}get userContexts(){return i(this,p).values()}dispose(A,D=!1){f(this,u,D),f(this,d,A),this[ae]()}async close(){try{await this.session.send("browser.close",{})}finally{this.dispose("Browser already closed.",!0)}}async addPreloadScript(A,D={}){var C;const{result:{script:P}}=await this.session.send("script.addPreloadScript",{functionDeclaration:A,...D,contexts:(C=D.contexts)==null?void 0:C.map(I=>I.id)});return P}async removeIntercept(A){await this.session.send("network.removeIntercept",{intercept:A})}async removePreloadScript(A){await this.session.send("script.removePreloadScript",{script:A})}async createUserContext(){const{result:{userContext:A}}=await this.session.send("browser.createUserContext",{});return g(this,w,xS).call(this,A)}[(e=[Es],r=[G(A=>i(A,d))],n=[G(A=>i(A,d))],a=[G(A=>i(A,d))],o=[G(A=>i(A,d))],c=[G(A=>i(A,d))],ae)](){i(this,d)??f(this,d,"Browser was disconnected, probably because the session ended."),this.closed&&this.emit("closed",{reason:i(this,d)}),this.emit("disconnected",{reason:i(this,d)}),i(this,h).dispose(),super[ae]()}},u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,w=new WeakSet,bP=async function(){const A=i(this,h).use(new ie(this.session));A.once("ended",({reason:D})=>{this.dispose(D)}),A.on("script.realmCreated",D=>{D.type==="shared-worker"&&i(this,m).set(D.realm,vb.from(this,D.realm,D.origin))}),await g(this,w,SP).call(this),await g(this,w,CP).call(this)},SP=async function(){const{result:{userContexts:A}}=await this.session.send("browser.getUserContexts",{});for(const D of A)g(this,w,xS).call(this,D.userContext)},CP=async function(){const A=new Set;let D;{const P={stack:[],error:void 0,hasError:!1};try{sL(P,new ie(this.session),!1).on("browsingContext.contextCreated",B=>{A.add(B.context)});const{result:I}=await this.session.send("browsingContext.getTree",{});D=I.contexts}catch(C){P.error=C,P.hasError=!0}finally{nL(P)}}for(const P of D)A.has(P.context)||this.session.emit("browsingContext.contextCreated",P),P.children&&D.push(...P.children)},xS=function(A){const D=pw.create(this,A);i(this,p).set(D.id,D);const P=i(this,h).use(new ie(D));return P.once("closed",()=>{P.removeAllListeners(),i(this,p).delete(D.id)}),D},(()=>{const A=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;Nc(E,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:D=>"dispose"in D,get:D=>D.dispose},metadata:A},null,t),Nc(E,null,r,{kind:"method",name:"close",static:!1,private:!1,access:{has:D=>"close"in D,get:D=>D.close},metadata:A},null,t),Nc(E,null,n,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:D=>"addPreloadScript"in D,get:D=>D.addPreloadScript},metadata:A},null,t),Nc(E,null,a,{kind:"method",name:"removeIntercept",static:!1,private:!1,access:{has:D=>"removeIntercept"in D,get:D=>D.removeIntercept},metadata:A},null,t),Nc(E,null,o,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:D=>"removePreloadScript"in D,get:D=>D.removePreloadScript},metadata:A},null,t),Nc(E,null,c,{kind:"method",name:"createUserContext",static:!1,private:!1,access:{has:D=>"createUserContext"in D,get:D=>D.createUserContext},metadata:A},null,t),A&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:A})})(),E})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Ib=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},$c=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0};let oL=(()=>{var h,p,m,w,b,kP,y;let s=ie,t=[],e,r=[],n=[],a,o,c,u,d;return y=class extends s{constructor(k,_){super();l(this,b);l(this,h,Ib(this,t));l(this,p,new rt);l(this,m);T(this,"browser");l(this,w,Ib(this,r,void 0));Ib(this,n),f(this,m,_),this.connection=k}static async from(k,_){var P;const{result:A}=await k.send("session.new",{capabilities:_}),D=new y(k,A);return await g(P=D,b,kP).call(P),D}get connection(){return i(this,w)}set connection(k){f(this,w,k)}get capabilities(){return i(this,m).capabilities}get disposed(){return this.ended}get ended(){return i(this,h)!==void 0}get id(){return i(this,m).sessionId}dispose(k){f(this,h,k),this[ae]()}async send(k,_){return await this.connection.send(k,_)}async subscribe(k,_){await this.send("session.subscribe",{events:k,contexts:_})}async addIntercepts(k,_){await this.send("session.subscribe",{events:k,contexts:_})}async end(){try{await this.send("session.end",{})}finally{this.dispose("Session already ended.")}}[(e=[ag()],a=[Es],o=[G(k=>i(k,h))],c=[G(k=>i(k,h))],u=[G(k=>i(k,h))],d=[G(k=>i(k,h))],ae)](){i(this,h)??f(this,h,"Session already destroyed, probably because the connection broke."),this.emit("ended",{reason:i(this,h)}),i(this,p).dispose(),super[ae]()}},h=new WeakMap,p=new WeakMap,m=new WeakMap,w=new WeakMap,b=new WeakSet,kP=async function(){this.browser=await aL.from(this),i(this,p).use(this.browser).once("closed",({reason:A})=>{this.dispose(A)});const _=new WeakSet;this.on("browsingContext.fragmentNavigated",A=>{_.has(A)||(_.add(A),this.emit("browsingContext.navigationStarted",A),this.emit("browsingContext.fragmentNavigated",A))})},(()=>{const k=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;$c(y,null,e,{kind:"accessor",name:"connection",static:!1,private:!1,access:{has:_=>"connection"in _,get:_=>_.connection,set:(_,A)=>{_.connection=A}},metadata:k},r,n),$c(y,null,a,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:_=>"dispose"in _,get:_=>_.dispose},metadata:k},null,t),$c(y,null,o,{kind:"method",name:"send",static:!1,private:!1,access:{has:_=>"send"in _,get:_=>_.send},metadata:k},null,t),$c(y,null,c,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:_=>"subscribe"in _,get:_=>_.subscribe},metadata:k},null,t),$c(y,null,u,{kind:"method",name:"addIntercepts",static:!1,private:!1,access:{has:_=>"addIntercepts"in _,get:_=>_.addIntercepts},metadata:k},null,t),$c(y,null,d,{kind:"method",name:"end",static:!1,private:!1,access:{has:_=>"end"in _,get:_=>_.end},metadata:k},null,t),k&&Object.defineProperty(y,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k})})(),y})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var cL=function(s,t,e,r,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=r.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&s?r.static?s:s.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,m=!1,w=e.length-1;w>=0;w--){var b={};for(var v in r)b[v]=v==="access"?{}:r[v];for(var v in r.access)b.access[v]=r.access[v];b.addInitializer=function(S){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var y=(0,e[w])(c==="accessor"?{get:h.get,set:h.set}:h[u],b);if(c==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(p=o(y.get))&&(h.get=p),(p=o(y.set))&&(h.set=p),(p=o(y.init))&&n.unshift(p)}else(p=o(y))&&(c==="field"?n.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),m=!0},ox=function(s,t,e){for(var r=arguments.length>2,n=0;n<t.length;n++)e=r?t[n].call(s,e):t[n].call(s);return r?e:void 0},cx=function(s,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",t):t})};let uL=(()=>{var a,o,c,cc,EP,h,p,m,w,b,v,y,xP,_P,PP,_S;let s=FC,t,e=[],r=[],n;return a=class extends s{constructor(P,C){super();l(this,c);T(this,"protocol","webDriverBiDi");l(this,o,ox(this,e,new ie));l(this,h,ox(this,r));l(this,p);l(this,m);l(this,w);l(this,b,new WeakMap);l(this,v,new JR(this));l(this,y);f(this,h,C.process),f(this,p,C.closeCallback),f(this,m,P),f(this,w,C.defaultViewport),f(this,y,C.cdpConnection)}static async create(P){var B,O,F;const C=await oL.from(P.connection,{firstMatch:(B=P.capabilities)==null?void 0:B.firstMatch,alwaysMatch:{...(O=P.capabilities)==null?void 0:O.alwaysMatch,acceptInsecureCerts:P.acceptInsecureCerts,unhandledPromptBehavior:{default:"ignore"},webSocketUrl:!0}});await C.subscribe(C.capabilities.browserName.toLocaleLowerCase().includes("firefox")?a.subscribeModules:[...a.subscribeModules,...a.subscribeCdpEvents]);const I=new a(C.browser,P);return g(F=I,c,xP).call(F),I}get cdpSupported(){return i(this,y)!==void 0}get cdpConnection(){return i(this,y)}async userAgent(){return i(this,m).session.capabilities.userAgent}get connection(){return i(this,m).session.connection}wsEndpoint(){return this.connection.url}async close(){var P;if(!this.connection.closed)try{await i(this,m).close(),await((P=i(this,p))==null?void 0:P.call(null))}catch(C){te(C)}finally{this.connection.dispose()}}get connected(){return!i(this,m).disconnected}process(){return i(this,h)??null}async createBrowserContext(P){const C=await i(this,m).createUserContext();return g(this,c,_S).call(this,C)}async version(){return`${i(this,c,_P)}/${i(this,c,PP)}`}browserContexts(){return[...i(this,m).userContexts].map(P=>i(this,b).get(P))}defaultBrowserContext(){return i(this,b).get(i(this,m).defaultUserContext)}newPage(){return this.defaultBrowserContext().newPage()}targets(){return[i(this,v),...this.browserContexts().flatMap(P=>P.targets())]}target(){return i(this,v)}async disconnect(){try{await i(this,m).session.end()}catch(P){te(P)}finally{this.connection.dispose()}}get debugInfo(){return{pendingProtocolErrors:this.connection.getPendingProtocolErrors()}}},o=new WeakMap,c=new WeakSet,cc=function(){return n.get.call(this)},EP=function(P){return n.set.call(this,P)},h=new WeakMap,p=new WeakMap,m=new WeakMap,w=new WeakMap,b=new WeakMap,v=new WeakMap,y=new WeakMap,xP=function(){var P;for(const C of i(this,m).userContexts)g(this,c,_S).call(this,C);i(this,m).once("disconnected",()=>{i(this,c,cc).emit("disconnected",void 0),i(this,c,cc).removeAllListeners()}),(P=i(this,h))==null||P.once("close",()=>{i(this,m).dispose("Browser process exited.",!0),this.connection.dispose()})},_P=function(){return i(this,m).session.capabilities.browserName},PP=function(){return i(this,m).session.capabilities.browserVersion},_S=function(P){const C=ax.from(this,P,{defaultViewport:i(this,w)});return i(this,b).set(P,C),C.trustedEmitter.on("targetcreated",I=>{i(this,c,cc).emit("targetcreated",I)}),C.trustedEmitter.on("targetchanged",I=>{i(this,c,cc).emit("targetchanged",I)}),C.trustedEmitter.on("targetdestroyed",I=>{i(this,c,cc).emit("targetdestroyed",I)}),C},(()=>{const P=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[ag()],cL(a,n={get:cx(function(){return i(this,o)},"#trustedEmitter","get"),set:cx(function(C){f(this,o,C)},"#trustedEmitter","set")},t,{kind:"accessor",name:"#trustedEmitter",static:!1,private:!0,access:{has:C=>Zt(c,C),get:C=>i(C,c,cc),set:(C,I)=>{f(C,c,I,EP)}},metadata:P},e,r),P&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:P})})(),T(a,"subscribeModules",["browsingContext","network","log","script"]),T(a,"subscribeCdpEvents",["cdp.Debugger.scriptParsed","cdp.CSS.styleSheetAdded","cdp.Runtime.executionContextsCleared","cdp.Tracing.tracingComplete","cdp.Network.requestWillBeSent","cdp.Debugger.scriptParsed","cdp.Page.screencastFrame"]),a})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const ux=Object.freeze(Object.defineProperty({__proto__:null,BidiBrowser:uL,BidiBrowserContext:ax,BidiConnection:UE,BidiElementHandle:Qd,BidiFrame:QE,BidiFrameRealm:As,BidiHTTPRequest:Eb,BidiHTTPResponse:zE,BidiJSHandle:Ms,BidiKeyboard:ZE,BidiMouse:ex,BidiPage:th,BidiRealm:xb,BidiTouchscreen:tx,BidiWorkerRealm:mw,connectBidiOverCdp:hR,requests:kb},Symbol.toStringTag,{value:"Module"}));var lL=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};const dL=ye(lL);/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Jb=class Jb{constructor(t){l(this,ys);T(this,"onmessage");T(this,"onclose");f(this,ys,t),i(this,ys).addEventListener("message",e=>{this.onmessage&&this.onmessage.call(null,e.data)}),i(this,ys).addEventListener("close",()=>{this.onclose&&this.onclose.call(null)}),i(this,ys).addEventListener("error",()=>{})}static create(t,e){return new Promise((r,n)=>{const a=new dL(t,[],{followRedirects:!0,perMessageDeflate:!1,allowSynchronousEvents:!1,maxPayload:268435456,headers:{"User-Agent":`Puppeteer ${CC}`,...e}});a.addEventListener("open",()=>r(new Jb(a))),a.addEventListener("error",n)})}send(t){i(this,ys).send(t)}close(){i(this,ys).close()}};ys=new WeakMap;let Mb=Jb;const hL=Object.freeze(Object.defineProperty({__proto__:null,NodeWebSocketTransport:Mb},Symbol.toStringTag,{value:"Module"}))})();
